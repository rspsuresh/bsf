<style>
.jqx-grid-column-header .jqx-checkbox-default{
	display:none;
}
</style>
<div class="content_wrapper padlr0" >
    <div class="container-fluid">
		<form method="post" enctype="multipart/form-data">
			<div class="row">
				<div class="col-lg-12 clear">
					<div class="col-lg-12">
						<h1>Received Quotation Detail&nbsp;&nbsp;<span class="chnginqab"><?php echo $resultsVen['RFQNo']; ?></span></h1>
						<input type="hidden" name="regId" id="regId" value="<?php echo $regId ?>" />
					</div>
					<div class="col-lg-12 resdtlbckclr clear">
						<div class="col-lg-12 clear">
							<div class="col-lg-8 forinfosul">
									<div class="col-lg-6 vendorinfobox">
										<h1 class="vendornameresdtl"><?php echo $resultsVen['VendorName']; ?></h1>
										<div style="padding:5px;">
											<p class="space_p" style="text-align:left; font-size:14px;">
											<?php
											$addr = array();
											(trim($resultsVen['RegAddress']) != '')?array_push($addr, $resultsVen['RegAddress']):'';
											(trim($resultsVen['CityName']) != '')?array_push($addr, $resultsVen['CityName']):'';
											(trim($resultsVen['StateName']) != '')?array_push($addr, $resultsVen['StateName']):'';
											(trim($resultsVen['CountryName']) != '')?array_push($addr, $resultsVen['CountryName']):'';
											echo implode(', ', $addr);
											?>
											<span class="rsdlphn "><i class="fa fa-map-marker"></i></span></p>
											<div class="row">
												<div class="col-lg-5 col-md-5 col-sm-5 col-xs-5"><p class="space_p"><span class="rsdlphn"><i class="fa fa-phone"></i></span>&nbsp;Contact No.<span class="colon_r">:</span></p></div>
												<div class="col-lg-7 col-md-7 col-sm-7 col-xs-7 padlr0"><p class="space_p"><?php echo $resultsVen['ContactNo1']; ?></p></div> 
											</div>
											<div class="row">
												<div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
													<p>
														<span class="headingrsdtlbid"><i class="fa fa-envelope"></i></span>&nbsp;Mail ID
														<span class="colon_r">:</span>
													</p>
												</div>
												<div class="col-lg-7 col-md-7 col-sm-7 col-xs-7 padlr0"><p><?php echo $resultsVen['Email1']; ?></p></div> 
											</div>
										</div>        
									</div>
									<div class="col-lg-1">
										<div class=" vendoriconboxs flwup_proimg ldrgstr_proimg brad_200">
											<img src="<?php echo $this->basePath().'/'.($resultsVen['LogoPath'] == '' ? 'images/avatar.jpg':$resultsVen['LogoPath']); ?>" class="brad_200" alt="" title=""/>	
										</div>
									</div>
									<div class="col-lg-5 vendorinfobox vendorinfoboxchng">
										<h1 class="vendornameresdtl statushdng "><span class="stusicon"><i class="fa fa-circle"></i></span>&nbsp;&nbsp;Grade</h1>
										<div style="padding:14px 5px 5px 10px;">
											<div class="row">
												<div class=" col-lg-7 col-md-7 col-sm-7 col-xs-7"><p class="space_p">Received Date<span class="colon_r">:</span></p></div>
												<div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 padlr0"><p class="space_p">12-12-2014</p></div> 
											</div>
											<div class="row">
												<div class="col-lg-7 col-md-7 col-sm-7 col-xs-7"><p class="space_p">Reviews<span class="colon_r">:</span></p></div>
												<div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 padlr0"><p class="space_p">Good</p></div> 
											</div>
											<div class="row">
												<div class="col-lg-7 col-md-7 col-sm-7 col-xs-7"><p>Trust<span class="colon_r">:</span></p></div>
												<div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 padlr0"><p>unauthorised</p></div> 
											</div>
											<div class="mrgnlft commargin_top">
												<a class="linkpange_register" href="javascript:void(0);">View Vendor History</a>&nbsp;<span class="clr_iconeye"><i class="fa fa-eye"></i></span>
											</div>
										</div>
									</div>
							</div>
							<div class="col-lg-4">
								<div class="col-lg-12 forinfosul">
									 <h1 class="txt_center vendornameresdtl statushdng"><span class="headingrsdtlbid"><i class="fa fa-info"></i></span>&nbsp;&nbsp;Bid Information</h1>
									 <div class=" col-lg-12 vendorinfoboxone commargin_top">
										<div style="padding:5px;">
											<div class="row">
												<div class=" col-lg-7 col-md-7 col-sm-7 col-xs-7"><p class="space_p"><span class="biddicon"><i class="fa fa-location-arrow"></i></span>&nbsp; &nbsp;Bid Send On<span class="colon_r">:</span></p></div>
												<div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 padlr0"><p class="space_p">12-12-2014</p></div> 
											</div>
											<div class="row">
												<div class="col-lg-7 col-md-7 col-sm-7 col-xs-7"><p class="space_p"><span class="biddicon"><i class="fa fa-gg"></i></span>&nbsp; &nbsp;Project-info<span class="colon_r">:</span></p></div>
												<div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 padlr0"><p class="space_p">Good</p></div> 
											</div>
											<div class="row">
												<div class="col-lg-7 col-md-7 col-sm-7 col-xs-7"><p class="space_p"><span class="biddicon"><i class="fa fa-magic"></i></span>&nbsp; &nbsp;Bid Rised By<span class="colon_r">:</span></p></div>
												<div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 padlr0"><p class="space_p">Vendorname</p></div> 
											</div>
											<div class="row">
												<div class="col-lg-7 col-md-7 col-sm-7 col-xs-7"><p><span class="biddicon"><i class="fa fa-phone"></i></span>&nbsp;&nbsp;Contact No.<span class="colon_r">:</span></p></div>
												<div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 padlr0"><p>9688990126</p></div> 
											</div>
										</div>	
									 </div>
								</div>
							</div>
						</div>	
					</div> 
					<div class="col-lg-12 fullbackground_white commargin_top ">  
						<div class="col-lg-12 commargin_top clear">
							 <h1 class="vendorrequest_text commargin_bottom ">Bid Information</h1>
							  <div class="col-lg-10 col-lg-offset-1 borderfull commargin_bottom">
									<p><?php echo $resultsVen['BidInformation']; ?></p>
							  </div>
						</div>
						<div class="col-lg-12 clear">
							<h1 class="vendorrequest_text commargin_bottom">Resource Rate Details</h1> 
						</div>
						<div class="col-lg-10 col-lg-offset-1 clear">
							<input type="hidden" name="transId" id="transId">
							<div id="materialTable">
							</div>
						</div>
						<div class="col-lg-12 commargin_bottom clear">
							<h1>Additional Information about the Bid</h1> 
						</div>
						<div class="col-lg-12 clear">
							<h1 class="vendorrequest_text commargin_bottom">Terms and conditions</h1> 
						</div>
						<div class="col-lg-10 col-lg-offset-1 clear">
							<div class="table-responsive clear">
								<table class="table table-hover clear" id="table">
									<thead>
										<tr>
											<th>Terms</th>
											<th>Percentage</th>
											<th>Value</th>
											<th>Period</th>
										</tr>
									</thead>
									<tbody>
									<?php foreach($resultsFillTermdet as $term){ ?>
									  <tr>
										<td><?php echo $term['Terms']; ?></td>
										<td><?php echo $term['Per']; ?></td>
										<td><?php echo $term['Value']; ?></td>
										<td><?php echo $term['Period']; ?></td>
									  </tr>
									<?php } ?> 								
									</tbody>
								</table>
							</div> 
						</div>
						 <div class="col-lg-12 commargin_bottom clear">
							<h1 class="vendorrequest_text commargin_bottom">Vendor Comments</h1> 
							<div class="col-lg-10 col-lg-offset-1 borderfulldif">
								<p><?php echo $resultsVen['BidComments']; ?></p>
							</div>
						</div>
						<div class="col-lg-12 commargin_bottom clear">
							<h1 class="vendorrequest_text commargin_bottom">Vendor Bid Submittals</h1> 
							 <div class="col-lg-10 col-lg-offset-1 borderfulldif">
								<div class="col-lg-12">
								<?php foreach($rfqSubmittalResult as $submittal){ ?>
									<p class="commargin_bottom"><a download="<?php echo basename($submittal['SubmittalDocPath']); ?>" href="<?php echo $this->basePath().'/'.$submittal['SubmittalDocPath']; ?>"><?php echo basename($submittal['SubmittalDocPath']); ?></a></p>
								<?php } ?>	
								</div>
							 </div>
						</div>
						<div class="col-lg-12 commargin_bottom">
						<ul>				
							
							<li class="dropdown save_btn thumbsbck float_r" style="width:177px;"> 
							<a href="javascript:void(0);" class="ripple continueButton" style="padding:3px;"><span style="font-size:20px;"><i class="fa fa-thumbs-up"></i></span>&nbsp;Accept Material</a> 
							</li>
							<li class="dropdown cancel_btn  float_r"> <a href="javascript:void(0);" class="ripple" style="font-size:18px;">close</a> </li>
						</ul>
					</div>
				  </div>
				</div>
			</div> 
		</form>
    </div>
</div>
<script>
$(document).ready(function(){
	$('.continueButton').click(function(){
		var transId=[];
		var index = $("#materialTable").jqxGrid("getselectedrowindexes");
		for(var i in index){
			transId.push($("#materialTable").jqxGrid("getrowid", index[i]));
		}
		$('#transId').val(JSON.stringify(transId));
		$('form').submit();
	});
	var source =
	{
		localData: <?php echo json_encode($resResult); ?>,
		dataType: "json",
		dataFields:
		[
			{ name: 'Code', type: 'string' },
			{ name: 'ResourceName', type: 'string' },
			{ name: 'UnitName', type: 'string' },
			{ name: 'Rate', type: 'string' },
			{ name: 'Quantity', type: 'string' },
		],
		id:'TransId'
	};

	var dataAdapter = new $.jqx.dataAdapter(source,{
		loadComplete: function (data) {
			
		},
		loadError: function (xhr, status, error) {
			
		}
	});

	$("#materialTable").jqxGrid({
		width: '100%',
		filterable: true,
		sortable: true,
		editable: true,		
		pageable: true,
		autoheight: true,
		columnsresize: true,
		ready: function(){
			
		},
		selectionmode: 'checkbox',						
		source: dataAdapter,
		columns: [
		  { text: 'Code', editable: false,datafield: 'Code'},
		  { text: 'ResourceName', editable: false,datafield: 'ResourceName'},
		  { text: 'UnitName', editable: false,datafield: 'UnitName'},
		  { text: 'Rate', editable: false,datafield: 'Rate'},
		  { text: 'Quantity', editable: false,datafield: 'Quantity'},
		]
	});	

	$('#materialTable').on('rowclick', function (event){
		var args = event.args;
		// row's bound index.
		var boundIndex = args.rowindex;
		var index = $('#materialTable').jqxGrid('selectedrowindexes'); 
		//alert($.inArray(boundIndex, index))
		if($.inArray(boundIndex, index) == -1)
			$('#materialTable').jqxGrid('selectrow', boundIndex);
		else
			$('#materialTable').jqxGrid('unselectrow', boundIndex);
	});	
	$.each(<?php echo json_encode($resResult); ?>, function(i,v){
		var tid = v.TransId;
		if(v.Status == 1){
			var mindex = $('#materialTable').jqxGrid('getrowboundindexbyid', tid);
			if(mindex!=-1)
				$('#materialTable').jqxGrid('selectrow', mindex);
		}
	});
});
</script>