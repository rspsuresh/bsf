<link rel="stylesheet" href="<?php echo $this->basePath() . '/library/gridstack/gridstack.min.css';?>" />
<link rel="stylesheet" href="<?php echo $this->basePath() . '/library/gridstack/gridstack.min.css';?>" type="text/css" media="print"/>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/gridstack/lodash.min.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/gridstack/knockout-min.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/gridstack/gridstack.min.js"></script>
<!--<script src="https://code.jquery.com/jquery-1.10.2.js"></script>-->
<style type="text/css">
	.grid-stack {
		background: lightgoldenrodyellow;
	}

	.grid-stack-item-content {
		color: #2c3e50;
		text-align: center;
        border: 1px dashed #000;
		background-color: transparent;
	}
    .deleteicon {
        display: none;
        position: absolute;
        right: 0;
        top: 0;
    }
    .text-bold, .text-bold *{ font-weight: bold !important; }
    .text-italic, .text-italic *{ font-style: italic !important;}
    .text-underline, .text-underline *{ text-decoration: underline !important;}
    .style-left, .style-left * {text-align: left;}
    .style-center, .style-center * {text-align: center;}
    .style-right, .style-right * {text-align: right;}
    .style-justify, .style-justify * {text-align: justify;}

    #styleOptions,
    #temp-grid-items {
        display:  none;
    }

</style>
<div style=" margin:0px; margin-top:0px; min-height: 400px;">
    <div class="grid-stack">
        <div class="grid-stack" data-gs-x="4" data-gs-y="0" data-gs-width="12" data-gs-height="4">
            <div class="grid-stack-item" data-gs-x="0" data-gs-y="0" data-gs-width="3" data-gs-height="1" id="grid-item-1">
                <div class="grid-stack-item-content">
                    <button type="button" class="deleteicon" onclick="deleteGrid(this)"><i class="fa fa-trash-o"></i></button>
                    <img src="<?php echo $this->basePath(); ?>/images/company-logo2.jpg" />
                </div>
            </div>
            <div class="grid-stack-item" data-gs-x="3" data-gs-y="0" data-gs-width="9" data-gs-height="1" id="grid-item-2">
                <div class="grid-stack-item-content">
                    <button type="button" class="deleteicon" onclick="deleteGrid(this)"><i class="fa fa-trash-o"></i></button>
                    <p>BillAbstract Detail Report</p>
                </div>
            </div>
            <div class="grid-stack-item" data-gs-x="0" data-gs-y="1" data-gs-width="3" data-gs-height="2" id="grid-item-3">
                <div class="grid-stack-item-content">
                    <button type="button" class="deleteicon" onclick="deleteGrid(this)"><i class="fa fa-trash-o"></i></button>
                    4
                </div>
            </div>
            <div class="grid-stack-item" data-gs-x="0" data-gs-y="1" data-gs-width="3" data-gs-height="1" id="grid-item-4">
                <div class="grid-stack-item-content">
                    <button type="button" class="deleteicon" onclick="deleteGrid(this)"><i class="fa fa-trash-o"></i></button>
                    <p>3</p>
                </div>
            </div>
            <div class="grid-stack-item" data-gs-x="3" data-gs-y="1" data-gs-width="3" data-gs-height="3" id="grid-item-5">
                <div class="grid-stack-item-content">
                    <button type="button" class="deleteicon" onclick="deleteGrid(this)"><i class="fa fa-trash-o"></i></button>
                    5
                </div>
            </div>
            <div class="grid-stack-item" data-gs-x="6" data-gs-y="1" data-gs-width="6" data-gs-height="3" id="grid-item-6">
                <div class="grid-stack-item-content">
                    <button type="button" class="deleteicon" onclick="deleteGrid(this)"><i class="fa fa-trash-o"></i></button>
                    <p>BillNo : CB001</p>
                    <p>BillDate : 06/01/2016</p>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="styleOptions">
     <div class="col-lg-2">
        <select name="fontsize" id="fontsize" class="single_dropdown2 lbl_move" style="width:100%;" label="select fontsize">
            <option value="6" >6</option>
			<option value="7" >7</option>
            <option value="8" >8</option>
			<option value="9" >9</option>
            <option value="10" >10</option>
			<option value="11" >11</option>
            <option value="12" >12</option>
			<option value="13" >13</option>
            <option value="14" >14</option>
			<option value="15" >15</option>
            <option value="16" >16</option>
			<option value="17" >17</option>
            <option value="18" >18</option>
			<option value="19" >19</option>
            <option value="20" >20</option>
            <option value="22" >22</option>
            <option value="24" >24</option>
        </select>
    </div>
    <div class="panel-body">
        <ul class="vendor_subscriber" >
            <li class=""><!--subscriber_active-->
                <div class="rdochck_subscrb radio_check selector">
                    <p style="padding:0px !important;">
                       <input class='selector' type="checkbox" name="bold" tagname='cid1' cid="1" id="bold" value="text-bold" />
                       <label for="bold" class="ripple">Bold</label>
                    </p>
                </div>
            </li>
            <li class="">
                <div class="rdochck_subscrb radio_check selector">
                    <p style="padding:0px !important;">
                       <input class='selector' type="checkbox" name="italic" tagname='cid2' cid="2" id="italic" value="text-italic" />
                       <label for="italic" class="ripple">Italic</label>
                    </p>
                </div>
            </li>
            <li class="">
                <div class="rdochck_subscrb radio_check selector">
                    <p style="padding:0px !important;">
                       <input class='selector' type="checkbox" name="underline" tagname='cid21' cid="21" id="underline" value="text-underline" />
                       <label for="underline" class="ripple">Underline</label>
                    </p>
                </div>
            </li>
			<li class="">
				<input class="radio" type="radio" name="alignment" value="style-left">left
			</li>
			<li class="">
				<input class="radio" type="radio" name="alignment" value="style-center">center
			</li>
			<li class="">
				<input class="radio" type="radio" name="alignment" value="style-right">right
			</li>
			<li class="">
				<input class="radio" type="radio" name="alignment" value="style-justify">justify
			</li>
        </ul>
    </div>
    <div class="clearfix"></div>
</div>
<div class="select-grid-wrapper">
    <select id="selectGridItems" class="single_dropdown2 lbl_move" style="width:100%;" label="Select Item"></select>
    <button type="button" class="btn btn-default" onclick="addWidget();">Add Widget</button>
</div>
<div id="temp-grid-items"></div>

<script type="text/javascript">
    var $gridStack = $('.grid-stack'),
        $gridContent = $('.grid-stack-item-content'),
        $options = $('#styleOptions'),
        $sel_el = null,
        $selectGridItems = $('#selectGridItems'),
        $tempStackItems = $('#temp-grid-items');
    $(function () {
        // initialize widget
        var options = {
        };
        $gridStack.gridstack(options);

        // onhover display delete
        $gridContent.hover(
            function() {
                $(this).find('> .deleteicon').show();
            },
            function() {
                $(this).find('> .deleteicon').hide();
            }
        );

        // on click show options
        $gridContent.on('click',function () {
            $sel_el = $(this);
			
			 var styleProps = $( this ).find('*').css([
			"width", "height", "color","font-size", "background-color", "font-weight", "font-style", "text-align", "text-decoration", "style-left", "style-center", "style-right", "style-justify" 
		  ]);
		  $.each( styleProps, function( prop1, value ) {
			//var fsize = parseInt($sel_el.find('*').css('font-size'));
			if(prop1=="font-size"){			
				var fsize = value;
				fsize = fsize.replace('px', '');

				$('#fontsize').val(fsize);
			} else if(prop1=="font-weight"){
				if(value=="bold"){
					$('#bold').prop( "checked", true );
				}else{
					$('#bold').prop( "checked", false );
				}
				$('#bold').trigger('change');
			} else if(prop1=="font-style"){
				if(value=="italic"){
					$('#italic').prop( "checked", true );
				}else{
					$('#italic').prop( "checked", false );
				}				
			} else if(prop1=="text-decoration"){
				if(value=="underline"){
					$('#underline').prop( "checked", true );
				}else{
					$('#underline').prop( "checked", false );
				}					
			} else if(prop1=="text-align"){
				if(value=="justify"){
					$('input:radio[name=alignment]').filter('[value=style-justify]').prop('checked', true);
				} else if(value=="right"){
					$('input:radio[name=alignment]').filter('[value=style-right]').prop('checked', true);
				} else if(value=="center"){
					$('input:radio[name=alignment]').filter('[value=style-center]').prop('checked', true);
				} else{
					$('input:radio[name=alignment]').filter('[value=style-left]').prop('checked', true);
				}								
			}
			
		  });
		  
            $options.fadeIn();
        });
        $gridContent.on('blur',function () {
            $sel_el = $(this);
            $options.fadeOut();
        })
    });

    // delete widgets
    function deleteGrid(x) {
        if(confirm('Do you want to delete this content?')) {
            var $item = $(x).closest('.grid-stack-item');
            $gridStack.data('gridstack').remove_widget($item);
            $tempStackItems.append($item);
            $selectGridItems.append('<option value="'+$item[0].id+'">Item</option>')
        }
    }

    // add widgets
    function addWidget() {
        $gridStack.add_widget($('#' + $selectGridItems.val()), 0 , 0 , 3,3);
    }

    function getGridStackData() {
        var res = _.map($('.grid-stack .grid-stack-item:visible'), function (el) {
            el = $(el);
            var node = el.data('_gridstack_node');
            return {
                id: el.attr('data-custom-id'),
                x: node.x,
                y: node.y,
                width: node.width,
                height: node.height
            };
        });

        return JSON.stringify(res);
    }
	
	$( "div" ).click(function() {
		/*var html = [ "The clicked div has the following styles:" ];
 
		  var styleProps = $( this ).css([
			"width", "height", "color","font-size", "background-color", "font-weight", "font-style", "text-decoration"
		  ]);
		  $.each( styleProps, function( prop1, value ) {
			html.push( prop1 + ": " + value );
			
		  });
		 
		  $( "#result" ).html( html.join( "<br>" ) );*/
	});
	
	$("#fontsize").change(function() {
        $sel_el.find('*').css("font-size", $(this).val() + "px");
	});

	 $('.selector').click(function () {
        var $this = $(this),
            value = $this.attr('value');
        if($this.is(':checked')) {
            $sel_el.addClass(value);
        } else {
            $sel_el.removeClass(value);
        }
    });
	
	$('.radio').click(function () {
        var $this = $(this);
            //value = $this.attr('value');
		var value = $("input[name='alignment']:checked").val();
		$sel_el.removeClass('style-left style-right style-center style-justify');
		$sel_el.addClass(value);
    });
</script>