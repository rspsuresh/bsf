<!-- INLINE CSS -->
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/amcharts/amcharts.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/amcharts/pie.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/amcharts/serial.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/amcharts/funnel.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/amcharts/themes/light.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/amcharts/themes/dark.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/Highcharts-4.2.3/js/highcharts.js"></script>
<script type="text/javascript" src="<?php echo $this->basepath(); ?>/library/Highcharts-4.2.3/js/modules/exporting.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/js/slimscroll.js"></script>
<style>
@import url(http://fonts.googleapis.com/css?family=Lato:200,300);
.amcharts-graph-g2 .amcharts-graph-stroke {
  stroke-dasharray: 3px 3px;
  stroke-linejoin: round;
  stroke-linecap: round;
  -webkit-animation: am-moving-dashes 1s linear infinite;
  animation: am-moving-dashes 1s linear infinite;
}

@-webkit-keyframes am-moving-dashes {
  100% {
    stroke-dashoffset: -31px;
  }
}
@keyframes am-moving-dashes {
  100% {
    stroke-dashoffset: -31px;
  }
}


.lastBullet {
  -webkit-animation: am-pulsating 1s ease-out infinite;
  animation: am-pulsating 1s ease-out infinite;
}
@-webkit-keyframes am-pulsating {
  0% {
    stroke-opacity: 1;
    stroke-width: 0px;
  }
  100% {
    stroke-opacity: 0;
    stroke-width: 50px;
  }
}
@keyframes am-pulsating {
  0% {
    stroke-opacity: 1;
    stroke-width: 0px;
  }
  100% {
    stroke-opacity: 0;
    stroke-width: 50px;
  }
}

.amcharts-graph-column-front {
  -webkit-transition: all .3s .3s ease-out;
  transition: all .3s .3s ease-out;
}
.amcharts-graph-column-front:hover {
  fill: #496375;
  stroke: #496375;
  -webkit-transition: all .3s ease-out;
  transition: all .3s ease-out;
}

.amcharts-graph-g3 {
  stroke-linejoin: round;
  stroke-linecap: round;
  stroke-dasharray: 500%;
  stroke-dasharray: 0 \0/;    /* fixes IE prob */
  stroke-dashoffset: 0 \0/;   /* fixes IE prob */
  -webkit-animation: am-draw 40s;
  animation: am-draw 40s;
}
.amcharts-graph-g4 {
  stroke-linejoin: round;
  stroke-linecap: round;
  stroke-dasharray: 500%;
  stroke-dasharray: 0 \0/;    /* fixes IE prob */
  stroke-dashoffset: 0 \0/;   /* fixes IE prob */
  -webkit-animation: am-draw 40s;
  animation: am-draw 40s;
}
@-webkit-keyframes am-draw {
    0% {
        stroke-dashoffset: 500%;
    }
    100% {
        stroke-dashoffset: 0%;
    }
}
@keyframes am-draw {
    0% {
        stroke-dashoffset: 500%;
    }
    100% {
        stroke-dashoffset: 0%;
    }
}								
/* OVERWRITE OUR MAIN STYLE */
#crmfourchartdiv{
  background-color: #161616;  
}
.element {
  -webkit-clip-path: polygon(0 100%, 0 0, 100% 0, 80% 100%);
  clip-path: polygon(0 100%, 0 0, 100% 0, 80% 100%);
  -webkit-clip-path: url("#clip-shape"); /* required for Webkit/Blink browsers if you're using only inline SVG clipping paths, but not CSS clip-path */
  clip-path: url("#clip-shape");
}
.list {
    background-color: #eef0f2;
    border-radius: 2px;
    color: #000;
    max-height: 100%;
    transition: box-shadow 150ms ease 0s;
	box-shadow:0 1px 1px rgba(0, 0, 0, 0.05) !important; border:1px  solid #ddd; flex-direction: column;display: flex;
}
.headrclrcrm {
    background-color: #7986cb !important;
	padding:10px;
}
.imagecontainer{
 border-radius: 14px;
    box-shadow: 0 0 3px 3px rgba(0, 0, 0, 0.05);
    display: block;
    height: 50px;
    overflow: hidden;
    position: relative;
    transform: rotate(45deg);
    width: 50px;
 
 /* non-essential styling */
 -webkit-box-shadow: 0px 0px 3px 3px rgba(0, 0, 0, .05);
 box-shadow: 0px 0px 3px 3px rgba(0, 0, 0, .05);
 
}
.imagecontainer img{
 transform: rotate(-45deg);
 -ms-transform: rotate(-45deg); /* IE 9 */
 -webkit-transform: rotate(-45deg); /* Safari and Chrome */
 left: -3px;
    position: absolute;
    top: -11px;
}
.ml-seperator {
    margin: 0 auto;
    padding: 10px;
}
.ml-seperator::after, .ml-seperator::before {
    background-color: #d7cfd8;
    content: "";
    display: inline-block;
    height: 1px;
    vertical-align: middle;
    width: 70px;
}
.ml-seperator .ml-seperator-label {
    color: #969595;
    display: inline-block;
    font-size: 12px;
    position: relative;
}
.ldrgstr_proimg50 {
    height: 50px;
    margin-bottom: 0 !important;
    width: 50px;
}
.p-a-md {
    padding: 4px 8px  !important;
}
.b-t {
    border-top: 0.0625rem solid #e4e4e4;
}
.b-t-b {
    border-bottom: 0.0625rem solid #e4e4e4;
}
.namrs{padding-top: 15px;font-size: 14px; font-weight:600;}
.headp {
    color: #06528c !important;
    font-size: 16px;
    font-weight: 600 !important;
}
.amontbackclr {
    color: #fff;
    position: relative;padding:0.2em 0.4em !important;border-radius: 0.25em; font-size:12px !important;
}

.flwup_proimg					{margin-top:12px;}
#dataTable .jqx-grid-header 	{height:75px !important;}
</style>
<!-- INLINE CSS -->
<div class="content_wrapper padlr0">
    <div class="container-fluid padlr0">
        <div class="col-lg-12">
			<h1>Project Wise Report
			</h1>
			
			<div class="col-lg-12 col-lg-offset-0 commargin_ttop_20 commargin_bottom">
					
					<div class="col-lg-4 commargin_top">
						<select name="projectId" id="projectId" class="single_dropdown lbl_move" style="width:100%;" label="Select Project..." >
						<option value="">Select Project</option>
						<?php foreach($projectList as $project){ ?>
								<option value="<?php echo $project['ProjectId'] ?>" <?php if($project['ProjectId']==$projectId ) { echo 'selected';} ?> ><?php echo $project['ProjectName'] ?></option>
						<?php } ?>
						</select>	
					</div>
				</div> 
        </div>
        <div class="col-lg-12">
            <div class="table-responsive" id="dataTable">                            
				
            </div>
        </div>
		<div class="col-lg-7 ">
					<section class="pnnal">
						<header class="pnnal-heading"><i class="fa fa-bar-chart"></i>  Broker Report </header>
						<div class="pnnal-body">
							<div id="crmtwochartdiv" style="width:0px" class="wdthhtchartdiv"></div>
						</div>
					</section>
				</div>
		
    </div>
</div>

<script>
jQuery(document).ready(function($) {
    $(".clickable-row").click(function() {
        window.document.location = $(this).data("href");
    });
});

$(document).ready(function () {
    var data = <?php echo (isset($reg)) ? json_encode($reg) : ''?>;
    var source =
    {
        localData: data,
        dataType: "json",
        dataFields: [
                    { name: 'BrokerId', type: 'number' },
				    { name: 'BrokerName', type: 'string' },
					{ name: 'ProjectName', type: 'string' },	
					{ name: 'LeadName', type: 'string' },
					
		],
        
    };

    var dataAdapter = new $.jqx.dataAdapter(source);

    var cellclassname = function (row, column, value, data) {
       
    };

    $("#dataTable").jqxGrid({
        width: '100%',
        source: dataAdapter,
        pageable: true,
        selectionMode: 'singleRow',
        pagerButtonsCount: 6,
        autoheight:true,
        rowsheight:40,
        autorowheight: true,
        filterable: true,
        sortable: true,
        //filtermode: 'advanced',
        columnsResize: true,
        showfilterrow: true,
        ready:function(){
        },
        rendered: function () {
        },
        columns: [
				  { text: 'BrokerName', dataField: 'BrokerName', cellclassname: cellclassname},
				  { text: 'ProjectName', width:220,dataField: 'ProjectName', cellclassname: cellclassname },
				  { text: 'LeadName', dataField: 'LeadName', cellclassname: cellclassname },
				]
    });
});


var arr_Lists = <?php echo (isset($arrUnitLists)) ? json_encode($arrUnitLists) : '[]';?>;
$('#projectId').on('change', function(){
	var projectId = $(this).val();
	if(projectId !=  '') {
		window.location.replace(getBaseURL() + "crm/broker/report-project-wise/" + projectId);
	} else{
		window.location.replace(getBaseURL() + "crm/broker/report-project-wise");
	}
});
//report graph//
$(function () {
	Highcharts.setOptions({
                colors: ['#4aaac6', '#1ea176', '#ED561B', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#FFF263', '#6AF9C4']
            });
    $('#crmtwochartdiv').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: 'Broker Report'
        },
        xAxis: {
            categories: <?php echo (isset($jsonarrWvlDate))?$jsonarrWvlDate:"[]"; ?>
        },
        credits: {
            enabled: false
        },
        series: [{
            name: 'Total No Of Leads',
            data: <?php echo (isset($jsonarrWvlFinal))?$jsonarrWvlFinal:"[]"; ?>
        },
		 {
            name: 'Finalised Leads',
            data: <?php echo (isset($jsonarrWvlDrop))?$jsonarrWvlDrop:"[]"; ?>
        }]
    });
});
</script>

