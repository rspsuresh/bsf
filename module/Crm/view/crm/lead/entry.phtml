<style>
#lg-close {position:inherit !important;}
</style>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/js/select2.full.min.js"></script>
<link type="text/css" rel="stylesheet" href="<?php echo $this->basePath(); ?>/css/select2.min.css" />
<form action="" method="post" id="lead-entry">
<div class="content_wrapper padlr0">
<div class="container-fluid">
<div class="row">
<div class="padlr0 col-lg-12">
<div class="cd-popup" role="alert">
<div class="cd-popup-container padlr0 col-lg-12">
<div class="slideshow wlcm_scrn">
<div class="slideshow_strip">
<div class="slideshow_slide slideshow_slide_sticky" id="dateslide">
    <section class="onboard-container animated fadeIn">
        <div class="onboard-main ">
            <h1 class="txt_center animated fadeInDown" data-bsfhead="LeadEntry Details" >Welcome to Lead Entry</h1>
            <div class="onbdate_circle m_auto">
                <h1 id="dates"><?php echo date('d'); ?></h1>
            </div>
            <div class="onbdate_input m_auto">
                <span class="date_icon"><i class="fa fa-calendar"></i></span>
                <input type="text" name="leadDate"  data-bsfshare="LeadDate" id="leadDate" tabindex="1" readonly="readonly" value="<?php echo date('d-m-Y'); ?>" class="form-control onbd lbl_move leadDate" placeholder="Lead Date" />
            </div>
            <div class="intro">
                <div class="speech-bubble arrow-top animated fadeInUp">
                    <div class="arrow-top-small-container">
                        <div class="arrow"></div>
                    </div>
                    <div class="inner animated fadeInUp">
                        <p>please select lead date...</p>
                    </div>
                </div>
            </div>
        </div>
        <footer class="onboard-footer"></footer>
    </section>
</div>
<div class="slideshow_slide" id="firstslide">
    <section class="onboard-container animated fadeIn">
        <div class="onboard-main">
            <h1 class="txt_center animated fadeInDown">Fill Lead Name, Type, Mobile no</h1>
            <div class="col-lg-12 onbinr_form">
                <div class="row form-group">

                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3 req_flds">
                        <div class="mob_ccode">
                            <select name="title" id="title" data-bsfshare="title" class="single_dropdown2 lbl_move cVal" style="width:100%;" label="Title">
                                <option value="">Choose Title</option>
                                <option value="Mrs.">Mr.</option>
                                <option value="Mrs">Mrs.</option>
                                <option value="Miss">Miss.</option>
                             </select>
                         </div>
                        <div class="mob_no">
                        <input type="text" name="leadName" id="leadName"  data-bsfshare="leadName" class="form-control lbl_move" label="Lead Name" />
                            <input type="hidden" name="caller_sid" id="caller_sid" value="<?php echo (isset($callerSid)) ? $callerSid : ''?>" />
                            <div class="error_message"><p>please enter lead name...</p></div>
                    </div>
                    </div>
                </div>

                <div class="row form-group">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3 req_flds">
                        <select name="leadType" id="leadType" data-bsfshare="leadType" class="single_dropdown2 lbl_move" style="width:100%;" label="Lead Type">
                            <option value="">Choose Lead Type</option>
                            <?php
                            foreach($resultsLead as $type){
                                echo "<option value='".$type['LeadTypeId']."' >".$type['LeadTypeName']."</option>";
                            }
                            ?>

                        </select>
                        <div class="error_message"><p>please select lead type...</p></div>
                    </div>
                </div>
                <div class="row form-group" id="leaseType">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <div class="radio_check">
                            <p>
                                <input type="radio" name="leaserType" value="Individual" id="individual" checked/>
                                <label for="individual" class="ripple">Individual</label>
                            </p>
                            <p>
                                <input type="radio" name="leaserType"  value="Company" id="company" />
                                <label for="company" class="ripple">Company</label>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <select name="projectsId[]" id="projectsId" data-bsfshare="Projects" class="form-control multiple_dropdown lbl_move"  multiple="multiple" label="Projects" style="width:100%;">
                            <?php
                            foreach($resultsLeadProjects as $type){
                                echo "<option value='".$type['ProjectId']."' >".$type['ProjectName']."</option>";
                            }
                            ?>
                        </select>
                        <div class="error_message"><p>please select projects...</p></div>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3 req_flds">
                        <div class="mob_ccode">
                            <input type="text" name="countrycode" id="countrycode" data-bsfshare="countrycode" class="form-control lbl_move cVal" maxlength="6" onKeyPress="return isNumberKey(event)" value="91" placeholder="" label="" />
                        </div>
                        <div class="mob_no">
                        	<input type="text" name="mobile" id="mobile" data-bsfshare="mobileNo" class="form-control lbl_move mobval" maxlength="10" onKeyPress="return isNumberKey(event)" label="Mobile" />
                        </div>
                        <div class="clear"></div>
                        <div class="error_message"><p>please enter valid mobile number with country code...</p></div>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3 req_flds">
                        <input type="text" name="email" id="email" data-bsfshare="email" class="form-control lbl_move" label="Email" />
                        <div class="error_message"><p>please enter valid email...</p></div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="onboard-footer"></footer>
    </section>
</div>
<div class="slideshow_slide">
    <section class="onboard-container animated fadeIn">
        <div class="onboard-main">
            <h1 class="txt_center animated fadeInDown">How and from whom you came to know?</h1>
            <div class="col-lg-12 onbinr_form">

                <div class="row form-group">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <select name="leadSourceId[]" id="leadSourceId" data-bsfshare="Lead Source" class="form-control  lbl_move multiple_dropdown" multiple="multiple" data-size="5" title="Lead Source" label="Lead Source" style="width:100%;">
                            <?php
                            foreach($resultsLeadSource as $type){ ?>
                                <option value="<?php echo $type['Id'];?>,<?php echo $type['Type'];?>"><?php echo $type['value']; ?></option>
                            <?php }
                            ?>

                        </select>
                        <div class="error_message"><p>please select lead source...</p></div>
                    </div>
                </div>

                <div class="row form-group" id="refId">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <select name="refBuyerId" id="refBuyerId" class="single_dropdown2 lbl_move" style="width:100%;"  data-size="5" data-bsfshare="Reference BuyerName"  label="Reference Buyer Name">
                            <option value="">Choose Ref Buyer Name</option>
                            <?php
                            foreach($resultsRef as $type){
                                echo "<option value='".$type['LeadId']."' >".$type['LeadName']."</option>";
                            }
                            ?>
                        </select>
                        <div class="error_message"><p>please select reference buyer name...</p></div>
                    </div>
                </div>

                <div class="row form-group" id="broker">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <select name="brokerId" id="brokerId" class="single_dropdown2 lbl_move" style="width:100%;" data-size="5" title="Broker Name" data-bsfshare="BrokerName" label="Broker Name">
                            <option value="">Choose Broker Name</option>
                            <?php
                            foreach($resultsBroker as $type){
                                echo "<option value='".$type['BrokerId']."' >".$type['BrokerName']."</option>";
                            }
                            ?>
                        </select>
                        <div class="error_message"><p>please select broker...</p></div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="onboard-footer"></footer>
    </section>
</div>
<div class="slideshow_slide">
    <section class="onboard-container animated fadeIn">
        <div class="onboard-main">
            <h1 class="txt_center animated fadeInDown">Current status of lead</h1>
            <div class="col-lg-12 onbinr_form">
                <div class="row form-group">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <select name="statusId" id="statusId" class="single_dropdown2 lbl_move" style="width:100%;" data-size="5" title="Status" data-bsfshare="Status" label="Status">
                            <option value="">Choose Status</option>
                            <?php
                            foreach($resultsStatus as $type){
                                echo "<option value='".$type['StatusId']."' >".$type['Description']."</option>";
                            }
                            ?>
                        </select>
                        <div class="error_message"><p>please select status...</p></div>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <select name="natureId" id="natureId" class="single_dropdown2 lbl_move" style="width:100%;" data-size="5" title="Nature" data-bsfshare="Nature"  label="Nature">
                            <option value="">Choose Nature</option>
                            <?php
                            foreach($resultsNature as $type){
                                echo "<option value='".$type['NatureId']."' >".$type['Description']."</option>";
                            }
                            ?>
                        </select>
                        <div class="error_message"><p>please select nature...</p></div>
                    </div>
                </div>

                <div class="row form-group">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <select name="callTypeId" id="callTypeId" class="single_dropdown2 lbl_move" style="width:100%;" disabled data-size="5" title="Call Type" data-bsfshare="CallType"  label="Call Type">
                            <option value="">Choose Call Type</option>
                          <?php  $CallTypeId=22;
                            foreach($resultsCallnot as $type){
                            if($CallTypeId>0){
                            echo "<option ".($CallTypeId==$type['CallTypeId']? 'selected':'')." value='".$type['CallTypeId']."' >".$type['Description']."</option>";
                            } else {
                            echo "<option  value='".$type['CallTypeId']."' >".$type['Description']."</option>";
                            }
                            } ?>
                        </select>
                        <div class="error_message"><p>please select call type...</p></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <textarea name="remarks" id="remarks" class="form-control lbl_move" data-bsfshare="Remarks" label="Remarks"></textarea>
                        <div class="error_message"><p>please enter remarks...</p></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3 m_tb10">
                        <div class="vip_customer keepme_area brad_50 float_l">
                            <input type="checkbox" value="1" name="VIP" id="VIP" class="keepme" />
                            <label for="VIP" ></label>
                        </div>
                        <p class="float_l nri_label_p"><label for="VIP" class="ripple">VIP Customer</label></p>
                        <div class="nri_customer keepme_area brad_50 float_l">
                            <input type="checkbox" value="1" name="NRI" id="NRI" class="keepme" />
                            <label for="NRI" ></label>
                        </div>
                        <p class="float_l nri_label_p"><label for="NRI" class="ripple">NRI Customer</label></p>
                    </div>
                </div>
            </div>
        </div>
        <footer class="onboard-footer"></footer>
    </section>
</div>
<div class="slideshow_slide" id="lastPrevSlide">
    <section class="onboard-container animated fadeIn">
        <div class="onboard-main">
            <h1 class="txt_center animated fadeInDown">When you want us to call you</h1>
            <div class="col-lg-12 onbinr_form">
                <div class="row form-group">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <span class="date_icon"><i class="fa fa-calendar"></i></span>
                        <input type="text" name="nextCallDate" id="nextCallDate" readonly="readonly" class="form-control lbl_move datepickerinput" data-bsfshare="Next CallDate" label="Next Call Date"/>
                        <div class="error_message"><p>please select date...</p></div>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <select name="nextFollowUpTypeId" id="nextFollowUpTypeId" class="single_dropdown2 lbl_move" style="width:100%;" data-size="5" data-bsfshare="Next FollowUpType" label="Next FollowUp Type" title="Next Followup Type">
                            <option value="">Choose Next Followup Type</option>
                            <?php
                            foreach($resultsCall as $type){
                                echo "<option value='".$type['CallTypeId']."' >".$type['Description']."</option>";
                            }
                            ?>
                        </select>
                        <div class="error_message"><p>please select next followup type...</p></div>
                    </div>
                </div>

                <div class="row form-group" id="radios">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <label for="buyer" class="col-lg-6 txt_left col-md-6 control-label">Vehicle Required?</label>
                        <div class="col-lg-6 col-md-6">
                            <div class="radio_check">
                                <p>
                                    <input type="radio" value="yes" id="yes" name="vehicleAllocation" onclick="return showData();"/>
                                    <label for="yes" class="ripple">Yes</label>
                                </p>
                                <p>
                                    <input type="radio" value="no" id="no" name="vehicleAllocation" onclick="return removeData();"/>
                                    <label for="no" class="ripple">No</label>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row form-group" id="pkTime">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                    	<span class="time_icon"><i class="fa fa-clock-o"></i></span>
                        <input type="text" name="pickUpTime" id="pickUpTime" class="form-control lbl_move time_picker" data-bsfshare="Pickup Time" label="Pickup Time" />
                        <div class="error_message"><p>please enter valid pickup time...</p></div>
                    </div>
                </div>
                <div class="row form-group" id="pkAddress">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <textarea name="pickUpAddress" id="pickUpAddress" class="form-control lbl_move"  data-bsfshare="Pickup Address" label="Pickup Address"></textarea>
                        <div class="error_message"><p>please fill pickup address...</p></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <textarea name="nextfollowremarks" id="nextfollowremarks" class="form-control lbl_move" data-bsfshare="Next FollowupRemarks" label="Next Followup Remarks"></textarea>
                        <div class="error_message"><p>please enter remarks...</p></div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="onboard-footer"></footer>
    </section>
</div>
<div class="slideshow_slide" id="lastSlide" >
    <section class="onboard-container animated fadeIn">
        <div class="onboard-main">
            <h1 class="txt_center animated fadeInDown">Tell us about your preference</h1>
            <div class="col-lg-12 onbinr_form">
                <div class="row form-group">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <select name="unitTypeId"  id="unitTypeId" class="single_dropdown2 lbl_move" data-bsfshare="UnitType"  label="Unit Type" style="width:100%;" data-size="5" title="Unit Type">
                            <option value="">Choose Unit Type</option>
                            <?php
                            foreach($resultsUnitType as $type){
                                echo "<option value='".$type['UnitTypeId']."' >".$type['UnitTypeName']."</option>";
                            }
                            ?>
                        </select>
                        <div class="error_message"><p>please select unit type...</p></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2  col-lg-offset-3 col-md-4">
                        <div  class="col-lg-12 padlr0">
                            <div class="col-lg-5 col-md-5 col-sm-5 padlr0  form-group">
                                <select name="costPreferenceFrom"  id="costPreferenceFrom" label="Cost Preference From" data-bsfshare="Cost PreferenceFrom" class="single_dropdown2 lbl_move" style="width:100%;" data-size="5">
                                    <option value="">Choose Cost Preference From</option>
                                    <?php
                                    foreach($resultsCost as $type){
                                        echo "<option value='".$this->commonHelper()->sanitizeNumber($type['CostPreferenceFrom'],2,true)."'>".$this->commonHelper()->sanitizeNumber($type['CostPreferenceFrom'],2,true)."</option>";
                                    }
                                    ?>
                                </select>
                            </div>
                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2  form-group " style="padding-top:7px;">
                                <span class="input-group-addon" style="border: 1px solid #cccccc ;">To</span>
                            </div>
                            <div class="col-lg-5 col-md-5 col-sm-5 form-group padlr0">
                                <select name="costPreferenceTo"  id="costPreferenceTo" label="Cost Preference To"  data-bsfshare="Cost PreferenceTo" class="single_dropdown2 lbl_move" style="width:100%;" data-size="5" >

                                </select>
                            </div>
                        </div>
                        <div class="error_message"><p>please select cost preference...</p></div>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <select name="PreCityId[]" id="preCityId" class="form-control multiple_dropdown_1 lbl_move" multiple="multiple" data-size="5" title="Preferred Location" data-bsfshare="Preferred Location" label="Preferred Location" style="width:100%;">
                            <?php
                            foreach($resultsCity as $type){
                                echo "<option value='".$type['CityId']."' >".$type['CityName']."</option>";
                            }
                            ?>
                        </select>
                        <div class="error_message"><p>please select preferred location...</p></div>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-lg-6 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-offset-3">
                        <select name="executiveId" id="executiveId"  class="single_dropdown2 lbl_move" style="width:100%;" data-bsfshare="Executive Name" label="Executive Name" data-size="5" >
                            <option value="">Choose Executive Name</option>
                            <?php
                            foreach($resultsExecutive as $type){
                                if(count($userId)>0){
                                    echo "<option ".($userId==$type['UserId']? 'selected':'')." value='".$type['UserId']."' >".$type['UserName']."</option>";
                                } else {
                                    echo "<option value='".$type['UserId']."' >".$type['UserName']."</option>";
                                }
                            }
                            ?>
                        </select>
                        <div class="error_message"><p>please select executive name...</p></div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="onboard-footer"></footer>
    </section>
</div>
</div>
<button class="onbdback_btn slideshow_button_previous ripple brad_50 back" data-original-title="Previous" data-toggle="tooltip" data-placement="right"><span><i class="fa fa-arrow-left"></i></span></button>
<button class="slideshow_button slideshow_button_next btn-green has-tooltip ripple" title="" type="button" data-original-title="press continue to next" data-toggle="tooltip">continue</button>
<button class="slideshow_button btn-green has-tooltip ripple continue" title="" type="button" data-original-title="press continue to next" data-toggle="tooltip">continue</button>
<div class="markers"></div>
<a href="<?php echo $this->basePath(); ?>/crm"  class="close" id="lg-close"></a>
</div>

</div> <!-- cd-popup-container -->
</div> <!-- cd-popup -->
</div>
</div>
</div>
</div>
</form>

<!-- PAGE SCRIPTS -->
<script type="text/javascript">
    /* Date picker Label */
    $(document).ready(function(){
        $(".onbdlbl_move").polymerForm({base_color:"#fcdaad"});
        $(".multiple_dropdown_1").select2({
            tags: true
        });
		
    });
    /* Onboarding */
    $('body').addClass('advanced');
    new CRD.Slideshow({ slideshow: '.slideshow', time: 600 }).init();
    var dp1 = $('#leadDate').datepicker({format: 'dd-mm-yyyy',todayHighlight: true}).on('changeDate', function() {
        $('#dates').removeClass('animated bounceIn');
        $('.datepicker').hide();
        var selectedDate = $(this).val();
        var pieces = selectedDate.split('-');
        var day = pieces[0];
        $('#dates').text(""+day+"");
        $('#dates').addClass('animated bounceIn');
    }).data('datepicker');
	
	$('.datepickerinput').datepicker({
		format: "dd-mm-yyyy",
		startDate: new Date(),
		todayBtn: true,
		orientation: "top auto",
		autoclose: true
	}).on("changeDate", function(e){
		$("#nextCallDate").text($(this).val());
	});	
	$('.date_icon').click(function() {
		var input = $(this).parent().find('input').datepicker('show');
	});
	
	

    /* General */
    $(".back").hide();
    $("#refId").hide();
	
    /* Page Validate and others */
    $(".continue").click(function(){

		$('.wlcm_scrn .slideshow_button_next,.wlcm_scrn .continue').show().addClass('animated_1_5s fadeInDown');
		$('.wlcm_scrn .onbdback_btn').show().addClass('animated_1_5s fadeInRight');
        $('.error_message').hide();
        var ele = $(".slideshow_slide_sticky");

        $(".error").text("");
        var bool = true;
        ele.find("input,checkbox,textarea, select ").each(function(){
            var tagname = $(this).prop("tagName").toLowerCase();
            if(tagname == 'input'){
                var type = $(this).attr("type");
                if(type == 'text'){
                    $('.cVal').removeClass('red_bdr');
                    if($(this).is(":visible") && $(this).val().trim() == '' && this.id != 'email') {

                        if($(this).hasClass("cVal")){
                            var countrycode = $('#countrycode').val();
                            if(!/^[0-9]{1,6}$/.test(countrycode)) {
                                bool=false;
                                $(this).addClass('red_bdr');
                                $(this).focus();
                                return false;
                            }
                        } else {
                            bool = false;
                            $(this).closest('.form-group').find(".error_message").show();
                            $(this).focus();
                            return false;
                        }
                    }
                    if($(this).hasClass("mobval")){
                        var mobile=$('#mobile').val();
                        var filter= /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
                        if(!filter.test(mobile)) {
                            bool=false;
                            $(this).closest('.form-group').find(".error_message").show();
                            $(this).focus();
                            return false;
                        }
                    }

//                    if(this.id == 'email'){
//                        var emailaddress = $('#email').val();
//                        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
//                        if(!emailReg.test(emailaddress)) {
//                            bool=false;
//                            $(this).closest('.form-group').find(".error_message").show();
//                            $(this).focus();
//                            return false;
//                        }
//                    }

                } else if(type == 'checkbox'){

                } 
				else if(type == 'radio'){
                }
            } else if(tagname == 'select'){
                if(this.id != 'refBuyerId' && this.id != 'brokerId'
                  && this.id !='leadSourceId'
                    && this.id !='unitTypeId'&& this.id !='costPreferenceFrom'&& this.id !='costPreferenceTo'&& this.id !='preCityId'&& this.id !='executiveId'){
                    if ($(this).val() == "" || $(this).val() == null){
                        bool = false;
                        $(this).closest('.form-group').find(".error_message").show();
                        $(this).focus();
                        return false;
                    }
                }
				if(this.id == 'refBuyerId'){
					if($(this).is(":visible") && $(this).val().trim() == ''){
                        bool=false;
                        $(this).closest('.form-group').find(".error_message").show();
                        $(this).focus();
                        return false;
                    }
					 
				 }
            } else if(tagname == 'textarea'){
				if($(this).is(":visible") && $(this).val().trim() == ''){
                    if (this.id != 'remarks' && this.id != 'nextfollowremarks'){
                        bool=false;
                        $(this).closest('.polymer-form').next(".error_message").show();
                        $(this).focus();
                        return false;
                    }}
                
            } else {
                $(".error_message").remove();
            }
        });
        if(bool){
			 if(ele.attr("id") == 'firstslide') {

				var mobile=$('#mobile').val();
                 if(mobile!=0){
				$.ajax({
					url:getBaseURL()+"crm/lead/entry",
					type:"post",
					data:{'mode':'Mobile',mobile:mobile},
					success:function(data,textStatus,jqXHR){
						var data = JSON.parse(data);
                        if(data!=false){
                        var mobile1=data.Mobile;
                        var name=data.LeadName;

						if(mobile1.length!=0){
							$('#mobile').addClass('error');
                            alert(name+  " has same mobile number"  );
							$('#mobile').focus();
						}}else{
						 	$('#mobile').removeClass('error');
						    $(".slideshow_button_next").trigger("click");

						}
					},
						error:function(jqXHR, textStatus, errorThrown){
							alert(textStatus+"-----"+errorThrown);
						}
					});
			 }}else{
			 $(".slideshow_button_next").trigger("click"); }
            if(ele.attr("id") == 'lastPrevSlide') {
                var iexecutiveId = isNullCheck($('#executiveId').val(),'number');
                if (iexecutiveId ==0) {
                    getExecutiveId();
                    //$('#executiveId').find('option[value="6"]').prop('selected', true);
                    //$('#executiveId').val('6');
                }


                $(".continue").text("submit");
                $(".continue").attr('data-original-title', 'submit');
				$('.wlcm_scrn .slideshow_button_next,.wlcm_scrn .continue').show().addClass('animated_1_5s fadeInDown');
				$('.wlcm_scrn .onbdback_btn').show().addClass('animated_1_5s fadeInRight');
            }
            if(ele.attr("id") == 'lastSlide') {
                $(".continue").attr("disabled", true);
                $('form').submit();
            }
            if(ele.attr("id") == 'dateslide') {
                setTimeout(function() {
                    $("#leadName").focus();
                }, 620);

            }
        }
    });
    $(".back").click(function(){
        if($(".continue").text() == 'submit') {
            $(".continue").text("continue");
        }
    });

    $('#nextFollowUpTypeId').on('change', function() {
        var sname = $("#nextFollowUpTypeId option:selected").text();
        if(sname=='Site Visit'){
            $('#radios').show();
        } else {
            $('#radios').hide().find('radio').val('');
            $('#pkTime').hide().find('input:text').val('');
            $('#pkAddress').hide().find('textarea').val('');
        }
    }).change();

    function getExecutiveId() {
        var sProjectId = $('#projectsId').val();
        $.post(getBaseURL() + 'crm/lead/getExecutiveId', {projectid: sProjectId}, function (data) {
            $('#executiveId').val(data).trigger("change");
        });
    }
 
    function showData(){
        $('#pkTime').show();
        $('#pkAddress').show();
    }
    function removeData(){
        $('#pkTime').hide().find('input:text').val('');
        $('#pkAddress').hide().find('textarea').val('');
    }

    $('#leadType').on('change', function() {
        var stype = $("#leadType option:selected").text();
        if(stype=='Leaser'){
            $('#leaseType').show();
        } else {
            $('#leaseType').hide();
        }
    }).change();

    /* drop Down */
    $(document).ready(function() {
        $(".single_dropdown2").select2({
            placeholder: "",
            allowClear: true
        });
        $(".multiple_dropdown").select2({
        });

        $('#leadSourceId').on('change', function() {
        var sourcelead= $('#leadSourceId').val();
            if(sourcelead == null){
                $("#broker").show();
            }

           else if(sourcelead.length >0){
               $("#broker").hide();
           }

            LeadSrcOnChange();
        });

        function LeadSrcOnChange() {
            $('#leadSourceId option:selected').each(function() {
                var id=$(this).text();

                if(id =='BuyerRef'){
                    $("#refId").show();
                }
                else{
                    $("#refId").hide();
                }
            });
        }
    });
    $('.content_wrapper').keydown(function (e) {
        var key = e.which;

        if(key == 13 || key==9)  {
            e.preventDefault();
            $('.continue').click();
            return false;
        }
    });
	
	$('.onboard-main').slimScroll({
		height : '100%',
		alwaysVisible: false,
		railVisible: true,
		railColor: '#cececd',
		railOpacity: 1
	});

</script>
<script>
    $('#costPreferenceFrom').on('change',function(){
        var formData = parseFloat(isNullCheck($("#costPreferenceFrom").val().replace(/[^0-9\.]+/g,"") ,'number'));
        var target = 'CostFrom=' + formData;
        $.ajax({
            url:getBaseURL()+"crm/lead/entry",
            type:"post",
            data:target,
            success:function(data,textStatus,jqXHR){
				var opHtml = '<option value=""></option>';
                var valu = JSON.parse(data);
                $.each(valu,function(i,o){
					  opHtml += '<option value="'+ sanitizeNumber(o.CostPreferenceTo,2,true)+'">' +sanitizeNumber(o.CostPreferenceTo,2,true)+'</option>';
                });
                $('#costPreferenceTo').html(opHtml);
				$('#costPreferenceTo').select2('val', '');
            },
            error:function(jqXHR, textStatus, errorThrown){
                alert(textStatus+"-----"+errorThrown);
            }
        });
    });
	
	
</script>

<!-- PAGE SCRIPTS -->
