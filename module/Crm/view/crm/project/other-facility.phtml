<?php $bsf = new \BuildsuperfastClass(); ?>
<style type="text/css">
	.sequence-prefix	{border:1px dashed #ddd; height:inherit !important; min-height:40px !important; float:left;}
	.sequence-prefix li {margin:5px;cursor: move;}
</style>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/js/select2.full.min.js"></script>
<link type="text/css" rel="stylesheet" href="<?php echo $this->basePath(); ?>/css/select2.min.css" />
<form class="form-horizontal" method="post">
<input type="hidden" name="proj" id="proj" value="<?php echo $projectId;?>" >
<div class="content_wrapper padlr0">
	<div class="container-fluid padlr0">
		<div class="col-lg-12">

            <div class="promote_social float_r">
                <ul>
                    <span>Promote Project</span>
                    <li><a href="#" class="fb_c ripple"><i class="fa fa-facebook-square"></i></a></li>
                    <li><a href="#" class="twt_c ripple"><i class="fa fa-twitter-square"></i></a></li>
                    <li><a href="#" class="g_c ripple"><i class="fa fa-google-plus-square"></i></a></li>
                </ul>
            </div>
		</div>
		<div class="col-lg-12 clear">
			<div class="row">
				<div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1">
					<div class="col-lg-12">
						<div class="row">
							<div class="step_by_liner animated slideInDown"></div>
							<ul class="step_by stepby_mb60">
								<li>
									<div class="step_by_sep animated_0_4s slideInRight"><p>6</p></div>
									<p class="stepli_p1">Unit Type</p>
								</li>
								<li>
									<div class="step_by_sep stepsep_active animated slideInRight"><p>7</p></div>
									<p class="stepli_p2">Facility Management</p>
								</li>
								<li class="opacity_08">
									<div class="step_by_sep animated_1_5s slideInRight"><p>8</p></div>
									<p class="stepli_p3">Check List Management</p>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1 cnt_slider">
					<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
						<!-- Wrapper for slides -->
						<div class="carousel-inner" role="listbox">
							<div class="item active" id="car">
								<ul class="onbrd_rdo_box">
									<li>
										<a href="javascript:void(0);" role="button">
											<div class="rdo_box_icon brad_50">
												<img src="<?php echo $this->basePath(); ?>/images/rdo_box_icon9.png" class="m_auto" />
											</div>
											<h2>Do you want to create ?</h2>
											<div class="rdo_box_link brad_50" id="createSlot"><span><i class="fa fa-external-link"></i></span></div>
										</a>
									</li>
									<li>
										<a href="javascript:void(0);" role="button">
											<div class="rdo_box_icon brad_50">
												<img src="<?php echo $this->basePath(); ?>/images/rdo_box_icon8.png" class="m_auto" />
											</div>
											<h2>Do you want to view	?</h2>
											<div class="rdo_box_link brad_50" id="viewSlot"><span><i class="fa fa-external-link"></i></span></div>
										</a>
									</li>
								</ul>
							</div>
							<div class="item" id="details">
								<div class="col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
                                    <div class="row">
                                        <div class="form-group col-lg-12 padtop20 req_flds">
                                            <input type="text" name="facilityName" id="facilityName" class="form-control lbl_move" label="Facility Name" />
                                            <div class="error_message"><p>please enter facility name...</p></div>
                                            <div class="already_exist error_message"><p>this one already exists!...</p></div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-lg-12 req_flds">
                                            <input type="hidden" name="projectId" id="projectId" value="<?php echo $bsf->encode($projectId); ?>" />
                                            <select name="blockId" id="blockId" class="single_dropdown lbl_move" data-size="5" style="width:100%;" label="Select Block Name">
                                                <option value="">Select Block Name</option>
                                                <?php foreach($resultsBlock as $type) { ?>
                                                <option value="<?php echo $type['BlockId'].'-'.$type['BlockName']; ?>"><?php echo $type['PhaseName'].' - '.$type['BlockName']; ?></option>
                                                <?php } ?>
                                            </select>
                                            <div class="error_message"><p>please select block name...</p></div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-lg-12 req_flds">
                                            <input type="text" name="totalCarParks" id="totalCarParks" class="form-control lbl_move" label="Total Numbers" />
                                            <div class="error_message"><p>please enter total numbers...</p></div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-lg-12">
                                            <input type="text" name="phaseTitle" id="phaseTitle" class="form-control lbl_move" label="Phase Title" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-lg-12">
                                            <input type="text" name="blockTitle" id="blockTitle" class="form-control lbl_move" label="Block Title" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-lg-12">
                                            <p>Sequence</p>
                                            <div class="radio_check">
                                                <p>
                                                    <input type="radio" id="sequence-numeric" name="Sequence" value="numeric" checked />
                                                    <label for="sequence-numeric" class="ripple">Numeric</label>
                                                </p>
                                                <p>
                                                    <input type="radio" id="sequence-alpha" name="Sequence" value="alpha" />
                                                    <label for="sequence-alpha" class="ripple">Alphabets</label>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div id="sequence-starting-wrapper" class="col-lg-12">
                                            <div class="col-lg-4 col-md-4 col-sm-5 form-group padlr0">
                                                <input type="text" id="sequence-starting-no" name="SequenceStartingNo" class="lbl_move" label="Starting Number" />
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-3 form-group">
                                                <input type="text" id="sequence-width" name="SequenceWidth" class="lbl_move" label="Width" />
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4 form-group">
                                                <input type="text" id="sequence-skip-nos" name="SequenceSkipNos" class="lbl_move" label="Skip Nos" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-lg-12">
                                            <input id="sequence-order" type="hidden" name="SequenceOrder" value="phase_block_carpark" />
                                            <ul id="sortable1" class="breadcrumb_area sequence-prefix connectedSortable">
                                                <li data-order="phase"><a>Phase</a></li>
                                                <li data-order="block"><a>Block</a></li>
                                                <li data-order="carpark"><a>Sequence No</a></li>
                                            </ul>
                                            <ul id="sortable2" class="breadcrumb_area sequence-prefix connectedSortable">
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-lg-12">
                                            <div class="col-lg-12 savebtn_area no_border">
                                                <ul>
                                                    <li class="save_btn m_auto">
                                                        <button type="button" class="generate save_btn m_auto" name="save" id="generate">Generate</button>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
								</div>
							</div>
							<div class="item" id="view">
								<div class="col-lg-12">
									<ul class="grid_change float_r">
										<!--li><a href="javascript:void(0);" class="grid_change_line grid_change_active"><span><i class="fa fa-th"></i></span></a></li-->
										<li class="sequentialViewDiv"><a href="javascript:void(0);" class="grid_change_line grid_change_active"><span><i class="fa fa-list-ul"></i></span></a></li>
									</ul>
									<div class="col-lg-12 clear padlr0" id="sequenceView">
										<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
											<?php
												if(count($resultsReg) > 0) {
													$strArr = array();
													foreach($resultsReg as $i) {
														$strArr[$i['BlockId']][] = '<div class="col-lg-3 col-md-3 col-sm-6 carpark_grid">
															<div class="slot_no">
																<span class="float_r brad_50">'.$i['SlotNo'].'
																<a  href="javascript:void(0);" onclick="return deleteslot(\''.$i['ProjectId'].'\', \''.$i['BlockId'].'\', \''.$i['UnitId'].'\', \''.$i['SlotNo'].'\', \''.$i['CarParkTransId'].'\');"><i class="fa fa-times reg-icon"></i></a></span>
																<p>Slot</p>
															</div>
															<ul>
																<li>
																	<div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 txt_left padlr0"><p><span class="p_label">Facility</span></p></div>
																	<div class="col-lg-7 col-md-7 col-sm-7 col-xs-7 padlr0">
																		<p>'.$i['FacilityName'].'</p>
																	</div>
																</li>
																<li>
																	<div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 txt_left padlr0">';

                                                                    $style = 'display:block;';
                                                                    $unstyle = 'display:none;';
                                                                    if($i['UnitNo'] != "" ) {
                                                                        $style = 'display:none;';
                                                                        $unstyle = 'display:block;';
                                                                    }
                                                                    $strArr[$i['BlockId']][] .=	  '<p id="unitText_'.$i['SlotNo'].'" style="'.$unstyle.'"><span class="p_label">Unit No</span></p></div>';
                                                                    $strArr[$i['BlockId']][] .=	  '<div class="col-lg-7 col-md-7 col-sm-7 col-xs-7 padlr0">
                                                                        <p id="slot_'.$i['SlotNo'].'" style="'.$style.'"><span id="unitName_'.$i['SlotNo'].'"></span> <a href="javascript:void(0);" id="allotcar_'.$i['SlotNo'].'" onclick="return allotPark(\''.$i['ProjectId'].'\', \''.$i['BlockId'].'\', \''.$i['SlotNo'].'\', \''.$i['CarParkTransId'].'\');">Allot</a></p>';
                                                                        if($i['UnitNo'] != "" ){
                                                                            $strArr[$i['BlockId']][] .=	  '<p id="unallotcar_'.$i['SlotNo'].'"><span style="display:block;">'.$i['UnitNo'].' </span> <a href="javascript:void(0);" onclick="return unallotPark(\''.$i['ProjectId'].'\', \''.$i['BlockId'].'\', \''.$i['UnitId'].'\', \''.$i['SlotNo'].'\', \''.$i['CarParkTransId'].'\');">UnAllot</a></p>';
                                                                        }
                                                                        $strArr[$i['BlockId']][] .=	  '<p id="unallotsl_'.$i['SlotNo'].'" style="display:none;"><a href="javascript:void(0);" onclick="return unallotPark(\''.$i['ProjectId'].'\', \''.$i['BlockId'].'\', \''.$i['UnitId'].'\', \''.$i['SlotNo'].'\', \''.$i['CarParkTransId'].'\');">UnAllot</a></p>';

                                                                        $strArr[$i['BlockId']][] .= '</div>
                                                                     </li>
                                                                   </ul>
                                                                    </div>';
													}
												
													$string = '';
													$blkArray = array();
													$j = 1;
													foreach($resultsReg as $i) {
														if(!in_array($i['BlockId'],$blkArray)) {
															$fClass = '';
															if($j==1) {
																$fClass = 'accordion_head_crnt';
															}
															$string .= '<div class="panel panel-default">
																<div class="panel-heading accordion_head '.$fClass.'" role="tab" id="heading'.$i['BlockId'].'" data-toggle="collapse" data-parent="#accordion" href="#collapse'.$i['BlockId'].'" aria-expanded="true" aria-controls="collapse'.$i['BlockId'].'">
																	<h4>'.$i['BlockName'].'</h4>
																</div>
																<div id="collapse'.$i['BlockId'].'" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="heading'.$i['BlockId'].'">
																	<div class="panel-body">
																		<div class="col-lg-12 padlr0">';
																		foreach($strArr[$i['BlockId']] as $slot) {
																			$string .= $slot;
																		}
															$string .= '</div>
																	</div>
																</div>
															</div>';
															$blkArray[] = $i['BlockId'];
														}
														$j++;
													}
													echo $string;
												} else {
													echo '<div class="panel panel-default">
															<div class="nodisp_area">
																<span><i class="fa fa-bolt"></i></span>
																<h4>No Data to display</h4>
															</div>
														</div>';
												}
											?>
										</div>
									</div>
									<div class="table-responsive clear" style="display:none;" id="matrixView">
										<div id="dataTable"></div>
										<script>
											jQuery(document).ready(function($) {
												$(".clickable-row").click(function() {
													window.document.location = $(this).data("href");
												});
											});
											$(document).ready(function () {
												var proj = $("#proj").val();
												$.ajax({
													url:getBaseURL()+"crm/project/other-facility",
													type:"post",
													data:{'proj':proj},
													dataType:"json",
													success:function(data, textStatus, jqXHR){
														//alert(JSON.stringify(data))
														//prepare the data
														var source =
														{
															localdata:data,
															dataType: "json",
															dataFields: [
																{ name: 'BlockName', type: 'string' },
																{ name: 'FacilityName', type: 'string' },
																{ name: 'TotalCarParks', type: 'number' },
															],
															id: 'CarId'
														};
														var dataAdapter = new $.jqx.dataAdapter(source);
														$("#dataTable").jqxGrid({
															width: '100%',
															pageable: true,
															selectionMode: 'singleRow',
															pagerButtonsCount: 6,
															autoheight: true,
															autorowheight: true,
															filterable: true,
															sortable: true,
															//filtermode: 'advanced',
															source: dataAdapter,
															columnsResize: true,
															ready:function(){
															},
															rendered:function(){
															},
															columns: [
																{ text: 'Block Name', dataField: 'BlockName',width: 200},
																{ text: 'FacilityName', dataField: 'FacilityName', width: 200},
																{ text: 'Total Car Parks', dataField:'TotalCarParks'},
															]
														});
														$('#dataTable').on('cellclick', function (event){
															// event arguments.
															var args = event.args;
															// row's bound index.
															var rowBoundIndex = args.rowindex;
															// row's visible index.
															var rowVisibleIndex = args.visibleindex;
															// right click.
															var rightclick = args.rightclick;
															// original event.
															var ev = args.originalEvent;
															// column index.
															var columnindex = args.columnindex;
															// column data field.
															var dataField = args.datafield;
															// cell value
															var value = args.value;
															var data = $("#dataTable").jqxGrid("getrowdata", rowBoundIndex);
															if(dataField != '') {
																//location.replace("car-park-detail/"+data.uid);
															}
														});
													},
													error:function(jqXHR, textStatus, errorThrown){
														alert(textStatus+"-----"+errorThrown);
													}
												});
											});

										</script>
									</div>
								</div>
							</div>
							<!-- Indicators -->
							<ol class="carousel-indicators">
								<li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
								<li data-target="#carousel-example-generic" data-slide-to="1"></li>
								<li data-target="#carousel-example-generic" data-slide-to="2"></li>
							</ol>
							<!-- Controls -->
							<ul class="prev_next">
								<li class="float_l">
									<a href="#carousel-example-generic" data-slide="prev">
										<span><i class="fa fa-arrow-left"></i></span>
									</a>
								</li>
								<li class="float_r">
									<a href="#carousel-example-generic" role="button" data-slide="next">
										<span><i class="fa fa-arrow-right"></i></span>
									</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="col-lg-12 savebtn_area">
	<ul>
        <li class="save_btn m_right10 float_r"><a href="<?php echo $this->basePath(); ?>/crm/project/index" class="current" id="current_url">Save &amp; Exit</a></li>
		<li class="save_btn m_right10 float_r"><a href="<?php echo $this->basePath(); ?>/crm/project/checklist/<?php echo $bsf->encode($projectId); ?>"id="current_ur">Save &amp; Next</a></li>

				
		<li class="cancel_btn float_r">
            <a href="<?php echo $this->basePath(); ?>/crm/project/unit-grid/<?php echo $projectId; ?>" id="backgrid" class="ripple_bak">back</a>

		</li>
		<li class="goto">
			<label for="go_to" id="go_to" class="float_l">Go to</label>
			<select id="projectSteps" name="go_to" class="float_l goto_select">
				<option value="general" <?php if($this->currentRequest()->get('action') == 'general') { echo 'selected'; } ?>>General</option>
				<option value="land-area" <?php if($this->currentRequest()->get('action') == 'land-area') { echo 'selected'; } ?>>Area Details</option>
				<option value="land-cost" <?php if($this->currentRequest()->get('action') == 'land-cost') { echo 'selected'; } ?>>Land Cost Calculation</option>
				<option value="other-cost" <?php if($this->currentRequest()->get('action') == 'other-cost') { echo 'selected'; } ?>>Other Cost Details</option>
				<option value="payment" <?php if($this->currentRequest()->get('action') == 'payment-schedule' || $this->currentRequest()->get('action') == 'payment-schedule-edit' || $this->currentRequest()->get('action') == 'payment-schedule-register' || $this->currentRequest()->get('action') == 'payment') { echo 'selected'; } ?>>Payment Schedule</option>
                <option value="unit-type-register" <?php if($this->currentRequest()->get('action') == 'unit-type-register' || $this->currentRequest()->get('action') == 'unit-type' || $this->currentRequest()->get('action') == 'unit-type-edit') { echo 'selected'; } ?>>Unit Type</option>
                <option value="facility" <?php if($this->currentRequest()->get('action') == 'facility' || $this->currentRequest()->get('action') == 'car-park' || $this->currentRequest()->get('action') == 'other-facility') { echo 'selected'; } ?>>Facility Mangement</option>
				<option value="checklist" <?php if($this->currentRequest()->get('action') == 'checklist') { echo 'selected'; } ?>>Check List Mangement</option>
				<option value="penality-interestrate" <?php if($this->currentRequest()->get('action') == 'penality-interestrate') { echo 'selected'; } ?>>Penality & Interest Rate</option>
				<option value="incentive-register" <?php if($this->currentRequest()->get('action') == 'incentive-register') { echo 'selected'; } ?>>Incentive Management</option>
			    <option value="property-management" <?php if($this->currentRequest()->get('action') == 'property-management') { echo 'selected'; } ?>>Property Management</option>
			</select>
		</li>
	</ul>
</div>
    <div class="modal fade" id="parkAllot" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h1>Allocation</h1>
                </div>
                <div class="modal-body">
                    <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1">
                        <form class="form-horizontal">
                            <div class="row m_tb40">
                                <div class="col-lg-12 form-group req_flds">
                                    <select name="unitId" id="unitId" class="single_dropdown lbl_move" data-size="5" style="width:100%;" label="Select Unit">
                                        <option value="">Select Unit</option>
                                    </select>
                                    <input type="hidden" id="selSlotNo" name="selSlotNo" value="" />
                                    <input type="hidden" id="selCarTransId" name="selCarTransId" value="" />
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="modal-footer clear">
                    <div class="col-lg-12 savebtn_area no_border">
                        <ul>
                            <li class="save_btn float_r">
                                <a href="javascript:void(0);" id="btnAllot" class="ripple" data-dismiss="modal">Allot</a>
                            </li>
                            <li class="cancel_btn float_r">
                                <a href="javascript:void(0);" aria-hidden="true" data-dismiss="modal" class="ripple">Cancel</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<script type="text/javascript">
$(document).ready(function() {
	$(".single_dropdown").select2({
		placeholder: "",
		allowClear: true
	});
	$(".multiple_dropdown").select2({
	});

});

$('.cnt_slider .carousel').carousel({
	interval: false
});

$("#projectSteps").change(function(){
	window.location.href= getBaseURL() + "crm/project/"+this.value+"/<?php echo $bsf->encode($projectId); ?>";
});

$('.nextSlide').click(function(){
	$(".error_message").hide();
	var bool = true;
	$('.carousel-inner div.active').find('.req_flds input:text, select').each(function(){
		var tagname = $(this).prop("tagName").toLowerCase();
			if(tagname == 'input') {
				var type = $(this).attr("type");
				if(type == 'text') {
					if($(this).is(":visible") && $(this).val().trim() == '') {
						bool=false;
						$(this).closest('.polymer-form').next(".error_message").show();
						$(this).focus();
						return false;
					}
				}
				else if(type == 'checkbox') {
				}
				else if(type == 'radio') {
				}
			} else if(tagname == 'select') {
				if($(this).val() == "" || $(this).val() == null) {
					bool = false;
					$(this).closest('.form-group').find(".error_message").show();
					$(this).focus();
					return false;
				}
			} else if(tagname == 'textarea') {
				if($(this).val().trim().length == 0) {
					bool = false;
					alert($(this).attr("error"));
					$(this).focus();
					return false;
				}
			}
	})
	
	if(bool) {
		if($("div.item:visible").index() == $("div.item:last").index()) {
			$(".nextSlide").text("Generate");
			$('form').submit();
		} else {
			$('.cnt_slider .carousel').carousel('next');
		}
	}
	//$('.cnt_slider .carousel').carousel('next');
});

$('.generate').click(function(){
	$(".error_message").hide();
	var ele = $(".item");
	var bool = true;
	ele.find(".req_flds input, .req_flds checkbox, .req_flds select, .req_flds textarea").each(function(){
		var tagname = $(this).prop("tagName").toLowerCase();
		if(tagname =='input') {
			var type = $(this).attr("type");
			if(type == 'text') {
				if($(this).is(":visible") && $(this).val().trim() == '') {
					bool=false;
					$(this).closest('.polymer-form').next(".error_message").show();
					$(this).focus();
					return false;
				}
			}
		} else if(tagname =='select') {
			if($(this).val() == "" || $(this).val() == null) {
				bool = false;
				$(this).closest('.polymer-form').next(".error_message").show();
				$(this).focus();
				return false;
			}
		}
	});
	if(bool) {
		if($(".item:Visible").index()) {
			$.post(getBaseURL()+'crm/project/check-facility-name', { facName: $('#facilityName').val(), blockId: $('#blockId').val() },
			function(data) {
				var chkCount = JSON.parse(data);
				if(chkCount.Count != 0) {
					$('#facilityName').closest('.form-group').find(".already_exist").show();
					$('#facilityName').focus();
				} else {
					$('form').submit();
				}
			});
		}
	}
});

$("#viewSlot").click(function(){
	$('#carousel-example-generic').carousel(2);
});

$("#createSlot").click(function(){
	$('#carousel-example-generic').carousel({
		slide: "next"
	});
});

$(".grid_change li.sequentialViewDiv").click(function(){
	if($(this).find("a").hasClass("grid_change_box")) {
		$(".grid_change li.sequentialViewDiv a").removeClass("grid_change_box").addClass("grid_change_line");
		$(".grid_change li.sequentialViewDiv a span i").removeClass("fa-th").addClass("fa-list-ul");
		$("#matrixView").hide();
		$("#sequenceView").show();
	} else {
		$(".grid_change li.sequentialViewDiv a").removeClass("grid_change_line").addClass("grid_change_box");
		$(".grid_change li.sequentialViewDiv a span i").removeClass("fa-list-ul").addClass("fa-th");
		$("#sequenceView").hide();
		$("#matrixView").show();
	}
});

$(function() {
	var $seqPrefix = $('#sortable1'),
		$seqNumeric = $('#sequence-numeric'),
		$seqStarting = $('#sequence-starting-no'),
		$seqWidth = $('#sequence-width'),
		$seqSkipNos = $('#sequence-skip-nos'),
		$seqOrderIp = $('#sequence-order');

    $('#sortable1, #sortable2').sortable({
		stop: function () {
			var seqOrder = '';
			$seqPrefix.find('li').each(function() {
				if(seqOrder != ''){
					seqOrder += '_';
				}
				seqOrder += $(this).attr('data-order');
			});
			$seqOrderIp.val(seqOrder);
		}
	});
	
	bindUnitSequence_onChange();
	
	function bindUnitSequence_onChange()
	{
		$('input[name="Sequence"]').on('change', function () {
			$seqStarting.val('');
			$seqWidth.val('');
			$seqSkipNos.val('');
			
			if ($seqNumeric.is(':checked')) {
				$seqStarting.siblings('label').text('Starting Number');
				$seqWidth.removeAttr('disabled');
				$seqSkipNos.siblings('label').text('Skip Nos');
			} else {
				$seqStarting.siblings('label').text('Starting Alphabet');
				$seqWidth.attr('disabled', true);
				$seqSkipNos.siblings('label').text('Skip Alphabets');
			}
		});
	}
});

function allotPark(projId, blkId, slotNum, carTrsId)
{
    $('#unitId').html('').trigger('change');
    $.post(getBaseURL()+'crm/project/get-booked-unit', { projId: projId, blkId: blkId },
        function(data) {
            $('#unitId').html('');
            var opHtml = '<option value=""></option>';
            var valu = JSON.parse(data);
            $.each(valu,function(i,o){
                opHtml += '<option value="'+o.UnitId+'">' +o.UnitNo+'</option>';
            });
            $('#unitId').html(opHtml);
            /*$.each(returnData, function(key, value) {
             $('#unitId').append($("<option/>", {
             value: key,
             text: value
             }));
             });*/
            $('#selSlotNo').val(slotNum);
            $('#selCarTransId').val(carTrsId);
            $('#parkAllot').modal('show');
            //$('#allotcar_'+slotNum).hide();
        });
}

function unallotPark(projId, blkId, unitId, slotNum, carTrsId)
{
    if(confirm("Are you sure want to unallot this?")) {
        $.post(getBaseURL()+'crm/project/allot-park', { unitId: unitId, carTransId: $('#selCarTransId').val(), 'mode': 'delete', slotNum: slotNum },
            function(data) {
                var selSlotNo = slotNum;
                selSlotNo = selSlotNo.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, "\\$1");

                $('#unitId').val('').trigger('change');
                $('#unallotcar_'+selSlotNo).hide();
                $('#unallotsl_'+selSlotNo).hide();
                $('#unitText_'+selSlotNo).hide();
                $('#unitName_'+selSlotNo).hide();
                $('#slot_'+selSlotNo).show();
                $('#allotcar_'+selSlotNo).show();
            });
    }
}

$("#btnAllot").click(function() {
    $.post(getBaseURL()+'crm/project/allot-park', { unitId: $('#unitId').val(), carTransId: $('#selCarTransId').val() },
        function(data) {
            var selSlotNo = $('#selSlotNo').val();
            selSlotNo = selSlotNo.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, "\\$1");

            $('#allotcar_'+selSlotNo).hide();
            $('#unitName_'+selSlotNo).html($('#unitId option:selected').text());
            $('#unallotsl_'+selSlotNo).show();
            $('#unitText_'+selSlotNo).show();
            $('#unitName_'+selSlotNo).show();
        });
});

function deleteslot(projId, blkId, unitId, slotNum, carTrsId){
    var selSlotNo = slotNum;
    selSlotNo = selSlotNo.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, "\\$1");

    if(unitId !=''|| unitId != 0){
        alert("you cannot delete this slot! unallot unit to delete!");
    } else {
        if(confirm("Are you sure want to unallot this?")){
            $.post(getBaseURL()+'crm/project/allot-park', { slotnum: slotNum, 'mode': 'slot' },
                function(data) {
                    $('#grid_'+selSlotNo).hide();
                });
        }
    }
}

$( "#sortable1, #sortable2" ).sortable({
    connectWith: ".connectedSortable"
}).disableSelection();

<?php if($isPost == 1) { ?>
$('#carousel-example-generic').carousel(2);
<?php } ?>
</script>