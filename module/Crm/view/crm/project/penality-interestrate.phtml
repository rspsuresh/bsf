<?php $bsf = new \BuildsuperfastClass(); ?>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/js/select2.full.min.js"></script>
<link type="text/css" rel="stylesheet" href="<?php echo $this->basePath(); ?>/css/select2.min.css" />
<form action="" id="form" method="post">
	<div class="content_wrapper padlr0">
		<div class="container-fluid padlr0">
			<div class="col-lg-12">
				<h1 class="float_l">Project Info of
					<div class="btn-group proname_btn">
						<a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown"><?php echo ucfirst($projectDetail['ProjectName']);?> <span class="edit_symbols" data-placement="right" data-toggle="tooltip" data-original-title="Choose&nbsp;your&nbsp;project"><i class="fa fa-caret-down "></i></span></a> 							
						<div class="dropdown-menu toolbar_ddown proname_ddown arrow" role="menu">
							<ul>
								<?php foreach($projects as $project){?>
									<li><a href="<?php echo $this->basePath(); ?>/crm/project/<?php echo $this->currentRequest()->get('action'); ?>/<?php echo $bsf->encode($project['ProjectId']); ?>"><?php echo ucfirst($project['ProjectName']);?></a></li>
								<?php }	?>
							</ul>
						</div>
					</div>
				</h1>
                <div class="promote_social float_r">
					<ul>
						<span>Promote Project</span>
						<li><a href="#" class="fb_c ripple"><i class="fa fa-facebook-square"></i></a></li>
						<li><a href="#" class="twt_c ripple"><i class="fa fa-twitter-square"></i></a></li>
						<li><a href="#" class="g_c ripple"><i class="fa fa-google-plus-square"></i></a></li>
					</ul>
				</div>
			</div>
			<div class="col-lg-12 clear">
                <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1">
                    <div class="col-lg-12">
                        <div class="row">
                            <div class="step_by_liner animated slideInDown"></div>
                            <ul class="step_by stepby_mb60">
                                <li>
                                    <div class="step_by_sep animated_0_4s slideInRight"><p>8</p></div>
                                    <p class="stepli_p1">Check List Management</p>
                                </li>
                                <li>
                                    <div class="step_by_sep stepsep_active animated slideInRight"><p>9</p></div>
                                    <p class="stepli_p2">Penality & interest Rate</p>
                                </li>
								 <li>
                                    <div class="step_by_sep animated_1_5s slideInRight"><p>10</p></div>
                                    <p class="stepli_p3">Incentive Management</p>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <input type="hidden" name="displayrate" id="displayrate" value="<?php echo $resultRate['Rate'];?>"/>
                <div class="col-lg-6 col-lg-offset-3 col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1">
                	<div class="row"> 
                    	<div class="col-lg-12">
                            <div class="stginner_h5 m_btm20">
                                <h5>Cancellation Penalty</h5>
                            </div>
                            <div class="penality_int_area col-lg-12">
                            	<div class="col-lg-4 col-md-4 col-sm-4 col-xs-6 padlr0"><p style="padding-top:3px;">Booking Cancel</p></div>
                                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-6 padlr0">
                                	<div class="col-lg-5 col-md-5 col-sm-4 col-xs-12 padlr0">
                                    	<div class="radio_check penality_radio_check">
                                            <p>
                                                <input type="radio" <?php if($cancellationDetail['BookingCancelType'] == 'P' || $cancellationDetail['BookingCancelType'] == '') { echo 'checked'; } ?> class="percent_rdoinput" name="bookingCancelType" value="P" id="booking_cancel_yes">
                                                <label class="ripple" for="booking_cancel_yes"></label>
                                            </p>
                                            <p>
                                                <input type="radio" <?php if($cancellationDetail['BookingCancelType'] == 'L') { echo 'checked'; } ?> name="bookingCancelType" class="ls_rdoinput" value="L" id="booking_cancel_no">
                                                <label class="ripple" for="booking_cancel_no"></label>
                                            </p>
                                            
                                            <p>
                                                <input type="radio" name="bookingCancelType" class="sq_rdoinput" value="S" id="booking_cancel_no_sq">
                                                <label class="ripple" for="booking_cancel_no_sq"></label>
                                            </p>
                                            
                                        </div>
                                    </div>
                                    <div class="col-lg-7 col-md-7 col-sm-7 col-xs-12 padlr0"><input type="text" class="lbl_move"  name="bookingCancelValue" id="bookingCancelValue" placeholder="value" onKeyPress="return isDecimal(event,this);" onblur="return validateCharacter(this);" value="<?php echo $this->commonHelper()->sanitizeNumber($cancellationDetail['BookingCancelValue'],2,false); ?>" /></div>
                                </div>
                            </div>
                            <div class="penality_int_area col-lg-12 clear">
                            	<div class="col-lg-4 col-md-4 col-sm-4 col-xs-6 padlr0"><p style="padding-top:3px;">Block Cancel</p></div>
                                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-6 padlr0">
                                	<div class="col-lg-5 col-md-5 col-sm-4 col-xs-12 padlr0">
                                    	<div class="radio_check penality_radio_check">
                                            <p>
                                                <input type="radio" <?php if($cancellationDetail['BlockCancelType'] == 'P' || $cancellationDetail['BlockCancelType'] == '') { echo 'checked'; } ?> class="percent_rdoinput" name="blockCancelType" value="P" id="block_cancel_yes">
                                                <label class="ripple" for="block_cancel_yes"></label>
                                            </p>
                                            <p>
                                                <input type="radio" <?php if($cancellationDetail['BlockCancelType'] == 'L') { echo 'checked'; } ?> name="blockCancelType" class="ls_rdoinput" value="L" id="block_cancel_no">
                                                <label class="ripple" for="block_cancel_no"></label>
                                            </p>
                                            <p>
                                                <input type="radio" name="blockCancelType" class="sq_rdoinput" value="S" id="block_cancel_no_sq">
                                                <label class="ripple" for="block_cancel_no_sq"></label>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="col-lg-7 col-md-7 col-sm-7 col-xs-12 padlr0"><input type="text" class="lbl_move" name="blockCancelValue" id="blockCancelValue" placeholder="value" onKeyPress="return isDecimal(event,this);" onblur="return validateCharacter(this);" value="<?php echo $this->commonHelper()->sanitizeNumber($cancellationDetail['BlockCancelValue'],2,false); ?>" /></div>
                                </div>
                            </div>
                            <div class="penality_int_area col-lg-12 clear">
                            	<div class="col-lg-4 col-md-4 col-sm-4 col-xs-6 padlr0"><p style="padding-top:3px;">Unit Cancel</p></div>
                                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-6 padlr0">
                                	<div class="col-lg-5 col-md-5 col-sm-4 col-xs-12 padlr0">
                                    	<div class="radio_check penality_radio_check">
                                            <p>
                                                <input type="radio" <?php if($cancellationDetail['UnitCancelType'] == 'P' || $cancellationDetail['UnitCancelType'] == '') { echo 'checked'; } ?> class="percent_rdoinput" name="unitCancelType" value="P" id="unit_cancel_yes">
                                                <label class="ripple"  for="unit_cancel_yes"></label>
                                            </p>
                                            <p>
                                                <input type="radio" <?php if($cancellationDetail['UnitCancelType'] == 'L') { echo 'checked'; } ?> name="unitCancelType" class="ls_rdoinput" value="L" id="unit_cancel_no">
                                                <label class="ripple" for="unit_cancel_no"></label>
                                            </p>
                                            <p>
                                                <input type="radio" name="unitCancelType" class="sq_rdoinput" value="S" id="unit_cancel_no_sq">
                                                <label class="ripple" for="unit_cancel_no_sq"></label>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="col-lg-7 col-md-7 col-sm-7 col-xs-12 padlr0"><input type="text" class="lbl_move"  name="unitCancelValue" id="unitCancelValue" placeholder="value" onKeyPress="return isDecimal(event,this);" onblur="return validateCharacter(this);" value="<?php echo $this->commonHelper()->sanitizeNumber($cancellationDetail['UnitCancelValue'],2,false); ?>" /></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row"> 
                    	<div class="form-group col-lg-12 padtop20">
                            <div class="stginner_h5 m_btm30">
                                <h5>Interest Calculation</h5>
                            </div>
                            <div class="form-group col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1 padtop10">
                                <select name="intCalcOn" id="intCalcOn" class="single_dropdown lbl_move" style="width:100%;" label="Interest Calculation Based On" >
                                	<option value=""></option>
                                    <option value="S" <?php if($resultDetail['IntCalculationOn'] == 'S') { echo 'selected'; } ?>>Stage Completion</option>
                                    <option value="P" <?php if($resultDetail['IntCalculationOn'] == 'P') { echo 'selected'; } ?>>Progress Bill</option>
                                </select>
                                <div class="error_message"><p>Please select Interest Calculation Based On...</p></div>
                            </div> 
                            <div class="form-group col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1 padtop10">
                                <select name="intCalcFrom" id="intCalcFrom" class="single_dropdown lbl_move" style="width:100%;" label="Interest Calculation From" >
                                	<option value=""></option>
                                    <option value="S" <?php if($resultDetail['IntCalculationFrom'] == 'S') { echo 'selected'; } ?>>Schedule Amount</option>
                                    <option value="B" <?php if($resultDetail['IntCalculationFrom'] == 'B') { echo 'selected'; } ?>>Buyer Amount</option>
                                </select>
                                <div class="error_message"><p>Please select Interest Calculation Based On...</p></div>
                            </div> 
                        </div>
                    </div>
                    				
               </div>
		</div>
	</div>

	<div class="col-lg-12 savebtn_area">
		<ul>
			<li class="save_btn m_right10 float_r"><input type="submit" name="saveExit float_r" class="ripple continue" value="Save &amp; Exit"/></li>
		    <li class="save_btn m_right10 float_r"><input type="submit" name="saveNext" class="ripple continue float_l" value="Save &amp; Next"/></li>
			
			<li class="goto">
				<label for="go_to" class="float_l">Go to</label> 
				<select id="projectSteps" name="go_to" class="float_l goto_select">
					<option value="general" <?php if($this->currentRequest()->get('action') == 'general') { echo 'selected'; } ?>>General</option>
					<option value="land-area" <?php if($this->currentRequest()->get('action') == 'land-area') { echo 'selected'; } ?>>Area Details</option>
					<option value="land-cost" <?php if($this->currentRequest()->get('action') == 'land-cost') { echo 'selected'; } ?>>Land Cost Calculation</option>
					<option value="other-cost" <?php if($this->currentRequest()->get('action') == 'other-cost') { echo 'selected'; } ?>>Other Cost Details</option>
					<option value="payment" <?php if($this->currentRequest()->get('action') == 'payment-schedule' || $this->currentRequest()->get('action') == 'payment-schedule-edit' || $this->currentRequest()->get('action') == 'payment-schedule-register' || $this->currentRequest()->get('action') == 'payment') { echo 'selected'; } ?>>Payment Schedule</option>
                    <option value="unit-type-register" <?php if($this->currentRequest()->get('action') == 'unit-type-register' || $this->currentRequest()->get('action') == 'unit-type' || $this->currentRequest()->get('action') == 'unit-type-edit') { echo 'selected'; } ?>>Unit Type</option>
                    <option value="facility" <?php if($this->currentRequest()->get('action') == 'facility' || $this->currentRequest()->get('action') == 'car-park' || $this->currentRequest()->get('action') == 'other-facility') { echo 'selected'; } ?>>Facility Management</option>
					<option value="checklist" <?php if($this->currentRequest()->get('action') == 'checklist') { echo 'selected'; } ?>>Check List Management</option>
					<option value="penality-interestrate" <?php if($this->currentRequest()->get('action') == 'penality-interestrate') { echo 'selected'; } ?>>Penality & Interest Rate</option>
					<option value="incentive-register" <?php if($this->currentRequest()->get('action') == 'incentive-register') { echo 'selected'; } ?>>Incentive Management</option>
				    <option value="property-management" <?php if($this->currentRequest()->get('action') == 'property-management') { echo 'selected'; } ?>>Property Management</option>
				</select>
                <p class="donecngs_p">Done With Your Changes ?</p>
			</li>
		</ul>
	</div>
</form>
<!--Page Scripts-->
<script>
$(document).ready(function() {
	$(".single_dropdown").select2({
		placeholder: "",
		allowClear: true
	});
});
$("#projectSteps").change(function(){
	window.location.href= getBaseURL() + "crm/project/"+this.value+"/<?php echo $bsf->encode($projectId); ?>";	
});

$('input[name="bookingCancelType"]').on('change', function() {
    $('#bookingCancelValue').val('');
});
$('input[name="blockCancelType"]').on('change', function() {
    $('#blockCancelValue').val('');
});
$('input[name="unitCancelType"]').on('change', function() {
    $('#unitCancelValue').val('');
});

function validateCharacter(th) {
    var newVal = $(th).val();
    var newData = newVal.split('.');
    var len =newData[0].length;
    if(len>15) {
        var splitNum = len-15;
        newVal = newData[0].slice(0, '-'+ splitNum);
        if(typeof newData[1] != 'undefined') {
            newVal = newVal+'.'+newData[1];
        }
    }
    $(th).val(parseFloatVal(newVal).toFixed(2));
}
$('#bookingCancelValue').change(function(){
 var checkdata =   $("input[name='bookingCancelType']:checked").val();

   if(checkdata == 'P' && $('#bookingCancelValue').val() >100 ){
       $('#bookingCancelValue').val('');
       alert("percentage not exceed 100");
       $('#bookingCancelValue').focus();
       return false;
     }
   else if($('#bookingCancelValue').val() > $("#displayrate").val() && checkdata == 'S'){
       $('#bookingCancelValue').val('');
       alert("sqft rate not exceed unittype rate");
       $('#bookingCancelValue').focus();
       return false;

    }
});
$('#blockCancelValue').change(function(){
    var checkdata =   $("input[name='blockCancelType']:checked").val();

    if(checkdata == 'P' && $('#blockCancelValue').val() >100 ){
        $('#blockCancelValue').val('');
        alert("percentage not exceed 100");
        $('#blockCancelValue').focus();
        return false;
    }
    else if($('#blockCancelValue').val() > $("#displayrate").val() && checkdata == 'S'){
        $('#blockCancelValue').val('');
        alert("sqft rate not exceed unittype rate");
         $('#blockCancelValue').focus();
        return false;

    }
});
$('#unitCancelValue').change(function(){
    var checkdata =   $("input[name='unitCancelType']:checked").val();

    if(checkdata == 'P' &&  $('#unitCancelValue').val() >100 ){
        $('#unitCancelValue').val('');
        alert("percentage not exceed 100");
        $('#unitCancelValue').focus();
        return false;
    }
    else if($('#unitCancelValue').val() > $("#displayrate").val() && checkdata == 'S'){
        $('#unitCancelValue').val('');
        alert("sqft rate not exceed unittype rate");
        $('#unitCancelValue').focus();
        return false;

    }
});


</script>
<!--Page Scripts-->