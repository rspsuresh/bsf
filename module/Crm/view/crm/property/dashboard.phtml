<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/amcharts/amcharts.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/amcharts/pie.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/amcharts/serial.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/amcharts/funnel.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/amcharts/themes/light.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/amcharts/themes/dark.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/library/Highcharts-4.2.3/js/highcharts.js"></script>
<script type="text/javascript" src="<?php echo $this->basepath(); ?>/library/Highcharts-4.2.3/js/modules/exporting.js"></script>
<script type="text/javascript" src="<?php echo $this->basepath(); ?>/library/Highcharts-4.2.3/js/highcharts-3d.js"></script>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/js/slimscroll.js"></script>
<style>
@import url(http://fonts.googleapis.com/css?family=Lato:200,300);
.maintag {
    border: 1px solid #ddd;
    border-radius: 4px;
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05) !important;
    display: inline-block;
    margin-bottom: 20px;
    width: 100%;
}
.maintag-body {
    display: inline-block;
    padding: 10px;
    width: 100%;
	background: #fff !important;
}
.maintag-heading {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    border-top-left-radius: 3px;
    border-top-right-radius: 3px;
    color: #fff;
    font-size: 20px;
    padding: 5px 10px;
}
.maintag-body p{color:rgba(0, 0, 0, 0.70);}
.list {
    background-color: #eef0f2;
    border-radius: 2px;
    color: #000;
    max-height: 100%;
    transition: box-shadow 150ms ease 0s;
	box-shadow:0 1px 1px rgba(0, 0, 0, 0.05) !important; border:1px  solid #ddd; flex-direction: column;display: flex;
}
.headrclrcrm {
    background-color: #7986cb !important;
	padding:10px;
}
.ml-seperator {
    margin: 0 auto;
    padding: 10px;
}
.ml-seperator::after, .ml-seperator::before {
    background-color: #d7cfd8;
    content: "";
    display: inline-block;
    height: 1px;
    vertical-align: middle;
    width: 70px;
}
.ml-seperator .ml-seperator-label {
    color: #969595;
    display: inline-block;
    font-size: 12px;
    position: relative;
}
.p-a-md {
    padding: 4px 10px  !important;
}
.b-t {
    border-top: 0.0625rem solid #e4e4e4;
}
.b-t-b {
    border-bottom: 0.0625rem solid #e4e4e4;
}
.ldrgstr_proimg50 {
    height: 50px;
    margin-bottom: 0 !important;
    width: 50px;
}
.namrs{padding-top: 15px;font-size: 14px; font-weight:600;}
.headp {
    color: #06528c !important;
    font-size: 16px;
    font-weight: 600 !important;
}
.amontbackclr {
    color: #fff;
    position: relative;padding:0.2em 0.4em !important;border-radius: 0.25em; font-size:12px !important;
}
</style>
<div class="content_wrapper padlr0">
    <div class="container-fluid padlr0">
		<div class="col-lg-12 commargin_bottom">
			<h1 class="float_l">Property Management Dashboard <?php if(isset($projectId)) { ?> of  <?php } ?>
				<div class="btn-group proname_btn">
					<a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown"><?php if(isset($projectId)) { echo ucfirst($projectDetail['ProjectName']);  } ?> <span class="edit_symbols" data-placement="right" data-toggle="tooltip" data-original-title="Choose&nbsp;your&nbsp;project"><i class="fa fa-caret-down "></i></span></a>
					<div class="dropdown-menu toolbar_ddown proname_ddown arrow" role="menu">
						<ul>
							<?php foreach($projects as $project){?>
								<li>
									<a href="<?php echo $this->basePath(); ?>/crm/property/<?php echo $this->currentRequest()->get('action'); ?>/<?php echo $project['ProjectId']; ?>"><?php echo ucfirst($project['ProjectName']);?></a>
								</li>
							<?php }	?>
						</ul>
					</div>
				</div>
			</h1>
           <div style="clear:both;"></div>
		</div>
		<div  class="col-lg-12">
			<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres fadeInRightBig animated_1_5s ">
				<section class="maintag bckgrnd1">
                    <header class="maintag-heading"> <i class="fa fa-list-alt"></i> <span class="fntsz16">&nbsp;Rental Service</span></header>
                    <div class="maintag-body" data-bsfshare="Rental Service">
                        <p>
                            <span class="float_l">Total Rental Service</span>
                            <span class="float_r"><?php echo $BookingUnits; ?></span>
                        </p>
                        <div class="clear"></div>
                        <p class="commargin_top5">
                            <span class="float_l">Available For Rent</span>
                            <span class="float_r">5000</span>
                        </p>
                        <div class="clear"></div>
                    </div>
                </section>
			</div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres fadeInRightBig animated_1_5s ">
				<section class="maintag bckgrnd13">
                    <header class="maintag-heading"> <i class="fa fa-list-alt"></i> <span class="fntsz16">&nbsp;Rent</span></header>
                    <div class="maintag-body" data-bsfshare="Rent">
                        <p>
                            <span class="float_l">Receivable Rent</span>
                            <span class="float_r">5000</span>
                        </p>
                        <div class="clear"></div>
                        <p class="commargin_top5" style="color:rgba(0, 0, 0, 0.70);">
                            <span class="float_l">Received Rent</span>
                            <span class="float_r">5000</span>
                        </p>
                        <div class="clear"></div>
                    </div>
                </section>
			</div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres fadeInRightBig animated_1_5s ">
				<section class="maintag bckgrnd16">
                    <header class="maintag-heading"> <i class="fa fa-list-alt"></i> <span class="fntsz16">&nbsp;Maintainance</span></header>
                    <div class="maintag-body" data-bsfshare="Maintainance">
                        <p>
                            <span class="float_l">Receivable Rent</span>
                            <span class="float_r">5000</span>
                        </p>
                        <div class="clear"></div>
                        <p class="commargin_top5">
                            <span class="float_l">Received Rent</span>
                            <span class="float_r">5000</span>
                        </p>
                        <div class="clear"></div>
                    </div>
                </section>
			</div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres fadeInRightBig animated_1_5s ">
				<section class="maintag bckgrnd14">
                    <header class="maintag-heading"> <i class="fa fa-list-alt"></i> <span class="fntsz16">&nbsp;Deposit Received</span></header>
                    <div class="maintag-body" data-bsfshare="Deposite Received" style=" padding-top:25px; padding-bottom:25px;">
                        <p>
                            <span class="float_l">Amount</span>
                            <span class="float_r">5000</span>
                        </p>
                        <div class="clear"></div>
                    </div>
                </section>
			</div>
		</div>
        <div style="clear:both;"></div>
        <div class="col-lg-12">
            <div class="col-lg-6">
                <section class="pnnal">
                    <header class="pnnal-heading"><i class="fa fa-bar-chart"></i> <span class="fntsz16">&nbsp;Monthly Received</span></header>
                    <div class="pnnal-body">
                        <div id="2ndchartdiv" class="wdthhtchartdiv darkchart"></div>
                    </div>
                </section>
            </div>
            <div class="col-lg-6">
                <section class="pnnal">
                    <header class="pnnal-heading"><i class="fa fa-bar-chart"></i> <span class="fntsz16">&nbsp;Monthly Spent</span></header>
                    <div class="pnnal-body">
                        <div id="3rdchartdiv" class="wdthhtchartdiv"></div>
                    </div>
                </section>
            </div>
        </div>
        <div class="col-lg-12 ">
            <div class="col-lg-6">
                <div align="center">
                    <div style="width:100%">
                        <div align="center" class="list">
                            <div class="headrclrcrm"  style="background:#1fb5ad !important;">
                                <div class="">
                                    <h2 data-bsfshare="Agreement expeired" style="color:white; font-weight:500 !important; padding: 0px !important;">Agreement expired in 7 days</h2>
                                    <!--<h4 style="padding: 0px 3px !important;clear:both;">3013 users in the database</h4>-->
                                </div>
                            </div>
                            <div class="ml-seperator">
                                <div class="ml-seperator-label">
                                    <?php echo date('M Y'); ?>
                                </div>
                            </div>
                            <div class="b-t-b p-a-md b-t" style="width: 100%; background:white;">
                                <p style="width:width:37%;" class="pull-right headp">Unit Number</p> 
                                <p style="width:30%;" class="pull-left  headp">Owner Name</p>
                                <p style="width:29%;" class="text-center headp">Agreement No.</p>
                                <div style="clear:both;"></div>
                            </div>
                            <div  align="center" class="scrlcrm" style="width:100%; padding-bottom:20px;height:303px; background:white;">
                                <ul>
								<?php if(isset($Aggrement)):
											foreach($Aggrement as $aggrement): ?>
                                        <li class="b-t p-a-md" style="width: 100%">
                                            <span style="width:width:37%; margin-top:15px;" class="pull-right namrs amontbackclr crmbrdrclrbck8"><?php echo $aggrement['UnitNo']; ?></span>
                                            <p style="width:30%;" class=" namrs pull-left"><?php echo $aggrement['BookingName']; ?></p>
                                            <p class="text-center namrs" style="width:20%;"><?php echo $aggrement['RefNo']; ?></p>
                                            <div style="clear:both;"></div>
                                        </li>
										<?php endforeach;
											endif; ?>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
             <div class="col-lg-6">
                <section class="pnnal">
                    <header class="pnnal-heading"><i class="fa fa-bar-chart"></i> <span class="fntsz16">&nbsp;Unoccupied Units</span></header>
                    <div class="pnnal-body">
                        <div id="1stchartdiv" class="wdthhtchartdiv"></div>
                    </div>
                </section>
            </div>
        </div> 
        <div class="col-lg-12">
            <div class="col-lg-6">
                <section class="pnnal">
                    <header class="pnnal-heading"><i class="fa fa-bar-chart"></i> <span class="fntsz16">&nbsp;Income Vs Actual Spent</span></header>
                    <div class="pnnal-body">
                        <div id="4thchartdiv" class="wdthhtchartdiv darkchart"></div>
                    </div>
                </section>
            </div>
            <div class="col-lg-6">
                <section class="pnnal">
                    <header class="pnnal-heading"><i class="fa fa-bar-chart"></i> <span class="fntsz16">&nbsp;Monthly Rental Agreement Count</span></header>
                    <div class="pnnal-body">
                        <div id="5thchartdiv" class="wdthhtchartdiv"></div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>    
<script>
/* --------1st chart--------*/
var chartData = [ {
  "category": "Unit Left For Rent",
   "value1": <?php echo $BookingUnits;?>,
  "value2": <?php echo $RemaingUnits;?>
} ];
var chart = AmCharts.makeChart( "1stchartdiv", {
   "theme": "light",
  "type": "serial",
  "depth3D": 100,
  "angle": 30,
  "autoMargins": false,
  "marginBottom": 100,
  "marginLeft": 100,
  "dataProvider": chartData,
  "legend": {
        "autoMargins": false,
        "borderAlpha": 0.2,
        "equalWidths": false,
        "horizontalGap": 10,
        "markerSize": 10,
        "useGraphSettings": true,
        "valueAlign": "left",
        "valueWidth": 0
  },
  "valueAxes": [ {
    "stackType": "100%",
    "gridAlpha": 0
  } ],
  "graphs": [ {
    "type": "column",
    "topRadius": 1,
    "columnWidth": 1,
    "showOnAxis": true,
    "lineThickness": 2,
    "lineAlpha": 0.5,
    "lineColor": "#FFFFFF",
    "fillColors": "#62C4FF",
	"title": "Sold",
    "fillAlphas": 0.8,
    "valueField": "value1"
	
  }, {
    "type": "column",
    "topRadius": 1,
    "columnWidth": 1,
    "showOnAxis": true,
    "lineThickness": 2,
    "lineAlpha": 0.5,
    "lineColor": "#cdcdcd",
    "fillColors": "#cdcdcd",
	"title": "Remaining",
    "fillAlphas": 0.5,
    "valueField": "value2"
  } ],

  "categoryField": "category",
  "categoryAxis": {
    "axisAlpha": 0,
    "labelOffset": 40,
    "gridAlpha": 0
  },
  "export": {
    "enabled": true
  }
} );
/* --------1st chart End--------*/
/* --------2nd chart--------*/
var chartData = generateChartData();
var chart = AmCharts.makeChart("2ndchartdiv", {
    "type": "serial",
    "theme": "dark",
    "autoMarginOffset": 20,
    "marginTop": 7,
    "dataProvider": chartData,
    "valueAxes": [{
        "axisAlpha": 0.2,
        "dashLength": 1,
        "position": "left"
    }],
    "mouseWheelZoomEnabled": true,
    "graphs": [{
        "id": "g1",
        "balloonText": "[[value]]",
        "bullet": "round",
        "bulletBorderAlpha": 1,
        "bulletColor": "#FFFFFF",
        "hideBulletsCount": 50,
        "title": "red line",
        "valueField": "visits",
        "useLineColorForBulletBorder": true,
        "balloon":{
            "drop":true
        }
    }],
    "chartScrollbar": {
        "autoGridCount": true,
        "graph": "g1",
        "scrollbarHeight": 40
    },
    "chartCursor": {
       "limitToGraph":"g1"
    },
    "categoryField": "date",
    "categoryAxis": {
        "parseDates": true,
        "axisColor": "#DADADA",
        "dashLength": 1,
        "minorGridEnabled": true
    },
    "export": {
        "enabled": true
    }
});

chart.addListener("rendered", zoomChart);
zoomChart();

// this method is called when chart is first inited as we listen for "rendered" event
function zoomChart() {
    // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
    chart.zoomToIndexes(chartData.length - 40, chartData.length - 1);
}


// generate some random data, quite different range
function generateChartData() {
    var chartData = [];
    var firstDate = new Date();
    firstDate.setDate(firstDate.getDate() - 5);

    for (var i = 0; i < 1000; i++) {
        // we create date objects here. In your data, you can have date strings
        // and then set format of your dates using chart.dataDateFormat property,
        // however when possible, use date objects, as this will speed up chart rendering.
        var newDate = new Date(firstDate);
        newDate.setDate(newDate.getDate() + i);

        var visits = Math.round(Math.random() * (40 + i / 5)) + 20 + i;

        chartData.push({
            date: newDate,
            visits: visits
        });
    }
    return chartData;
}
/* --------2nd chart End--------*/
/* --------3rd chart--------*/
var chartData = generateChartData();
var chart = AmCharts.makeChart("3rdchartdiv", {
    "type": "serial",
    "theme": "none",
    "autoMarginOffset": 20,
    "marginTop": 7,
    "dataProvider": chartData,
    "valueAxes": [{
        "axisAlpha": 0.2,
        "dashLength": 1,
        "position": "left"
    }],
    "mouseWheelZoomEnabled": true,
    "graphs": [{
        "id": "g1",
        "balloonText": "[[value]]",
        "bullet": "round",
        "bulletBorderAlpha": 1,
        "bulletColor": "#FFFFFF",
        "hideBulletsCount": 50,
        "title": "red line",
        "valueField": "visits",
        "useLineColorForBulletBorder": true,
        "balloon":{
            "drop":true
        }
    }],
    "chartScrollbar": {
        "autoGridCount": true,
        "graph": "g1",
        "scrollbarHeight": 40
    },
    "chartCursor": {
       "limitToGraph":"g1"
    },
    "categoryField": "date",
    "categoryAxis": {
        "parseDates": true,
        "axisColor": "#DADADA",
        "dashLength": 1,
        "minorGridEnabled": true
    },
    "export": {
        "enabled": true
    }
});

chart.addListener("rendered", zoomChart);
zoomChart();

// this method is called when chart is first inited as we listen for "rendered" event
function zoomChart() {
    // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
    chart.zoomToIndexes(chartData.length - 40, chartData.length - 1);
}


// generate some random data, quite different range
function generateChartData() {
    var chartData = [];
    var firstDate = new Date();
    firstDate.setDate(firstDate.getDate() - 5);

    for (var i = 0; i < 1000; i++) {
        // we create date objects here. In your data, you can have date strings
        // and then set format of your dates using chart.dataDateFormat property,
        // however when possible, use date objects, as this will speed up chart rendering.
        var newDate = new Date(firstDate);
        newDate.setDate(newDate.getDate() + i);

        var visits = Math.round(Math.random() * (40 + i / 5)) + 20 + i;

        chartData.push({
            date: newDate,
            visits: visits
        });
    }
    return chartData;
}
/* --------3rd chart End--------*/
/* --------4th chart--------*/
var chart = AmCharts.makeChart("4thchartdiv", {
    "type": "serial",
    "theme": "dark",
    "marginTop": 17,
    "autoMarginOffset": 20,
    "dataProvider": [{
        "date": "2012-03-01",
        "priceone": 40,
        "price": 20
    }, {
        "date": "2012-03-02",
        "priceone": 82,
        "price": 75
    }, {
        "date": "2012-03-03",
        "priceone": 29,
        "price": 15
    }, {
        "date": "2012-03-04",
        "priceone": 23,
        "price": 75
    }, {
        "date": "2012-03-05",
        "priceone": 49,
        "price": 158
    }, {
        "date": "2012-03-06",
        "priceone": 20,
        "price": 57
    }, {
        "date": "2012-03-07",
        "priceone": 130,
        "price": 107
    }, {
        "date": "2012-03-08",
        "priceone": 120,
        "price": 89
    }, {
        "date": "2012-03-09",
        "priceone": 135,
        "price": 75
    }, {
        "date": "2012-03-10",
        "priceone": 39,
        "price": 132
    }, {
        "date": "2012-03-11",
        "priceone": 26,
        "price": 158
    }, {
        "date": "2012-03-12",
        "priceone": 46,
        "price": 56
    }, {
        "date": "2012-03-13",
        "priceone": 20,
        "price": 169
    }, {
        "date": "2012-03-14",
        "priceone": 90,
        "price": 24
    }, {
        "date": "2012-03-15",
        "priceone": 60,
        "price": 147
    }],
    "valueAxes": [{
        "logarithmic": true,
        "dashLength": 1,
        "guides": [
        {
            "dashLength": 6,
            "inside": true,
            "label": "average-spent",
            "lineAlpha": 1,
            "value": 90.4
        },
        {
            "dashLength": 6,
            "inside": true,
            "label": "average-income",
            "lineAlpha": 1,
            "value": 50
        }
        ],
        "position": "left"
    }],
    "graphs": [
    {
        "bullet": "round",
        "id": "g1",
        "bulletBorderAlpha": 1,
        "bulletColor": "#FFFFFF",
        "bulletSize": 7,
        "lineThickness": 2,
        "title": "Price",
        "type": "smoothedLine",
        "useLineColorForBulletBorder": true,
        "valueField": "price"
    },
    {
        "bullet": "round",
        "id": "g2",
        "bulletBorderAlpha": 1,
        "bulletColor": "#FFFFFF",
        "bulletSize": 7,
        "lineThickness": 2,
        "title": "Priceone",
        "type": "smoothedLine",
        "useLineColorForBulletBorder": true,
        "valueField": "priceone"
    }
    ],
    "chartScrollbar": {},
    "chartCursor": {
        "valueLineEnabled": true,
        "valueLineBalloonEnabled": true,
        "valueLineAlpha": 0.5,
        "fullWidth": true,
        "cursorAlpha": 0.05
    },
    "dataDateFormat": "YYYY-MM-DD",
    "categoryField": "date",
    "categoryAxis": {
        "parseDates": true
    },
    "export": {
        "enabled": true
    }
});

chart.addListener("dataUpdated", zoomChart);

function zoomChart() {
    chart.zoomToDates(new Date(2012, 2, 2), new Date(2012, 2, 10));
}
/* --------4th chart End--------*/
/* --------5th chart--------*/
$(function () {
    $('#5thchartdiv').highcharts({
        chart: {
            type: 'column',
            options3d: {
                enabled: true,
                alpha: 10,
                beta: 25,
                depth: 70
            }
        },
        title: {
            text: 'Monthly Rental'
        },
        plotOptions: {
            column: {
                depth: 25
            }
        },
        xAxis: {
            categories: <?php echo (isset($jsonarrCampCat))?$jsonarrCampCat:"[]"; ?>
        },
        yAxis: {
            title: {
                text: null
            }
        },
        series: [{
            name: 'Sales',
            data:<?php echo (isset($jsonarrCampInvs))?$jsonarrCampInvs:"[]"; ?>
        }]
    });
});
/* --------5th chart End--------*/
</script>