<link type="text/css" rel="stylesheet" href="<?php echo $this->basePath(); ?>/css/cb.css" />
<style type="text/css">
.agreement_paper_area				{background-color:#e5f2e9; border:1px solid #bee5d3; padding:10px 10px; font-family:Georgia, "Times New Roman", Times, serif; }
.agrment_duplicate_img				{margin:auto !important; display:block; padding:10px 0px;}
.agreement_paper_area h2			{font-family:Georgia, "Times New Roman", Times, serif; font-size:15px; color:#343434; font-weight:600; padding-bottom:15px;}
.agreement_paper_area p				{font-size:12px;}
.agreement_paper_area ul			{padding-top:15px;}
.agreement_paper_area li 			{list-style: none; line-height:25px; counter-increment: foo; display: table-row;}
.agreement_paper_area li .agree_title_span		{font-weight:600; display:block; font-size:11px;}
.agreement_paper_area li::before 				{content: counter(foo) ".";display: table-cell;text-align: right; padding-right: .3em;}
.clrbg_select2dropdown .select2-container		{border:1px dashed #4d0c45;}
</style>
<script id="chargedummy-row"  type="text/template" class="hide">
    <div class="empty-charge">
        <div class="input">
            <div class="col-lg-12 m_btm10 padlr0">
                    <div class="col-lg-6 col-md-6 col-sm-6 padlr0">
                        <input type="text" class="inputSetup splcharc" name="charge_name__" id="charge_name__" value="" placeholder="Other Charge" autocomplete="off" onfocus="return checkOtherChargeService(this.id);" onkeypress="addNewRow(this);"/>
                        <input type="hidden" class="inputSetup splcharc" name="charge_id__" id="charge_id__" value="" />
                        <input type="hidden" class="inputSetup splcharc" name="charge_transid__" id="charge_transid__" value="" />
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3 padlr0"><input type="text" class="inputSetup" name="charge_value__" id="charge_value__" value="" placeholder="Amount" autocomplete="off" onkeypress="return isDecimal(event,this);"/></div>
                    <div class="col-lg-3 col-md-3 col-sm-3 padlr0">
                        <select style="width:100%;" name="charge_type__" id="charge_type__" data-bsfshare="ChargeType" class="single_dropdown">
                            <option value="D">per day</option>
                            <option value="W">per week</option>
                            <option value="M">per month</option>
                        </select>
                    </div>
            </div>
        </div>
    </div>
</script>
<script id="householddummy-row"  type="text/template" class="hide">
    <div class="empty-household">
        <div class="input">
            <div class="col-lg-12 m_btm10 padlr0">
                <div class="col-lg-9 col-md-9 col-sm-9 padlr0">
                    <input type="text" class="inputSetup splcharc" name="household_name__" id="household_name__" placeholder="Item" value="" autocomplete="off" onfocus="return checkOtherHousehold(this.id);" onkeypress="addNewRow(this);" />
                    <input type="hidden" class="inputSetup splcharc" name="household_id__" id="household_id__" value=""  />
                    <input type="hidden" class="inputSetup splcharc" name="household_transid__" id="household_transid__" value=""  />
                </div>
                <div class="col-lg-3 col-md-3 col-sm-3 padlr0"><input type="text" class="inputSetup special" name="household_value__" id="household_value__" placeholder="Nos" value="" autocomplete="off" /></div>
            </div>
        </div>
    </div>
</script>
<script id="amenitydummy-row"  type="text/template" class="hide">
    <div class="empty-amenity">
        <div class="input">
            <div class="col-lg-12 m_btm10 padlr0">
                <div class="col-lg-12 col-md-12 col-sm-12 padlr0"><input type="text" class="inputSetup splcharc" name="amenity_name__" id="amenity_name__" autocomplete="off" value="" placeholder="Amenity" onfocus="return checkOtherAmenity(this.id);" onkeypress="addNewRow(this);" /></div>
                <input type="hidden" class="inputSetup splcharc" name="amenity_id__" id="amenity_id__" value=""  />
                <input type="hidden" class="inputSetup splcharc" name="amenity_transid__" id="amenity_transid__" value="" />
            </div>
        </div>
    </div>
</script>
<script id="checklistdummy-row"  type="text/template" class="hide">
    <div class="empty-checklist">
        <div class="input">
            <div class="col-lg-12 m_btm10 padlr0">
                <div class="col-lg-12 col-md-12 col-sm-12 padlr0">
                    <input type="text" class="inputSetup splcharc" name="checklist_name__" id="checklist_name__" value="" placeholder="Check List" autocomplete="off" onfocus="return checkOtherChecklist(this.id);" onkeypress="addNewRow(this);"/>
                    <input type="hidden" class="inputSetup splcharc" name="checklist_id__" id="checklist_id__" value=""  />
                    <input type="hidden" class="inputSetup splcharc" name="checklist_transid__" id="checklist_transid__" value="" />
                </div>
            </div>
        </div>
    </div>
</script>
<script id="documentdummy-row"  type="text/template" class="hide">
    <div class="empty-document">
        <div class="input">
            <div class="col-lg-12 m_btm10 padlr0">
                <div class="col-lg-5 col-md-5 col-sm-5 padlr0">
                    <input type="text" class="inputSetup splcharc" name="document_name__" id="document_name__" value="" autocomplete="off" placeholder="Document" onkeypress="addNewRow(this);" />
                    <input type="hidden" class="inputSetup splcharc" name="document_transid__" id="document_transid__" value=""  />
                </div>
                <div class="col-lg-7 col-md-7 col-sm-7 padlr0">
                    <span class="col-lg-10 col-md-3 col-sm-3 filenameid" id="filenameid__"></span>
                    <ul class="action_btns">
<!--                        <li>-->
<!--                            <a href="#"><span data-original-title="Document Views" data-placement="left" data-toggle="tooltip"><i class="fa fa-eye"></i></span></a>-->
<!--                        </li>-->
                        <li class="opacity_1">
                            <a href="#"><span class="btn-file butclr_imp" data-original-title="Documents Attached"
                                              data-placement="left" data-toggle="tooltip">
                                    <i class="fa fa-paperclip dcm_atch"></i>
                                    <input type="file" name="document__" id="document__" onchange="documentFile(this);">
                                </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-lg-12 error_message position_rel"><p>File Required</p></div>
    </div>
</script>
<div class="content_wrapper padlr0">
    <form method="post" id="theform" enctype="multipart/form-data">
        <div class="container-fluid padlr0">
            <div class="col-lg-12">
                <h1 class="txt_center" data-bsfhead="Lease Agreement">Rental/ Lease Agreement</h1>
            </div>
            <div class="col-lg-12 clear padlr0">
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                    <div class="col-lg-offset-3">
                        <label for="refno" class="bk_lbl bk_lbl_inpt splcharc">Ref No <span class="colon_r">:</span></label>
                        <input type="text" class="bk_lbl_inpt inputbg_ef bk_inpt1 splcharc" name="refno" data-bsfshare="RefNo" id="refno" onchange="agreementBind('ref_no',$(this).val());" value="<?php echo (isset($ownerDetail)) ? $ownerDetail['RefNo'] : '';?>" />
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 col-lg-pull-1 col-md-pull-1 col-sm-pull-1">
                    <div class="col-lg-offset-6">
                        <label for="refdate" class="bk_lbl bk_lbl_inpt"><span class="bkspan_calendar"><i class="fa fa-calendar-o"></i></span> Ref Date <span class="colon_r">:</span></label>
                        <?php
                        $referDate = null;
                        if(isset($ownerDetail['RefDate'])){
                            $referDate = date('d-m-Y', strtotime($ownerDetail['RefDate']));
                        }?>
                        <input type="text" class="date_picker bk_lbl_inpt bk_inpt inputbg_ef" name="refdate" data-bsfshare="RefDate" readonly id="refdate" onchange="agreementBind('ref_date',$(this).val());" value="<?php echo $referDate; ?>" />
                    </div>
                </div>
            </div>
            <div class="col-lg-12 clear">
                <div class="liner"></div>
            </div>
			
			<div class="col-lg-12 clear" style="background-color:#fff;">
				<!-- Owner Info -->
				<div id="rentalAgree_1" class="col-lg-6 padlr0 m_top10">
					<div class="signup_onebyone_content">
						<div class="setup_form prop_mnmt_form">
							<div class="flwup_rightcnt"><h2 data-bsfhead="Owner Info">Owner Info</h2></div>
							<ul class="onebyone_form">
								<li id="q1" class="active focus">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is the Project/Unit/Owner?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
                                               <input type="hidden" id="lead" name="lead" value="<?php echo (isset($ownerDetail)) ? $ownerDetail['LeadId'] : $rentlead; ?>" />
                                                <input type="text" id="projectname" data-bsfshare="Project Name" name="projectname" value="<?php echo (isset($ownerName)) ? $ownerName['value'] : '';?>" placeholder="Project/ Unit/ Owner" class="inputSetup" autocomplete="off" />
                                                <input type="hidden" id="unitid" name="unitid" value="<?php echo (isset($ownerName)) ? $ownerName['data'] : '';?>" />
                                                <input type="hidden" id="leadid" name="leadid" value="" />
                                                <input type="hidden" id="unitNo" name="unitNo" value="" onchange="agreementBind('unit',$(this).val());" />
                                                <input type="hidden" id="project" name="project" value="" onchange="agreementBind('project',$(this).val());" />
                                                <input type="hidden" id="leadname" name="leadname" value="" onchange="agreementBind('owner',$(this).val());"/>
                                                <input type="hidden" id="mode" name="mode" value="<?php echo (isset($mode)) ? $mode : ""; ?>" />
                                                <input type="hidden" name="rentalregisterid" id="rentalregisterid" value="<?php echo (isset($rentalRegisterId)) ? $rentalRegisterId : '0';?>" />
                                            </div>
											<div class="col-lg-12 error_message"><p>Required</p></div>
										</div>
									</div>
								</li>
                                <li id="q2" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is their Permanent Address?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
												<input type="text" id="address" name="address" data-bsfshare="Address" autocomplete="off" onchange="agreementBind('owner_permanant_address',$(this).val());" placeholder="Address" value="<?php echo (isset($ownerDetail)) ? $ownerDetail['Address'] : ''; ?>" class="inputSetup" />
											</div>
											<div class="col-lg-12 error_message"><p>Required</p></div>
										</div>
									</div>
								</li>
								<li id="q3" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is their PAN?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
												<input type="text" id="pan_no" name="pan_no" data-bsfshare="PanNo" autocomplete="off" onchange="agreementBind('owner_panno',$(this).val());" placeholder="PAN No" value="<?php echo (isset($ownerDetail)) ? $ownerDetail['PANNo'] : ''; ?>" class="inputSetup splcharc" maxlength="10" />
											</div>
											<div class="col-lg-12 error_message"><p>Required</p></div>
										</div>
									</div>
								</li>
								<li id="q4" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">Has the Owner appointed a Power of Attorney?</span>
										</div>
										<div class="onebyone_content">
											<div class="radio_check">
												<p>
													<input type="radio" value="1" id="powerattorneyyes" <?php if(isset($ownerDetail)) { echo ($ownerDetail['IsPowerOfAttorney']=="1") ? 'checked':''; } ?> name="powerattorney" checked />
													<label for="powerattorneyyes" class="ripple">Yes</label>
												</p>
												<p>
													<input type="radio" value="0" id="powerattorneyno" <?php if(isset($ownerDetail)) {  echo ($ownerDetail['IsPowerOfAttorney']=="0") ? 'checked':''; } ?> name="powerattorney" />
													<label for="powerattorneyno" class="ripple">No</label>
												</p>
											</div>
                                        </div>
									</div>
								</li>
								<li id="q5" class="attorney_hide" <?php if(isset($ownerDetail) && $ownerDetail['IsPowerOfAttorney']==0) { echo "style='display:none;'"; } ?> >
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is the Power of Attorney holder name?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
												<input type="text" id="attorney_name" name="attorney_name" data-bsfshare="Attorney Name" autocomplete="off" onchange="agreementBind('poa_name',$(this).val());" placeholder="Name" value="<?php echo (isset($ownerDetail)) ? $ownerDetail['PAName'] : ''; ?>" class="inputSetup splcharc" />
											</div>
											<div class="col-lg-12 error_message"><p>Required</p></div>
										</div>
									</div>
								</li>
                                <li id="q6" class="attorney_hide" <?php if(isset($ownerDetail) && $ownerDetail['IsPowerOfAttorney']==0) { echo "style='display:none;'"; }?> >
                                    <div class="onebyone_wrapper">
                                        <div class="li_number">
                                            <span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
                                            <div class="arrow">
                                                <span><i class="fa fa-arrow-right"></i></span>
                                            </div>
                                        </div>
                                        <div class="onebyone_question" >
                                            <span class="span_b">What is the Address of Power of Attorney?</span>
                                        </div>
                                        <div class="onebyone_content">
                                            <div class="input">
                                                <input type="text" id="attorney_address" data-bsfshare="Attorney Address" name="attorney_address" autocomplete="off" onchange="agreementBind('address_of_poa',$(this).val());" placeholder="Address" value="<?php echo (isset($ownerDetail)) ? $ownerDetail['PAAddress'] : ''; ?>" class="inputSetup" />
                                            </div>
                                            <div class="col-lg-12 error_message"><p>Required</p></div>
                                        </div>
                                    </div>
                                </li>
							</ul>
							<div class="col-lg-12 savebtn_area m_btm20 no_border clear">
								<ul>
									<li class="save_btn float_r">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="left" title="to&nbsp;fill&nbsp;Owner&nbsp;Info" onclick="validateOwner();">Continue</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="clear"></div>
				</div>
                <div id="enddatediv"></div>

            <!-- Tenant Info -->
				<div id="rentalAgree_2" class="col-lg-6 padlr0 m_top10" style="display:none;">
					<div class="signup_onebyone_content">
						<div class="setup_form prop_mnmt_form">
							<div class="flwup_rightcnt"><h2 data-bsfhead="Tenant Info">Tenant Info</h2></div>
							<ul class="onebyone_form">
								<li id="q1" class="active focus">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is the Tenant Name?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
												<input type="text" id="tenantname" data-bsfshare="Tenant Name"  name="tenantname"  onchange="agreementBind('tenant_name',$(this).val());" value="<?php if(isset($tenantDetail)) { echo $tenantDetail['LeaserName']; } else if(isset($tenantName['LeadName'])) { echo $tenantName['LeadName']; } ?>" placeholder="Tenant Name"  class="inputSetup splcharc" autocomplete="off" />
											</div>
											<div class="col-lg-12 error_message"><p>Required</p></div>
										</div>
									</div>
								</li>
								<li id="q2" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is their Permanent Address?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
												<input type="text" id="per_address" data-bsfshare="Per Address" name="per_address" autocomplete="off" onchange="agreementBind('tenant_address',$(this).val());" placeholder="Address" value="<?php if(isset($tenantDetail)) { echo $tenantDetail['Address']; } else if(isset($tenantPanAdd['Address1'])) { echo $tenantPanAdd['Address1']; } ?>" class="inputSetup" />
											</div>
											<div class="col-lg-12 error_message"><p>Required</p></div>
										</div>
									</div>
								</li>
								<li id="q3" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is their PAN?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
												<input type="text" id="tenant_pan_no" data-bsfshare="Tenant PanNo" name="tenant_pan_no" onchange="agreementBind('tenant_panno',$(this).val());" autocomplete="off" placeholder="PAN No" value="<?php if(isset($tenantDetail)) { echo $tenantDetail['PANNo']; } else if(isset($tenantPanAdd['PanNo'])) { echo $tenantPanAdd['PanNo']; } ?>" class="inputSetup splcharc" maxlength="10" />
											</div>
											<div class="col-lg-12 error_message"><p>Required</p></div>
										</div>
									</div>
								</li>
							</ul>
							<div class="col-lg-12 savebtn_area m_btm20 no_border clear">
								<ul>
									<li class="save_btn float_l">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="right" title="back" onclick="return showHideDiv('1');">Back</a>
									</li>
									<li class="save_btn float_r">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="left" title="to&nbsp;fill&nbsp;Tenant&nbsp;Info" onclick="validateTenant();">Continue</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="clear"></div>
				</div>
				
				<!-- Property Details -->
				<div id="rentalAgree_3" class="col-lg-6 padlr0 m_top10" style="display:none;">
					<div class="signup_onebyone_content">
						<div class="setup_form prop_mnmt_form">
							<div class="flwup_rightcnt"><h2 data-bsfhead="Property Details">Property Details</h2></div>
							<ul class="onebyone_form">
								<li id="q1" class="active focus">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is the type of Property?</span>
										</div>
										<div class="onebyone_content">
											<div class="radio_check">
												<p>
													<input type="radio" value="A" id="propertyyes" <?php if(isset($propertyDetail)) { echo (strcmp(trim($propertyDetail['PropertyType']),"A") == 0) ? 'checked':''; }?> name="property_type" checked />
													<label for="propertyyes" class="ripple">Appartment</label>
												</p>
												<p>
													<input type="radio" value="I" id="propertyno" <?php if(isset($propertyDetail)) { echo (strcmp(trim($propertyDetail['PropertyType']),"I") == 0) ? 'checked':''; } ?> name="property_type" />
													<label for="propertyno" class="ripple">Individual Villa</label>
												</p>
											</div>
										</div>
									</div>
								</li>
								<li id="q2" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">How many Bed Room?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
												<input type="text" id="bedroomno" name="bedroomno" data-bsfshare="BedroomNo" onchange="agreementBind('no_of_bed_room',$(this).val());" value="<?php echo (isset($propertyDetail)) ? $propertyDetail['NoOfBedRoom'] : '';?>" placeholder="Nos" onkeypress="return isNumberKey(event);"  class="inputSetup" autocomplete="off" />
											</div>
											<div class="col-lg-12 error_message"><p>Required</p></div>
										</div>
									</div>
								</li>
								<li id="q3" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">How many Bath Room?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
												<input type="text" id="bathroomno" name="bathroomno" data-bsfshare="BathroomNo" onchange="agreementBind('no_of_bath_room',$(this).val());" autocomplete="off" placeholder="Nos" onkeypress="return isNumberKey(event);" value="<?php echo (isset($propertyDetail)) ? $propertyDetail['NoOfBathRoom'] : '';?>" class="inputSetup" />
											</div>
											<div class="col-lg-12 error_message"><p>Required</p></div>
										</div>
									</div>
								</li>
								<li id="q4" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is the area (builtup) of the Property?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
												<input type="text" id="area" name="area" data-bsfshare="Area" autocomplete="off" onchange="agreementBind('area_of_property',$(this).val());" placeholder="Area" onkeypress="return isDecimal(event,this);" value="<?php echo (isset($propertyDetail)) ? $propertyDetail['Area'] : '';?>" class="inputSetup" />
											</div>
											<div class="col-lg-12 error_message"><p>Required</p></div>
										</div>
									</div>
								</li>
								<li id="q5" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is the Property Address?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
												<input type="text" id="proper_address" name="proper_address" data-bsfshare="Proper Address" onchange="agreementBind('property_address',$(this).val());" autocomplete="off" placeholder="Address" value="<?php echo (isset($propertyDetail)) ? $propertyDetail['PropertyAddress'] : '';?>" class="inputSetup" />
											</div>
											<div class="col-lg-12 error_message"><p>Required</p></div>
										</div>
									</div>
								</li>
							</ul>
							<div class="col-lg-12 savebtn_area m_btm20 no_border clear">
								<ul>
									<li class="save_btn float_l">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="right" title="back" onclick="return showHideDiv('2');">Back</a>
									</li>
									<li class="save_btn float_r">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="left" title="to&nbsp;fill&nbsp;Property&nbsp;Info" onclick="validateProperty();">Continue</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="clear"></div>
				</div>
				
				<!-- Agreement Details -->
				<div id="rentalAgree_4" class="col-lg-6 padlr0 m_top10" style="display:none;">
					<div class="signup_onebyone_content">
						<div class="setup_form prop_mnmt_form">
							<div class="flwup_rightcnt"><h2 data-bsfhead="Agreement Details">Agreement Details</h2></div>
							<ul class="onebyone_form">
								<li id="q1" class="active focus">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">When will the Agreement to be Signed?</span>
										</div>
										<div class="onebyone_content">
											<div class="input col-lg-12 padlr0">
                                            	<span class="date_icon"><i class="fa fa-calendar"></i></span>
                                                <?php
                                                $agmtDate = null;
                                                if(isset($agreementDetail['AgtDate'])){
                                                    $agmtDate = date('d-m-Y', strtotime($agreementDetail['AgtDate']));
                                                }?>
												<input type="text" id="agreedate" data-bsfshare="AgreeDate" class="date_picker inputSetup" onchange="agreementBind('date_of_agreement_signed',$(this).val());" name="agreedate" value="<?php echo $agmtDate; ?>" placeholder="Date" autocomplete="off" readonly/>
											</div>
                                            <div class="col-lg-12 error_message position_rel"><p>Required</p></div>
                                        </div>
									</div>
								</li>
								<li id="q2" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is the duration of the Agreement?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
                                                <div class="col-lg-12 m_btm10 padlr0">
                                                    <div class="col-lg-10 col-md-10 col-sm-10 padlr0"><input type="text" data-bsfshare="AgreeDuration" id="agreeduration" onchange="agreementBind('duration_of_agreement',$(this).val());" name="agreeduration" autocomplete="off" placeholder="Duration" value="<?php echo (isset($agreementDetail)) ? $agreementDetail['LeasePeriod'] : '';?>" class="inputSetup special" /></div>
                                                    <div class="col-lg-2 col-md-2 col-sm-2 padlr0">
<!--                                                        <select style="width:100%;" name="duration_type" id="duration_type" class="single_dropdown">-->
<!--                                                            <option value="M">per month</option>-->
<!--                                                        </select>-->
                                                        <input type="hidden" value="M" id="duration_type" name="duration_type" class="inputSetup splcharc"/>
                                                        <span style="padding-top:10px; padding-left:10px; display:inline-block;">Months</span>
                                                    </div>
                                                </div>
											</div>
                                            <div class="col-lg-12 error_message position_rel"><p>Required</p></div>
                                        </div>
									</div>
								</li>
								<li id="q3" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">When will the Agreement Start?</span>
										</div>
										<div class="onebyone_content">
											<div class="input col-lg-12 padlr0">
                                            	<span class="date_icon"><i class="fa fa-calendar"></i></span>
                                                <?php
                                                $agmtStart = null;
                                                if(isset($agreementDetail['StartDate'])){
                                                    $agmtStart = date('d-m-Y', strtotime($agreementDetail['StartDate']));
                                                }?>
												<input type="text" id="agreestart" data-bsfshare="AgreeStart" name="agreestart" onchange="agreementBind('agreement_start_date',$(this).val());" autocomplete="off" placeholder="Date" value="<?php echo $agmtStart; ?>" class="inputSetup date_picker" readonly/>
                                                <div class="col-lg-12 error_message"><p>Required</p></div>
											</div>
                                            <div class="col-lg-12 error_message position_rel"><p>Required</p></div>
                                        </div>
									</div>
								</li>
								<li id="q4" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">Is the Tenant required to give a notice before terminating the agreement?</span>
										</div>
										<div class="onebyone_content">
											<div class="radio_check">
												<p>
													<input type="radio" value="1" id="terminateyes" <?php if(isset($agreementDetail)) { echo ($agreementDetail['IsNoticePeriod']=="1") ? 'checked':''; } ?> name="terminate" checked />
													<label for="terminateyes" class="ripple">Yes</label>
												</p>
												<p>
													<input type="radio" value="0" id="terminateno" <?php if(isset($agreementDetail)) { echo ($agreementDetail['IsNoticePeriod']=="0") ? 'checked':''; } ?> name="terminate" />
													<label for="terminateno" class="ripple">Not Specifiy</label>
												</p>
											</div>
										</div>
									</div>
								</li>
								<li id="q5" class="notice_hide" <?php if(isset($agreementDetail) && $agreementDetail['IsNoticePeriod']==0) { echo "style='display:none;'"; }?>>
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is the notice Period?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
                                                <div class="col-lg-12 m_btm10 padlr0">
                                                    <div class="col-lg-9 col-md-9 col-sm-9 padlr0"><input type="text" id="noticeperiod" data-bsfshare="NoticePeriod" name="noticeperiod" autocomplete="off" onchange="agreementBind('notice_period',$(this).val());" placeholder="Duration" value="<?php echo (isset($agreementDetail)) ? $agreementDetail['NoticePeriod'] : '';?>" class="inputSetup special" maxlength="10"/></div>
                                                    <div class="col-lg-3 col-md-3 col-sm-3 padlr0">
                                                        <select style="width:100%;" data-bsfshare="NoticeType" name="notice_type" id="notice_type" class="single_dropdown">
                                                            <option <?php if (isset($agreementDetail) && strcmp(trim($agreementDetail['NoticePeriodType']),"D") == 0 ) echo 'selected' ; ?> value="D">per day</option>
                                                            <option <?php if (isset($agreementDetail) && strcmp(trim($agreementDetail['NoticePeriodType']),"W") == 0 ) echo 'selected' ; ?> value="W">per week</option>
                                                            <option <?php if (isset($agreementDetail) && strcmp(trim($agreementDetail['NoticePeriodType']),"M") == 0 ) echo 'selected' ; ?> value="M">per month</option>
                                                        </select>
                                                    </div>
                                                </div>
											</div>
											<div class="col-lg-12 error_message position_rel"><p>Required</p></div>
										</div>
									</div>
								</li>
							</ul>
							<div class="col-lg-12 savebtn_area m_btm20 no_border clear">
								<ul>
									<li class="save_btn float_l">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="right" title="back" onclick="return showHideDiv('3');">Back</a>
									</li>
									<li class="save_btn float_r">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="left" title="to&nbsp;fill&nbsp;Agreement&nbsp;Info" onclick="validateAgreement();">Continue</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="clear"></div>
				</div>
				
				<!-- Rent & Security Deposit -->
				<div id="rentalAgree_5" class="col-lg-6 padlr0 m_top10" style="display:none;">
					<div class="signup_onebyone_content">
						<div class="setup_form prop_mnmt_form">
							<div class="flwup_rightcnt"><h2 data-bsfhead="RentSecurity Deposit">Rent & Security Deposit</h2></div>
							<ul class="onebyone_form">
								<li id="q1" class="active focus">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is the Monthly Rent?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
												<input type="text" id="monthlyrent" name="monthlyrent" data-bsfshare="MonthlyRent" onchange="agreementBind('monthly_rent',$(this).val());" value="<?php echo (isset($secureRentDetail)) ? $this->commonHelper()->sanitizeNumber($secureRentDetail['RentAmount'],2) : '';?>" onkeypress="return isDecimal(event,this);" placeholder="Rent Amount" class="inputSetup" autocomplete="off" />
											</div>
											<div class="col-lg-12 error_message"><p>Required</p></div>
										</div>
									</div>
								</li>
								<li id="q2" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is the due day of the each month?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
                                                <select style="width:100%;" name="dueday" data-bsfshare="Dueday" id="dueday" onchange="agreementBind('dueday_of_each_month',$(this).val());" class="single_dropdown">
                                                    <?php
                                                    for($i=1;$i<=31;$i++) { ?>
                                                        <option <?php if(isset($secureRentDetail) && ($secureRentDetail['DueDay']) == $i ) echo 'selected' ; ?> value="<?php echo $i; ?>"><?php echo $i; ?></option>
                                                    <?php } ?>
                                                </select>
											</div>
											<div class="col-lg-12 error_message"><p>Required</p></div>
										</div>
									</div>
								</li>
								<li id="q3" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">Is a Security Deposit required to be paid?</span>
										</div>
										<div class="onebyone_content">
											<div class="radio_check">
												<p>
													<input type="radio" value="1" id="securitydeposityes" <?php if(isset($secureRentDetail)) { echo ($secureRentDetail['IsSecurityDeposit']=="1") ? 'checked':''; } ?> name="securitydeposit" checked />
													<label for="securitydeposityes" class="ripple">Yes</label>
												</p>
												<p>
													<input type="radio" value="0" id="securitydepositno" <?php if(isset($secureRentDetail)) { echo ($secureRentDetail['IsSecurityDeposit']=="0") ? 'checked':''; } ?> name="securitydeposit" />
													<label for="securitydepositno" class="ripple">No</label>
												</p>
											</div>
										</div>
									</div>
								</li>
								<li id="q4" class="deposit_hide" <?php if(isset($secureRentDetail) && $secureRentDetail['IsSecurityDeposit']==0) { echo "style='display:none;'"; }?>>
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">What is the Security Deposit Amount?</span>
										</div>
										<div class="onebyone_content">
											<div class="input">
												<input type="text" id="depositamount" name="depositamount" data-bsfshare="DepositAmount" onchange="agreementBind('security_amount',$(this).val());" autocomplete="off" placeholder="Deposit Amount" value="<?php echo (isset($secureRentDetail)) ? $this->commonHelper()->sanitizeNumber($secureRentDetail['SDAmount'],2) : '';?>" onkeypress="return isDecimal(event,this);" class="inputSetup" />
											</div>
											<div class="col-lg-12 error_message"><p>Required</p></div>
										</div>
									</div>
								</li>
								<li id="q5" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
										<div class="onebyone_question">
											<span class="span_b">Can the agreement be renewed after expiration?</span>
										</div>
										<div class="onebyone_content">
											<div class="radio_check">
												<p>
													<input type="radio" value="Y" id="expirationyes" <?php if(isset($secureRentDetail)) { echo (strcmp(trim($secureRentDetail['RenewalType']),"Y") == 0) ? 'checked':''; }?> name="expiration" checked />
													<label for="expirationyes" class="ripple">Yes</label>
												</p>
												<p>
													<input type="radio" value="N" id="expirationno" <?php if(isset($secureRentDetail)) { echo (strcmp(trim($secureRentDetail['RenewalType']),"N") == 0) ? 'checked':''; }?> name="expiration" />
													<label for="expirationno" class="ripple">No</label>
												</p>
												<p>
													<input type="radio" value="D" id="expirationspecify" <?php if(isset($secureRentDetail)) { echo (strcmp(trim($secureRentDetail['RenewalType']),"D") == 0) ? 'checked':''; }?> name="expiration" />
													<label for="expirationspecify" class="ripple">Do not Specify</label>
												</p>
											</div>
										</div>
									</div>
								</li>
							</ul>
							<div class="col-lg-12 savebtn_area m_btm20 no_border clear">
								<ul>
									<li class="save_btn float_l">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="right" title="back" onclick="return showHideDiv('4');">Back</a>
									</li>
									<li class="save_btn float_r">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="left" title="to&nbsp;fill&nbsp;Rent&nbsp;&&nbsp;Security&nbsp;Deposit&nbsp;Info" onclick="validateRentSecurityDeposit();">Continue</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="clear"></div>
				</div>
				
				<!-- Other Charges -->
				<div id="rentalAgree_6" class="col-lg-6 padlr0 m_top10" style="display:none;">
					<div class="signup_onebyone_content">
						<div class="setup_form prop_mnmt_form">
							<div class="flwup_rightcnt"><h2 data-bsfhead="Other Charges">Other Charges</h2></div>
							<ul class="onebyone_form">
								<li id="q1" class="active focus">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
                                        <input type="hidden" name="charge_count" id="charge_count" value="<?php echo (isset($otherDetail)) ? $chargeCount : '0';?>" />
										<div class="onebyone_question">
											<span class="span_b">What are the Charges Other than Rent?</span>
										</div>
                                        <div class="onebyone_content charge">
                                            <?php
                                            if(isset($rentalRegisterId) && $rentalRegisterId!=0 ) {
                                                $count=0; ?>
                                                <?php
                                                foreach($otherDetail as $data):
                                                    $count++;?>
                                                    <div class="input">
                                                        <div class="col-lg-12 m_btm10 padlr0">
                                                            <div class="col-lg-6 col-md-6 col-sm-6 padlr0">
                                                                <input type="text" class="inputSetup splcharc" data-bsfshare="ChargeName" name="charge_name_<?php echo $count; ?>" id="charge_name_<?php echo $count; ?>" value="<?php echo (isset($data)) ? $data['ServiceName'] : '';?>" placeholder="Other Charge" autocomplete="off" onfocus="return checkOtherChargeService(this.id);" onkeypress="addNewRow(this);"/>
                                                                <input type="hidden" class="inputSetup splcharc" name="charge_id_<?php echo $count; ?>" id="charge_id_<?php echo $count; ?>" value="<?php echo (isset($data)) ? $data['ServiceId'] : '';?>" />
                                                                <input type="hidden" class="inputSetup splcharc" name="charge_transid_<?php echo $count; ?>" id="charge_transid_<?php echo $count; ?>" value="<?php echo (isset($data)) ? $data['TransId'] : '';?>"  />
                                                            </div>
                                                            <div class="col-lg-3 col-md-3 col-sm-3 padlr0"><input type="text" class="inputSetup" data-bsfshare="ChargeValue" name="charge_value_<?php echo $count; ?>" id="charge_value_<?php echo $count; ?>" value="<?php echo (isset($data)) ? $this->commonHelper()->sanitizeNumber($data['Amount'],2) : '';?>" placeholder="Amount" onkeypress="return isDecimal(event,this);" autocomplete="off" /></div>
                                                            <div class="col-lg-3 col-md-3 col-sm-3 padlr0">
                                                                <select style="width:100%;" data-bsfshare="ChargeType" name="charge_type_<?php echo $count; ?>" id="charge_type_<?php echo $count; ?>" class="single_dropdown">
                                                                    <option <?php if (isset($data) && strcmp(trim($data['TransType']),"D") == 0 ) echo 'selected' ; ?> value="D">per day</option>
                                                                    <option <?php if (isset($data) && strcmp(trim($data['TransType']),"W") == 0 ) echo 'selected' ; ?> value="W">per week</option>
                                                                    <option <?php if (isset($data) && strcmp(trim($data['TransType']),"M") == 0 ) echo 'selected' ; ?> value="M">per month</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                <?php
                                                endforeach;?>
                                            <?php
                                            }
                                            ?>
                                        </div>
									</div>
								</li>
							</ul>
							<div class="col-lg-12 savebtn_area m_btm20 no_border clear">
								<ul>
									<li class="save_btn float_l">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="right" title="back" onclick="return showHideDiv('5');">Back</a>
									</li>
									<li class="save_btn float_r">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="left" title="to&nbsp;fill&nbsp;Other&nbsp;Charges" onclick="validateOtherAmount();">Continue</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="clear"></div>
				</div>
				
				<!-- Facilities -->
				<div id="rentalAgree_7" class="col-lg-6 padlr0 m_top10" style="display:none;">
					<div class="signup_onebyone_content">
						<div class="setup_form prop_mnmt_form">
							<div class="flwup_rightcnt"><h2 data-bsfhead="Facilities">Facilities</h2></div>
							<ul class="onebyone_form">
								<li id="q1" class="active focus">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
                                        <input type="hidden" name="household_count" id="household_count" value="<?php echo (isset($furnitureDetail)) ? $holdCount : '0';?>" />
										<div class="onebyone_question">
											<span class="span_b">What are House hold item in the property?</span>
										</div>
                                        <div class="onebyone_content household">
                                            <?php
                                            if(isset($rentalRegisterId) && $rentalRegisterId!=0 ) {
                                                $count=0; ?>
                                                <?php
                                                foreach($furnitureDetail as $data):
                                                    $count++;?>
                                                    <div class="input">
                                                        <div class="col-lg-12 m_btm10 padlr0">
                                                            <div class="col-lg-9 col-md-9 col-sm-9 padlr0">
                                                                <input type="text" class="inputSetup splcharc" data-bsfshare="HouseholdName" name="household_name_<?php echo $count; ?>" id="household_name_<?php echo $count; ?>" placeholder="Item" value="<?php echo (isset($data)) ? $data['FurnitureName'] : '';?>" autocomplete="off" onfocus="return checkOtherHousehold(this.id);" onkeypress="addNewRow(this);" />
                                                                <input type="hidden" class="inputSetup splcharc" name="household_id_<?php echo $count; ?>" id="household_id_<?php echo $count; ?>" value="<?php echo (isset($data)) ? $data['FurnitureId'] : '';?>"  />
                                                                <input type="hidden" class="inputSetup splcharc" name="household_transid_<?php echo $count; ?>" id="household_transid_<?php echo $count; ?>" value="<?php echo (isset($data)) ? $data['TransId'] : '';?>"  />
                                                            </div>
                                                            <div class="col-lg-3 col-md-3 col-sm-3 padlr0"><input type="text" class="inputSetup special" data-bsfshare="HouseholdValue" name="household_value_<?php echo $count; ?>" autocomplete="off" id="household_value_<?php echo $count; ?>" placeholder="Nos" value="<?php echo (isset($data)) ? $this->commonHelper()->sanitizeNumber($data['Qty'],0) : '';?>" /></div>
                                                        </div>
                                                    </div>
                                                <?php
                                                endforeach;?>
                                            <?php
                                            }
                                            ?>
                                        </div>
									</div>
								</li>
								<li id="q2" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
                                        <input type="hidden" name="amenity_count" id="amenity_count" value="<?php echo (isset($amenityDetail)) ? $amenityCount : '0';?>" />
                                        <div class="onebyone_question">
											<span class="span_b">What are the Amenities allow to use?</span>
										</div>
										<div class="onebyone_content amenity">
                                            <?php
                                            if(isset($rentalRegisterId) && $rentalRegisterId!=0 ) {
                                                $count=0; ?>
                                                <?php
                                                foreach($amenityDetail as $data):
                                                    $count++;?>
                                                    <div class="input">
                                                        <div class="col-lg-12 m_btm10 padlr0">
                                                            <div class="col-lg-12 col-md-12 col-sm-12 padlr0"><input type="text" data-bsfshare="AmenityName" class="inputSetup splcharc" name="amenity_name_<?php echo $count; ?>" id="amenity_name_<?php echo $count; ?>" value="<?php echo (isset($data)) ? $data['AmenityName'] : '';?>" placeholder="Amenity" autocomplete="off" onfocus="return checkOtherAmenity(this.id);" onkeypress="addNewRow(this);" /></div>
                                                            <input type="hidden" class="inputSetup splcharc" name="amenity_id_<?php echo $count; ?>" id="amenity_id_<?php echo $count; ?>" value="<?php echo (isset($data)) ? $data['AmenityId'] : '';?>"  />
                                                            <input type="hidden" class="inputSetup splcharc" name="amenity_transid_<?php echo $count; ?>" id="amenity_transid_<?php echo $count; ?>" value="<?php echo (isset($data)) ? $data['TransId'] : '';?>"  />
                                                        </div>
                                                    </div>
                                                <?php
                                                endforeach;?>
                                            <?php
                                            }
                                            ?>
										</div>
									</div>
								</li>
							</ul>
							<div class="col-lg-12 savebtn_area m_btm20 no_border clear">
								<ul>
									<li class="save_btn float_l">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="right" title="back" onclick="return showHideDiv('6');">Back</a>
									</li>
									<li class="save_btn float_r">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="left" title="to&nbsp;fill&nbsp;Facilities" onclick="validateFacilities();">Continue</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="clear"></div>
				</div>
				
				<!-- Submittals and Documents -->
				<div id="rentalAgree_8" class="col-lg-6 padlr0 m_top10" style="display:none;">
					<div class="signup_onebyone_content">
						<div class="setup_form prop_mnmt_form">
							<div class="flwup_rightcnt"><h2 data-bsfhead="Submittals Documents">Submittals and Documents</h2></div>
							<ul class="onebyone_form">
								<li id="q1" class="active focus">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
                                        <input type="hidden" name="checklist_count" id="checklist_count"  value="<?php echo (isset($checklistDetail)) ? $checklistCount : '0';?>" />
                                        <div class="onebyone_question">
											<span class="span_b">What are checklist are checked before the agreements?</span>
										</div>
										<div class="onebyone_content checklist">
                                            <?php
                                            if(isset($rentalRegisterId) && $rentalRegisterId!=0) {
                                                $count=0; ?>
                                                <?php
                                                foreach($checklistDetail as $data):
                                                    $count++;?>
                                                    <div class="input">
                                                        <div class="col-lg-12 m_btm10 padlr0">
                                                            <div class="col-lg-12 col-md-12 col-sm-12 padlr0">
                                                                <input type="text" class="inputSetup splcharc" data-bsfshare="ChecklistName" name="checklist_name_<?php echo $count; ?>" id="checklist_name_<?php echo $count; ?>" autocomplete="off" value="<?php echo (isset($data)) ? $data['CheckListName'] : '';?>" placeholder="Check List" onfocus="return checkOtherChecklist(this.id);" onkeypress="addNewRow(this);"/>
                                                                <input type="hidden" class="inputSetup splcharc" name="checklist_id_<?php echo $count; ?>" id="checklist_id_<?php echo $count; ?>" value="<?php echo (isset($data)) ? $data['ChecklistId'] : '';?>"  />
                                                                <input type="hidden" class="inputSetup splcharc" name="checklist_transid_<?php echo $count; ?>" id="checklist_transid_<?php echo $count; ?>" value="<?php echo (isset($data)) ? $data['TransId'] : '';?>"  />
                                                            </div>
                                                        </div>
                                                    </div>
                                                <?php
                                                endforeach;?>
                                            <?php
                                            }
                                            ?>
										</div>
									</div>
								</li>
								<li id="q2" class="">
									<div class="onebyone_wrapper">
										<div class="li_number">
											<span><i class="fa fa-flag-checkered" aria-hidden="true"></i></span>
											<div class="arrow">
												<span><i class="fa fa-arrow-right"></i></span>
											</div>
										</div>
                                        <input type="hidden" name="document_count" id="document_count" value="<?php echo (isset($documentDetail)) ? $documentCount : '0';?>" />

                                        <div class="onebyone_question">
											<span class="span_b">What are the Documents submitted?</span>
										</div>
										<div class="onebyone_content document">
                                            <?php
                                            if(isset($rentalRegisterId) && $rentalRegisterId!=0) {
                                                $count=0; ?>
                                                <?php
                                                foreach($documentDetail as $data):
                                                    $count++;?>
                                                    <div class="input">
                                                        <div class="col-lg-12 m_btm10 padlr0">
                                                            <div class="col-lg-5 col-md-5 col-sm-5 padlr0">
                                                                <input type="text" class="inputSetup splcharc" data-bsfshare="DocumentName" name="document_name_<?php echo $count; ?>" id="document_name_<?php echo $count; ?>" value="<?php echo (isset($data)) ? $data['DocumentName'] : '';?>" autocomplete="off" placeholder="Document" onkeypress="addNewRow(this);" />
                                                                <input type="hidden" class="inputSetup splcharc" name="document_transid_<?php echo $count; ?>" id="document_transid_<?php echo $count; ?>" value="<?php echo (isset($data)) ? $data['TransId'] : '';?>"  />
                                                            </div>
                                                        </div>
                                                    </div>
                                                <?php
                                                endforeach;?>
                                            <?php
                                            }
                                            ?>
										</div>
									</div>
								</li>
							</ul>
							<div class="col-lg-12 savebtn_area m_btm20 no_border clear">
								<ul>
									<li class="save_btn float_l">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="right" title="back" onclick="return showHideDiv('7');">Back</a>
									</li>
									<li class="save_btn float_r">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="left" title="to&nbsp;fill&nbsp;Submittals&nbsp;and&nbsp;Documents" onclick="validateDocument();">Continue</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="clear"></div>
				</div>
				
				<!-- Schedule of Payment -->
				<div id="rentalAgree_9" class="col-lg-6 padlr0 m_top10" style="display:none;">
					<div class="signup_onebyone_content">
						<div class="setup_form prop_mnmt_form">
							<div class="flwup_rightcnt"><h2 data-bsfhead="Payment Schedule">Schedule of Payment</h2></div>
							<div class="col-lg-12">
								<div class="table-responsive">
									<table class="table table-hover m_top10" id="paymenttable">
										<thead>
											<tr>
												<th style="width:70%;">Date</th>
												<th>Amount</th>
											</tr>
										</thead>
										<tbody>
                                        </tbody>
									</table>
								</div>
							</div>
							<div class="col-lg-12 savebtn_area m_btm20 no_border clear">
								<ul>
									<li class="save_btn float_l">
										<a class="ripple" href="javascript:void(0);" data-toggle="tooltip" data-placement="right" title="back" onclick="return showHideDiv('8');">Back</a>
									</li>
									<li class="save_btn float_r">
                                        <button type="button" data-toggle="tooltip" data-placement="left" title="to&nbsp;Submit" onclick="formPost();" class="ripple">Submit</button>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="clear"></div>
				</div>
				<!-- Agreement Part -->
				<div class="col-lg-6">
					<div class="col-lg-6 col-lg-offset-6 col-md-6 col-md-offset-6 col-sm-6 col-sm-offset-6 col-xs-10 col-xs-offset-1 clrbg_select2dropdown padlr0 m_top10">
						<select style="width:100%;" data-bsfshare="ChangeTemplate" name="changeTemplate" class="single_dropdown changeTemplate">
							<option value="0">Select Template</option>
							<?php foreach($agreementTemplates as $template) { ?>
								<option <?php if(isset($ownerDetail)) { if($ownerDetail['TemplateId']==$template['TemplateId']) { echo 'selected'; } } ?> value="<?php echo $template['TemplateId']; ?>"><?php echo $template['TemplateName']; ?></option>
							<?php } ?>
						</select>
					</div>
					<div class="clear"></div>
					<div class="agreement_paper_area m_top10">
						<img src="<?php echo $this->basePath(); ?>/images/agreement_duplicate.jpg" class="agrment_duplicate_img clear" alt="" title=""/>
						<div id="templateContent"><?php echo (isset($ownerDetail['TemplateContent'])) ? html_entity_decode($ownerDetail['TemplateContent']) : ''; ?></div>
                        <input type="hidden" id="templateContentHide" name="templateContentHide"/>
					</div>
				</div>
			</div>
	    </div>
    </form>
</div>
<script>
Date.isLeapYear = function (year) {
    return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0));
};

Date.getDaysInMonth = function (year, month) {
    return [31, (Date.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];
};

Date.prototype.isLeapYear = function () {
    return Date.isLeapYear(this.getFullYear());
};

Date.prototype.getDaysInMonth = function () {
    return Date.getDaysInMonth(this.getFullYear(), this.getMonth());
};

Date.prototype.addMonths = function (value) {
	var n = this.getDate();
	this.setDate(1);
	this.setMonth(this.getMonth() + value);
	this.setDate(Math.min(n, this.getDaysInMonth()));
	return this;
};
var merTags = <?php echo json_encode($mergeTags); ?>;
$(document).ready(function()
{
    $('input[type=radio][name=property_type]').on('change', function() {
        if (this.value == 'A') {
            agreementBind('type_of_property','Appartment')
        }
        else if (this.value == 'I') {
            agreementBind('type_of_property','Individual Villa')
        }
    });
	var sysHeight = $(window).height();
	$('.agreement_paper_area').css('min-height',sysHeight - 240);

    addNewRow($('<div id="charge_name__"></div>'));
    addNewRow($('<div id="household_name__"></div>'));
    addNewRow($('<div id="amenity_name__"></div>'));
    addNewRow($('<div id="checklist_name__"></div>'));
    addNewRow($('<div id="document_name__"></div>'));

	
    var $unitName = $('#projectname'),
        $UnitId = $('#unitid'),
        $LeadId = $('#leadid'),
		$unitNo=$('#unitNo'),
		$leadname=$('#leadname'),
		$project=$('#project');
    var arr_Units = <?php echo (isset($unitList)) ? json_encode($unitList) : '[]';?>;
    $unitName.autocomplete({
        lookup: arr_Units,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        }, onSelect: function (suggestion) {
            if (suggestion) {
                $UnitId.val(suggestion.data);
                $LeadId.val(suggestion.LeadId);
				$unitNo.val(suggestion.UnitNo).trigger('change');
				$leadname.val(suggestion.LeadName).trigger('change');
				$project.val(suggestion.ProjectName).trigger('change');
                getLeadData(suggestion.LeadId,suggestion.data);
                $(this).removeClass('error');
            }
        }, onSearchStart: function (suggestion) {
            $UnitId.val(0);
        }, onSearchComplete: function (query, suggestions) {
            if (!suggestions.length) {
                $UnitId.val(0);
                $(this).addClass('error');
            } else $(this).removeClass('error');
        }
    });
	
	$(".single_dropdown").select2({
		placeholder: "",
		allowClear: true
	});
	
	$(".changeTemplate").change(function() {
		$.post(getBaseURL()+'crm/property/get-template-content', { tempId: $(this).val() },
		function(data) {
			var chkCount = JSON.parse(data);
			if(chkCount.TemplateContent != '') {
				$('#templateContent').html(chkCount.TemplateContent);
				$.each(merTags, function( key, value ) {
					var newVal = value.slice(2,-2);
					var tempVal = newVal.toLowerCase();
					$('#templateContent').html($('#templateContent').html().replace(value,'<span id="ra'+tempVal+'">________</span>'));
				});
			}
		});
	});
    $("#powerattorneyyes, #powerattorneyno").change(function () {
        if ($("#powerattorneyyes").is(":checked")) {
            $('.attorney_hide').show();
            $('.attorney_hide').show();
        }
        else if ($("#powerattorneyno").is(":checked")) {
            $('.attorney_hide').hide();
            $('.attorney_hide').hide();
            $('#attorney_name').val('');
            $('#attorney_address').val('');
        }
    });

    $("#terminateyes, #terminateno").change(function () {
        if ($("#terminateyes").is(":checked")) {
            $('.notice_hide').show();
        }
        else if ($("#terminateno").is(":checked")) {
            $('.notice_hide').hide();
            $('#noticeperiod').val('');
            $('#notice_type').val('');
        }
    });
    $("#securitydeposityes, #securitydepositno").change(function () {
        if ($("#securitydeposityes").is(":checked")) {
            $('.deposit_hide').show();
        }
        else if ($("#securitydepositno").is(":checked")) {
            $('.deposit_hide').hide();
            $('#depositamount').val('');
        }
    });
});

$(document).on('keypress','.special', function(e) {
    var k = e.keyCode == 0 ? e.charCode : e.keyCode;
    if((e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)))
        return false;
})

$("li").hover(
	function () {
		$(this).addClass("active focus").parent().next().addClass("active focus");
	},
	function () {
		$(this).removeClass("active focus").parent().next().removeClass("active focus");
	}
);

$(".inputSetup").focus(function(){
	$('.focus').removeClass('active focus');
	$(this).closest('li').addClass('active focus');
	$('body,html').animate({
		scrollTop: scrollPoint
	}, 600);
});

function getLeadData(leadId,unitId) {
    $.ajax({
        url: getBaseURL() + "crm/property/rental-agreement",
        type: "POST",
        data: {'LeadId' : leadId,'UnitId' : unitId},
        success: function (data, textStatus, jqXHR) {
            var data = JSON.parse(data);
            $('#address').val('');
            $('#pan_no').val('');
            $('#attorney_address').val('');
            $('#attorney_name').val('');
            if (data.length != 0 && data.length != "false") {
                var perLeadDetails = data[0];
                var poaLeadDetails = data[1];
                var poaName = data[2];
                var buildUpArea = data[3];
                if (perLeadDetails != false) {
                    if (perLeadDetails.Address1 != "") {
                        $('#address').val(perLeadDetails.Address1);
                    }
                    if (perLeadDetails.PanNo != "") {
                        $('#pan_no').val(perLeadDetails.PanNo);
                    }

                }
                if (poaLeadDetails != false)  {
                    if (poaLeadDetails.Address1 != "") {
                        $('#attorney_address').val(poaLeadDetails.Address1);
                    }
                    if (poaLeadDetails.POAId != 0 || poaLeadDetails.POAId != '') {
                        $('#powerattorneyyes').attr('checked','checked');
                    } else {
                        $('#powerattorneyno').attr('checked','checked');
                    }
                }
                if (poaName != false && poaName!="") {
                    if (poaName.ApplicantName != "") {
                        $('#attorney_name').val(poaName.ApplicantName);
                    }
                }
                if(buildUpArea != false) {
                    if (buildUpArea.UnitArea != "") {
                        var totArea = parseFloat(buildUpArea.UnitArea);
                        $('#area').val(totArea.toFixed(2));
                    }
                }
            }
        }
    });
}

function showHideDiv(divId)
{
	for(i = 1; i <= 9; i++) {
		if(i == divId) {
			$('#rentalAgree_'+i).show();
		} else {
			$('#rentalAgree_'+i).hide();
		}
	}
    window.scrollTo(0,0);
}

function validateOwner() {
    $projectName=$('#projectname');
    $address = $('#address');
    $panNo=$('#pan_no');
    $unitId=$('#unitid');
    $attorneyName=$('#attorney_name');
    $attorneyAddress=$('#attorney_address');
    var errorFlag = 0;
    var errorFlagCount = 0;
    if($projectName.val() == "" || $projectName.val() == "0"){
        removeErrorMsg($projectName);
        showErrorMsg($projectName, "Invalid");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $projectName.focus();
        }
    } else {
        removeErrorMsg($projectName);
    }
    if($address.val() == "" ){
        showErrorMsg($address, "Required");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $address.focus();
        }
    } else {
        removeErrorMsg($address);
    }
    if($panNo.val() == "" || !validatePanNumber($panNo.val())){
        showErrorMsg($panNo, "Invalid PAN No");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $panNo.focus();
        }
    } else {
        removeErrorMsg($panNo);
    }
    if($('.changeTemplate').val()=="" || $('.changeTemplate').val()==0) {
        alert(' Select a Agreement Template...');
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $('.changeTemplate').focus();
        }
    }
    if ($("#powerattorneyyes").is(":checked")) {

        if ($attorneyName.val() == "") {
            showErrorMsg($attorneyName, "Required");
            errorFlagCount = errorFlagCount + 1;
            errorFlag = 1;
            if (errorFlagCount == 1) {
                $attorneyName.focus();
            }
        } else {
            removeErrorMsg($attorneyName);
        }
        if ($attorneyAddress.val() == "") {
            showErrorMsg($attorneyAddress, "Required");
            errorFlagCount = errorFlagCount + 1;
            errorFlag = 1;
            if (errorFlagCount == 1) {
                $attorneyAddress.focus();
            }
        } else {
            removeErrorMsg($attorneyAddress);
        }
    }

    if(errorFlag == 0) {
        agreementBind('owner_permanant_address',$('#address').val());
        agreementBind('owner_panno',$('#pan_no').val());
        agreementBind('poa_name',$('#attorney_name').val());
        agreementBind('address_of_poa',$('#attorney_address').val());
        agreementBind('unit',$('#unitNo').val());
        agreementBind('project',$('#project').val());
        agreementBind('owner',$('#leadname').val());
        showHideDiv('2');
    }
}

function validateTenant() {
    $tenantName=$('#tenantname');
    $perAddress = $('#per_address');
    $tenantPanNo=$('#tenant_pan_no');
    var errorFlag = 0;
    var errorFlagCount = 0;
    if($tenantName.val() == "" ){
        showErrorMsg($tenantName, "Required");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $tenantName.focus();
        }
    } else {
        removeErrorMsg($tenantName);
    }
    if($perAddress.val() == "" ){
        showErrorMsg($perAddress, "Required");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $perAddress.focus();
        }
    } else {
        removeErrorMsg($perAddress);
    }
    if($tenantPanNo.val() != "" && !validatePanNumber($tenantPanNo.val())){
        showErrorMsg($tenantPanNo, "Invalid PAN No");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $tenantPanNo.focus();
        }
    } else {
        removeErrorMsg($tenantPanNo);
    }
    if(errorFlag == 0) {
        agreementBind('tenant_name',$('#tenantname').val());
        agreementBind('tenant_address',$('#per_address').val());
        agreementBind('tenant_panno',$('#tenant_pan_no').val());
        showHideDiv('3');
    }
}

function validateProperty() {
    $bedRoomNo = $('#bedroomno');
    $bathRoomNo = $('#bathroomno');
    $area = $('#area');
    $properAddress = $('#proper_address');

    var errorFlag = 0;
    var errorFlagCount = 0;
    if($bedRoomNo.val() == "" ){
        showErrorMsg($bedRoomNo, "Required");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $bedRoomNo.focus();
        }
    } else {
        removeErrorMsg($bedRoomNo);
    }
    if($bathRoomNo.val() == "" ){
        showErrorMsg($bathRoomNo, "Required");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $bathRoomNo.focus();
        }
    } else {
        removeErrorMsg($bathRoomNo);
    }
    if($area.val() == "" ){
        showErrorMsg($area, "Required");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $area.focus();
        }
    } else {
        removeErrorMsg($area);
    }
    if($properAddress.val() == "" ){
        showErrorMsg($properAddress, "Required");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $properAddress.focus();
        }
    } else {
        removeErrorMsg($properAddress);
    }
    if(errorFlag == 0) {
        if ($('input[name="property_type"]:checked').val() == 'A') {
            agreementBind('type_of_property','Appartment')
        }
        else if ($('input[name="property_type"]:checked').val() == 'I') {
            agreementBind('type_of_property','Individual Villa')
        }
        agreementBind('no_of_bed_room',$('#bedroomno').val());
        agreementBind('no_of_bath_room',$('#bathroomno').val());
        agreementBind('area_of_property',$('#area').val());
        agreementBind('property_address',$('#proper_address').val());
        showHideDiv('4');
    }
}

function validateAgreement() {
    $agreeDate = $('#agreedate');
    $agreeDuration = $('#agreeduration');
    $agreeStart = $('#agreestart');
    $noticePeriod = $('#noticeperiod');
    $noticeType = $('#notice_type');
    var errorFlag = 0;
    var errorFlagCount = 0;
    if($agreeDate.val() == "" || !/\b\d{1,2}[\/-]\d{1,2}[\/-]\d{4}\b/.test($agreeDate.val())){
        showErrorMsgNew($agreeDate, "Invalid Date");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $agreeDate.focus();
        }
    } else {
        removeErrorMsgNew($agreeDate);
    }
    if($agreeDuration.val() == "" ){
        showErrorMsgNew($agreeDuration, "Required");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $agreeDuration.focus();
        }
    } else {
        removeErrorMsgNew($agreeDuration);
    }
    if($agreeStart.val() == "" || !/\b\d{1,2}[\/-]\d{1,2}[\/-]\d{4}\b/.test($agreeStart.val())){
        showErrorMsgNew($agreeStart, "Invalid Date");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $agreeStart.focus();
        }
    } else {
        removeErrorMsgNew($agreeStart);
    }
    if ($("#terminateyes").is(":checked")) {

        if ($noticePeriod.val() == "" || $noticeType.val() == null) {
            showErrorMsgNew($noticePeriod, "Required");
            errorFlagCount = errorFlagCount + 1;
            errorFlag = 1;
            if (errorFlagCount == 1) {
                $noticePeriod.focus();
            }
        } else {
            removeErrorMsgNew($noticePeriod);
        }
    }
    if(errorFlag == 0) {
        agreementBind('date_of_agreement_signed',$('#agreedate').val());
        agreementBind('duration_of_agreement',$('#agreeduration').val());
        agreementBind('agreement_start_date',$('#agreestart').val());
        agreementBind('notice_period',$('#noticeperiod').val());
        showHideDiv('5');
    }
}

function validateRentSecurityDeposit() {
    $monthlyRent = $('#monthlyrent');
    $dueDay = $('#dueday');
    $depositAmount = $('#depositamount');
    var errorFlag = 0;
    var errorFlagCount = 0;
    if($monthlyRent.val() == "" ){
        showErrorMsg($monthlyRent, "Required");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $monthlyRent.focus();
        }
    } else {
        removeErrorMsg($monthlyRent);
    }
    if($dueDay.val() == "" || $dueDay.val()==null){
        showErrorMsgNew($dueDay, "Required");
        errorFlagCount = errorFlagCount + 1;
        errorFlag = 1;
        if(errorFlagCount == 1) {
            $dueDay.focus();
        }
    } else {
        removeErrorMsgNew($dueDay);
    }
    if ($("#securitydeposityes").is(":checked")) {
        if ($depositAmount.val() == "") {
            showErrorMsg($depositAmount, "Required");
            errorFlagCount = errorFlagCount + 1;
            errorFlag = 1;
            if (errorFlagCount == 1) {
                $depositAmount.focus();
            }
        } else {
            removeErrorMsg($depositAmount);
        }
    }
    if(errorFlag == 0) {
        agreementBind('monthly_rent',$('#monthlyrent').val());
        agreementBind('dueday_of_each_month',$('#dueday').val());
        agreementBind('security_amount',$('#depositamount').val());
        showHideDiv('6');
    }
}

function showErrorMsg($tarIp, msg) {
    var $tarErrorMsg = $tarIp.closest('div').next('.error_message');
    $tarErrorMsg.find('p').text(msg);
    $tarErrorMsg.show();
}

function removeErrorMsg($tarIp) {
    var $tarErrorMsg = $tarIp.closest('div').next('.error_message');
    $tarErrorMsg.hide();
}

function showErrorMsgNew($tarIp, msg) {
    var $tarErrorMsg = $tarIp.closest('.input').next('.error_message');
    $tarErrorMsg.find('p').text(msg);
    $tarErrorMsg.show();
}

function removeErrorMsgNew($tarIp) {
    var $tarErrorMsg = $tarIp.closest('.input').next('.error_message');
    $tarErrorMsg.hide();
}

function addNewRow(x) {
    var strClass = $(x).attr('id');
    var arr = strClass.split('_');
    if($(x).val() != ""){
        $(x).closest('.empty-'+arr[0]).removeClass('empty-'+arr[0]);
    }

    if($('.onebyone_content.'+arr[0]).find('.empty-'+arr[0]).length > 0) {
        return;
    }

    var newCount = parseInt($('#'+arr[0]+'_count').val());
    var template = $('#'+arr[0]+'dummy-row').html();
    newCount++;
    template = template.replace(/__/g, '_' + newCount);
    $('.onebyone_content.'+arr[0]).append(template);
    $('#'+arr[0]+'_count').val(newCount);
    $(".single_dropdown").select2({
        placeholder: "",
        allowClear: true
    });
    bindServiceBaseAutoComplete();
    bindChecklistBaseAutoComplete();
    bindAmenityBaseAutoComplete();
    bindHouseholdBaseAutoComplete();
}

function validateOtherAmount() {
    var rowCountAmt= $('#charge_count').val();
    var errorFlag = 0;
    var errorFlagCount = 0;
    for(i=1;i<=rowCountAmt;i++){
        if($('#charge_name_'+i).val() != "" && $('#charge_value_'+i).val() == "" ){
            $('#charge_value_'+i).addClass('red_bdr');
            errorFlagCount = errorFlagCount + 1;
            errorFlag = 1;
            if(errorFlagCount == 1) {
                $('#charge_value_'+i).focus();
            }
        } else {
            $('#charge_value_'+i).removeClass('red_bdr');
        }
        if($('#charge_name_'+i).val() == "" && $('#charge_value_'+i).val() != "" ){
            $('#charge_name_'+i).addClass('red_bdr');
            errorFlagCount = errorFlagCount + 1;
            errorFlag = 1;
            if(errorFlagCount == 1) {
                $('#charge_name_'+i).focus();
            }
        } else {
            $('#charge_name_'+i).removeClass('red_bdr');
        }

    }
    if(errorFlag == 0) {
        showHideDiv('7');
    }
}

function validateFacilities() {
    var rowCountAmt= $('#household_count').val();
    var errorFlag = 0;
    var errorFlagCount = 0;
    for(i=1;i<=rowCountAmt;i++){
        if($('#household_name_'+i).val() != "" && $('#household_value_'+i).val() == "" ){
            $('#household_value_'+i).addClass('red_bdr');
            errorFlagCount = errorFlagCount + 1;
            errorFlag = 1;
            if(errorFlagCount == 1) {
                $('#household_value_'+i).focus();
            }
        } else {
            $('#household_value_'+i).removeClass('red_bdr');
        }
        if($('#household_name_'+i).val() == "" && $('#household_value_'+i).val() != "" ){
            $('#household_name_'+i).addClass('red_bdr');
            errorFlagCount = errorFlagCount + 1;
            errorFlag = 1;
            if(errorFlagCount == 1) {
                $('#household_name_'+i).focus();
            }
        } else {
            $('#household_name_'+i).removeClass('red_bdr');
        }

    }
    if(errorFlag == 0) {
        showHideDiv('8');
    }
}

function formPost() {
    agreementBind('ref_no',$('#refno').val());
    agreementBind('ref_date',$('#refdate').val());
    if($('#templateContent').html()!="") {
        $('#templateContentHide').val($('#templateContent').html());
        $('#theform').submit();
    }
}

var serviceList = <?php echo (isset($serviceList)) ? json_encode($serviceList) : '[]';?>;
var servicePrice = serviceList;
function bindServiceBaseAutoComplete() {
    var $otherChargeName = $('input[id^=charge_name_]');
    $otherChargeName.unbind('autocomplete');
    var addedMaterials = [];
    $.each($otherChargeName, function () {
        var $this = $(this),
            name = $this[0].id;
        var arrname = name.split('_');
        var key1 = arrname[2];
        checkOtherChargeService(name);
        $this.autocomplete({
            lookup: servicePrice,
            showNoSuggestionNotice:false,
            lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
                if (queryLowerCase == '*') {
                    return suggestion.value;
                } else {
                    var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                    return re.test(suggestion.value);
                }
            }, onSelect: function(suggestion) {
                if(suggestion) {
                    var $el = $("#charge_id_" + key1);
                    $el.val(suggestion.data);
                    $('#charge_name_'+key1).removeClass('red_bdr');
                    addNewRow($(this));
                }
            }, onSearchStart: function(suggestion) {
                $("#charge_id_" + key1).val(0);
            }, onSearchComplete: function (query, suggestions) {
                if(!suggestions.length){
                    $('#charge_name_'+key1).addClass('red_bdr');
                    $("#charge_id_" + key1).val(0);
                } else {
                    $('#charge_name_'+key1).removeClass('red_bdr');
                }
            }
        });
    });
}

function checkOtherChargeService(x) {
    var arrname = x.split('_');
    var id = arrname[2];
    var reskeyid = $('input[id^=charge_id_]');
    servicePrice = serviceList;

    servicePrice = $.grep(serviceList, function (element, index) {
        var is_selected = true;
        $.each(reskeyid, function (i, obj) {
            var $this = $(this),
                name = $this[0].id;
            var arrname = name.split('_');
            var key1 = arrname[2];
            if (key1 != id) {
                if (element.data == $this.val()) {
                    is_selected = false;
                    return false;
                }
            }
        });
        return is_selected;
    });
}

var checkList = <?php echo (isset($checkList)) ? json_encode($checkList) : '[]';?>;
var checkPrice = checkList;
function bindChecklistBaseAutoComplete() {
    var $otherChecklistName = $('input[id^=checklist_name_]');
    $otherChecklistName.unbind('autocomplete');
    var addedMaterials = [];
    $.each($otherChecklistName, function () {
        var $this = $(this),
            name = $this[0].id;
        var arrname = name.split('_');
        var key1 = arrname[2];
        checkOtherChecklist(name);
        $this.autocomplete({
            lookup: checkPrice,
            showNoSuggestionNotice:false,
            lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
                if (queryLowerCase == '*') {
                    return suggestion.value;
                } else {
                    var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                    return re.test(suggestion.value);
                }
            }, onSelect: function(suggestion) {
                if(suggestion) {
                    var $el = $("#checklist_id_" + key1);
                    $el.val(suggestion.data);
                    $('#checklist_name_'+key1).removeClass('red_bdr');
                    addNewRow($(this));
                }
            }, onSearchStart: function(suggestion) {
                $("#checklist_id_" + key1).val(0);
            }, onSearchComplete: function (query, suggestions) {
                if(!suggestions.length){
                    $('#checklist_name_'+key1).addClass('red_bdr');
                    $("#checklist_id_" + key1).val(0);
                } else {
                    $('#checklist_name_'+key1).removeClass('red_bdr');
                }
            }
        });
    });
}

function checkOtherChecklist(x) {
    var arrname = x.split('_');
    var id = arrname[2];
    var reskeyid = $('input[id^=checklist_id_]');
    checkPrice = checkList;

    checkPrice = $.grep(checkList, function (element, index) {
        var is_selected = true;
        $.each(reskeyid, function (i, obj) {
            var $this = $(this),
                name = $this[0].id;
            var arrname = name.split('_');
            var key1 = arrname[2];
            if (key1 != id) {
                if (element.data == $this.val()) {
                    is_selected = false;
                    return false;
                }
            }
        });
        return is_selected;
    });
}

var amenityList = <?php echo (isset($amenityList)) ? json_encode($amenityList) : '[]';?>;
var amenityPrice = amenityList;
function bindAmenityBaseAutoComplete() {
    var $otherAmenityName = $('input[id^=amenity_name_]');
    $otherAmenityName.unbind('autocomplete');
    var addedMaterials = [];
    $.each($otherAmenityName, function () {
        var $this = $(this),
            name = $this[0].id;
        var arrname = name.split('_');
        var key1 = arrname[2];
        checkOtherAmenity(name);
        $this.autocomplete({
            lookup: amenityPrice,
            showNoSuggestionNotice:false,
            lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
                if (queryLowerCase == '*') {
                    return suggestion.value;
                } else {
                    var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                    return re.test(suggestion.value);
                }
            }, onSelect: function(suggestion) {
                if(suggestion) {
                    var $el = $("#amenity_id_" + key1);
                    $el.val(suggestion.data);
                    $('#amenity_name_'+key1).removeClass('red_bdr');
                    addNewRow($(this));
                }
            }, onSearchStart: function(suggestion) {
                $("#amenity_id_" + key1).val(0);
            }, onSearchComplete: function (query, suggestions) {
                if(!suggestions.length){
                    $('#amenity_name_'+key1).addClass('red_bdr');
                    $("#amenity_id_" + key1).val(0);
                } else {
                    $('#amenity_name_'+key1).removeClass('red_bdr');
                }
            }
        });
    });
}

function checkOtherAmenity(x) {
    var arrname = x.split('_');
    var id = arrname[2];
    var reskeyid = $('input[id^=amenity_id_]');
    amenityPrice = amenityList;

    amenityPrice = $.grep(amenityList, function (element, index) {
        var is_selected = true;
        $.each(reskeyid, function (i, obj) {
            var $this = $(this),
                name = $this[0].id;
            var arrname = name.split('_');
            var key1 = arrname[2];
            if (key1 != id) {
                if (element.data == $this.val()) {
                    is_selected = false;
                    return false;
                }
            }
        });
        return is_selected;
    });
}

var householdList = <?php echo (isset($householdList)) ? json_encode($householdList) : '[]';?>;
var householdPrice = householdList;
function bindHouseholdBaseAutoComplete() {
    var $otherHouseholdName = $('input[id^=household_name_]');
    $otherHouseholdName.unbind('autocomplete');
    var addedMaterials = [];
    $.each($otherHouseholdName, function () {
        var $this = $(this),
            name = $this[0].id;
        var arrname = name.split('_');
        var key1 = arrname[2];
        checkOtherHousehold(name);
        $this.autocomplete({
            lookup: householdPrice,
            showNoSuggestionNotice:false,
            lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
                if (queryLowerCase == '*') {
                    return suggestion.value;
                } else {
                    var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                    return re.test(suggestion.value);
                }
            }, onSelect: function(suggestion) {
                if(suggestion) {
                    var $el = $("#household_id_" + key1);
                    $el.val(suggestion.data);
                    $('#household_name_'+key1).removeClass('red_bdr');
                    addNewRow($(this));
                }
            }, onSearchStart: function(suggestion) {
                $("#household_id_" + key1).val(0);
            }, onSearchComplete: function (query, suggestions) {
                if(!suggestions.length){
                    $('#household_name_'+key1).addClass('red_bdr');
                    $("#household_id_" + key1).val(0);
                } else {
                    $('#household_name_'+key1).removeClass('red_bdr');
                }
            }
        });
    });
}

function checkOtherHousehold(x) {
    var arrname = x.split('_');
    var id = arrname[2];
    var reskeyid = $('input[id^=household_id_]');
    householdPrice = householdList;

    householdPrice = $.grep(householdList, function (element, index) {
        var is_selected = true;
        $.each(reskeyid, function (i, obj) {
            var $this = $(this),
                name = $this[0].id;
            var arrname = name.split('_');
            var key1 = arrname[2];
            if (key1 != id) {
                if (element.data == $this.val()) {
                    is_selected = false;
                    return false;
                }
            }
        });
        return is_selected;
    });
}

function validateDocument() {
    var rowCountAmt= $('#document_count').val();
    var errorFlag = 0;
    var errorFlagCount = 0;

    for(i=1;i<=rowCountAmt;i++) {
        if($('#document_transid_' + i).val() == "") {
            if ($('#document_name_' + i).val() != "" && $('#document_' + i).val() == "") {
                showErrorMsgNew($('#document_' + i), "File Required");
                errorFlagCount = errorFlagCount + 1;
                errorFlag = 1;
                if (errorFlagCount == 1) {
                    $('#document_' + i).focus();
                }
            } else {
                removeErrorMsgNew($('#document_' + i));
            }
            if ($('#document_name_' + i).val() == "" && $('#document_' + i).val() != "") {
                $('#document_name_' + i).addClass('red_bdr');
                errorFlagCount = errorFlagCount + 1;
                errorFlag = 1;
                if (errorFlagCount == 1) {
                    $('#document_name_' + i).focus();
                }
            } else {
                $('#document_name_' + i).removeClass('red_bdr');
            }
        } else {
            if ($('#document_name_' + i).val() == "") {
                showErrorMsgNew($('#document_name_' + i), "Required");
                errorFlagCount = errorFlagCount + 1;
                errorFlag = 1;
                if (errorFlagCount == 1) {
                    $('#document_name_' + i).focus();
                }
            } else {
                removeErrorMsgNew($('#document_name_' + i));
            }
        }
    }
    if(errorFlag == 0) {
        schedulePayment();
        showHideDiv('9');
    }
}
//restrict special charactor in textbox//
$(document).on('keypress','.splcharc', function(e) {
      var k = e.keyCode == 0 ? e.charCode : e.keyCode; 
     return ((k > 64 && k < 91) || (k > 96 && k < 123) || k == 8  || k==32 || (k >= 48 && k <= 57));
    });

$('#projectname').keypress(function(e) {
	 if (window.event) {
      var  keynum = e.keyCode;
    }
    // For Netscape/Firefox/Opera
    else if (e.which) {
        keynum = e.which;
    }
  var  keychar = String.fromCharCode(keynum);
    //List of special characters you want to restrict
    if (keychar == "'" || keychar == "`" || keychar =="!" || keychar =="@" || keychar =="#" || keychar =="$" || keychar =="%" || keychar =="^" || keychar =="&" ||  keychar =="(" || keychar ==")" || keychar =="-" || keychar =="_" || keychar =="+" || keychar =="=" || keychar =="/" || keychar =="~" || keychar =="<" || keychar ==">" || keychar =="," || keychar ==";" || keychar ==":" || keychar =="|" || keychar =="?" || keychar =="{" || keychar =="}" || keychar =="[" || keychar =="]" || keychar =="¬" || keychar =="£" || keychar =='"' || keychar =="\\") {
        return false;
    } else {
        return true;
    }

    });

function schedulePayment() {
    var agreeDuration = parseInt($('#agreeduration').val());
	var monthlyRent = $('#monthlyrent').val();
	var scheduleDate = [];
    var agreeDate = $('#agreestart').val();
    var dueDay = parseInt($('#dueday').val());
    var sDate = agreeDate.split('-');
    var firstDate = new Date((sDate[1])+'/'+dueDay +'/'+sDate[2]);
    var fDate = $.datepicker.formatDate('dd-mm-yy', firstDate);
    scheduleDate.push(fDate);
    var total=parseInt(monthlyRent);
    $('#paymenttable tbody').html('');
    $('#paymenttable tbody').append('<tr><td><input type="text" id="schDate_0" name="schDate_0" class="tbl_input txt_right" value="'+scheduleDate[0]+'" readonly /></td><td class="tbl_input_td"><input type="text" name="schAmt_0" id="schAmt_0" class="tbl_input txt_right" value="'+monthlyRent+'" readonly /></td></tr>');

    for( var i=1;i<agreeDuration;i++) {
        var startDate = new Date(sDate[1]+'/'+dueDay +'/'+sDate[2]);
        var eDate = startDate.addMonths(i);
		var endDate = $.datepicker.formatDate('dd-mm-yy', eDate);
        scheduleDate.push(endDate);
        $('#paymenttable tbody').append('<tr><td><input type="text" id="schDate_'+i+'" name="schDate_'+i+'" class="tbl_input txt_right" value="'+scheduleDate[i]+'" readonly /></td><td class="tbl_input_td"><input type="text" id="schAmt_'+i+'" name="schAmt_'+i+'" class="tbl_input txt_right" value="'+monthlyRent+'" readonly /></td></tr>');
        total+=parseInt(monthlyRent);
    }
    var expireDate = new Date(sDate[1]+'/'+sDate[0] +'/'+sDate[2]);
    expireDate = expireDate.addMonths(agreeDuration);
    var endDate = $.datepicker.formatDate('dd-mm-yy', expireDate);
    $('#enddatediv').append('<input type="hidden" id="enddate" name="enddate" value="'+endDate+'"/>');
    $('#paymenttable tbody').append('<tr><td class="txt_right">Total</td><td class="tbl_input_td"><input type="text" id="total" name="total" class="tbl_input txt_right total_input" value="'+total+'" readonly/></td></tr>');
}

function documentFile(file) {
    var id = ($(file).attr('id')).split('_');
    var arr = ($(file).val()).split('\\');
    var count = arr.length;
    count-=1;
    $('#filenameid_'+id[1]).html(arr[count]);
}

function isDecimal(evt, element) {
    var charCode = (evt.which) ? evt.which : evt.keyCode;
    if((charCode != 46 || $(element).val().indexOf('.') != -1) &&      // �.� CHECK DOT, AND ONLY ONE.
        (charCode < 48 || charCode > 57) && charCode!=39 && charCode!=8 && charCode!=9) {
        return false;
    }
    return true;
}
function agreementBind(tagName,tagVal) {
$('#ra'+tagName).html(tagVal);
}
</script>
