<link rel="stylesheet" type="text/css" href="<?php echo $this->basePath(); ?>/css/project.css" />
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/js/select2.full.min.js"></script>
<link type="text/css" rel="stylesheet" href="<?php echo $this->basePath(); ?>/css/select2.min.css" />
<?php echo $this->headScript()
    ->appendFile($this->basePath() . '/library/amcharts/amcharts.js')
    ->appendFile($this->basePath() . '/library/amcharts/serial.js')
    ->appendFile($this->basePath() . '/library/amcharts/themes/light.js');
?>
<style type="text/css">
.details-2 											{display: none;}
.show-slider-con,.show-slider-con .fa-chevron-up 	{transition: all 0.5s ease;-webkit-transition: all 0.5s ease;-moz-transition: all 0.5s ease;-o-transition: all 0.5s ease;}
.table-responsive table.table tr td.td_prnt_text	{padding:4px 0px !important; border-top:0px !important;}
.td_prnt_text .action_btns li a						{padding-top:3px;}
</style>
<div class="content_wrapper padlr0">
    <div class="container-fluid padlr0">
        <div class="col-lg-12">
            <h1>Project Kickoff</h1>
        </div> 
        <div class="col-lg-12 flwup_topcnt fmg_topcnt clear">
        	<div class="col-lg-3 form-group">
            	<span class="date_icon"><i class="fa fa-calendar"></i></span>
                <input type="text" name="ref_date" id="ref_date" class="form-control date_picker lbl_move" value=""  label="Ref Date"/>
            </div>
            <div class="col-lg-3 form-group">
                <input type="text" name="ref_no" id="ref_no" class="form-control lbl_move" value=""  label="Ref No"/>
            </div>
            <div class="col-lg-6 form-group">
                <input type="text" name="nameofthe_property" id="nameofthe_property" class="form-control lbl_move" value=""  label="Name of the Property"/>
            </div>
        </div>
        <div class="col-lg-12 clear">
            <ul class="breadcrumb_area">
                <li><a href="conception" class="active">Conception</a></li>
                <li><a href="unit">Unit</a></li>
                <li><a href="#">WBS</a></li>
                <li><a href="turnaround-cost">Turnaround Cost</a></li>
                <li><a href="turnaround-schedule">Turnaround Schedule</a></li>
                <li><a href="#">Team</a></li>
                <li><a href="critical-area">Critical Area</a></li>
                <li><a href="make-brand">Make/Brand</a></li>
                <li><a href="documents">Documents</a></li>
                <li><a href="setup">Setup</a></li>
            </ul>
        </div>
        <div class="col-lg-12 clear">
            <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1">
                <div class="col-lg-12">
                    <div class="row">
                        <div class="step_by_liner animated slideInDown"></div>
                        <ul class="step_by">
                            <li>
                                <div class="step_by_sep animated_0_4s slideInRight"><p>1</p></div>
                                <p class="stepli_p1">Selection</p>
                            </li>
                            <li>
                                <div class="step_by_sep stepsep_active animated slideInRight"><p>2</p></div>
                                <p class="stepli_p2">Concept</p>
                            </li>
                            <li>
                                <div class="step_by_sep animated_1_5s slideInRight"><p>3</p></div>
                                <p class="stepli_p3">Features</p>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-lg-12 clear">
            	<div class="kickoff_area col-lg-12 clear">
                    <!-- Step One -->                    
                    <div class="col-lg-12 clear details-1 padlr0">
                    	<div class="col-lg-12 clear padlr0">
                            <div class="col-lg-3 form-group padlr0">
                                <input type="text" name="option_name" id="option_name" class="form-control lbl_move" value=""  label="Option Name"/>
                            </div>
                            <div class="col-lg-6 form-group">
                                <input type="text" name="presented_by" id="presented_by" class="form-control lbl_move" value=""  label="Presented by"/>
                            </div>
                        </div>
                        <div class="sliderfull clear">
                            <div id="carousel-example" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner">
                                    <div class="item active">
                                        <div class="imgsslider" style="background-image:url('<?php echo $this->basePath(); ?>/images/test_img1.jpg'),url('<?php echo $this->basePath(); ?>/images/no-image.png'); height:400px;"></div>
                                    </div>
                                    <div class="item">
                                        <div class="imgsslider" style="background-image:url('<?php echo $this->basePath(); ?>/images/test_img2.jpg'),url('<?php echo $this->basePath(); ?>/images/no-image.png'); height:400px;"></div>
                                    </div>
                                    <div class="item">
                                        <div class="imgsslider" style="background-image:url('<?php echo $this->basePath(); ?>/images/test_img1.jpg'),url('<?php echo $this->basePath(); ?>/images/no-image.png'); height:400px;"></div>
                                    </div>
                                </div>
                                <a class="left carousel-control" href="#carousel-example" data-slide="prev"> <span class="glyphicon glyphicon-chevron-left"></span></a>
                                <a class="right carousel-control" href="#carousel-example" data-slide="next"> <span class="glyphicon glyphicon-chevron-right"></span></a>
                            </div>
                            <span id="btn-show-hide-content" class="show-slider-con open"><i class="fa fa-chevron-up tform"></i></span>
                            <div class="slider-con clear active" id="slide-content">
                                <ul>
                                    <li>
                                        <label>Project Type</label>
                                        <input type="text" id="ProjectType" name="ProjectType" value=""/>
                                        <input type="hidden" id="ProjectTypeId" name="ProjectTypeId" value=""/>
                                    </li>
                                    <li>
                                        <label>No of Blocks</label>
                                        <input type="text" name="NoOfBlocks" value="" onblur="return FormatNum(this, 0)" onkeypress="return isNumberKey(event,this)" maxlength="12"/>
                                    </li>
                                    <li>
                                        <label>No of Floors</label>
                                        <input type="text" name="NoOfFloors" value="" onblur="return FormatNum(this, 0)" onkeypress="return isNumberKey(event,this)" maxlength="12"/>
                                    </li>
                                    <li>
                                        <label>No of Flats</label>
                                        <input type="text" name="NoOfFlats" value="" onblur="return FormatNum(this, 0)" onkeypress="return isNumberKey(event,this)" maxlength="12"/>
                                    </li>
                                    <li>
                                        <label>Common Area</label>
                                        <div class="form-group">
                                            <input type="text" id="CommonArea" name="CommonArea" value=""/>
                                        </div>
                                    </li>
                                    <li>
                                        <label>&nbsp;</label>
                                       <div class="select-style slide-select">
                                            <select name="CommonAreaUnitId">
                                                <option value="2">Sqm</option>
                                                <option value="6">Sft</option>
                                                <option value="7">Sqyd</option>
                                                <option value="8">Acres</option>
                                                <option value="9">Hectares</option>
                                                <option value="10">Cent</option>
                                            </select>
                                        </div>
                                    </li>
                                    <li>
                                        <label>Saleable Area</label>
                                        <div class="form-group">
                                            <input type="text" style="border-left:1px solid #fff;" class="input-group-txt" name="PropSaleableArea" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" value=""/>
                                        </div>
                                    </li>
                                    <li>
                                        <label>&nbsp;</label>
                                        <div class="select-style slide-select">
                                            <select name="PropSaleableAreaUnitId">
                                                <option value="2">Sqm</option>
                                                <option value="6">Sft</option>
                                                <option value="7">Sqyd</option>
                                                <option value="8">Acres</option>
                                                <option value="9">Hectares</option>
                                                <option value="10">Cent</option>
                                            </select>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-12 savebtn_area padlr0 marg0">
                            <ul class="details-1">
                                <li class="dropdown save_btn float_r"><a href="javascript:showDetails(2);" data-toggle="tooltip" data-placement="left" class="ripple" title="Next">Next</a>
                            </ul>
                        </div>
                    </div>
                    <!-- Step Two -->
                    <div class="col-lg-12 clear details-2 padlr0">
                    
                    	<div class="col-lg-12 col-md-12 col-sm-12 cnt_sliders padlr0">
                    		<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                            <!-- Wrapper for slides -->
                            <div class="carousel-inner" role="listbox">
                    		<!--step 1-->
                    			<div class="item active">
                        			<div class="list-div">
                                        <div class="col-lg-4 col-md-4">
                                            <h1>Specification</h1>
                                            <div class="table-responsive">
                                                <table class="table">
                                                    <tbody>
                                                    <tr>
                                                        <td class="td_prnt_text"><input class="parent_text" type="text" id="spec_1" name="spec_1" onchange="addSpecRow(this)"/></td>
                                                        <td width="1%" class="action_btns_td td_prnt_text">
                                                            <ul class="action_btns">
                                                                <li>
                                                                    <a class="specDelete_1" href="#" onclick="deleteSpec(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete">
                                                                    <i class="fa fa-trash-o"></i></span></a>
                                                                </li>
                                                            </ul>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                <input type="hidden" name="specrowid" id="specrowid" value="1"/>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-4">
                                            <h1>Special Features</h1>
                                            <div class="table-responsive">
                                                <table class="table">
                                                    <tbody>
                                                    <tr>
                                                        <td class="td_prnt_text"><input class="parent_text" type="text" id="splfeature_1" name="splfeature_1" onchange="addSplfeatureRow(this)"/></td>
                                                        <td width="1%" class="action_btns_td td_prnt_text">
                                                            <ul class="action_btns">
                                                                <li>
                                                                    <a class="splfeatureDelete_1" href="#" onclick="deleteSplfeature(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete">
                                                                    <i class="fa fa-trash-o"></i></span></a>
                                                                </li>
                                                            </ul>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                <input type="hidden" name="splfeaturerowid" id="splfeaturerowid" value="1"/>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-4">
                                            <h1>Amenities</h1>
                                            <div class="table-responsive">
                                                <table class="table">
                                                    <tbody>
                                                    <tr>
                                                        <td class="td_prnt_text"><input class="parent_text" type="text" id="amenities_1" name="amenities_1" onchange="addAmenitiesRow(this)"/></td>
                                                        <td width="1%" class="action_btns_td td_prnt_text">
                                                            <ul class="action_btns">
                                                                <li>
                                                                    <a class="amenitiesDelete_1" href="#" onclick="deleteAmenities(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete">
                                                                    <i class="fa fa-trash-o"></i></span></a>
                                                                </li>
                                                            </ul>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                <input type="hidden" name="amenitiesrowid" id="amenitiesrowid" value="1"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="cont_bt-list">
                                        <ul>
                                            <li><a href="javascript:showDetails(1);" class="steps_btn"><i class="fa fa-chevron-circle-left"></i> Back</a></li>
                                            <li><a href="#carousel-example-generic" data-slide="next" class="cbtn steps_btn" data-stepno="2">Continue <i class="fa fa-chevron-circle-right"></i></a></li>
                                        </ul>
                                    </div>
                                </div>
                    			<!--step 2-->
                                <div class="item">
                                    <div class="col-lg-4 col-md-4">
                                        <h2 class="sp-tl">Drawings</h2>
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                <tr>
                                                    <th width="20%">Drawing Name</th>
                                                    <th width="4%">Action</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td><input class="parent_text" type="text" id="drawingname_1" name="drawingname_1" onchange="addDrawingRow(this)"/></td>
                                                        <td width="4%" class="action_btns_td">
                                                            <ul class="action_btns">
                                                                <li style="float:left;">
                                                                    <a href="#">
                                                                        <span  data-toggle="tooltip" data-placement="left" data-original-title="Documents Attached" class="btn-file butclr_imp"><i class="fa fa-paperclip dcm_atch"></i><input type="file"></span>
                                                                    </a>
                                                                </li>
                                                                <!--<li style="float:left;"> <a class="mainTr_1" href="#"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Views"><i class="fa fa-eye"></i></span> </a> </li>-->
                                                                <li style="float:left;"><a href="#" class="drawDelete_1" onclick="deleteDrawing(this, event);" style="display: none;"><span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"><i class="fa fa-trash-o"></i></span></a></li>
                                                            </ul>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <input type="hidden" name="drawingrowid" id="drawingrowid" value="1"/>
                                        </div>
                                    </div>
                                    <div class="col-lg-8 col-md-8">
                                        <h2 class="sp-tl">Documents</h2>
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                <tr>
                                                    <th width="15%">Type</th>
                                                    <th width="15%">Description</th>
                                                    <th width="4%">Action</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td><input class="parent_text" type="text" id="documentname_1" name="documentname_1" onchange="addDocumentRow(this)"/></td>
                                                    <td width="15%"><textarea class="parent_texts" id="documentdescription_1" name="documentdescription_1" onchange="addDocumentRow(this)"></textarea></td>
                                                    <td width="4%" class="action_btns_td">
                                                        <ul class="action_btns">
                                                            <li style="float:left;">
                                                                <a href="#">
                                                                    <span  data-toggle="tooltip" data-placement="left" data-original-title="Documents Attached" class="btn-file butclr_imp"><i class="fa fa-paperclip dcm_atch"></i><input type="file"></span>
                                                                </a>
                                                            </li>
                                                            <!--                                <li style="float:left;"> <a class="mainTr_1" href="#"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Views"><i class="fa fa-eye"></i></span> </a> </li>-->
                                                            <li style="float:left;"><a href="#" class="docDelete_1" onclick="deleteDocument(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"><i class="fa fa-trash-o"></i></span></a></li>
                                                        </ul>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                            <input type="hidden" name="documentrowid" id="documentrowid" value="1"/>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <h2 class="sp-tl">Consultants</h2>
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                <tr>
                                                    <th>Consultant Name</th>
                                                    <th>Consultant Type</th>
                                                    <th>Fees %</th>
                                                    <th>Fees Amount</th>
                                                    <th>Action</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td width="10%"><input type="text" class="parent_text" id="consultantname_1" name="consultantname_1" onchange="addConsultantRow(this)"></td>
                                                    <td width="10%"><input type="text" class="parent_text" id="consultanttype_1" name="consultanttype_1" onchange="addConsultantRow(this)"></td>
                                                    <td width="5%"><input type="text" class="parent_text" id="fees_1" name="fees_1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addConsultantRow(this)"></td>
                                                    <td width="5%"><input type="text" class="parent_text txt_right" id="feesamount_1" name="feesamount_1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addConsultantRow(this)"></td>
                                                    <td width="3%" class="action_btns_td">
                                                        <ul class="action_btns">
                                                            <li style="float:left;"> <a href="#" class="consultDelete_1" onclick="deleteConsultant(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                                        </ul>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                            <input type="hidden" name="consultantrowid" id="consultantrowid" value="1"/>
                                        </div>
                                    </div>
                                    <div class="cont_bt-list">
                                        <ul>
                                             <li><a href="#carousel-example-generic" data-slide="prev" class="steps_btn" data-stepno="1"><i class="fa fa-chevron-circle-left"></i> Back</a></li>
                                            <li><a href="#carousel-example-generic" data-slide="next" class="cbtn steps_btn" data-stepno="3">Continue <i class="fa fa-chevron-circle-right"></i></a></li>
                                        </ul>
                                    </div>
                                </div>
                                <!--step 2-->
                    
                                <!--step 3-->
                                <div class="item">
                                    <div class="col-lg-12">
                                        <div class="col-lg-6 col-md-6 col-sm-6 padlr0">
                                            <div class="col-lg-11 m_btm20 padlr0 padtop20">
                                                <input type="text" name="ProjectAddress" id="ProjectAddress" class="form-control lbl_move" value=""  label="Project Address"/>
                                            </div>
                                            <div class="col-lg-11 padlr0">
                                                <div class="maps">
                                                    <iframe src="https://www.google.com/maps/embed?pb=!1m23!1m12!1m3!1d3887.457649794688!2d80.2567486!3d13.0065026!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m8!3e6!4m0!4m5!1s0x3a526790e4000001%3A0x989dcd51467b86e7!2sMicromen+Software+Solutions+Pvt+Ltd.%2C+2%2C+Sardar+Patel+Rd%2C+Sriram+Nagar%2C+Adyar%2C+Chennai%2C+Tamil+Nadu+600020!3m2!1d13.006293!2d80.25675199999999!5e0!3m2!1sen!2sin!4v1440739630228" frameborder="0" style="border:0;width:100% !important; height:250px; margin-bottom:10px;" allowfullscreen></iframe>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-md-6 col-sm-6">
                                            <div class="col-lg-12 m_btm20 padtop20">
                                                <input type="text" name="LandMark" id="LandMark" class="form-control lbl_move" value="" label="LandMark"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="liner"></div>
                                    <div class="col-lg-12">
                                    	<div class="col-lg-4 col-md-5 col-sm-12 padlr0">
                                        	<div class="col-lg-12 m_btm20 padlr0 padtop20">
                                                <select class="single_dropdown lbl_move" name="SoilType" id="SoilType" style="width:100%;" label="Select a state..." >
                                                    <option value=""> <option>
                                                    <option value="1">SoilType1</option>
                                                    <option value="2">SoilType2</option>
                                                    <option value="3">SoilType3</option>
                                                </select>
                                            </div>
                                            <div class="col-lg-12 padlr0 m_btm20">
                                            	<div class="col-lg-8 col-md-8 col-sm-8 padlr0">
                                            		<p>Availabliity of Ground Water Level</p>
                                                </div>
                                                <div class="col-lg-4 col-md-4 col-sm-4 padlr0">
                                            		<div class="pro_select_style float_r select-style">
                                                        <select name='GroundWater'>
                                                            <option>Good</option>
                                                            <option>Normal</option>
                                                            <option>Poor</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-12 padlr0 m_btm20">
                                                <div class="col-lg-8 col-md-8 col-sm-8 padlr0">
                                            		<p>Availabliity of Govt Water Supply</p>
                                                </div>
                                                <div class="col-lg-4 col-md-4 col-sm-4 padlr0">
                                            		<span class="float_r">
                                                    	<label class="ripple">
                                                        	<input class="ios_checkbox" name="SoilTestReport" id="SoilTestReport"  checked type="checkbox"/>
                                                            <div class="ios_switch"><span></span></div>
                                                        </label>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-lg-12 padlr0 m_btm20">    
                                                <div class="col-lg-6 col-md-6 col-sm-6 padlr0">
                                            		<p>Availabliity of Electricity</p>
                                                </div>
                                                <div class="col-lg-6 col-md-6 col-sm-6 padlr0">
                                            		<span class="float_r">
                                                    	<label class="ripple">
                                                        	<input class="ios_checkbox" id="Electricity" name="Electricity" type="checkbox"/>
                                                            <div class="ios_switch"><span></span></div>
                                                        </label>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-8 col-md-7 col-sm-12">
                                            <div class="col-lg-12">
                                                <h1>Government Norms</h1>
                                                <div class="col-lg-4 col-md-4 col-sm-4 m_btm20 padtop20">
                                                    <input type="text" name="FSI" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" class="form-control lbl_move" value="" label="FSI"/>
                                                </div>
                                                <div class="col-lg-4 col-md-4 col-sm-4 m_btm20 padtop20">
                                                    <input type="text" name="PremiumFSI" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18"class="form-control lbl_move" value="" label="Premium FSI"/>
                                                </div>
                                                <div class="col-lg-4 col-md-4 col-sm-4 m_btm20 padtop20">
                                                    <input type="text" name="Guideline" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18"class="form-control lbl_move" value="" label="Guideline Value"/>
                                                </div>
                                                <div class="col-lg-4 col-md-4 col-sm-4 m_btm20 padtop20">
                                                    <input type="text" name="Floors" onblur="return FormatNum(this, 0)" onkeypress="return isNumberKey(event,this)" maxlength="12"class="form-control lbl_move" value="" label="No. of Floors"/>
                                                </div>
                                                <div class="col-lg-4 col-md-4 col-sm-4 m_btm20 padtop20">
                                                    <input type="text" name="ExpandableFSI" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" class="form-control lbl_move" value="" label="Expandable FSI %"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="liner"></div>
                                        <div class="col-lg-12 padlr0 clear">
                                            <h1>Approval Details</h1>
                                            <div class="table-responsive">
                                                <table class="table">
                                                    <thead>
                                                    <tr>
                                                        <th>Authority of Approval</th>
                                                        <th>Approval Date</th>
                                                        <th>Approval No</th>
                                                        <th>Action</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr>
                                                        <td width="10%"><input class="parent_text" type="text" id="approvalauthority_1" name="approvalauthority_1" onchange="addApprovalRow(this)"/></td>
                                                        <td width="4%">
                                                        	<input class="parent_text date_picker" type="text" id="approvaldate_1" name="approvaldate_1" onchange="addApprovalRow(this)"/></td>
                                                        <td width="4%"><input class="parent_text" type="text" id="approvalno_1" name="approvalno_1" onchange="addApprovalRow(this)"/></td>
                                                        <td width="2%">
                                                            <ul class="action_btns">
                                                                <li style="float:left;">
                                                                    <a href="#" class="approvalDelete_1" onclick="deleteApprovalRow(this, event);" style="display: none;">
                                                                        <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                <input type="hidden" name="approvalrowid" id="approvalrowid" value="1"/>
                                            </div>
                                        </div>
                                        <div class="cont_bt-list">
                                            <ul>
                                                <li><a href="#carousel-example-generic" data-slide="prev" class="steps_btn" data-stepno="2"><i class="fa fa-chevron-circle-left"></i> Back</a></li>
                                                <li><a href="#carousel-example-generic" data-slide="next" class="cbtn steps_btn" data-stepno="4">Continue <i class="fa fa-chevron-circle-right"></i></a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <!--step 3-->
                    
                                <!--step 4-->
                                <div class="item">
                                    <div class="col-lg-6 col-lg-offset-0 col-md-6 col-md-offset-0 col-sm-6 col-sm-offset-0">
                                        <h1>Expected Income</h1>
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                <tr>
                                                    <th>Particular</th>
                                                    <th>Amount</th>
                                                    <th>Action</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td width="10%"><input class="parent_text" type="text" name="pcostparticular_1" id="pcostparticular_1" onchange="addPCostRow(this)"/></td>
                                                    <td width="5%"><input class="parent_text txt_right" type="text" name="pcostamount_1" id="pcostamount_1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addPCostRow(this)"/></td>
                                                    <td width="3%">
                                                        <ul class="action_btns">
                                                            <li style="float:left;"> <a href="#" class="pCostDelete_1" onclick="deletePCostRow(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                                        </ul>
                                                    </td>
                                                </tr>
                                                <tr class="total">
                                                    <td width="10%" align="right">Total Proposal Cost</td>
                                                    <td width="5%"><input class="total_input parent_text txt_right" type="text" id="totalProposalCost" readonly/></td>
                                                    <td></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                            <input type="hidden" name="pcostrowid" id="pcostrowid" value="1"/>
                                        </div>
                                        <h1>Expected Expenses</h1>
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                <tr>
                                                    <th>Particular</th>
                                                    <th>Amount</th>
                                                    <th>Action</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td width="10%"><input class="parent_text" type="text" name="exparticular_1" id="exparticular_1" onchange="addExIncomeRow(this)"/></td>
                                                    <td width="5%"><input class="parent_text txt_right" type="text" name="examount_1" id="examount_1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addExIncomeRow(this)"/></td>
                                                    <td width="3%">
                                                        <ul class="action_btns">
                                                            <li style="float:left;"> <a href="#" class="exIncomeDelete_1" onclick="deleteExIncomeRow(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                                        </ul>
                                                    </td>
                                                </tr>
                                                <tr class="total">
                                                    <td width="10%" align="right">Total Expected Income</td>
                                                    <td width="5%"><input class="total_input parent_text txt_right" type="text" id="totalExpectedIncome" readonly/></td>
                                                    <td></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                            <input type="hidden" name="exincomerowid" id="exincomerowid" value="1"/>
                                        </div>
                                        <h1>Net Profit</h1>
                                        <div class="table-responsive">
                                            <table class="table">
                                                <tbody>
                                                <tr>
                                                    <td align="right" class="rate_pri" width="49%">Total</td>
                                                    <td style="border-right:none;"><input class="total_input parent_text txt_right" name="netprofit" id="netprofit" type="text" readonly/></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-lg-offset-0 col-md-6 col-md-offset-0 col-sm-6 col-sm-offset-0">
                                        <h1>Construction Schedule</h1>
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                <tr>
                                                    <th>Year</th>
                                                    <th>Amount</th>
                                                    <th>Action</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td width="3%"><input type="text" class="parent_text date_picker_year" name="constructionyear_1" id="constructionyear_1" onchange="addConstructionRow(this)"></td>
                                                    <td width="5%"><input type="text" class="parent_text txt_right" name="constructionamount_1" id="constructionamount_1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="updateFundFlowChart()"></td>
                                                    <td width="3%">
                                                        <ul class="action_btns">
                                                            <li style="float:left;">
                                                                <a href="#" class="constructionDelete_1" onclick="deleteConstructionRow(this, event);" style="display: none;">
                                                                    <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                            <input type="hidden" name="constructionrowid" id="constructionrowid" value="1"/>
                                        </div>
                                        <div class="col-lg-12 padlr0">
                                            <h1>Fund Flow</h1>
                                            <div class="col-lg-12 cht" style="margin-top:10px; height:250px;" id="fundFlowChart"></div>
                                        </div>
                                        <div class="col-lg-12 padlr0">
                                            <h1>Ratio Analysis</h1>
                                            <div class="cht" id="feasibilityRatioChart" style="height:200px;"></div>
                                        </div>
                                    </div>
                                    <div class="cont_bt-list">
                                        <ul>
                                            <li><a href="#carousel-example-generic" data-slide="prev" class="steps_btn" data-stepno="3"><i class="fa fa-chevron-circle-left"></i> Back</a></li>
                                            <li><a href="unit" class="cbtn">Submit&nbsp;&nbsp;<i class="fa fa-check-circle"></i></a></li>
                                        </ul>
                                    </div>
                                </div>
                                <!--step 4-->
                    		</div>
                    	</div>
                    </div>
            	</div>
            </div>       
        </div>
    </div>
</div>
<!--Dummy Tables-->
<table id="dummy-splfeature" style="display: none;">
    <tbody>
    <tr>
        <td class="td_prnt_text"><input class="parent_text" type="text" id="splfeature__1" name="splfeature__1" onchange="addSplfeatureRow(this)"/></td>
        <td width="1%" class="action_btns_td td_prnt_text">
            <ul class="action_btns">
                <li>
                    <a class="splfeatureDelete__1" href="#" onclick="deleteSplfeature(this, event);" style="display: none;">
                    	<span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span>
                    </a>
                </li>
            </ul>
        </td>
    </tr>
    </tbody>
</table>
<table id="dummy-spec" style="display: none;">
    <tbody>
    <tr>
        <td class="td_prnt_text"><input class="parent_text" type="text" id="spec__1" name="spec__1" onchange="addSpecRow(this)"/></td>
        <td width="1%" class="action_btns_td td_prnt_text">
            <ul class="action_btns">
                <li>
                    <a class="specDelete__1" href="#" onclick="deleteSpec(this, event);" style="display: none;">
                    	<span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span>
                    </a>
                </li>
            </ul>
        </td>
    </tr>
    </tbody>
</table>
<table id="dummy-amenities" style="display: none;">
    <tbody>
    <tr>
        <td class="td_prnt_text"><input class="parent_text" type="text" id="amenities__1" name="amenities__1" onchange="addAmenitiesRow(this)"/></td>
        <td width="1%" class="action_btns_td td_prnt_text">
            <ul class="action_btns">
                <li>
                    <a class="amenitiesDelete__1" href="#" onclick="deleteAmenities(this, event);" style="display: none;">
                    	<span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span>
                    </a>
                </li>
            </ul>
        </td>
    </tr>
    </tbody>
</table>

<table id="dummy-drawing" style="display: none;">
    <tbody>
    <tr>
        <td><input class="parent_text" type="text" id="drawingname__1" name="drawingname__1" onchange="addDrawingRow(this)"/></td>
        <td width="4%" class="action_btns_td">
            <ul class="action_btns">
                <li style="float:left;">
                    <a href="#">
                        <span  data-toggle="tooltip" data-placement="left" data-original-title="Documents Attached" class="btn-file butclr_imp"><i class="fa fa-paperclip dcm_atch"></i><input type="file"></span>
                    </a>
                </li>
                <!--<li style="float:left;"> <a class="mainTr__1" href="#"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Views"><i class="fa fa-eye"></i></span> </a> </li>-->
                <li style="float:left;"> <a href="#" class="drawDelete__1" onclick="deleteDrawing(this, event);"  style="display: none;"><span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul>
        </td>
    </tr>
    </tbody>
</table>

<table id="dummy-document" style="display: none;">
    <tbody>
    <tr>
        <td><input class="parent_text" type="text" id="documentname__1" name="documentname__1" onchange="addDocumentRow(this)"/></td>
        <td><textarea class="parent_texts" id="documentdescription__1" name="documentdescription__1" onchange="addDocumentRow(this)"></textarea></td>
        <td width="4%" class="action_btns_td">
            <ul class="action_btns">
                <li style="float:left;">
                    <a href="#"> <span  data-toggle="tooltip" data-placement="left" data-original-title="Documents Attached" class="btn-file butclr_imp"><i class="fa fa-paperclip dcm_atch"></i><input type="file"></span></a>
                </li>
                <!--<li style="float:left;"> <a class="mainTr__1" href="#"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Views"><i class="fa fa-eye"></i></span> </a> </li>-->
                <li style="float:left;"> <a class="docDelete__1" href="#" onclick="deleteDocument(this, event);"  style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul>
        </td>
    </tr>
    </tbody>
</table>

<table id="dummy-consultant" style="display: none;">
    <tbody>
    <tr>
        <td width="10%"><input type="text" class="parent_text" id="consultantname__1" name="consultantname__1" onchange="addConsultantRow(this)"></td>
        <td width="10%"><input type="text" class="parent_text" id="consultanttype__1" name="consultanttype__1" onchange="addConsultantRow(this)"></td>
        <td width="5%"><input type="text" class="parent_text" id="fees__1" name="fees__1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addConsultantRow(this)"></td>
        <td width="5%"><input type="text" class="parent_text txt_right" id="feesamount__1" name="feesamount__1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addConsultantRow(this)"></td>
        <td width="3%" class="action_btns_td">
            <ul class="action_btns">
                <li style="float:left;"> <a href="#" class="consultDelete__1" onclick="deleteConsultant(this, event);" style="display: none;"><span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul>
        </td>
    </tr>
    </tbody>
</table>

<table id="dummy-approval" style="display: none;">
    <tbody>
    <tr>
        <td width="10%"><input class="parent_text" type="text" id="approvalauthority__1" name="approvalauthority__1" onchange="addApprovalRow(this)"/></td>
        <td width="4%"><input class="parent_text date_picker" type="text" id="approvaldate__1" name="approvaldate__1" onchange="addApprovalRow(this)"/></td>
        <td width="4%"><input class="parent_text" type="text" id="approvalno__1" name="approvalno__1" onchange="addApprovalRow(this)"/></td>
        <td width="2%">
            <ul class="action_btns">
                <li style="float:left;">
                    <a href="#" class="approvalDelete__1" onclick="deleteApprovalRow(this, event);" style="display: none;">
                        <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span>
                    </a>
                </li>
            </ul>
        </td>
    </tr>
    </tbody>
</table>

<table id="dummy-proposalcost" style="display: none;">
    <tbody>
    <tr>
        <td width="10%"><input class="parent_text" type="text" name="pcostparticular__1" id="pcostparticular__1" onchange="addPCostRow(this)"/></td>
        <td width="5%"><input class="parent_text txt_right" type="text" name="pcostamount__1" id="pcostamount__1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addPCostRow(this)"/></td>
        <td width="3%">
            <ul class="action_btns">
                <li style="float:left;"> <a href="#" class="pCostDelete__1" onclick="deletePCostRow(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul>
        </td>
    </tr>
    </tbody>
</table>
<table id="dummy-exincome" style="display: none;">
    <tbody>
    <tr>
        <td width="10%"><input class="parent_text" type="text" name="exparticular__1" id="exparticular__1" onchange="addExIncomeRow(this)"/></td>
        <td width="5%"><input class="parent_text txt_right" type="text" name="examount__1" id="examount__1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addExIncomeRow(this)"/></td>
        <td width="3%">
            <ul class="action_btns">
                <li style="float:left;"> <a href="#" class="exIncomeDelete__1" onclick="deleteExIncomeRow(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul>
        </td>
    </tr>
    </tbody>
</table>

<table id="dummy-construction-schedule" style="display: none;">
    <tbody>
    <tr>
        <td width="3%"><input type="text" class="parent_text date_picker_year" name="constructionyear__1" id="constructionyear__1" onchange="addConstructionRow(this)"></td>
        <td width="5%"><input type="text" class="parent_text txt_right" name="constructionamount__1" id="constructionamount__1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="updateFundFlowChart()"></td>
        <td width="3%">
            <ul class="action_btns">
                <li style="float:left;"> <a href="#" class="constructionDelete__1" onclick="deleteConstructionRow(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul>
        </td>
    </tr>
    </tbody>
</table>


<script type="text/javascript">
	$(document).ready(function() {
		$(".single_dropdown").select2({
			placeholder: "",
			allowClear: true,
		});
	});
	$('.cnt_sliders .carousel').carousel({
		interval: false
	});
	
	var $showHideBtn = $('#btn-show-hide-content'),
    	$showHideBtnI = $('#btn-show-hide-content > i'),
		$slideContent = $('#slide-content');
		
	$showHideBtn.on('click', function () {
		$slideContent.toggleClass('active');
		$showHideBtn.toggleClass('open');
		$showHideBtnI.toggleClass('tform');
	});
	function showDetails(id) {
        if (id==2) {
            $('.details-' + 1).hide();
            $('.details-' + 2).fadeIn();
            return;
        }

        $('.details-' + 1).fadeIn();
        $('.details-' + 2).hide();
    }
	function addSpecRow(x) {
        var $x =  $(x),
            $tr = $x.closest('tr'),
            key = $x[0].id.split('_')[1];

        if ($tr.next('tr').length != 0)
            return;

        if ($('#spec_' + key).val().length == 0)
            return;

        var $rowid = $('#specrowid'),
            count = parseInt($rowid.val()) + 1,
            template = $('#dummy-spec tbody').html();

        template = template.replace(/__1/g, '_' + count);
        $tr.parent('tbody').append(template);
        $rowid.val(count);
        $('.specDelete_' + key).show();
    }

    function deleteSpec(x,e) {
        e.preventDefault();
        if (!confirm('Do you want to Delete'))
            return false;

        var $tr = $(x).closest('tr'),
            $tbody = $tr.parent('tbody');

        if ($tbody.find('> tr').length == 1) {
            var template = $('#dummy-spec tbody').html();
            template = template.replace(/__1/g, '_' + 1);
            $tbody.append(template);
            $('#specrowid').val(1);
        }

        $tr.next('tr.subTr').remove();
        $tr.remove();
        return false;
    }
	
	function addSplfeatureRow(x) {
        var $x =  $(x),
            $tr = $x.closest('tr'),
            key = $x[0].id.split('_')[1];

        if ($tr.next('tr').length != 0)
            return;

        if ($('#splfeature_' + key).val().length == 0)
            return;

        var $rowid = $('#splfeaturerowid'),
            count = parseInt($rowid.val()) + 1,
            template = $('#dummy-splfeature tbody').html();

        template = template.replace(/__1/g, '_' + count);
        $tr.parent('tbody').append(template);
        $rowid.val(count);
        $('.splfeatureDelete_' + key).show();
    }

    function deleteSplfeature(x,e) {
        e.preventDefault();
        if (!confirm('Do you want to Delete'))
            return false;

        var $tr = $(x).closest('tr'),
            $tbody = $tr.parent('tbody');

        if ($tbody.find('> tr').length == 1) {
            var template = $('#dummy-splfeature tbody').html();
            template = template.replace(/__1/g, '_' + 1);
            $tbody.append(template);
            $('#splfeaturerowid').val(1);
        }

        $tr.next('tr.subTr').remove();
        $tr.remove();
        return false;
    }

    function addAmenitiesRow(x) {
        var $x =  $(x),
            $tr = $x.closest('tr'),
            key = $x[0].id.split('_')[1];

        if ($tr.next('tr').length != 0)
            return;

        if ($('#amenities_' + key).val().length == 0)
            return;

        var $rowid = $('#amenitiesrowid'),
            count = parseInt($rowid.val()) + 1,
            template = $('#dummy-amenities tbody').html();

        template = template.replace(/__1/g, '_' + count);
        $tr.parent('tbody').append(template);
        $rowid.val(count);
        $('.amenitiesDelete_' + key).show();
    }

    function deleteAmenities(x,e) {
        e.preventDefault();
        if (!confirm('Do you want to Delete'))
            return false;

        var $tr = $(x).closest('tr'),
            $tbody = $tr.parent('tbody');

        if ($tbody.find('> tr').length == 1) {
            var template = $('#dummy-amenities tbody').html();
            template = template.replace(/__1/g, '_' + 1);
            $tbody.append(template);
            $('#amenitiesrowid').val(1);
        }

        $tr.next('tr.subTr').remove();
        $tr.remove();
        return false;
    }
	
	function addDrawingRow(x) {
        var $x =  $(x),
            $tr = $x.closest('tr'),
            key = $x[0].id.split('_')[1];

        if ($tr.next('tr').length != 0)
            return;

        if ($('#drawingname_' + key).val().length == 0 || $('#drawingdescription_' + key).val().length == 0)
            return;

        var $rowid = $('#drawingrowid'),
            count = parseInt($rowid.val()) + 1,
            template = $('#dummy-drawing tbody').html();

        template = template.replace(/__1/g, '_' + count);
        $tr.parent('tbody').append(template);
        $rowid.val(count);
        $('.drawDelete_' + key).show();
    }

    function deleteDrawing(x,e) {
        e.preventDefault();
        if (!confirm('Do you want to Delete'))
            return false;

        var $tr = $(x).closest('tr'),
            $tbody = $tr.parent('tbody');

        if ($tbody.find('> tr').length == 1) {
            var template = $('#dummy-drawing tbody').html();
            template = template.replace(/__1/g, '_' + 1);
            $tbody.append(template);
            $('#drawingrowid').val(1);
        }

        $tr.next('tr.subTr').remove();
        $tr.remove();
        return false;
    }

    function addDocumentRow(x) {
        var $x =  $(x),
            $tr = $x.closest('tr'),
            key = $x[0].id.split('_')[1];

        if ($tr.next('tr').length != 0)
            return;

        if ($('#documentname_' + key).val().length == 0 || $('#documentdescription_' + key).val().length == 0)
            return;

        var $rowid = $('#documentrowid'),
            count = parseInt($rowid.val()) + 1,
            template = $('#dummy-document tbody').html();

        template = template.replace(/__1/g, '_' + count);
        $tr.parent('tbody').append(template);
        $rowid.val(count);
        $('.docDelete_' + key).show();
    }

    function deleteDocument(x,e) {
        e.preventDefault();
        if (!confirm('Do you want to Delete'))
            return false;

        var $tr = $(x).closest('tr'),
            $tbody = $tr.parent('tbody');

        if ($tbody.find('> tr').length == 1) {
            var template = $('#dummy-document tbody').html();
            template = template.replace(/__1/g, '_' + 1);
            $tbody.append(template);
            $('#documentrowid').val(1);
        }

        $tr.next('tr.subTr').remove();
        $tr.remove();
        return false;
    }

    function addConsultantRow(x) {
        var $x =  $(x),
            $tr = $x.closest('tr'),
            key = $x[0].id.split('_')[1];

        if ($tr.next('tr').length != 0)
            return;

        if ($('#consultantname_' + key).val().length == 0 || $('#consultanttype_' + key).val().length == 0
            || $('#fees_' + key).val().length == 0 || $('#feesamount_' + key).val().length == 0)
            return;

        var $rowid = $('#consultantrowid'),
            count = parseInt($rowid.val()) + 1,
            template = $('#dummy-consultant tbody').html();

        template = template.replace(/__1/g, '_' + count);
        $tr.parent('tbody').append(template);
        $rowid.val(count);
        $('.consultDelete_' + key).show();
    }

    function deleteConsultant(x,e) {
        e.preventDefault();
        if (!confirm('Do you want to Delete'))
            return false;

        var $tr = $(x).closest('tr'),
            $tbody = $tr.parent('tbody');

        if ($tbody.find('> tr').length == 1) {
            var template = $('#dummy-consultant tbody').html();
            template = template.replace(/__1/g, '_' + 1);
            $tbody.append(template);
            $('#consultantrowid').val(1);
        }

        $tr.next('tr.subTr').remove();
        $tr.remove();
        return false;
    }

    function addPCostRow(x) {
        calcTotalPropCost();

        var $x =  $(x),
            $tr = $x.closest('tr'),
            key = $x[0].id.split('_')[1];

        if ($tr.next('tr:not(.total)').length != 0)
            return;

        if ($('#pcostparticular_' + key).val().length == 0 || $('#pcostamount_' + key).val().length == 0)
            return;

        var $rowid = $('#pcostrowid'),
            count = parseInt($rowid.val()) + 1,
            template = $('#dummy-proposalcost tbody').html();

        template = template.replace(/__1/g, '_' + count);
        $tr.after(template);
        $rowid.val(count);
        $('.pCostDelete_' + key).show();
        bindPCostAutocomplete(count);
    }

    function deletePCostRow(x,e) {
        e.preventDefault();
        if (!confirm('Do you want to Delete'))
            return false;

        var $tr = $(x).closest('tr'),
            $tbody = $tr.parent('tbody');

        if ($tbody.find('> tr:not(.total)').length == 1) {
            var template = $('#dummy-proposalcost tbody').html();
            template = template.replace(/__1/g, '_' + 1);
            $tr.after(template);
            $('#pcostrowid').val(1);
        }

        $tr.remove();
        calcTotalPropCost();

        return false;
    }

    function addApprovalRow(x) {
        calcTotalPropCost();

        var $x =  $(x),
            $tr = $x.closest('tr'),
            key = $x[0].id.split('_')[1];

        if ($tr.next('tr:not(.total)').length != 0)
            return;

        if ($('#approvalauthority_' + key).val().length == 0 || $('#approvaldate_' + key).val().length == 0 || $('#approvalno_' + key).val().length == 0)
            return;

        var $rowid = $('#approvalrowid'),
            count = parseInt($rowid.val()) + 1,
            template = $('#dummy-approval tbody').html();

        template = template.replace(/__1/g, '_' + count);
        $tr.after(template);
        $rowid.val(count);
        $('.approvalDelete_' + key).show();
        $('.date_picker').datepicker( {format: "dd-mm-yyyy"});
    }

    function deleteApprovalRow(x,e) {
        e.preventDefault();
        if (!confirm('Do you want to Delete'))
            return false;

        var $tr = $(x).closest('tr'),
            $tbody = $tr.parent('tbody');

        if ($tbody.find('> tr:not(.total)').length == 1) {
            var template = $('#dummy-approval tbody').html();
            template = template.replace(/__1/g, '_' + 1);
            $tr.after(template);
            $('#approvalrowid').val(1);
            $('.date_picker').datepicker( {format: "dd-mm-yyyy"});
        }

        $tr.remove();
        return false;
    }

    function calcTotalPropCost() {
        var $amt = $('input[id^=pcostamount_]');
        summaryProposalCost = 0;
        $.each($amt, function() {
            var amt = parseFloat($(this).val());

            if (isNaN(amt))
                return;

            summaryProposalCost += amt;
        });
        summaryProposalCost = summaryProposalCost.toFixed(2);
        $('#totalProposalCost').val(summaryProposalCost);
        calcCostSummary();
    }

    function addExIncomeRow(x) {
        calcExIncomeCost();

        var $x =  $(x),
            $tr = $x.closest('tr'),
            key = $x[0].id.split('_')[1];

        if ($tr.next('tr:not(.total)').length != 0)
            return;

        if ($('#exparticular_' + key).val().length == 0 || $('#examount_' + key).val().length == 0)
            return;

        var $rowid = $('#exincomerowid'),
            count = parseInt($rowid.val()) + 1,
            template = $('#dummy-exincome tbody').html();

        template = template.replace(/__1/g, '_' + count);
        $tr.after(template);
        $rowid.val(count);
        $('.exIncomeDelete_' + key).show();
        bindEIncomeAutocomplete(count);
    }

    function deleteExIncomeRow(x,e) {
        e.preventDefault();
        if (!confirm('Do you want to Delete'))
            return false;

        var $tr = $(x).closest('tr'),
            $tbody = $tr.parent('tbody');

        if ($tbody.find('> tr:not(.total)').length == 1) {
            var template = $('#dummy-exincome tbody').html();
            template = template.replace(/__1/g, '_' + 1);
            $tr.after(template);
            $('#exincomerowid').val(1);
        }

        $tr.remove();
        calcExIncomeCost();

        return false;
    }

    function calcExIncomeCost() {
        var $amt = $('input[id^=examount_]');
        summaryExpectedIncome = 0;
        $.each($amt, function() {
            var amt = parseFloat($(this).val());

            if (isNaN(amt))
                return;

            summaryExpectedIncome += amt;
        });
        summaryExpectedIncome = summaryExpectedIncome.toFixed(2);
        $('#totalExpectedIncome').val(summaryExpectedIncome);
        calcCostSummary();
    }

    function calcCostSummary(){
        $('#summary-proposalcost').html(summaryProposalCost);
        $('#summary-expectedincome').html(summaryExpectedIncome);
        var amt = summaryProposalCost - summaryExpectedIncome;
        $netprofit.val(amt);
    }

    function bindPCostAutocomplete(rowId) {
        $('#pcostparticular_' + rowId).autocomplete({
            lookup: arr_proposalCostParticulars,
            showNoSuggestionNotice: false,
            lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
                if (queryLowerCase == '*') {
                    return suggestion.value;
                } else {
                    var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                    return re.test(suggestion.value);
                }
            }
        });
    }

    function bindEIncomeAutocomplete(rowId) {
        $('#exparticular_' + rowId).autocomplete({
            lookup: arr_expectedincomeParticulars,
            showNoSuggestionNotice: false,
            lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
                if (queryLowerCase == '*') {
                    return suggestion.value;
                } else {
                    var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                    return re.test(suggestion.value);
                }
            }
        });
    }

    function addConstructionRow(x) {
        var $x =  $(x),
            $tr = $x.closest('tr'),
            key = $x[0].id.split('_')[1];

        if ($tr.next('tr').length != 0)
            return;

        var $rowid = $('#constructionrowid'),
            count = parseInt($rowid.val()) + 1,
            template = $('#dummy-construction-schedule tbody').html();

        template = template.replace(/__1/g, '_' + count);
        $tr.parent('tbody').append(template);
        $rowid.val(count);
        $('.constructionDelete_' + key).show();

        bindDatepicker();
    }

    function bindDatepicker() {
        $('.date_picker_year').datepicker( {
            format: "yyyy",
            startView: "years",
            minViewMode: "years"
        });
    }

    function deleteConstructionRow(x,e) {
        e.preventDefault();
        if (!confirm('Do you want to Delete'))
            return false;

        var $tr = $(x).closest('tr'),
            $tbody = $tr.parent('tbody');

        if ($tbody.find('> tr').length == 1) {
            var template = $('#dummy-construction-schedule tbody').html();
            template = template.replace(/__1/g, '_' + 1);
            $tbody.append(template);
            $('#constructionrowid').val(1);

            bindDatepicker();
        }

        $tr.remove();
        updateFundFlowChart();
        return false;
    }
	function updateFundFlowChart() {
        var $rate = $('input[id^=constructionamount_]');
        var chartData = [];
        $.each($rate, function() {
            var $this = $(this),
                name = $this[0].id;
            if (name.indexOf('__') != -1) return;

            var key = name.split('_')[1],
                name = $('#constructionyear_'+key).val(),
                rate =  $this.val();

            if (isNaN(parseFloat(rate)) || name == '')
                return;

            chartData.push({
                'Year': name,
                'Rate': rate
            });
        });

        if (fundFlowChart != null) {
            fundFlowChart.dataProvider = chartData;
            fundFlowChart.validateData();
            return;
        }

        fundFlowChart = AmCharts.makeChart("fundFlowChart", {
            "theme": "light",
            "type": "serial",
            "marginRight": 80,
            "autoMarginOffset": 20,
            "marginTop":20,
            "dataProvider": chartData,
            "valueAxes": [{
                "id": "v1",
                "axisAlpha": 0.1
            }],
            "graphs": [{
                "useNegativeColorIfDown": true,
                "balloonText": "[[category]]<br><b>value: [[value]]</b>",
                "bullet": "round",
                "bulletBorderAlpha": 1,
                "bulletBorderColor": "#FFFFFF",
                "hideBulletsCount": 50,
                "lineThickness": 2,
                "lineColor": "#fdd400",
                "negativeLineColor": "#67b7dc",
                "valueField": "Rate"
            }],
            "chartCursor": {
                "valueLineEnabled": true,
                "valueLineBalloonEnabled": true
            },
            "categoryField": "Year",
            "categoryAxis": {
                "axisAlpha": 0,
                "minHorizontalGap": 60
            }
        });
    }
</script>