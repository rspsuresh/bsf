<link type="text/css" rel="stylesheet" href="<?php echo $this->basePath(); ?>/css/select2.min.css" />
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/js/select2.full.min.js"></script>
<!--<link rel="stylesheet" href="http://rawgit.com/wenzhixin/bootstrap-table/master/src/bootstrap-table.css" />
<script src="http://rawgit.com/wenzhixin/bootstrap-table/master/src/bootstrap-table.js"></script>-->
<style type="text/css">
    /*.scrl {overflow-y: scroll !important;min-height:100% !important;max-height:500px !important;}*/
    .rt_bx-clr{color:#07549b;font-size:16px;padding-bottom:6px;}
    .table-responsive {overflow-x:inherit !important;}
    .hgh{min-height:500px;max-height:100%;}

    .Checkbox {
        width: 20px;
        height: 20px;
        position: relative;
    }
    .Checkbox > * {
        position: absolute;
    }
    .Checkbox-visible {
        border: 1px solid gray;
        width: 16px;
        height: 16px;
        margin: 2px;
        background: #fff;
        border: 1px solid #dedede;
        border-radius: 3px;
    }
    .Checkbox > input {
        z-index: 1;
        opacity: 0;
        left: 50%;
        top: 50%;
        -webkit-transform: translatex(-50%) translatey(-50%);
        transform: translatex(-50%) translatey(-50%);
        display: block;
        cursor: pointer;
        width: 20px;
        height: 20px;
    }
    .Checkbox > input:checked + .Checkbox-visible {
        background: #337ab7;
        border-color: #337ab7;
        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTQnIGhlaWdodD0nMTQnIHZpZXdCb3g9JzAgMCAxNCAxNCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48dGl0bGU+d2hpdGU8L3RpdGxlPjxwYXRoIGQ9J001LjM3OCAxMS4zN0wyIDcuNTlsMS40MzgtMS4yODZMNS4zNzQgOC40N2w1LjE4NS01Ljg0TDEyIDMuOTFsLTYuNjIyIDcuNDYnIGZpbGw9JyNmZmYnLz48L3N2Zz4=);
    }
    .Checkbox > input:hover + .Checkbox-visible {
        border-color: #cccccc;
    }
    .Checkbox > input:hover:checked + .Checkbox-visible {
        border-color: #558cbb;
    }
    .Checkbox > input:focus + .Checkbox-visible {
        border-color: #337ab7;
    }

    .table-fixed tbody{height:470px;overflow-y:auto;width:100%;}
    .table-fixed thead,.table-fixed tbody,.table-fixed tr,.table-fixed td,.table-fixed th{display:block;}
    .table-fixed tbody td,.table-fixed thead>tr>th{float:left; border-bottom:0;position:relative;text-overflow:ellipsis;overflow:hidden;display:inline-block;white-space:nowrap;}


</style>
<form id="formWrapper" method="post" onsubmit="return entryValidate();">
    <h2 class="vendordetail_change">Cheque Entry</h2>
    <div class="right_lbox_inner_cnt">
        <div class="col-lg-12">
            <div class="form-horizontal">
                <div class="row">
                    <div class="col-lg-12">
                        <div id="cheque1" class="prt-next">
                            <div class="form-group">
                                <div class="col-lg-12">
                                    <label class="rt_bx-clr">Start No</label>
                                    <input type="text" name="startNo" id="startNo" class="form-control lbl_move" value="<?php echo (isset($chequeList)) ? $chequeList['StartNo'] : '';?>" onchange="generateEndNo()" onkeypress="return isNumberKey(event);" label="Star No" />
                                    <input type="hidden" name="ChequeId" id="ChequeId" value="<?php echo (isset($ChequeId)) ? $ChequeId : '0';?>">
                                    <input type="hidden" name="accountId" id="accountId" value="<?php echo (isset($accountId)) ? $accountId : '0';?>">
                                    <input type="hidden" name="type" id="type" value="">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-lg-12">
                                    <label class="rt_bx-clr">Width</label>
                                    <input type="text" name="width" id="width" class="form-control lbl_move" value="<?php echo (isset($chequeList)) ? $chequeList['ChequeNoWidth'] : '';?>" onkeypress="return isNumberKey(event);" label="Width" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-lg-12">
                                    <label class="rt_bx-clr">No of Leaves</label>
                                    <input type="text" name="noOfLeaves" id="noOfLeaves" class="form-control lbl_move" value="<?php echo (isset($chequeList)) ? $chequeList['NoofLeaves'] : '';?>" onchange="generateEndNo()"  onkeypress="return isNumberKey(event);" label="No of Leaves" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-lg-12">
                                    <label class="rt_bx-clr">End No</label>
                                    <input readonly type="text" name="endNo" id="endNo" class="form-control lbl_move" value="<?php echo (isset($chequeList)) ? $chequeList['EndNo'] : '';?>" onkeypress="return isNumberKey(event);" label="End No" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-lg-12">
                                    <label class="rt_bx-clr">Requested Date</label>
                                    <input readonly type="text" class="date_picker form-control" label="Requested Date" value="<?php echo (isset($chequeList)) ? $chequeList['ChequeRDate'] : '';?>" name="requestedDate" id="requestedDate" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-lg-12">
                                    <label class="rt_bx-clr">Remarks</label>
                                    <textarea class="exp-tex" name="remarks" id="remarks"><?php echo (isset($chequeList)) ? $chequeList['Remarks'] : '';?></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div id="cheque2" style="display: none;">
                        <div class="col-lg-12">
                            <div class="table-responsive" style="margin-top:10px;margin-bottom:10px;">
                                <table class="table table-fixed">
                                    <thead class="">
                                    <tr>
                                        <th width="100%" class="bg_clo">Cheque No</th>
                                    </tr>
                                    </thead>
                                    <tbody id="chequeNo">
                                    </tbody>
                                </table>
                                <input type="hidden" name="chequeCount" id="chequeCount" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<p class="rightlbox_btn rightlbox_btnchng cheque1"><a href="javascript:void(0);" onclick="nextcheque();" class="ripple">Next</a></p>
<p class="rightlbox_btn rightlbox_btnchng cheque2 clears" style="display: none;">
    <a href="javascript:void(0);" onclick="previouscheque();" class=" cheque2 ripple" title="Back">Back</a>
    <a href="javascript:void(0);" onclick="submitForm();" id="submitFId" class="ripple" title="Submit">Submit</a>
</p>

<script type="text/javascript">
    $(function () {
        $('.right_lightbox').attr('pageRefresh','0');
    });
    $(".single_dropdown2").select2({
        placeholder: ""
    });
    $(".date_picker").datepicker({
        format: "dd-mm-yyyy",
        autoclose: true
    });

    function generateEndNo(){
        var startNo=$('#startNo').val();
        var noOfLeaves=$('#noOfLeaves').val();
        var endNo=parseInt(startNo)+parseInt(noOfLeaves)-1;
        //console.log(endNo)
        if(!isNaN(endNo))
            $('#endNo').val(endNo);
        else
            $('#endNo').val(0);
    }
    function nextcheque(){
        var startNo=$('#startNo').val();
        var noOfLeaves=$('#noOfLeaves').val();
        var width=$('#width').val();
        var endNo=parseInt(startNo)+parseInt(noOfLeaves)-1;
        //endNo--;
        var chequeNo=$('#chequeNo');
        chequeNo.html('');
        var sno=0;
        for(var i=startNo;i<=endNo;i++){
            var len1= i.toString().length;
            var iLen = width - len1 + 1;
            var sPre = "";
            var j = 1;
            for(j = 1; j < iLen; j++) {
                sPre = sPre+"0";
            }
            sPre=sPre+i;
            //console.log(sPre);
            sno++;
            chequeNo.append('<tr><td width="100%">'+sPre+'<input type="hidden" name="chequeNumber_'+sno+'" id="chequeNumber_'+sno+'" value="'+sPre+'"></tr>');
        }
        $('#chequeCount').val(sno);
        $('#cheque1').hide();
        $('.cheque1').hide();
        $('#cheque2').show();
        $('.cheque2').show();
    }
    function previouscheque(){
        $('#cheque2').hide();
        $('.cheque2').hide();
        $('#cheque1').show();
        $('.cheque1').show();
    }

    function entryValidate(){

    }
    function submitForm(){
        $('#type').val('addEditDetails');

        $.ajax({
            url:"<?php echo $this->basePath(); ?>/fa/index/chequeentry",
            type:"post",
            //async:false,
            data:$('#formWrapper').serialize(),
            success:function(data, textStatus, jqXHR){
                $('.right_lightbox').hide().attr('pageRefresh','1').trigger('change');
            },
            error:function(jqXHR, textStatus, errorThrown){
            }
        });
    }

</script>