<link rel="stylesheet" type="text/css" href="<?php echo $this->basePath(); ?>/css/project.css" />
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/js/select2.full.min.js"></script>
<link type="text/css" rel="stylesheet" href="<?php echo $this->basePath(); ?>/css/select2.min.css" />
<?php echo $this->headScript()
    ->appendFile($this->basePath() . '/library/amcharts/amcharts.js')
    ->appendFile($this->basePath() . '/library/amcharts/serial.js')
    ->appendFile($this->basePath() . '/library/amcharts/themes/light.js');
?>
<style type="text/css">
    .details-2 {
        display: none;
    }
    .show-slider-con, .show-slider-con .fa-chevron-up {
        transition: all 0.5s ease;
        -webkit-transition: all 0.5s ease;
        -moz-transition: all 0.5s ease;
        -o-transition: all 0.5s ease;
    }
    .table-responsive table.table tr td.td_prnt_text {
        padding:4px 0px !important;
        border-top:0px !important;
    }
    .td_prnt_text .action_btns li a {
        padding-top:3px;
    }
    .padtop20 {
        padding-top: 25px !important;
    }
    .top-next {
        padding-top: 35px;
    }
</style>
<div class="content_wrapper padlr0">
<div class="container-fluid padlr0">
<div class="col-lg-12">
    <h1>Project Kickoff</h1>
</div>
<form onsubmit="return entryValidate()" method="post" id="formWrapper" enctype="multipart/form-data">
<div class="col-lg-12 clear padlr0">
    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-1">
        <label for="refNo" class="bk_lbl bk_lbl_inpt splcharc">Reference No <span class="colon_r">:</span></label>
        <input type="text" class="bk_lbl_inpt inputbg_ef bk_inpt1 splcharc" name="refNo" data-bsfshare="refNo" id="refNo" onchange="" value="<?php if (trim($kickoffRes['RefNo']) != '') { echo $kickoffRes['RefNo']; } else { echo $svNo; } ?>"/>
    </div>
    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-1">
        <div class="col-lg-12">
            <label for="refDate" class="bk_lbl bk_lbl_inpt"><span class="bkspan_calendar"><i class="fa fa-calendar-o"></i></span> Reference Date <span class="colon_r">:</span></label>
            <input type="text" class="date_picker bk_lbl_inpt no_bg bk_inpt inputbg_ef" name="refDate" data-bsfshare="refDate" readonly id="refdate" onchange="validateDate(this);" value="<?php if ($kickoffRes['RefDate'] != NULL) { echo date("d-m-Y", strtotime($kickoffRes['RefDate'])); } else { echo date("d-m-Y"); } ?>" />
        </div>
    </div>
    <div class="col-lg-5 col-md-5 col-sm-5 col-xs-1" style="<?php if ($enquiryId == 0) echo 'display: none'; ?>">
        <div class="col-lg-12">
            <label for="propertyName" class="bk_lbl bk_lbl_inpt splcharc">Property Name<span class="colon_r">:</span></label>
            <input type="text" class="bk_lbl_inpt inputbg_ef bk_inpt1 splcharc" name="propertyName" data-bsfshare="propertyName" id="refno" onchange="" value="<?php echo $kickoffRes['PropertyName']; ?>"/>
            <input type="hidden" name="kickOffId" id="kickOffId" value="<?php if ($kickoffId != 0) { echo $kickoffId; } else { echo ''; } ?>" />
            <input type="hidden" name="kfConceptionId" id="kfConceptionId" value="<?php if ($kfConceptionId != 0) { echo $kfConceptionId; } else { echo ''; } ?>" />
            <input type="hidden" name="landConceptionId" id="landConceptionId" value="<?php if ($landConceptionId != 0) { echo $landConceptionId; } else { echo ''; } ?>" />
            <input type="hidden" name="enquiryId" id="enquiryId" value="<?php if ($enquiryId != 0) { echo $enquiryId; } else { echo ''; } ?>" />
        </div>
    </div>
</div>
<div class="col-lg-12 clear padtop20">
    <ul class="breadcrumb_area">
        <li><a href="#" class="active">Conception</a></li>
        <li><a href="<?php echo $this->basePath().$unitUrl; ?>">Unit</a></li>
        <!--          <li><a href="--><?php //echo $this->basePath(); ?><!--/kickoff/index/wbs/--><?php //if ($kickoffId != 0) { echo $kickoffId; } else { echo ''; } ?><!--">WBS</a></li>-->
        <li><a href="<?php echo $this->basePath(); ?>/kickoff/index/turnaround/<?php if ($kickoffId != 0) { echo $kickoffId; } else { echo ''; } ?>">Turnaround Cost & Schedule</a></li>
        <li><a href="<?php echo $this->basePath(); ?>/kickoff/index/team/<?php if ($kickoffId != 0) { echo $kickoffId; } else { echo ''; } ?>">Team</a></li>
        <li><a href="<?php echo $this->basePath(); ?>/kickoff/index/make-brand/<?php if ($kickoffId != 0) { echo $kickoffId; } else { echo ''; } ?>">Make/Brand</a></li>
        <!--          <li><a href="--><?php //echo $this->basePath(); ?><!--/kickoff/index/documents/--><?php //if ($kickoffId != 0) { echo $kickoffId; } else { echo ''; } ?><!--">Documents</a></li>-->
        <li><a href="<?php echo $this->basePath(); ?>/kickoff/index/setup/<?php if ($kickoffId != 0) { echo $kickoffId; } else { echo ''; } ?>">Setup</a></li>
    </ul>
</div>
<div class="col-lg-12 clear">
<div class="col-lg-12 clear">
<div class="kickoff_area col-lg-12 clear">
<!-- Step One -->
<div class="col-lg-12 clear details-1 padlr0">
    <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 prt-next">
        <div class="col-lg-6 col-lg-offset-3 col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1 top-next">
            <div class="form-horizontal">
                <div class="row">
                    <div class="form-group">
                        <input type="text" name="projectname" data-bsfshare="Project Name" id="projectname" class="form-control lbl_move" label="Project Name" value="<?php echo $kickoffRes['ProjectName'];?>" readonly/>
                    </div>
                    <div class="form-group">
                        <select class="single_dropdown lbl_move" name="BusinessTypeId" id="BusinessTypeId" label="Business Type" style="width:100%;">
                            <?php foreach($businessTypeMaster as $businessType) { ?>
                                <option value="<?php echo $businessType['BusinessTypeId']; ?>" <?php echo ($businessType['BusinessTypeId'] == $conceptionRes['BusinessTypeId']) ? 'selected' : ''; ?>><?php echo $businessType['BusinessTypeName']; ?></option>
                            <?php } ?>
                        </select>
                    </div>
                    <div class="form-group">
                        <select name="ProjectTypeId" class="form-control single_dropdown lbl_move" label="Project Type" style="width:100%;">
                            <?php foreach($projectTypes as $list) { ?>
                                <option value="<?php echo $list['ProjectTypeId']; ?>" <?php echo ($list['ProjectTypeId'] == $conceptionRes['ProjectTypeId']) ? 'selected' : ''; ?>><?php echo $list['ProjectTypeName']; ?></option>
                            <?php } ?>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-12 clear details-1 padlr0">
        <div class="col-lg-12 savebtn_area padlr0 marg0">
            <ul class="details-1">
                <li class="dropdown save_btn float_r"><a href="javascript:showDetails(2);" data-toggle="tooltip" data-placement="left" class="ripple" title="Next">Next</a>
            </ul>
        </div>
    </div>
</div>
<!-- Step Two -->
<div class="col-lg-12 clear details-2 padlr0">
<div class="col-lg-12 col-md-12 col-sm-12 cnt_sliders padlr0">
<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
<!-- Wrapper for slides -->
<div class="carousel-inner" role="listbox">
<!--step 1-->
<div class="item active">
    <div class="col-lg-12">
        <div class="col-lg-12 col-md-12 col-sm-12 padlr0 ba-kig">
            <div class="col-lg-3 m_btm20 padtop20">
                <input type="text" name="ProjectAddress" id="ProjectAddress" class="form-control lbl_move" value="<?php echo (isset($conceptionRes)) ? $conceptionRes['ProjectAddress'] : ''; ?>" label="Project Address" />
            </div>
            <div class="col-lg-3 m_btm20 padtop20">
                <input type="text" name="City" id="City" class="form-control lbl_move" value="<?php if(isset($conceptionRes)) { if(isset($conceptionRes['City'])) { echo $conceptionRes['City']; } else { echo ''; } } else { echo ''; } ?>" label="City" />
            </div>
            <div class="col-lg-3 m_btm20 padtop20">
                <input type="text" name="PinCode" id="PinCode" class="form-control lbl_move" value="<?php if(isset($conceptionRes)) { if(isset($conceptionRes['PinCode'])) { echo $conceptionRes['PinCode']; } else { echo ''; } } else { echo ''; } ?>" label="PinCode" />
            </div>
            <div class="col-lg-3 m_btm20 padtop20">
                <input type="text" name="LandMark" id="LandMark" class="form-control lbl_move" value="<?php echo (isset($conceptionRes)) ? $conceptionRes['LandMark'] : ''; ?>" label="LandMark" />
            </div>
        </div>
    </div>
    <div class="liner"></div>
    <div class="col-lg-12">
        <div class="col-lg-4 col-md-5 col-sm-12 le-rht" >
            <div class="col-lg-12 m_btm20 padlr0 padtop20">
                <input type="text" name="SoilType" id="SoilType" class="form-control lbl_move" value="<?php echo (isset($conceptionRes)) ? $conceptionRes['SoilType'] : ''; ?>" label="SoilType" />
            </div>
            <div class="col-lg-12 padlr0 m_btm20">
                <div class="col-lg-8 col-md-8 col-sm-8 padlr0">
                    <p>Availabliity of Ground Water Level</p>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 padlr0">
                    <div class="pro_select_style float_r select-style">
                        <select name="GroundWaterLevel">
                            <option <?php echo (isset($conceptionRes) && $conceptionRes['GroundWaterLevel'] == 'Good') ? 'selected' : ''; ?>>Good</option>
                            <option <?php echo (isset($conceptionRes) && $conceptionRes['GroundWaterLevel'] == 'Normal') ? 'selected' : ''; ?>>Normal</option>
                            <option <?php echo (isset($conceptionRes) && $conceptionRes['GroundWaterLevel'] == 'Poor') ? 'selected' : ''; ?>>Poor</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-lg-12 padlr0 m_btm20">
                <div class="col-lg-8 col-md-8 col-sm-8 padlr0">
                    <p>Availabliity of Govt Water Supply</p>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 padlr0"> <span class="float_r">
                              <label class="ripple">
                                  <input type="checkbox" class="ios_checkbox inc_exc" name="GovtWaterSupply" id="GovtWaterSupply" value="1" <?php echo (isset($conceptionRes) && $conceptionRes['GovtWaterSupply'] == '1') ? 'checked' : ''; ?> />
                                  <div class="ios_switch"><span></span></div>
                              </label>
                              </span> </div>
            </div>
            <div class="col-lg-12 padlr0 m_btm20">
                <div class="col-lg-6 col-md-6 col-sm-6 padlr0">
                    <p>Availabliity of Electricity</p>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 padlr0"> <span class="float_r">
                              <label class="ripple">
                                  <input type="checkbox" class="ios_checkbox inc_exc" name="Electricity" id="Electricity" value="1" <?php echo (isset($conceptionRes) && $conceptionRes['Electricity'] == '1') ? 'checked' : ''; ?> />
                                  <div class="ios_switch"><span></span></div>
                              </label>
                              </span> </div>
            </div>
        </div>
        <div class="col-lg-8 col-md-7 col-sm-12 rht-le">
            <div class="col-lg-12">
                <h1 class="text-center mar-padd30">Government Norms</h1>
                <div class="col-lg-4 col-md-4 col-sm-4 m_btm20 padtop20">
                    <input type="text" name="FSI" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" class="form-control lbl_move" value="<?php echo (isset($conceptionRes)) ? $conceptionRes['FSI'] : ''; ?>" label="FSI" />
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 m_btm20 padtop20">
                    <input type="text" name="PremiumFSI" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18"class="form-control lbl_move" value="<?php echo (isset($conceptionRes)) ? $conceptionRes['PremiumFSI'] : ''; ?>" label="Premium FSI" />
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 m_btm20 padtop20">
                    <input type="text" name="Guideline" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18"class="form-control lbl_move" value="<?php echo (isset($conceptionRes)) ? $conceptionRes['Guideline'] : ''; ?>" label="Guideline Value" />
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 m_btm20 padtop20">
                    <input type="text" name="Floors" onblur="return FormatNum(this, 0)" onkeypress="return isNumberKey(event,this)" maxlength="12"class="form-control lbl_move" value="<?php echo (isset($conceptionRes)) ? $conceptionRes['Floors'] : ''; ?>" label="Max No. of Floors" />
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 m_btm20 padtop20">
                    <input type="text" name="ExpandableArea" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" class="form-control lbl_move" value="<?php echo (isset($conceptionRes)) ? $conceptionRes['ExpandableArea'] : ''; ?>" label="Expandable FSI %" />
                </div>
            </div>
        </div>
        <div class="liner"></div>
        <div class="col-lg-12 padlr0 clear">
            <h1>Approval Details</h1>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                    <tr>
                        <th>Authority of Approval</th>
                        <th>Approval Date</th>
                        <th>Approval No</th>
                        <th>Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    <?php
                    if(isset($conceptionApproval) && count($conceptionApproval) != 0) {
                        $i = 1;
                        foreach($conceptionApproval as $approval) { ?>
                            <tr>
                                <td width="10%"><input class="parent_text" type="text" id="approvalauthority_<?php echo $i; ?>" name="approvalauthority_<?php echo $i; ?>" onblur="addApprovalRow(this)" value="<?php echo $approval['AuthorityName']; ?>" /></td>
                                <td width="4%"><input class="parent_text date_picker" type="text" id="approvaldate_<?php echo $i; ?>" name="approvaldate_<?php echo $i; ?>" value="<?php echo date("d-m-Y", strtotime($approval['ApproveDate'])); ?>" /></td>
                                <td width="4%"><input class="parent_text" type="text" id="approvalno_<?php echo $i; ?>" name="approvalno_<?php echo $i; ?>" onblur="addApprovalRow(this)" value="<?php echo $approval['ApproveNo']; ?>" /></td>
                                <td width="2%"><ul class="action_btns">
                                        <li style="float:left;"> <a href="#" class="approvalDelete_<?php echo $i; ?>" onclick="deleteApprovalRow(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                    </ul></td>
                            </tr>
                            <?php $i++;
                        }
                    } else { ?>
                        <tr>
                            <td width="10%"><input class="parent_text" type="text" id="approvalauthority_1" name="approvalauthority_1" onchange="addApprovalRow(this)" /></td>
                            <td width="4%"><input class="parent_text date_picker" type="text" id="approvaldate_1" name="approvaldate_1" /></td>
                            <td width="4%"><input class="parent_text" type="text" id="approvalno_1" name="approvalno_1" onchange="addApprovalRow(this)" /></td>
                            <td width="2%"><ul class="action_btns">
                                    <li style="float:left;"> <a href="#" class="approvalDelete_1" onclick="deleteApprovalRow(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                </ul></td>
                        </tr>
                    <?php } ?>
                    </tbody>
                </table>
                <input type="hidden" name="approvalrowid" id="approvalrowid" value="<?php echo (isset($conceptionApproval) && count($conceptionApproval) != 0) ? count($conceptionApproval) : 1; ?>" />
            </div>
        </div>
        <div class="cont_bt-list">
            <ul>
                <li><a href="javascript:showDetails(1);" class="steps_btn"><i class="fa fa-chevron-circle-left"></i> Back</a></li>
                <li><a href="#carousel-example-generic" data-slide="next" class="cbtn steps_btn" data-stepno="4">Continue <i class="fa fa-chevron-circle-right"></i></a></li>
            </ul>
        </div>
    </div>
</div>

<!--step 2-->
<!--step 1-->
<!--<div class="item">-->
    <!--<div class="list-div">
        <div class="deft_act col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0">
            <div class="form-group col-lg-5 col-md-5 clear">
                <p class="heading_checkbox">Select Amenities</p>
                <div class="card">
                    <div class="card-body" style="min-height:50px; max-height:310px;">
                        <ul class="sampleUI list ui-sortable" data-sortable="true">




                        </ul>
                    </div>
                </div>
            </div>
            <div class="form-group col-lg-7 col-md-7">
                <p class="heading_checkbox">Selected Amenities</p>
                <div class="card">
                    <div class="card-body" style="min-height:50px; max-height:310px;">
                        <div class="table-responsive topsp animated-panel zoomIn" style="animation-delay: 0.2s;">
                            <table class="table" style=" margin-bottom:0px;" id="processTable">

                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="deft_act col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0">
            <div class="form-group col-lg-5 col-md-5 clear">
                <p class="heading_checkbox">Select Specification</p>
                <div class="card">
                    <div class="card-body" style="min-height:50px; max-height:310px;">
                        <ul class="sampleUI list ui-sortable" data-sortable="true">



                        </ul>
                    </div>
                </div>
            </div>
            <div class="form-group col-lg-7 col-md-7">
                <p class="heading_checkbox">Selected Specification</p>
                <div class="card">
                    <div class="card-body" style="min-height:50px; max-height:310px;">
                        <div class="table-responsive topsp animated-panel zoomIn" style="animation-delay: 0.2s;">
                            <table class="table" style=" margin-bottom:0px;" id="processTable">

                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>-->
<!--    <div class="cont_bt-list">-->
<!--        <ul>-->
<!--            <li><a href="#carousel-example-generic" data-slide="prev" class="steps_btn" data-stepno="2"><i class="fa fa-chevron-circle-left"></i> Back</a></li>-->
<!--            <li><a href="#carousel-example-generic" data-slide="next" class="cbtn steps_btn" data-stepno="2">Continue <i class="fa fa-chevron-circle-right"></i></a></li>-->
<!--        </ul>-->
<!--    </div>-->
<!--</div>-->

<!--step 3-->
<div class="item">
    <div class="col-lg-12 clear">
        <div class="col-lg-12" style="padding-left:0px !important;">
            <div class="col-lg-10 col-lg-offset-1 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 clear">
                <h1>Drawings</h1>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                        <tr>
                            <th width="20%">Drawing Name</th>
                            <th width="4%">Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        <?php
                        if(isset($conceptionDrawing) && count($conceptionDrawing) != 0) {
                            $i = 1;
                            foreach($conceptionDrawing as $drawing) { ?>
                                <tr>
                                    <td><input class="parent_text" type="text" id="drawingname_<?php echo $i; ?>" name="drawingname_<?php echo $i; ?>" onblur="addDrawingRow(this)" value="<?php echo $drawing['Title']; ?>" />
                                        <input type="hidden" id="drawingUrl_<?php echo $i; ?>" name="drawingUrl_<?php echo $i; ?>" value="<?php echo $drawing['URL']; ?>" /></td>
                                    <td width="4%" class="action_btns_td"><ul class="action_btns">
                                            <li style="float:left;">
                                                <?php if($drawing['URL'] != '') { ?>
                                                    <a href="<?php echo $this->basePath(); ?><?php echo $drawing['URL']; ?>">
                                                        <span data-toggle="tooltip" data-placement="left" data-original-title="Documents Views"><i class="fa fa-eye"></i></span>
                                                    </a>
                                                <?php } else { ?>
                                                    <span data-toggle="tooltip" data-placement="left" data-original-title="Click to attach document" class="btn-file butclr_imp"><i class="fa fa-paperclip dcm_atch"></i>
												<input type="file" name="drawFile_<?php echo $i; ?>" id="drawFile_<?php echo $i; ?>" />
											</span>
                                                <?php } ?>
                                            </li>
                                            <li style="float:left;"><a href="#" class="drawDelete_<?php echo $i; ?>" onclick="deleteDrawing(this, event);"><span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"><i class="fa fa-trash-o"></i></span></a></li>
                                        </ul></td>
                                </tr>
                                <?php $i++;
                            }
                        } else { ?>
                            <tr>
                                <td><input class="parent_text" type="text" id="drawingname_1" name="drawingname_1" onchange="addDrawingRow(this)" />
                                    <input type="hidden" id="drawingUrl_1" name="drawingUrl_1" /></td>
                                <td width="4%" class="action_btns_td"><ul class="action_btns">
                                        <li style="float:left;">
                                            <a href="#">
											<span data-toggle="tooltip" data-placement="left" data-original-title="Click to attach document" class="btn-file butclr_imp"><i class="fa fa-paperclip dcm_atch"></i>
												<input type="file" name="drawFile_1" id="drawFile_1" />
											</span>
                                            </a>
                                        </li>
                                        <li style="float:left;"><a href="#" class="drawDelete_1" onclick="deleteDrawing(this, event);" style="display: none;"><span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"><i class="fa fa-trash-o"></i></span></a></li>
                                    </ul></td>
                            </tr>
                        <?php } ?>
                        </tbody>
                    </table>
                    <input type="hidden" name="drawingrowid" id="drawingrowid" value="<?php echo (isset($conceptionDrawing) && count($conceptionDrawing) != 0) ? count($conceptionDrawing) : 1; ?>" />
                </div>
            </div>

            <div class="col-lg-10 col-lg-offset-1 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 clear">
                <h1>Documents</h1>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                        <tr>
                            <th width="15%">Type</th>
                            <th width="15%">Description</th>
                            <th width="4%">Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        <?php
                        if(isset($conceptionDocuments) && count($conceptionDocuments) != 0) {
                            $i = 1;
                            foreach($conceptionDocuments as $documents) { ?>
                                <tr>
                                    <td><input class="parent_text" type="text" id="documentname_<?php echo $i; ?>" name="documentname_<?php echo $i; ?>" onblur="addDocumentRow(this)" value="<?php echo $documents['Type']; ?>" />
                                        <input type="hidden" id="documentUrl_<?php echo $i; ?>" name="documentUrl_<?php echo $i; ?>" value="<?php echo $documents['URL']; ?>" /></td>
                                    <td width="15%"><textarea class="parent_texts" id="documentdescription_<?php echo $i; ?>" name="documentdescription_<?php echo $i; ?>" onchange="addDocumentRow(this)"><?php echo $documents['Description']; ?></textarea></td>
                                    <td width="4%" class="action_btns_td"><ul class="action_btns">
                                            <li style="float:left;">
                                                <?php if($documents['URL'] != '') { ?>
                                                    <a href="<?php echo $this->basePath(); ?><?php echo $documents['URL']; ?>"> <span data-toggle="tooltip" data-placement="left" data-original-title="Documents Views"><i class="fa fa-eye"></i></span> </a>
                                                <?php } else { ?>
                                                    <a href="#">
												<span data-toggle="tooltip" data-placement="left" data-original-title="Click to attach document" class="btn-file butclr_imp"><i class="fa fa-paperclip dcm_atch"></i>
													<input type="file" name="docFile_<?php echo $i; ?>" id="docFile_<?php echo $i; ?>" />
												</span>
                                                    </a>
                                                <?php } ?>
                                            </li>
                                            <li style="float:left;"><a href="#" class="docDelete_<?php echo $i; ?>" onclick="deleteDocument(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"><i class="fa fa-trash-o"></i></span></a></li>
                                        </ul></td>
                                </tr>
                                <?php $i++;
                            }
                        } else { ?>
                            <tr>
                                <td><input class="parent_text" type="text" id="documentname_1" name="documentname_1" onchange="addDocumentRow(this)" />
                                    <input type="hidden" id="documentUrl_1" name="documentUrl_1" /></td>
                                <td width="15%"><textarea class="parent_texts" id="documentdescription_1" name="documentdescription_1" onchange="addDocumentRow(this)"></textarea></td>
                                <td width="4%" class="action_btns_td"><ul class="action_btns">
                                        <li style="float:left;"> <a href="#"> <span data-toggle="tooltip" data-placement="left" data-original-title="Click to attach document" class="btn-file butclr_imp"><i class="fa fa-paperclip dcm_atch"></i>
                                      <input type="file" name="docFile_1" id="docFile_1" />
                                      </span> </a> </li>
                                        <li style="float:left;"><a href="#" class="docDelete_1" onclick="deleteDocument(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"><i class="fa fa-trash-o"></i></span></a></li>
                                    </ul></td>
                            </tr>
                        <?php } ?>
                        </tbody>
                    </table>
                    <input type="hidden" name="documentrowid" id="documentrowid" value="<?php echo (isset($conceptionDocuments) && count($conceptionDocuments) != 0) ? count($conceptionDocuments) : 1; ?>" />
                </div>
            </div>
            <div class="col-lg-10 col-lg-offset-1 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 clear">
                <h1>Consultants</h1>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                        <tr>
                            <th>Consultant Name</th>
                            <th>Consultant Type</th>
                            <th>Fees %</th>
                            <th>Fees Amount</th>
                            <th>Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        <?php
                        if(isset($conceptionConsultants) && count($conceptionConsultants) != 0) {
                            $i = 1;
                            foreach($conceptionConsultants as $consultants) { ?>
                                <tr>
                                    <td width="10%"><input type="text" class="parent_text" id="consultantname_<?php echo $i; ?>" name="consultantname_<?php echo $i; ?>" onchange="addConsultantRow(this)" value="<?php echo $consultants['Name']; ?>" /></td>
                                    <td width="10%"><input type="text" class="parent_text" id="consultanttype_<?php echo $i; ?>" name="consultanttype_<?php echo $i; ?>" onchange="addConsultantRow(this)" value="<?php echo $consultants['Type']; ?>" /></td>
                                    <td width="5%"><input type="text" class="parent_text" id="fees_<?php echo $i; ?>" name="fees_<?php echo $i; ?>" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addConsultantRow(this)" value="<?php echo $consultants['Fee']; ?>" /></td>
                                    <td width="5%"><input type="text" class="parent_text txt_right" id="feesamount_<?php echo $i; ?>" name="feesamount_<?php echo $i; ?>" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addConsultantRow(this)" value="<?php echo $consultants['FeeAmount']; ?>" /></td>
                                    <td width="3%" class="action_btns_td"><ul class="action_btns">
                                            <li style="float:left;"> <a href="#" class="consultDelete_<?php echo $i; ?>" onclick="deleteConsultant(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"> <i class="fa fa-trash-o"></i> </span> </a> </li>
                                        </ul></td>
                                </tr>
                                <?php $i++;
                            }
                        } else { ?>
                            <tr>
                                <td width="10%"><input type="text" class="parent_text" id="consultantname_1" name="consultantname_1" onchange="addConsultantRow(this)"></td>
                                <td width="10%"><input type="text" class="parent_text" id="consultanttype_1" name="consultanttype_1" onchange="addConsultantRow(this)"></td>
                                <td width="5%"><input type="text" class="parent_text" id="fees_1" name="fees_1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addConsultantRow(this)"></td>
                                <td width="5%"><input type="text" class="parent_text txt_right" id="feesamount_1" name="feesamount_1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addConsultantRow(this)"></td>
                                <td width="3%" class="action_btns_td"><ul class="action_btns">
                                        <li style="float:left;"> <a href="#" class="consultDelete_1" onclick="deleteConsultant(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"> <i class="fa fa-trash-o"></i> </span> </a> </li>
                                    </ul></td>
                            </tr>
                        <?php } ?>
                        </tbody>
                    </table>
                    <input type="hidden" name="consultantrowid" id="consultantrowid" value="<?php echo (isset($conceptionConsultants) && count($conceptionConsultants) != 0) ? count($conceptionConsultants) : 1; ?>" />
                </div>
            </div>
        </div>
    </div>
    <div class="cont_bt-list">
        <ul>
            <li><a href="#carousel-example-generic" data-slide="prev" class="steps_btn" data-stepno="1"><i class="fa fa-chevron-circle-left"></i> Back</a></li>
            <li><a href="javascript:void(0);" class="cbtn steps_btn" onclick="validateStepThree();">Continue <i class="fa fa-chevron-circle-right"></i></a></li>
        </ul>
    </div>
</div>
<!--step 4-->
<div class="item">
    <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0">
        <div class="col-lg-6">
            <h2 class="sp-tl">Expected Income</h2>
            <div class="table-responsive topsp">
                <table class="table" style="box-shadow:none;">
                    <thead>
                    <tr>
                        <th>Particular</th>
                        <th class="text-right">Amount</th>
                        <th>&nbsp;</th>
                    </tr>
                    </thead>
                    <tbody>
                    <?php $i=1; $totaIncome=0; if(isset($conceptionIncome)) {
                        foreach($conceptionIncome as $trans){ ?>
                            <tr>
                                <td width="10%"><input class="parent_text" type="text" name="incomeparticular_<?php echo $i; ?>" id="incomeparticular_<?php echo $i; ?>"  value="<?php echo isset($trans['Particular']) ? $trans['Particular'] : ''; ?>" onchange="addExIncomeRow(this)"/></td>
                                <td width="8%"><input class="parent_text text-right" type="text" name="incomeamount_<?php echo $i; ?>" id="incomeamount_<?php echo $i; ?>" value="<?php echo isset($trans['Amount']) ? $this->commonHelper()->sanitizeNumber($trans['Amount'],2,true) : $this->commonHelper()->sanitizeNumber(0,2,true); ?>" onblur="return FormatNum(this, 2,true)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addExIncomeRow(this)"/></td>
                                <td width="1%"><ul class="action_btns">
                                        <li style="float:left;"> <a href="#" class="incomeDelete_<?php echo $i; ?>" onclick="deleteExIncomeRow(this, event);" style="display: block;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                    </ul></td>
                            </tr>
                            <?php $i=$i+1; $totaIncome = $totaIncome + floatval($trans['Amount']); }}?>
                    <tr>
                        <td width="10%"><input class="parent_text" type="text" name="incomeparticular_<?php echo $i; ?>" id="incomeparticular_<?php echo $i; ?>" onchange="addExIncomeRow(this)"/></td>
                        <td width="8%"><input class="parent_text text-right" type="text" name="incomeamount_<?php echo $i; ?>" id="incomeamount_<?php echo $i; ?>" onblur="return FormatNum(this, 2,true)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addExIncomeRow(this)"/></td>
                        <td width="1%"><ul class="action_btns">
                                <li style="float:left;"> <a href="#" class="incomeDelete_<?php echo $i; ?>" onclick="deletePCostRow(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                            </ul></td>
                    </tr>
                    <tr class="total">
                        <td width="10%" align="right" class="rate_pri">Total Expected Income</td>
                        <td width="8%"><input class="parent_text text-right total-clr" type="text" id="totalExpectedIncome" value ="<?php echo $this->commonHelper()->sanitizeNumber($totaIncome,2,true); ?>" readonly/></td>
                        <td></td>
                    </tr>
                    </tbody>
                </table>
                <input type="hidden" name="incomerowid" id="incomerowid" value="<?php echo $i; ?>"/>
            </div>
        </div>
        <div class="col-lg-6">
            <h2 class="sp-tl">Proposal Cost</h2>
            <div class="table-responsive topsp">
                <table class="table" style="box-shadow:none;">
                    <thead>
                    <tr>
                        <th>Particular</th>
                        <th class="text-right">Amount</th>
                        <th>&nbsp;</th>
                    </tr>
                    </thead>
                    <tbody>
                    <?php $i=1; $totaExpense=0; if(isset($conceptionExpense)) {
                        foreach($conceptionExpense as $trans){ ?>
                            <tr>
                                <td width="10%"><input class="parent_text" type="text" name="pcostparticular_<?php echo $i; ?>" id="pcostparticular_<?php echo $i; ?>" value="<?php echo isset($trans['Particular']) ? $trans['Particular'] : ''; ?>" onchange="addPCostRow(this)"/></td>
                                <td width="8%"><input class="parent_text text-right " type="text" name="pcostamount_<?php echo $i; ?>" id="pcostamount_<?php echo $i; ?>" value="<?php echo isset($trans['Amount']) ? $this->commonHelper()->sanitizeNumber($trans['Amount'],2,true) : $this->commonHelper()->sanitizeNumber(0,2,true); ?>"  onblur="return FormatNum(this, 2,true)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addPCostRow(this)"/></td>
                                <td width="1%"><ul class="action_btns">
                                        <li style="float:left;"> <a href="#" class="pCostDelete_<?php echo $i; ?>" onclick="deletePCostRow(this, event);" style="display:block;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                    </ul></td>
                            </tr>
                            <?php $i=$i+1; $totaExpense = $totaExpense + floatval($trans['Amount']); }} $totalProfit = floatval($totaIncome)-floatval($totaExpense);?>
                    <tr>
                        <td width="10%"><input class="parent_text" type="text" name="pcostparticular_<?php echo $i; ?>" id="pcostparticular_<?php echo $i; ?>" onchange="addPCostRow(this)"/></td>
                        <td width="8%"><input class="parent_text text-right " type="text" name="pcostamount_<?php echo $i; ?>" id="pcostamount_<?php echo $i; ?>" onblur="return FormatNum(this, 2,true)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addPCostRow(this)"/></td>
                        <td width="1%"><ul class="action_btns">
                                <li style="float:left;"> <a href="#" class="pCostDelete_<?php echo $i; ?>" onclick="deletePCostRow(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                            </ul></td>
                    </tr>
                    <tr class="total">
                        <td width="10%" align="right" class="rate_pri">Total Proposal Cost</td>
                        <td width="8%"><input class="parent_text text-right total-clr" type="text" id="totalProposalCost" value ="<?php echo $this->commonHelper()->sanitizeNumber($totaExpense,2,true); ?>" readonly/></td>
                        <td></td>
                    </tr>
                    </tbody>
                </table>
                <input type="hidden" name="pcostrowid" id="pcostrowid" value="<?php echo $i; ?>"/>
            </div>
        </div>
    </div>
    <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0" style="margin-top:10px; margin-bottom:10px;">
        <div class="col-lg-4 col-lg-offset-4 col-md-6 col-md-offset-0 col-sm-6 col-sm-offset-0" style=" border:1px solid #c2c2c2;">
            <h2 class="sp-tl">Net Profit</h2>
            <div class="table-responsive topsp">
                <table class="table"  style="box-shadow:none; background:#F5F0EA !important; margin-bottom:0px;">
                    <tbody>
                    <tr>
                        <td align="right" class="rate_pri" width="5%" >Total</td>
                        <td style="border-right:none;"><input class="parent_text text-right total-clr" name="netprofit" id="netprofit" type="text" value ="<?php echo $this->commonHelper()->sanitizeNumber($totalProfit,2,true); ?>" readonly/></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0">
        <div class="col-lg-6 col-lg-offset-0 col-md-6 col-md-offset-0 col-sm-6 col-sm-offset-0">
            <h2 class="sp-tl">Construction Schedule</h2>
            <div class="table-responsive topsp">
                <table style=" margin-bottom:0px;" class="table tableWithFloatingHeader">
                    <thead>
                    <tr>
                        <th>Year</th>
                        <th class="text-right">Amount</th>
                        <th>&nbsp;</th>
                    </tr>
                    </thead>
                    <tbody>
                    <?php $i=1; if(isset($conceptionSchedule)) {
                        foreach($conceptionSchedule as $trans){ ?>
                            <tr>
                                <td width="3%"><input type="text" class="parent_text date_picker_year" name="constructionyear_<?php echo $i; ?>" id="constructionyear_<?php echo $i; ?>" value="<?php echo isset($trans['ShYear']) ? $trans['ShYear'] : ''; ?>" onchange="addConstructionRow(this)"></td>
                                <td width="5%"><input type="text" class="parent_text text-right" name="constructionamount_<?php echo $i; ?>" id="constructionamount_<?php echo $i; ?>" value="<?php echo isset($trans['Amount']) ? $this->commonHelper()->sanitizeNumber($trans['Amount'],2,true) : $this->commonHelper()->sanitizeNumber(0,2,true); ?>" onblur="return FormatNum(this, 2,true)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="updateFundFlowChart()"></td>
                                <td width="3%"><ul class="action_btns">
                                        <li style="float:left;"> <a href="#" class="constructionDelete_<?php echo $i; ?>" onclick="deleteConstructionRow(this, event);" style="display:block;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                    </ul></td>
                            </tr>
                            <?php $i=$i+1;}}?>
                    <tr>
                        <td width="3%"><input type="text" class="parent_text date_picker_year" name="constructionyear_<?php echo $i; ?>" id="constructionyear_<?php echo $i; ?>" onchange="addConstructionRow(this)"></td>
                        <td width="5%"><input type="text" class="parent_text text-right" name="constructionamount_<?php echo $i; ?>" id="constructionamount_<?php echo $i; ?>" onblur="return FormatNum(this, 2,true)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="updateFundFlowChart()"></td>
                        <td width="3%"><ul class="action_btns">
                                <li style="float:left;"> <a href="#" class="constructionDelete_<?php echo $i; ?>" onclick="deleteConstructionRow(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                            </ul></td>
                    </tr>
                    </tbody>
                </table>
                <input type="hidden" name="constructionrowid" id="constructionrowid" value="<?php echo $i; ?>"/>
            </div>
        </div>
        <div class="col-lg-6 col-lg-offset-0 col-md-6 col-md-offset-0 col-sm-6 col-sm-offset-0">
            <div class="chats-lft">
                <h2 class="sp-tl">Fund Flow</h2>
                <div class="col-lg-12 cht" style="height:350px;" id="fundFlowChart"></div>
            </div>
        </div>
    </div>
    <div class="cont_bt-list">
        <ul>
            <li><a href="#carousel-example-generic" data-slide="prev" class="steps_btn" data-stepno="3"><i class="fa fa-chevron-circle-left"></i> Back</a></li>
            <li><a href="javascript:submitForm();" class="cbtn">Continue&nbsp;&nbsp;<i class="fa fa-check-circle"></i></a></li>
        </ul>
    </div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</form>
</div>
</div>

<!--Dummy Tables-->
<table id="dummy-spec" style="display: none;">
    <tbody>
    <tr>
        <td class="td_prnt_text"><input class="parent_text" type="text" id="spec__1" name="spec__1" onchange="addSpecRow(this)" /></td>
        <td width="1%" class="action_btns_td td_prnt_text"><ul class="action_btns">
                <li> <a class="specDelete__1" href="#" onclick="deleteSpec(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<table id="dummy-splfeature" style="display: none;">
    <tbody>
    <tr>
        <td class="td_prnt_text"><input class="parent_text" type="text" id="splfeature__1" name="splfeature__1" onchange="addSplfeatureRow(this)" /></td>
        <td width="1%" class="action_btns_td td_prnt_text"><ul class="action_btns">
                <li> <a class="splfeatureDelete__1" href="#" onclick="deleteSplfeature(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<table id="dummy-amenities" style="display: none;">
    <tbody>
    <tr>
        <td class="td_prnt_text"><input class="parent_text" type="text" id="amenities__1" name="amenities__1" onchange="addAmenitiesRow(this)" /></td>
        <td width="1%" class="action_btns_td td_prnt_text"><ul class="action_btns">
                <li> <a class="amenitiesDelete__1" href="#" onclick="deleteAmenities(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<table id="dummy-drawing" style="display: none;">
    <tbody>
    <tr>
        <td><input class="parent_text" type="text" id="drawingname__1" name="drawingname__1" onchange="addDrawingRow(this)" />
            <input type="hidden" id="drawingUrl__1" name="drawingUrl__1" /></td>
        <td width="4%" class="action_btns_td"><ul class="action_btns">
                <li style="float:left;"> <a href="#"> <span data-toggle="tooltip" data-placement="left" data-original-title="Click to attach document" class="btn-file butclr_imp"> <i class="fa fa-paperclip dcm_atch"></i>
            <input type="file" name="drawFile__1" id="drawFile__1" />
            </span> </a> </li>
                <li style="float:left;"> <a href="#" class="drawDelete__1" onclick="deleteDrawing(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"> <i class="fa fa-trash-o"></i> </span> </a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<table id="dummy-document" style="display: none;">
    <tbody>
    <tr>
        <td><input class="parent_text" type="text" id="documentname__1" name="documentname__1" onchange="addDocumentRow(this)" />
            <input type="hidden" id="documentUrl__1" name="documentUrl__1" /></td>
        <td><textarea class="parent_texts" id="documentdescription__1" name="documentdescription__1" onchange="addDocumentRow(this)"></textarea></td>
        <td width="4%" class="action_btns_td"><ul class="action_btns">
                <li style="float:left;"> <a href="#"> <span data-toggle="tooltip" data-placement="left" data-original-title="Click to attach document" class="btn-file butclr_imp"> <i class="fa fa-paperclip dcm_atch"></i>
            <input type="file" name="docFile__1" id="docFile__1" />
            </span> </a> </li>
                <li style="float:left;"> <a class="docDelete__1" href="#" onclick="deleteDocument(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"> <i class="fa fa-trash-o"></i> </span> </a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<table id="dummy-consultant" style="display: none;">
    <tbody>
    <tr>
        <td width="10%"><input type="text" class="parent_text" id="consultantname__1" name="consultantname__1" onchange="addConsultantRow(this)"></td>
        <td width="10%"><input type="text" class="parent_text" id="consultanttype__1" name="consultanttype__1" onchange="addConsultantRow(this)"></td>
        <td width="5%"><input type="text" class="parent_text" id="fees__1" name="fees__1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addConsultantRow(this)"></td>
        <td width="5%"><input type="text" class="parent_text txt_right" id="feesamount__1" name="feesamount__1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addConsultantRow(this)"></td>
        <td width="3%" class="action_btns_td"><ul class="action_btns">
                <li style="float:left;"> <a href="#" class="consultDelete__1" onclick="deleteConsultant(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<table id="dummy-approval" style="display: none;">
    <tbody>
    <tr>
        <td width="10%"><input class="parent_text" type="text" id="approvalauthority__1" name="approvalauthority__1" onchange="addApprovalRow(this)" /></td>
        <td width="4%"><input class="parent_text date_picker" type="text" id="approvaldate__1" name="approvaldate__1" /></td>
        <td width="4%"><input class="parent_text" type="text" id="approvalno__1" name="approvalno__1" onchange="addApprovalRow(this)" /></td>
        <td width="2%"><ul class="action_btns">
                <li style="float:left;"> <a href="#" class="approvalDelete__1" onclick="deleteApprovalRow(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<table id="dummy-proposalcost" style="display: none;">
    <tbody>
    <tr>
        <td width="10%"><input class="parent_text" type="text" name="pcostparticular__1" id="pcostparticular__1" onchange="addPCostRow(this)" /></td>
        <td width="5%"><input class="parent_text txt_right" type="text" name="pcostamount__1" id="pcostamount__1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addPCostRow(this)" /></td>
        <td width="3%"><ul class="action_btns">
                <li style="float:left;"> <a href="#" class="pCostDelete__1" onclick="deletePCostRow(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<table id="dummy-exincome" style="display: none;">
    <tbody>
    <tr>
        <td width="10%"><input class="parent_text" type="text" name="incomeparticular__1" id="incomeparticular__1" onchange="addExIncomeRow(this)" /></td>
        <td width="5%"><input class="parent_text txt_right" type="text" name="incomeamount__1" id="incomeamount__1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="addExIncomeRow(this)" /></td>
        <td width="3%"><ul class="action_btns">
                <li style="float:left;"> <a href="#" class="incomeDelete__1" onclick="deleteExIncomeRow(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<table id="dummy-construction-schedule" style="display: none;">
    <tbody>
    <tr>
        <td width="3%"><input type="text" class="parent_text date_picker_year" name="constructionyear__1" id="constructionyear__1" onchange="addConstructionRow(this)"></td>
        <td width="5%"><input type="text" class="parent_text txt_right" name="constructionamount__1" id="constructionamount__1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="updateFundFlowChart()"></td>
        <td width="3%"><ul class="action_btns">
                <li style="float:left;"> <a href="#" class="constructionDelete__1" onclick="deleteConstructionRow(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<script type="text/javascript">
var specList = <?php echo (isset($kfSpecifications)) ? json_encode($kfSpecifications) : '[]'; ?>;
var featureList = <?php echo (isset($kfFeatures)) ? json_encode($kfFeatures) : '[]'; ?>;
var amenityList = <?php echo (isset($kfAmenity)) ? json_encode($kfAmenity) : '[]'; ?>;
var drawingList = <?php echo (isset($kfDrawing)) ? json_encode($kfDrawing) : '[]'; ?>;
var documentList = <?php echo (isset($kfDocument)) ? json_encode($kfDocument) : '[]'; ?>;
var conNameList = <?php echo (isset($kfConsultantName)) ? json_encode($kfConsultantName) : '[]'; ?>;
var conTypeList = <?php echo (isset($kfConsultantType)) ? json_encode($kfConsultantType) : '[]'; ?>;
var approvalList = <?php echo (isset($kfApproval)) ? json_encode($kfApproval) : '[]'; ?>;
var expenseList = <?php echo (isset($kfExpense)) ? json_encode($kfExpense) : '[]'; ?>;
var incomeList = <?php echo (isset($kfIncome)) ? json_encode($kfIncome) : '[]'; ?>;

bindSpecAutoComplete(1);
bindFeatureAutoComplete(1);
bindDrawingAutoComplete(1);
bindAmenityAutoComplete(1);
bindDocumentAutoComplete(1);
bindConNameAutoComplete(1);
bindConTypeAutoComplete(1);
bindApprovalAutoComplete(1);
bindExpenseAutocomplete(1);
bindIncomeAutocomplete(1);

$(document).ready(function() {
    $(".single_dropdown").select2({
        placeholder: "",
        allowClear: true
    });
});
$('.cnt_sliders .carousel').carousel({
    interval: false
});

var $showHideBtn = $('#btn-show-hide-content'),
    $showHideBtnI = $('#btn-show-hide-content > i'),
    $slideContent = $('#slide-content');

var fundFlowChart = null;

$showHideBtn.on('click', function () {
    $slideContent.toggleClass('active');
    $showHideBtn.toggleClass('open');
    $showHideBtnI.toggleClass('tform');
});

bindDocAttached();
bindDrawDocAttached();
bindDatepicker();

function showDetails(id)
{
    if (id==2) {
        $('.details-' + 1).hide();
        $('.details-' + 2).fadeIn();
        return;
    }
    $('.details-' + 1).fadeIn();
    $('.details-' + 2).hide();
}

function addSpecRow(x)
{
    var $x = $(x),
        $tr = $x.closest('tr'),
        key = $x[0].id.split('_')[1];

    if ($tr.next('tr').length != 0)
        return;

    if ($('#spec_' + key).val().length == 0)
        return;

    var $rowid = $('#specrowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-spec tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.parent('tbody').append(template);
    $rowid.val(count);
    $('.specDelete_' + key).show();
    bindSpecAutoComplete(count);
}

function deleteSpec(x,e)
{
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr').length == 1) {
        var template = $('#dummy-spec tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tbody.append(template);
        $('#specrowid').val(1);
    }

    $tr.next('tr.subTr').remove();
    $tr.remove();
    return false;
}

function addSplfeatureRow(x)
{
    var $x = $(x),
        $tr = $x.closest('tr'),
        key = $x[0].id.split('_')[1];

    if ($tr.next('tr').length != 0)
        return;

    if ($('#splfeature_' + key).val().length == 0)
        return;

    var $rowid = $('#splfeaturerowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-splfeature tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.parent('tbody').append(template);
    $rowid.val(count);
    $('.splfeatureDelete_' + key).show();
    bindFeatureAutoComplete(count);
}

function deleteSplfeature(x,e)
{
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr').length == 1) {
        var template = $('#dummy-splfeature tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tbody.append(template);
        $('#splfeaturerowid').val(1);
    }

    $tr.next('tr.subTr').remove();
    $tr.remove();
    return false;
}

function addAmenitiesRow(x)
{
    var $x = $(x),
        $tr = $x.closest('tr'),
        key = $x[0].id.split('_')[1];

    if ($tr.next('tr').length != 0)
        return;

    if ($('#amenities_' + key).val().length == 0)
        return;

    var $rowid = $('#amenitiesrowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-amenities tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.parent('tbody').append(template);
    $rowid.val(count);
    $('.amenitiesDelete_' + key).show();
    bindAmenityAutoComplete(count);
}

function deleteAmenities(x,e)
{
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr').length == 1) {
        var template = $('#dummy-amenities tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tbody.append(template);
        $('#amenitiesrowid').val(1);
    }

    $tr.next('tr.subTr').remove();
    $tr.remove();
    return false;
}

function addDrawingRow(x)
{
    var $x = $(x),
        $tr = $x.closest('tr'),
        key = $x[0].id.split('_')[1];

    if ($tr.next('tr').length != 0)
        return;

    if ($('#drawingname_' + key).val().length == 0)
        return;

    var $rowid = $('#drawingrowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-drawing tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.parent('tbody').append(template);
    $rowid.val(count);
    $('.drawDelete_' + key).show();
    bindDrawDocAttached();
    bindDrawingAutoComplete(count);
}

function deleteDrawing(x,e)
{
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr').length == 1) {
        var template = $('#dummy-drawing tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tbody.append(template);
        $('#drawingrowid').val(1);
    }

    $tr.next('tr.subTr').remove();
    $tr.remove();
    return false;
}

function addDocumentRow(x)
{
    var $x = $(x),
        $tr = $x.closest('tr'),
        key = $x[0].id.split('_')[1];

    if ($tr.next('tr').length != 0)
        return;

    if ($('#documentname_' + key).val().length == 0 || $('#documentdescription_' + key).val().length == 0)
        return;

    var $rowid = $('#documentrowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-document tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.parent('tbody').append(template);
    $rowid.val(count);
    $('.docDelete_' + key).show();
    bindDocAttached();
    bindDocumentAutoComplete(count);
}

function deleteDocument(x,e)
{
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr').length == 1) {
        var template = $('#dummy-document tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tbody.append(template);
        $('#documentrowid').val(1);
    }

    $tr.next('tr.subTr').remove();
    $tr.remove();
    return false;
}

function addConsultantRow(x)
{
    var $x = $(x),
        $tr = $x.closest('tr'),
        key = $x[0].id.split('_')[1];

    if ($tr.next('tr').length != 0)
        return;

    if ($('#consultantname_' + key).val().length == 0 || $('#consultanttype_' + key).val().length == 0
        || $('#fees_' + key).val().length == 0 || $('#feesamount_' + key).val().length == 0)
        return;

    var $rowid = $('#consultantrowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-consultant tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.parent('tbody').append(template);
    $rowid.val(count);
    $('.consultDelete_' + key).show();
    bindConNameAutoComplete(count);
    bindConTypeAutoComplete(count);
}

function deleteConsultant(x,e)
{
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr').length == 1) {
        var template = $('#dummy-consultant tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tbody.append(template);
        $('#consultantrowid').val(1);
    }

    $tr.next('tr.subTr').remove();
    $tr.remove();
    return false;
}

function addPCostRow(x)
{
    calcTotalPropCost();
    var $x = $(x),
        $tr = $x.closest('tr'),
        key = $x[0].id.split('_')[1];
     
    if ($tr.next('tr:not(.total)').length != 0)
        return;

    if ($('#pcostparticular_' + key).val().length == 0 || $('#pcostamount_' + key).val().length == 0)
        return;
   
    var $rowid = $('#pcostrowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-proposalcost tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.after(template);
    $rowid.val(count);
    $('.pCostDelete_' + key).show();

    bindExpenseAutocomplete(count);
}

function deletePCostRow(x,e)
{
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr:not(.total)').length == 1) {
        var template = $('#dummy-proposalcost tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tr.after(template);
        $('#pcostrowid').val(1);
    }

    $tr.remove();
    calcTotalPropCost();
    return false;
}

function addApprovalRow(x)
{
    var $x = $(x),
        $tr = $x.closest('tr'),
        key = $x[0].id.split('_')[1];

    if ($('#approvalauthority_' + key).val().length == 0 || $('#approvaldate_' + key).val().length == 0 || $('#approvalno_' + key).val().length == 0)
        return;

    var $rowid = $('#approvalrowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-approval tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.after(template);
    $rowid.val(count);
    $('.approvalDelete_' + key).show();
    $('.date_picker').datepicker( {format: "dd-mm-yyyy", autoclose: true});
    bindApprovalAutoComplete(count);
}

function deleteApprovalRow(x,e)
{
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr:not(.total)').length == 1) {
        var template = $('#dummy-approval tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tr.after(template);
        $('#approvalrowid').val(1);
        $('.date_picker').datepicker( {format: "dd-mm-yyyy", autoclose: true});
    }

    $tr.remove();
    return false;
}

function calcTotalPropCost()
{
    var $amt = $('input[id^=pcostamount_]');
    summaryProposalCost = 0;
    $.each($amt, function() {
        var amt = parseFloat($(this).val());
        if (isNaN(amt))
            return;

        summaryProposalCost += amt;
    });
    summaryProposalCost = summaryProposalCost.toFixed(2);
    $('#totalProposalCost').val(summaryProposalCost);
    calcCostSummary();
}

function addExIncomeRow(x)
{  
   
  calcExIncomeCost();
    
    var $x = $(x),
        $tr = $x.closest('tr'),
        key = $x[0].id.split('_')[1];

    if ($tr.next('tr:not(.total)').length != 0)
        return;

    if ($('#incomeparticular_' + key).val().length == 0 || $('#incomeamount_' + key).val().length == 0)
        return;

    var $rowid = $('#incomerowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-exincome tbody').html();
		

    template = template.replace(/__1/g, '_' + count);
    $tr.after(template);
    $rowid.val(count);
    $('.incomeDelete_' + key).show();
    bindIncomeAutocomplete(count);
}

function deleteExIncomeRow(x,e)
{
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr:not(.total)').length == 1) {
        var template = $('#dummy-exincome tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tr.after(template);
        $('#incomerowid').val(1);
    }

    $tr.remove();
    calcExIncomeCost();
    return false;
}

function calcExIncomeCost()
{
    var $amt = $('input[id^=incomeamount_]');
    var summaryExpectedIncome = 0;
    $.each($amt, function() {


        var amt = parseFloatVal($(this).val());

        if (isNaN(amt))
            return;
        summaryExpectedIncome += amt;

    });

    summaryExpectedIncome = summaryExpectedIncome.toFixed(2);
    $('#totalExpectedIncome').val(summaryExpectedIncome);
    calcCostSummary();
}

function calcCostSummary()
{
    var amt = $('#totalExpectedIncome').val() - $('#totalProposalCost').val();
    $('#netprofit').val(amt);
}

function addConstructionRow(x)
{
    var $x = $(x),
        $tr = $x.closest('tr'),
        key = $x[0].id.split('_')[1];

    if ($tr.next('tr').length != 0)
        return;

    var $rowid = $('#constructionrowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-construction-schedule tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.parent('tbody').append(template);
    $rowid.val(count);
    $('.constructionDelete_' + key).show();

    bindDatepicker();
}

function bindDatepicker()
{
    $('.date_picker_year').datepicker( {
        format: "yyyy",
        startView: "years",
        minViewMode: "years",
        autoclose: true
    });
}

function deleteConstructionRow(x,e)
{
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr').length == 1) {
        var template = $('#dummy-construction-schedule tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tbody.append(template);
        $('#constructionrowid').val(1);

        bindDatepicker();
    }

    $tr.remove();
    updateFundFlowChart();
    return false;
}

function updateFundFlowChart()
{
    var $rate = $('input[id^=constructionamount_]');
    var chartData = [];
    $.each($rate, function() {
        var $this = $(this),
            name = $this[0].id;
        if (name.indexOf('__') != -1) return;

        var key = name.split('_')[1],
            name = $('#constructionyear_'+key).val(),
            rate = $this.val();

        if (isNaN(parseFloat(rate)) || name == '')
            return;

        chartData.push({
            'Year': name,
            'Rate': rate
        });
    });

    if (fundFlowChart != null) {
        fundFlowChart.dataProvider = chartData;
        fundFlowChart.validateData();
        return;
    }

    fundFlowChart = AmCharts.makeChart("fundFlowChart", {
        "theme": "light",
        "type": "serial",
        "marginRight": 80,
        "autoMarginOffset": 20,
        "marginTop":20,
        "dataProvider": chartData,
        "valueAxes": [{
            "id": "v1",
            "axisAlpha": 0.1
        }],
        "graphs": [{
            "useNegativeColorIfDown": true,
            "balloonText": "[[category]]<br><b>value: [[value]]</b>",
            "bullet": "round",
            "bulletBorderAlpha": 1,
            "bulletBorderColor": "#FFFFFF",
            "hideBulletsCount": 50,
            "lineThickness": 2,
            "lineColor": "#fdd400",
            "negativeLineColor": "#67b7dc",
            "valueField": "Rate"
        }],
        "chartCursor": {
            "valueLineEnabled": true,
            "valueLineBalloonEnabled": true
        },
        "categoryField": "Year",
        "categoryAxis": {
            "axisAlpha": 0,
            "minHorizontalGap": 60
        }
    });
}

function bindDrawDocAttached()
{
    var drawDocFiles = $('input[id^=drawFile_]');
    drawDocFiles.unbind('change');

    drawDocFiles.on('change', function() {
        var $this = $(this);
        var $tarEl = $(this).siblings('i');
        var $tooltip = $tarEl.parent('span');
        var $tarA = $tarEl.closest('a');
        if($(this).val() != '') {
            $tarA.addClass('pull-left');
            $tarEl.removeClass('fa-paperclip').addClass('fa-file-o file-do');
            $tooltip.attr('data-original-title', 'Document Attached');

            if($tarA.next('i.brkn').length == 0)
                $('<i class="fa fa-chain-broken brkn" onclick="removeAttachment($(this));"></i>').insertAfter($tarA);
        } else {
            $tarA.next('i.brkn').remove();
            $tarEl.addClass('fa-paperclip').removeClass('fa-file-o file-do');
            $tooltip.attr('data-original-title', 'Click to attach documents');
        }
    });
}

function bindDocAttached()
{
    var docFiles = $('input[id^=docFile_]');
    docFiles.unbind('change');

    docFiles.on('change', function() {
        var $this = $(this);
        var $tarEl = $(this).siblings('i');
        var $tooltip = $tarEl.parent('span');
        var $tarA = $tarEl.closest('a');
        if($(this).val() != '') {
            $tarA.addClass('pull-left');
            $tarEl.removeClass('fa-paperclip').addClass('fa-file-o file-do');
            $tooltip.attr('data-original-title', 'Document Attached');

            if($tarA.next('i.brkn').length == 0)
                $('<i class="fa fa-chain-broken brkn" onclick="removeAttachment($(this));"></i>').insertAfter($tarA);
        } else {
            $tarA.next('i.brkn').remove();
            $tarEl.addClass('fa-paperclip').removeClass('fa-file-o file-do');
            $tooltip.attr('data-original-title', 'Click to attach documents');
        }
    });
}

function validateStepThree()
{
    var perFee = 0;
    for(i=1;i<=$('#consultantrowid').val();i++) {
        if($('#fees_'+i).val() != '') {
            perFee = parseFloat($('#fees_'+i).val()) + parseFloat(perFee);
        }
    }
    if(perFee > 0 && perFee > 100) {
        alert('Fees % should be not greater than 100%');
    } else {
        $('#carousel-example-generic').carousel({
            slide: "next"
        });
    }
}

function bindSpecAutoComplete(rowId)
{
    $('#spec_' + rowId).autocomplete({
        lookup: specList,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        }
    });
}

function bindFeatureAutoComplete(rowId)
{
    $('#splfeature_' + rowId).autocomplete({
        lookup: featureList,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        }
    });
}

function bindAmenityAutoComplete(rowId)
{
    $('#amenities_' + rowId).autocomplete({
        lookup: amenityList,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        }
    });
}

function bindDrawingAutoComplete(rowId)
{
    $('#drawingname_' + rowId).autocomplete({
        lookup: drawingList,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        }
    });
}

function bindDocumentAutoComplete(rowId)
{
    $('#documentname_' + rowId).autocomplete({
        lookup: documentList,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        }
    });
}

function bindConNameAutoComplete(rowId)
{
    $('#consultantname_' + rowId).autocomplete({
        lookup: conNameList,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        }
    });
}

function bindConTypeAutoComplete(rowId)
{
    $('#consultanttype_' + rowId).autocomplete({
        lookup: conTypeList,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        }
    });
}

function bindApprovalAutoComplete(rowId)
{
    $('#approvalauthority_' + rowId).autocomplete({
        lookup: approvalList,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        }
    });
}

function bindExpenseAutocomplete(rowId)
{
    $('#pcostparticular_' + rowId).autocomplete({
        lookup: expenseList,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        }
    });
}

function bindIncomeAutocomplete(rowId)
{
    $('#exparticular_' + rowId).autocomplete({
        lookup: incomeList,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        }
    });
}

function submitForm()
{
    $('#formWrapper').submit();
}

function entryValidate()
{
    return true;
}

calcExIncomeCost();
calcTotalPropCost();
updateFundFlowChart();
</script>