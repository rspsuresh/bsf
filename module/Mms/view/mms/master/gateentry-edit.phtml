<!--STYLE-->
<link rel="stylesheet" href="<?php echo $this->basePath() . '/css/mms.css';?>"/>
<!--STYLE-->
<style>
	.pan_box{height:155px !important;}
	.date_icon{top:10px!important;right:22px !important;}
	.lbl_ptb {padding-top: 5px!important;padding-bottom:5px !important;}
    .bar1, .bar2, .bar3 {width: 18px;height: 3px;background-color: #009688;margin: 3px 0;transition: 0.4s;}
    .change .bar1 {-webkit-transform: rotate(-45deg) translate(-6px, 5px);transform: rotate(-45deg) translate(-6px,5px);}
    .change .bar2 {opacity: 0;}
    .change .bar3 {-webkit-transform: rotate(45deg) translate(-3px, -3px);transform: rotate(45deg) translate(-3px, -3px);}
	.selected-xs{width:50%!important;border:0px solid #babdb8!important;}
    .selected-xs select{height:20px;color: #266aa8; padding-left:0px !important; font-size:13px !important;cursor:pointer;}
    .select-style {float: left;width: 100%;padding: 0;margin: 0;border: 1px solid #c2c2c2;overflow: hidden;background-color: #fff;border-radius: 0px;}
    .flip0{float:right;margin-top:5px;cursor:pointer;}
    .margn_8{margin-bottom:8px;}

</style>

<!--content-->
<div class="content_wrapper padlr0">
	<div class="container-fluid">
		<div class="row">
<form method="post" id="formWrapper" action="<?php echo $this->basePath(); ?>/mms/master/gatepassent">
<input type="hidden" id="CostCentre" name="CostCentreId" value="<?php echo (isset($CostCentre)) ? $CostCentre : '';?>">
<input type="hidden" name="Type" value="<?php echo (isset($Type)) ? $Type : 0;?>">
<input type="hidden" name="SupplierId" value="<?php echo (isset($SupplierId)) ? $SupplierId :  '';?>">
<input type="hidden" name="VehicleRegNo" value="<?php echo (isset($VehicleRegNo)) ? $VehicleRegNo :  '';?>">
<input type="hidden" name="VehicleId" value="<?php echo (isset($VehicleId)) ? $VehicleId :  '';?>">
<input type="hidden" name="VehicleType" value="<?php echo (isset($VehicleType)) ? $VehicleType :  '';?>">
<input type="hidden" name="GateregId" value="<?php echo (isset($GateregId)) ? $GateregId :  '';?>">
<input type="hidden" id="GateId" name="GateId" value="<?php echo (isset($GateId)) ? $GateId :  '';?>">
<input type="hidden" name="SecurityName" value="<?php echo (isset($SecurityName)) ? $SecurityName :  '';?>">
<input type="hidden" name="CGatePassNo" value="<?php echo (isset($CGateEntryNo)) ? $CGateEntryNo :  '';?>">
<input type="hidden" name="TimeIn" value="<?php echo (isset($TimeIn)) ? $TimeIn :  '';?>">
<input type="hidden" name="TimeOut" value="<?php echo (isset($TimeOut)) ? $TimeOut :  '';?>">
<input type="hidden" name="GDate" value="<?php echo (isset($GDate)) ? $GDate :  '';?>">
<input type="hidden" name="CCGatePassNo" value="<?php echo (isset($CCGateEntryNo)) ? $CCGateEntryNo :  '';?>">
<input type="hidden" name="PoNo" value="<?php echo (isset($PoNo)) ? $PoNo :  '';?>">
<input type="hidden" name="Address" value="<?php echo (isset($Address)) ? $Address :  '';?>">
<!--<input type="hidden" name="Remarks" value="--><?php //echo (isset($Remarks)) ? $Remarks :  '';?><!--">-->
<input type="hidden" name="ContactNo" value="<?php echo (isset($ContactNo)) ? $ContactNo :  '';?>">
<input type="hidden" name="DriverName" value="<?php echo (isset($DriverName)) ? $DriverName :  '';?>">
<input type="hidden" name="GatePassNo" value="<?php echo (isset($GatePassNo)) ? $GatePassNo : '';?>">
<input type="hidden" name="Remarks" value="<?php echo (isset($Remarks)) ? $Remarks : '';?>">
<input type="hidden" id="gridtype" name="gridtype" value="<?php echo (isset($gridtype)) ? $gridtype : '';?>">

<div class="col-lg-12">
    <h1 class="col-lg-3">GatePass Entry
		<div class="flip0">
			<div class="click" onclick="myFunction(this)">
				<div class="bar1"></div>
				<div class="bar2"></div>
				<div class="bar3"></div>
			</div>
		</div>
	</h1>
</div>
<div class="col-lg-12">
	<div class="pane0">
		<div class="col-lg-4">
			<div class="pan_box">
				<ul>
					<li class="lbl_ptb " id="Project">
						<label>ProjectName</label>
						<span class="mgic"><?php echo (isset($ProjectName)) ? $ProjectName : '';?></span>
					</li>
					<li class="lbl_ptb ">
						<label>SupplierName</label>
						<span class="mgic"><?php echo (isset($SupplierName)) ? ucfirst($SupplierName) : '';?></span>
					</li>
					<li class="lbl_ptb ">
						<label>Time In</label>
						<span class="mgic"><input type="text" class="time_picker"  placeholder="xxxxx" style="cursor:pointer;" name="TimeIn" value="<?php echo (isset($TimeIn)) ? date('h:i:sa',strtotime($TimeIn)) : '';?>"/></span>
					</li>
					<li class="lbl_ptb ">
						<label>Time Out</label>
						<span class="mgic"><input type="text" class="time_picker"  placeholder="xxxxx" style="cursor:pointer;" name="TimeOut" value="<?php echo (isset($TimeOut)) ? date('h:i:sa',strtotime($TimeOut)) : '';?>"/></span>
					</li>
					<li class="lbl_ptb ">
						<label>Date</label>
						<span class="mgic"><input type="text" placeholder="" class="date_picker" style="cursor:pointer;" name="GDate" value="<?php echo (isset($GDate)) ? date('d-m-Y',strtotime($GDate)) : '' ;?>" readonly /></span>
					</li>
				</ul>
			</div>
		</div>
		<div class="col-lg-4">
			<div class="pan_box">
				<ul>                
					<li class="lbl_ptb ">
						<label>Gate Name</label>
						<span>
							<div class="select-style selected-xs margn_8">
								<select name="GateName" id="GateName" class="" data-placeholder="GateName" tabindex="-1" aria-hidden="true">
									<?php foreach($GateName1 as $values):?>
									  <option value="<?php echo $values['GateId']; ?>" <?php echo ( (isset($GateName2) && $values['GateId'] == $GateName2) ) ? 'selected' : ''; ?> > <?php echo $values['GateName']; ?> </option>
								  <?php endforeach; ?>
								</select>
							</div>
						</span>
					</li>
					<li class="lbl_ptb ">
						<label>SecurityName</label>
						<span class="mgic"><input type="text" placeholder="xxxxx" id= "SecurityName" name="SecurityName" value="<?php echo (isset($SecurityName)) ? $SecurityName : '';?>" readonly/></span>
					</li>
					<li class="lbl_ptb ">
						<label>VehicleType</label>
						<span class="mgic"><?php echo (isset($VehicleType)) ? $VehicleType : '';?>_</span>
					</li>
					<li class="lbl_ptb ">
						<label>Driver Name</label>
						<span class="mgic"><input type="text" placeholder="xxxxx" name="DriverName"  style="cursor:pointer;"  value="<?php echo (isset($DriverName)) ? $DriverName : '';?>"/></span>
					</li>
					<li class="lbl_ptb ">
						<label>Type</label>
						<?php if(((isset($Type)) ? $Type : 0)==1){?>
							<span class="mgic">IN</span>
						<?php }else{ ?>
							<span class="mgic">OUT</span>
						<?php } ?>

					</li>
				</ul>
			</div>
		</div>
		<div class="col-lg-4">
			<div class="pan_box">
				<ul>
					<li class="lbl_ptb ">
						<label>VehicleRegNo</label>
						<span class="mgic"><?php echo (isset($VehicleRegNo)) ? $VehicleRegNo : '';?></span>
					</li>
					<li class="lbl_ptb ">
						<label>CGateEntryNo</label>
						<span class="mgic"><?php echo (isset($CGateEntryNo)) ? $CGateEntryNo : '';?></span>
					</li>
					<li class="lbl_ptb ">
						<label>CCGateEntryNo</label>
						<span class="mgic"><?php echo (isset($CCGateEntryNo)) ? $CCGateEntryNo : '';?></span>
					</li>
					<li class="lbl_ptb ">
						<label>Gate Pass No</label>
						<span class="mgic"><?php echo (isset($GatePassNo)) ? $GatePassNo : '';?></span>
					</li>	
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="clearfix"></div>
<div class="col-lg-12 clear top-20">
    <div id="accordion" class="panel-group">
        <!-------------------------------Bill of Quantities------------------------------->
        <div class="panel panel-info">
            <div data-target="#collapseOne" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-1">
                <h4 class="panel-title accordion-toggle defa_panels">Enter Quantity</h4>
            </div>
            <div class="panel-collapse collapse" id="collapseOne" style="height: 0px;">
                <div class="panel-body bgcolr">
                    <div class="col-lg-12">
                        <div class="table-responsive top-30">
                            <table class="table" style=" margin-bottom:0px;" id="workorderTable">
                                <thead>
                                <tr>
                                    <th>Code</th>
                                    <th>Description</th>
                                    <th>Unit</th>
                                    <th>Required Date</th>
<!--                                    <th>Remarks</th>-->
                                    <th style="text-align:center;">Qty</th>
									<th></th>
                                </tr>
                                </thead>
                                <tbody class="main"></tbody>
                            </table>
                            <input type="hidden" name="rowid" id="rowid" value="0"/>
                        </div>
                        <div class="cont_bt col-lg-5 col-lg-offset-7 col-md-9 col-md-offset-3 col-sm-7 col-sm-offset-5 col-xs-7 col-xs-offset-5">
                            <ul>
                                <li><a href="javascript:nextAccordian(2)">Continue &nbsp;<i class="fa fa-chevron-circle-right"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-------------------------------Bill of Quantities end------------------------------->
        <!-------------------------------Terms and Condition------------------------------->
        <div class="panel panel-info">
            <div data-target="#collapseTwo" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-2">
                <h4 class="panel-title accordion-toggle defa_panels">Narration</h4>
            </div>
            <div class="panel-collapse collapse" id="collapseTwo" style="height: 0px;">
                <div class="panel-body bgcolr">
                    <div class="clearfix"></div>
                    <div class="col-lg-12">
                        <div class="card">
<!--                            <ul class="nav nav-tabs">-->
<!--                                <li><a href="#Note" aria-controls="settings" role="tab" data-toggle="tab">Narration</a></li>-->
<!--                            </ul>-->
                                <div class="tab-pane" id="Note">
                                    <p>
                                    <div class="col-lg-12">
                                        <textarea class="exp-tex" name="Notes" id="Notes"> <?php echo (isset($Notes)) ? $Notes : '';?> </textarea>
                                    </div>
                                    </p>
                                </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
        <!-------------------------------Terms and Condition------------------------------->
    </div>
	<div class="clearfix"></div>

        </div>
	</div>
</div>

<div class="col-lg-12 savebtn_area">
    <ul>
        <li class="dropdown save_btn float_r"><a onClick="submitForm()" data-toggle="tooltip" class="ripple" id="sub1" title="Submit" style="cursor:pointer;">Submit</a></li>
        <li class="cancel_btn float_r">
			<?php if(isset($Approve) && $Approve=="No"): ?>
                <a href="<?php echo $this->basePath();?>/mms/master/gatepassregister" data-toggle="tooltip" class="ripple" title="Go to Register!">Close</a>
            <?php elseif (isset($Approve) && $Approve=='Partial'): ?>
                <a href="<?php echo $this->basePath();?>/mms/master/gatepassregister" data-toggle="tooltip" class="ripple" title="Go to Register!">Back</a>
            <?php else: ?>
                <a href="<?php echo $this->basePath();?>/mms/master/gateentry" data-toggle="tooltip" class="ripple" title="Close!">Close</a>
            <?php endif; ?>
        </li>
    </ul>
    </div>
</form>
<script id="resource-template"  type="text/template" class="hide">
    <tr class="count-tr">
		
        <td class="mar_20" width="15%"><input class="parent_text border-none" type="text" name="code__" id="code__" readonly/></td>
        <td width="25%">
            <input class="parent_text resourceSuggest" type="text" name="desc__" id="desc__" onfocus="checkResourceUsed(this);"/>
            <input type="hidden" name="gatetransid__" id="gatetransid__" value=""/>
            <input type="hidden" name="resourceid__" id="resourceid__"/>
            <input type="hidden" name="itemid__" id="itemid__"/>
        </td>
        <td width="20%">
            <input class="parent_text border-none" type="text" name="unitname__" id="unitname__" readonly/>
            <input type="hidden" name="unitid__" id="unitid__"/>
        </td>
        <td width="15%">
            <div class="col-lg-12 padlr0">
                <input type="text" name="GDate__" id="rGDate__" class='tbl_input date_picker' style="cursor:pointer;" value='<?php echo Date('d/m/Y'); ?>' />
				<span class='date_icon'><i class='fa fa-calendar'></i></span>
			</div>
        </td>
        <td width="25%">
            <input class="tbl_input changeVal" style="text-align:right;" type="text" name="qty__" id="qty__" onkeypress="return isDecimal(event,this)" onchange="gateinqtyValidation(this);"/>
            <input type="hidden" name="gateinqty__" id="gateinqty__"  />
        </td>


        <td width="15%" align="center" class="action_btns_td">
            <ul class="action_btns">
                <li> <a href="#" onclick="deleteRow(this, event);" id="deleteTr__" style="display:none;"><i class="fa fa-trash-o" data-toggle="tooltip" data-placement="top" data-original-title="Delete"></i> </a> </li>
                <li> <a href="#" class="mainTr" id="expandTr__" style="display:none;"></a> </li>
            </ul>
        </td>
    </tr>
	<tr style="display:none;" class="subTr count-tr">
	</tr>
</script>
<script id="iow-template"  type="text/template" class="hide dont-hide">
    <tr>
        <td width="30%">
            <input type="hidden"  name="iow___wbsid_0" id="iow___wbsid_0" readonly/>
            <input class="parent_text border-none" type="text" name="iow___wbsname_0" id="iow___wbsname_0" readonly/>
        </td>
        <td width="25%"><input class="parent_text" type="text" name="iow___qty_0" id="iow___qty_0" onkeypress="return isNumberKey(event,this)" onchange="calcQuantity(this);"/></td>
    </tr>
</script>
<script id="otherterms-template"  type="text/template" class="hide dont-hide">
    <tr>
        <td width="15%"><input class="parent_text" type="text" name="termTitle__" id="termTitle__" maxlength="155" onchange="addNewTermRow(this)"/></td>
        <td width="15%"><textarea class="parent_texts" name="termDesc__" id="termDesc__"></textarea></td>
        <td width="4%" class="action_btns_td">
            <ul class="action_btns">
                <li style="float:left;"> <a href="#" class="deleteTermTr__" onclick="deleteTerm(this, event);" style="display: none;"><span data-toggle="tooltip" data-placement="left" data-original-title="Term Delete"><i class="fa fa-trash-o"></i></span></a></li>
            </ul>
        </td>
    </tr>
</script>
<script id="material-template"  type="text/template" class="hide">
    <tr class="padi05 dont-hide">
        <td width="13%">
            <input class="parent_text" type="text" name="materialName__" id="materialName__" onfocus="return checkMaterialPriceUsed(this)"/>
            <input type="hidden" class="materialNameInputs" name="materialId__" id="materialId__"/>
        </td>
        <td width="2%"><input class="parent_padi05" type="text" name="materialUnit__" id="materialUnit__" value="" readonly/></td>
        <td width="3%"><input class="parent_text text-right" type="text" name="materialRate__" id="materialRate__" onchange="addNewMaterialRow(this)" onblur="return FormatNum(this, 2, true)" onkeypress="return isDecimal(event,this)" maxlength="18"/></td>
        <td width="2%"><input class="parent_text text-right" type="text" name="escalationper__" id="escalationper__"  onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18"/></td>
        <td width="2%">
            <div class="select-style heg30">
                <select name="materialbase__" id="materialbase__" >
                    <option value=">">&gt;</option>
                    <option value="<">&lt;</option>
                </select>
            </div>
        <td width="8%"><input class="parent_text text-right" type="text" name="materialnewRate__" id="materialnewRate__" onchange="addNewMaterialRow(this)" onblur="return FormatNum(this, 2, true)" onkeypress="return isDecimal(event,this)" maxlength="18"/></td>
        <td width="1%" class="action_btns_td">
            <ul class="action_btns">
                <li style="float:left;"> <a class="materialDeleteTr__" href="#"  onclick="deleteMaterial(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="right" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul>
        </td>
    </tr>
</script>
<script id="materialexc-template"  type="text/template" class="hide">
    <tr class="padi05 dont-hide">
        <td width="15%"><input class="parent_text" type="text" name="materialExcName__" id="materialExcName__" onfocus="return checkMaterialSupplyUsed(this)"/>
            <input type="hidden" class="materialExcNameInputs" name="materialExcId__" id="materialExcId__"/></td>
        <td width="3%"><input class="parent_padi05" type="text" name="materialExcUnit__" id="materialExcUnit__"readonly/>
        <td width="3%"><input class="parent_text" type="text" name="materialExcRate__" id="materialExcRate__" onkeypress="return isDecimal(event,this)" onchange="addNewMaterialExcRow(this)" onblur="return FormatNum(this, 2, true)"/>
        <td width="6%">
            <div class="select-style heg30">
                <select name="materialExcType__" id="materialExcType__">
                    <option value="C">Chargeable</option>
                    <option value="F">Free</option>
                </select>
            </div>
        <td width="1%" class="action_btns_td">
            <ul class="action_btns">
                <li style="float:left;"> <a class="materialExcDeleteTr__" href="#"  onclick="deleteMaterialExc(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="right" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul>
        </td>
    </tr>
</script>
<script id="materialadv-template"  type="text/template" class="hide">
    <tr class="dont-hide">
        <td width="7%">
            <input class="parent_text" type="text" name="materialAdvName__" id="materialAdvName__" onchange="addNewMaterialAdvRow(this)" onfocus="return checkMaterialAdvUsed(this)"/>
            <input type="hidden" class="materialAdvNameInputs" name="materialAdvId__" id="materialAdvId__"/>
        </td>
        <td width="2%"><input class="parent_text text-left" type="text" name="materialAdvRate__" id="materialAdvRate__" onchange="addNewMaterialAdvRow(this)" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18"/></td>
        <td width="1%" class="action_btns_td">
            <ul class="action_btns">
                <li style="float:left;"> <a class="materialAdvDeleteTr__" href="#"  onclick="deleteMaterialAdv(this, event);" style="display: none;"> <span data-toggle="tooltip" data-placement="right" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul>
        </td>
    </tr>
</script>
<script id="techtitle-template"  type="text/template" class="hide">
    <tr class="dont-hide">
        <td width="15%"><input class="parent_text" type="text" name="techTitle__" id="techTitle__" maxlength="155" onchange="addNewTechRow(this)"/></td>
        <td width="15%"><textarea class="parent_texts" name="techDesc__" id="techDesc__"></textarea></td>
        <td width="4%" class="action_btns_td">
            <ul class="action_btns">
                <li style="float:left;"> <a href="#" class="deleteTechTr__" onclick="deleteTech(this, event);" style="display: none;"><span data-toggle="tooltip" data-placement="left" data-original-title="Term Delete"><i class="fa fa-trash-o"></i></span></a> </li>
            </ul>
        </td>
    </tr>
</script>
<link rel="stylesheet" href="<?php echo $this->basePath() . '/css/paging.css';?>"/>
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/js/paging.js"></script>
<script type="text/javascript">
var arr_resources = <?php echo (isset($arr_resources)) ? json_encode($arr_resources) : '[]';?>;
var tmp_arr_resources = arr_resources;
var arr_requestResources = <?php echo (isset($arr_requestResources)) ? json_encode($arr_requestResources) : '[]';?>;
var arr_resource_iows = <?php echo (isset($arr_resource_iows)) ? json_encode($arr_resource_iows) : '[]';?>;

var materiallists = <?php echo (isset($materiallists)) ? json_encode($materiallists) : '[]';?>;
var materialPrice = materiallists;
var materialSupply = materiallists;
var materialaAdv = materiallists;

var arr_otherTerms = <?php echo (isset($arr_otherTerms)) ? json_encode($arr_otherTerms) : '[]';?>;
var arr_materials = <?php echo (isset($arr_materials)) ? json_encode($arr_materials) : '[]';?>;
var arr_exc_materials = <?php echo (isset($arr_exc_materials)) ? json_encode($arr_exc_materials) : '[]';?>;
var arr_adv_materials = <?php echo (isset($arr_adv_materials)) ? json_encode($arr_adv_materials) : '[]';?>;
var Type =<?php echo $Type; ?>;

$(function () { 
    var $rowid = $('#rowid');
    var template = $('#resource-template').html();
    var iowtemplate = $('#iow-template').html();
    var rowid = 0;
    var $tbody = $('#workorderTable').find('> tbody.main');
	if(Type==2){ 
		if(arr_requestResources.length != 0) {
			$.each(arr_requestResources, function(i, o) {
				rowid += 1;
				$tbody.append(template.replace(/__/g, '_' + rowid));

				$('#code_' + rowid).val(o.Code).addClass('border-none').prop('disabled', false);
				$('#desc_' + rowid).val(o.ResourceName).addClass('border-none').prop('disabled', false);
				$('#resourceid_' + rowid).val(o.ResourceId);
				$('#itemid_' + rowid).val(o.ItemId);
				$('#unitname_' + rowid).val(o.UnitName);
				$('#unitid_' + rowid).val(o.UnitId);
				$('#qty_' + rowid).val(o.Qty);
                $('#gateinqty_' + rowid).val(o.GateInQty);
                $('#gatetransid_' + rowid).val(o.GateTransId);
				$('#expandTr_' + rowid).show();
				});
		}
		rowid += 1;
		$rowid.val(rowid);
	} else { 
		if(arr_requestResources.length != 0) {
			$.each(arr_requestResources, function(i, o) {
				rowid += 1;
				$tbody.append(template.replace(/__/g, '_' + rowid));

				$('#code_' + rowid).val(o.Code).addClass('border-none').prop('disabled', false);
				$('#desc_' + rowid).val(o.ResourceName).addClass('border-none').prop('disabled', false);
				$('#resourceid_' + rowid).val(o.ResourceId);
				$('#itemid_' + rowid).val(o.ItemId);
				$('#unitname_' + rowid).val(o.UnitName);
				$('#unitid_' + rowid).val(o.UnitId);
				$('#qty_' + rowid).val(o.Qty);
				$('#expandTr_' + rowid).show();
				$('#deleteTr_' + rowid).show();
			$.each(arr_resource_iows, function(j, l) {
					if(l.ResourceId == 0 && l.ItemId == 0)
					{
						var iowrowid = parseInt($('#iow_' + rowid + '_rowid').val()) + 1;
						$('#iowTable_' + rowid).find('tbody.main').append(iowtemplate.replace(/__/g, '_' + rowid).replace(/_0/g, '_' + iowrowid));
						$('#iow_' + rowid + '_rowid').val(iowrowid);
						$('#iow_' + rowid + '_wbsid_' + iowrowid).val(l.WBSId);
						$('#iow_' + rowid + '_wbsname_' + iowrowid).val(l.WbsName);
						$('#iow_' + rowid + '_qty_' + iowrowid).val(l.Qty);
					}
					else if(l.ResourceId == o.ResourceId && l.ItemId == o.ItemId) {
						var iowrowid = parseInt($('#iow_' + rowid + '_rowid').val()) + 1;
						$('#iowTable_' + rowid).find('tbody.main').append(iowtemplate.replace(/__/g, '_' + rowid).replace(/_0/g, '_' + iowrowid));
						$('#iow_' + rowid + '_rowid').val(iowrowid);
						$('#iow_' + rowid + '_wbsid_' + iowrowid).val(l.WBSId);
						$('#iow_' + rowid + '_wbsname_' + iowrowid).val(l.WbsName);
						$('#iow_' + rowid + '_qty_' + iowrowid).val(l.Qty);
					}
			});
			});
		}
		rowid += 1;
		$tbody.append(template.replace(/__/g, '_' + rowid));
		$rowid.val(rowid);
		bindResourceAutocomplete();
	}
   



    //terms & condition start
    // other terms
    var $termrowid = $('#termrowid');
    var template = $('#otherterms-template').html();
    var termrowid = 0;
    var $tbody = $('#otherTermsTable').find('> tbody');
    if(arr_otherTerms.length != 0) {
        $.each(arr_otherTerms, function(i, o) {
            termrowid += 1;
            $tbody.append(template.replace(/__/g, '_' + termrowid));

            $('#termTitle_' + termrowid).val(o.Title);
            $('#termDesc_' + termrowid).val(o.Desc);
            $('#deleteTermTr_' + termrowid).show();
        });
    }
    termrowid += 1;
    $tbody.append(template.replace(/__/g, '_' + termrowid));
    $termrowid.val(termrowid);

    // material
    var $materialrowid = $('#materialrowid');
    var template = $('#material-template').html();
    var materialrowid = 0;
    var $tbody = $('#materialTable').find('> tbody');
    if(arr_materials.length != 0) {
        $.each(arr_materials, function(i, o) {
            materialrowid += 1;
            $tbody.append(template.replace(/__/g, '_' + materialrowid));

//                $('#materialName_' + materialrowid).val(o.Title);
//                $('#materialId_' + materialrowid).val(o.Desc);
//                $('#materialUnit_' + materialrowid).val(o.Desc);
//                $('#materialRate_' + materialrowid).val(o.Desc);
//                $('#escalationper_' + materialrowid).val(o.Desc);
//                $('#materialbase_' + materialrowid).val(o.Desc);
//                $('#materialnewRate_' + materialrowid).val(o.Desc);
            $('#materialDeleteTr_' + materialrowid).show();
        });
    }
    materialrowid += 1;
    $tbody.append(template.replace(/__/g, '_' + materialrowid));
    $materialrowid.val(materialrowid);
    bindMaterialBaseAutoComplete();

    // exc material
    var $materialExcrowid = $('#materialExcrowid');
    var template = $('#materialexc-template').html();
    var materialExcrowid = 0;
    var $tbody = $('#materialExcTable').find('> tbody');
    if(arr_exc_materials.length != 0) {
        $.each(arr_exc_materials, function(i, o) {
            materialExcrowid += 1;
            $tbody.append(template.replace(/__/g, '_' + materialExcrowid));

//                $('#materialExcName_' + materialExcrowid).val(o.Title);
//                $('#materialExcId_' + materialExcrowid).val(o.Desc);
//                $('#materialExcUnit_' + materialExcrowid).val(o.Desc);
//                $('#materialExcRate_' + materialExcrowid).val(o.Desc);
//                $('#materialExcType_' + materialExcrowid).val(o.Desc);
            $('#materialExcDeleteTr_' + materialExcrowid).show();
        });
    }
    materialExcrowid += 1;
    $tbody.append(template.replace(/__/g, '_' + materialExcrowid));
    $materialExcrowid.val(materialExcrowid);
    bindMaterialExcAutoComplete();

    // adv material
    var $materialAdvrowid = $('#materialAdvrowid');
    var template = $('#materialadv-template').html();
    var materialAdvrowid = 0;
    var $tbody = $('#materialAdvTable').find('> tbody');
    if(arr_adv_materials.length != 0) {
        $.each(arr_adv_materials, function(i, o) {
            materialAdvrowid += 1;
            $tbody.append(template.replace(/__/g, '_' + materialAdvrowid));

//                $('#materialExcName_' + materialAdvrowid).val(o.Title);
//                $('#materialExcId_' + materialAdvrowid).val(o.Desc);
//                $('#materialExcUnit_' + materialAdvrowid).val(o.Desc);
//                $('#materialExcRate_' + materialAdvrowid).val(o.Desc);
//                $('#materialExcType_' + materialAdvrowid).val(o.Desc);
            $('#materialAdvDeleteTr_' + materialAdvrowid).show();
        });
    }
    materialAdvrowid += 1;
    $tbody.append(template.replace(/__/g, '_' + materialAdvrowid));
    $materialAdvrowid.val(materialAdvrowid);
    bindMaterialAdvAutoComplete();

    // tech title
    var $techrowid = $('#techrowid');
    var template = $('#techtitle-template').html();
    var techrowid = 0;
    var $tbody = $('#techTitleTable').find('> tbody');
    if(arr_adv_materials.length != 0) {
        $.each(arr_adv_materials, function(i, o) {
            techrowid += 1;
            $tbody.append(template.replace(/__/g, '_' + techrowid));

//                $('#materialExcName_' + techrowid).val(o.Title);
//                $('#materialExcId_' + techrowid).val(o.Desc);
//                $('#materialExcUnit_' + techrowid).val(o.Desc);
//                $('#materialExcRate_' + techrowid).val(o.Desc);
//                $('#materialExcType_' + techrowid).val(o.Desc);
            $('#deleteTechTr_' + techrowid).show();
        });
    }
    techrowid += 1;
    $tbody.append(template.replace(/__/g, '_' + techrowid));
    $techrowid.val(techrowid);

    //terms &condition end

    $('.content_wrapper').on('click','.mainTr',function(e){
        e.preventDefault();
        if(!$(this).closest("tr").next(".subTr").is(":visible")){
            $(this).closest("tr").next(".subTr").show();
            $(this).closest("tr").next(".subTr").find(".subDiv").slideDown("slow");
            $(this).find("i").addClass("tform");
        }
        else{
            $(this).closest("tr").next(".subTr").find(".subDiv").slideUp("slow");
            $(this).closest("tr").next(".subTr").slideUp("slow");
            $(this).find("i").removeClass("tform");
        }
    });

    nextAccordian(1);
    if('<?php echo (isset($gridtype)) ? $gridtype : 0;?>' == 0) {
        //paging
        $('#workorderTable').paging({limit: 2});
        $('.paging-nav').children('a[data-page=0]').trigger('click');
    }
});
 $(document).ready(function(){
        $(".flip0").click(function(){
            $(".pane0").slideToggle("slow");
        });
    });
    function myFunction(x) {
        x.classList.toggle("change");
    }
function bindResourceAutocomplete() {
    // bind resource autocomplete
    $('#workorderTable .resourceSuggest').autocomplete({
        lookup: tmp_arr_resources,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        }, onSelect: function (suggestion) {

            if (suggestion) {
                var $this = $(this);
                var rowid = $this[0].id.split('_')[1];
                $this.prop('readonly', true).addClass('border-none');
                $('#resourceid_' + rowid).val(suggestion.data);
                $('#unitname_' + rowid).val(suggestion.UnitName);
                $('#code_' + rowid).val(suggestion.Code);
                $('#unitid_' + rowid).val(suggestion.UnitId);
                console.log(suggestion);
                $('#expandTr_' + rowid).show();
                bindResourceIOW($this);
                addNewResourceRow($this);
            }
        }, onSearchStart: function (suggestion) {
            var rowid = $(this)[0].id.split('_')[1];
            $('#unitname_' + rowid).val('');
            $('#rate_' + rowid).val('');
        }, onSearchComplete: function (query, suggestions) {
            if(!suggestions.length) {
                var rowid = $(this)[0].id.split('_')[1];
                $('#unitname_' + rowid).val('');
                $('#rate_' + rowid).val('');
            }
        }
    });
}

function bindResourceIOW(x) {
    var rowid = $(x)[0].id.split('_')[1];
    var $iowrowid = $('#iow_' + rowid + '_rowid');
    var resourceId = $('#resourceid_' + rowid).val();
    var costcentre=$('#CostCentre').val();
    $('.loading_area').show();
    $.ajax({
        url: getBaseURL() + 'ats/index/entry-sample',
        type: "post",
        data: {'Type': 'getwbsdetails', 'ResourceId': resourceId, 'CostCentre': costcentre},
        async: false,
        success: function (data, textStatus, jqXHR) {
            if(jqXHR.status == 200) {
                data = JSON.parse(data);
                var iowtemplate = $('#iow-template').html();
                $.each(data, function (i,l) {
                    var iowrowid = parseInt($iowrowid.val()) + 1;
                    $('#iowTable_' + rowid).find('tbody.main').append(iowtemplate.replace(/__/g, '_' + rowid).replace(/_0/g, '_' + iowrowid));
                    $iowrowid.val(iowrowid);
                    $('#iow_' + rowid + '_wbsname_' + iowrowid).val(l.WbsName);
                    $('#iow_' + rowid + '_wbsid_' + iowrowid).val(l.WBSId);
                    $('#iow_' + rowid + '_qty_' + iowrowid).val();
                });
            }
            $('.loading_area').hide();
        }, error: function (jqXHR, textStatus, errorThrown) {
            $('.loading_area').hide();
        }
    });
}

function addNewResourceRow(x) {
    var $tr = $(x).closest('tr');
    if ($tr.next('tr:not(.subTr)').length != 0)
        return;

    var $rowid = $('#rowid'),
        rowid = parseInt($rowid.val()),
        $tbody = $('#workorderTable').find('> tbody.main');

    $('#deleteTr_' + rowid).show();
    var count = rowid + 1,
        template = $('#resource-template').html();

    template = template.replace(/__/g, '_' + count);
    $tbody.append(template);

    $rowid.val(count);
    bindResourceAutocomplete();
    if('<?php echo (isset($gridtype)) ? $gridtype : 0;?>' == 0) {
        //paging
        var f = parseInt($(".paging-nav").find('.selected-page').html()) - 1;
        $('.paging-nav').remove();
        thisVal._getNavBar($('#workorderTable').find('> tbody.main >tr'));
        setTimeout(function () {
            $('.paging-nav').children('a[data-page=' + f + ']').trigger('click');
        }, 100);
    }
}

function deleteRow(x,e) {
	e.preventDefault();
	var $x = $(x),
    key = $x[0].className.split('_')[1];
	
    if (!confirm('Do you want to Delete'))
	return false;
    var $tr = $x.closest('tr');

    $tr.next('.subTr').remove();
    $tr.next('.subTr').remove();
    $tr.remove();

    bindDescAutocomplete();
    if('<?php echo (isset($gridtype)) ? $gridtype : 0;?>' == 0) {
        //paging
        var f = parseInt($(".paging-nav").find('.selected-page').html()) - 1;
        $('.paging-nav').remove();
        thisVal._getNavBar($('#workorderTable').find('> tbody.main >tr'));
        setTimeout(function () {
            $('.paging-nav').children('a[data-page=' + f + ']').trigger('click');
        }, 100);
    }
    return false;
}

function checkResourceUsed(x) {
    var id = $(x)[0].id.split('_')[1];
    var reskeyid = $('input[id*=resourceid_]');
    tmp_arr_resources = arr_resources;
    tmp_arr_resources = $.grep(arr_resources, function (element, index) {
        var is_selected = true;
        $.each(reskeyid, function (i, obj) {
            var $this = $(this),
                name = $this[0].id;
            var arrname = name.split('_');
            var key1 = arrname[1];
            if (key1 != id) {
                if (element.data == $this.val()) {
                    is_selected = false;
                    return false;
                }
            }
        });
        return is_selected;
    });
    bindResourceAutocomplete();
}

function nextAccordian(id) {
    $('#panelheading-' + id).trigger('click');
}

function calcQuantity(x) {
    var $x = $(x);
    var ids = $x[0].id.split('_');
    var rowid = ids[1];

    // calc total qty
    var totalQty=0;
    $.each($('input[id^=iow_'+rowid+'_qty_'), function (i,o) {
        var qty = parseInt($(this).val());
        if(isNaN(qty))
            qty = 0;

        totalQty += qty;
    });

    $('#qty_'+rowid).val(sanitizeNumber(totalQty,0));

    // calc total amount
    var rate = parseFloatVal($('#rate_'+rowid).val());
    $('#amount_'+rowid).val(sanitizeNumber(totalQty * rate));
    calcTotal();
}

function calcTotal() {
    var total = 0;
    $.each($('input[id^=amount_]'), function (i,o) {
        total += parseFloatVal($(this).val());
    });
    $('#total').val(sanitizeNumber(total));
}

function addNewTermRow(x) {
    var $tr = $(x).closest('tr');
    if ($tr.next('tr').length != 0)
        return;

    var $rowid = $('#termrowid'),
        rowid = parseInt($rowid.val());
    $('.deleteTermTr_' + rowid).show();
    var count = rowid + 1,
        template = $('#otherterms-template').html();

    template = template.replace(/__/g, '_' + count);
    $tr.parent('tbody').append(template);
    $rowid.val(count);
}

function deleteTerm(x,e) {
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    $tr.remove();
    return false;
}

function addNewTechRow(x) {
    var $tr = $(x).closest('tr');
    if ($tr.next('tr').length != 0)
        return;

    var $rowid = $('#techrowid'),
        rowid = parseInt($rowid.val());
    $('.deleteTechTr_' + rowid).show();
    var count = rowid + 1,
        template = $('#techtitle-template').html();

    template = template.replace(/__/g, '_' + count);
    $tr.parent('tbody').append(template);
    $rowid.val(count);
}

function deleteTech(x,e) {
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    $tr.remove();
    return false;
}

function addNewMaterialRow(x) {
    var $x = $(x),
        $tr = $x.closest('tr'),
        key = $x[0].id.split('_')[1];

    if ($tr.next('tr').length != 0)
        return;

    if ($('#materialName_' + key).val().length == 0 || $('#materialRate_' + key).val().length == 0)
        return;

    var $rowid = $('#materialrowid'),
        rowid = parseInt($rowid.val());
    $('.materialDeleteTr_' + rowid).show();
    var count = rowid + 1,
        template = $('#material-template').html();

    template = template.replace(/__/g, '_' + count);
    $tr.parent('tbody').append(template);
    $rowid.val(count);
    bindMaterialBaseAutoComplete();
}

function deleteMaterial(x,e) {
    e.preventDefault();
    var $x = $(x),
        key = $x[0].className.split('_')[1],
        materialId = $('#materialId_' + key).val();

    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $x.closest('tr'),
        $tbody = $tr.parent('tbody');

    $tr.remove();
    materialPrice = materiallists;

    bindMaterialBaseAutoComplete();
    return false;
}

function addNewMaterialExcRow(x) {
    var $tr = $(x).closest('tr');

    if ($tr.next('tr').length != 0)
        return;

    var $rowid = $('#materialExcrowid'),
        rowid = parseInt($rowid.val());
    $('.materialExcDeleteTr_' + rowid).show();
    var count = rowid + 1,
        template = $('#materialexc-template').html();

    template = template.replace(/__/g, '_' + count);
    $tr.parent('tbody').append(template);
    $rowid.val(count);
    bindMaterialExcAutoComplete();
}

function deleteMaterialExc(x,e) {
    e.preventDefault();
    var $x = $(x),
        key = $x[0].className.split('_')[1],
        materialId = $('#materialExcId_' + key).val(),
        type = $('#materialExcType_' + key).val();

    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    $tr.remove();
    bindMaterialExcAutoComplete();
    return false;
}

function addNewMaterialAdvRow(x) {
    var $x = $(x),
        $tr = $x.closest('tr'),
        key = $x[0].id.split('_')[1];

    if ($tr.next('tr').length != 0)
        return;

    if ($('#materialAdvName_' + key).val().length == 0 || $('#materialAdvRate_' + key).val().length == 0)
        return;

    var $rowid = $('#materialAdvrowid'),
        rowid = parseInt($rowid.val());
    $('.materialAdvDeleteTr_' + rowid).show();
    var count = rowid + 1,
        template = $('#materialadv-template').html();

    template = template.replace(/__/g, '_' + count);
    $tr.parent('tbody').append(template);
    $rowid.val(count);
    bindMaterialAdvAutoComplete();
}

function deleteMaterialAdv(x,e) {
    e.preventDefault();
    var $x = $(x),
        key = $x[0].className.split('_')[1],
        materialId = $('#materialAdvId_' + key).val();

    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $x.closest('tr'),
        $tbody = $tr.parent('tbody');


    $tr.remove();
    bindMaterialAdvAutoComplete();
    return false;
}

function bindMaterialBaseAutoComplete() {
    var $matertialName = $('input[id^=materialName_]');
    $matertialName.unbind('autocomplete');
    var addedMaterials = [];
    $.each($matertialName, function () {
        var $this = $(this),
            name = $this[0].id;
        if (name.indexOf('__') != -1 || name.indexOf('excel') != -1) return;
        var arrname = name.split('_');
        var key1 = arrname[1];

        $this.autocomplete({
            lookup: materialPrice,
//                showNoSuggestionNotice:true,
//                noSuggestionNotice: 'Do you want to Create New <input type="button" style="font-weight:bold" class="btn btn-link" id="matpricenew_' + key1+'" value="Material" onclick="return AddNewMaterial(this.id)">',
            lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
                if (queryLowerCase == '*') {
                    return suggestion.value;
                } else {
                    var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                    return re.test(suggestion.value);
                }
            }, onSelect: function(suggestion) {
                if(suggestion) {
                    var $el = $("#materialId_" + key1);
                    $el.val(suggestion.data);
                    $('#materialUnit_' + key1).val(suggestion.unit);
                    removeError($(this));
                }
            }, onSearchStart: function(suggestion) {
                $("#materialId_" + key1).val(0);
            }, onSearchComplete: function (query, suggestions) {
                if(!suggestions.length){
                    showError($(this), 'Required');
                    $("#materialId_" + key1).val(0);
                } else
                    removeError($(this));
            }
        });
    });
}

function bindMaterialExcAutoComplete() {
    var $materialName = $('input[id^=materialExcName_]');
    $materialName.unbind('autocomplete');

    $.each($materialName, function () {
        var $this = $(this),
            name = $this[0].id;
        if (name.indexOf('__') != -1 || name.indexOf('excel') != -1) return;
        var arrname = name.split('_');
        var key1 = arrname[1];

        $this.autocomplete({
            lookup: materialSupply,
//                showNoSuggestionNotice:true,
//                noSuggestionNotice: 'Do you want to Create New <input type="button" style="font-weight:bold" class="btn btn-link" id="matsupplynew_' + key1+'" value="Material" onclick="return AddNewMaterial(this.id)">',
            lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
                if (queryLowerCase == '*') {
                    return suggestion.value;
                } else {
                    var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                    return re.test(suggestion.value);
                }
            }, onSelect: function(suggestion) {
                if(suggestion) {
                    var $el = $("#materialExcId_" + key1);
                    $el.val(suggestion.data);
                    $('#materialExcUnit_' + key1).val(suggestion.unit);
                    removeError($(this));
                }
            }, onSearchStart: function(suggestion) {
                $("#materialExcId_" + key1).val(0);
            }, onSearchComplete: function (query, suggestions) {
                if(!suggestions.length){
                    showError($(this), 'Required');
                    $("#materialExcId_" + key1).val(0);
                } else {
                    removeError($(this));
                }
            }
        });
    });
}

function bindMaterialAdvAutoComplete() {
    var $matertialName = $('input[id^=materialAdvName_]');
    $matertialName.unbind('autocomplete');
    $.each($matertialName, function () {
        var $this = $(this),
            name = $this[0].id;
        if (name.indexOf('__') != -1 || name.indexOf('excel') != -1) return;
        var arrname = name.split('_');
        var key1 = arrname[1];

        $this.autocomplete({
            lookup: materialaAdv,
//                showNoSuggestionNotice:true,
//                noSuggestionNotice: 'Do you want to Create New <input type="button" style="font-weight:bold" class="btn btn-link" id="matadvnew_' + key1+'" value="Material" onclick="return AddNewMaterial(this.id)">',
            lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
                if (queryLowerCase == '*') {
                    return suggestion.value;
                } else {
                    var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                    return re.test(suggestion.value);
                }
            }, onSelect: function(suggestion) {
                if(suggestion) {
                    var $el = $("#materialAdvId_" + key1);
                    $el.val(suggestion.data);
                    removeError($(this));
                }
            }, onSearchStart: function(suggestion) {
                $("#materialAdvId_" + key1).val(0);
            }, onSearchComplete: function (query, suggestions) {
                if(!suggestions.length){
                    showError($(this), 'Required');
                    $("#materialAdvId_" + key1).val(0);
                } else
                    removeError($(this));
            }
        });
    });
}

function checkMaterialPriceUsed(x) {
    var id = $(x)[0].id.split('_')[1];
    var reskeyid = $('input[id*=materialId_]');
    materialPrice = materiallists;

    materialPrice = $.grep(materiallists, function (element, index) {
        var is_selected = true;
        $.each(reskeyid, function (i, obj) {
            var $this = $(this),
                name = $this[0].id;
            var arrname = name.split('_');
            var key1 = arrname[1];

            if (key1 != id) {
                if (element.data == $this.val()) {
                    is_selected = false;
                    return false;
                }
            }
        });
        return is_selected;
    });
    bindMaterialBaseAutoComplete();
}

function checkMaterialSupplyUsed(x) {
    var id = $(x)[0].id.split('_')[1];
    var reskeyid = $('input[id*=materialExcId_]');
    materialSupply = materiallists;

    materialSupply = $.grep(materiallists, function (element, index) {
        var is_selected = true;
        $.each(reskeyid, function (i, obj) {
            var $this = $(this),
                name = $this[0].id;
            var arrname = name.split('_');
            var key1 = arrname[1];
            if (key1 != id) {
                if (element.data == $this.val()) {
                    is_selected = false;
                    return false;
                }
            }
        });
        return is_selected;
    });
    bindMaterialExcAutoComplete();
}

function checkMaterialAdvUsed(x) {
    var id = $(x)[0].id.split('_')[1];
    var reskeyid = $('input[id*=materialAdvId_]');
    materialaAdv = materiallists;
    materialaAdv = $.grep(materiallists, function (element, index) {
        var is_selected = true;
        $.each(reskeyid, function (i, obj) {
            var $this = $(this),
                name = $this[0].id;
            var arrname = name.split('_');
            var key1 = arrname[1];
            if (key1 != id) {
                if (element.data == $this.val()) {
                    is_selected = false;
                }
            }
        });
        return is_selected;
    });
    bindMaterialAdvAutoComplete();
}
function submitForm() {
	var tCount =  $('#workorderTable tbody tr').length;

//	if(tCount == 2 && <?php //echo (isset($Type)) ? $Type : 0;?>// != 2){
//       alert('Add Resource');
//       return false;
//	}
//    var rowCountqty= parseInt($('#rowid').val()-1);
//    if(<?php //echo (isset($Type)) ? $Type : 0;?>// != 2)
//    {
//        for (i = 1; i <= rowCountqty; i++) {
//
//            if ((parseFloatVal($('#qty_' + i).val()) == 0 || '') && parseInt($('#resourceid_' + i).val()) > 0) {
//                alert('Kindly enter the Quantity or delete the unwanted resource');
//                return false;
//            }
//        }
//    }
    $('#formWrapper').submit();
}
$(".time_picker").timepicker({
	minuteStep: 1,
	showSeconds: true,
	showMeridian: false
});
function gateinqtyValidation(x) {
    var $x = $(x);
    var ids = $x[0].id.split('_');
    var rowid = ids[1];
    var name = ids[0];
    var type = <?php echo (isset($Type)) ? $Type : 0;?>;

    if (name == 'qty' && type == 2) {
        var gateinQty = 0;
        var currentqty=0;
        gateinQty = parseFloatVal($('#gateinqty_' + rowid).val(),0);
        currentqty = parseFloatVal($('#qty_' + rowid).val(),0);

      if(currentqty > gateinQty)
      {
          alert('Return quantity cannot be greater than gate in qty - GateIn Qty : '+ gateinQty +' ');
          $('#qty_'+rowid).val(0);
          return false;
      }
    }
}
$("#GateName").change(function(){
    var target = $('#GateName').val(); console.log(target);
    $.ajax({
        url:getBaseURL()+"mms/master/gateentry-edit",
        type:"post",
        data:"GId="+target+"&mode=Gate1",
        success:function(data, textStatus, jqXHR){
            //alert(JSON.stringify(data))
            var valu=JSON.parse(data);
            $('#SecurityName').val(valu[0]['SecurityAgency']);
        },
        error:function(jqXHR, textStatus, errorThrown){
            alert(textStatus+"-----"+errorThrown);
        }
    });
});
$( document ).ready(function() {
    if('<?php echo (isset($Approve)) ? $Approve : '';?>' == 'Yes')
    {
        $('#sub1').hide();
    }
    else if('<?php echo (isset($Approve)) ? $Approve : '';?>' == 'Partial')
    {
        $('#sub1').hide();
    }
    else{
        $('#sub1').show();
    }

});
</script>
