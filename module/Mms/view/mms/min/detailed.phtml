<link rel="stylesheet" href="<?php echo $this->basePath() . '/css/mms.css'; ?>" />
<style type="text/css">
    .jqx-widget-content{z-index:999 !important;}
    .mar_20{margin-top:20px!important;}
    .subDiv {background-color: #e7e9ec;border: 1px solid #ddd;float: left;margin-left: 2%;margin-top: 2px;position: relative;width: 98%;}
    .sub_tbl1 {color:#424141;font-weight: 600; background:#70d3dd !important;border-bottom: 2px solid #9c793b !important;border-top: 1px solid #ddd !important;white-space: nowrap;}
    .sub_tbl2{color: #424141;font-weight: 600; background: #add160 !important;border-bottom: 2px solid #5d9bb6 !important;border-top: 1px solid #ddd !important;white-space: nowrap;}
    .sub_tbl3{color: #424141;font-weight: 600; background: #97d5b0 !important;border-bottom: 2px solid #18abc4 !important;border-top: 1px solid #ddd !important;white-space: nowrap;}
    .table-responsive table.table tr td { padding: 10px !important;}
	.card {margin-bottom: 0px !important; margin-top: 0% !important;}
	.top-30 {padding-top: 10px !important;}
	.blubg{background : #B0C3EB !important;}
	.sub_tab {background-color: #e7e9ec;border: 1px solid #ddd;float: left;margin-top: 2px;padding:8px;width:100%;}
</style>
	<div class="container-fluid">
		<div class="row">
			<div class="col-lg-12 mar_20">
				<h1>MIN Detail<span class="edit_symbl">_<?php echo $DCNo;?></span>&nbsp;&nbsp; </h1> 
			</div>
            <div class="col-lg-12 top_ct">
				<div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 clear">
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres" id="CostCentreName">
						<div class="cbpln cbpln-default bx-wte cbpln-status cbpln-status3">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-3">
										<i class="fa fa-bandcamp fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-9 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $CostCentreName; ?></div>
										<div class="cbhuge comnelips">Project Name</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres" id="VendorName">
						<div class="cbpln cbpln-default bx-wte cbpln-status cbpln-status4">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-3">
										<i class="fa fa-certificate fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-9 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $VendorName; ?></div>
										<div class="cbhuge comnelips">Vendor Name</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres" id="DCDate">
						<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status1">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-3">
										<i class="fa fa-retweet fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-9 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $DCDate; ?></div>
										<div class="cbhuge comnelips">Min Date</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres" id="CCDCNo">
						<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status1">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-3">
										<i class="fa fa-retweet fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-9 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $CCDCNo; ?></div>
										<div class="cbhuge comnelips">CCMin No</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres" id="CDCNo">
						<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status1">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-3">
										<i class="fa fa-retweet fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-9 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $CDCNo; ?></div>
										<div class="cbhuge comnelips">CMin No</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres" id="SiteDCDate">
						<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status2">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-3">
										<i class="fa fa-calendar fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-9 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $SiteDCDate; ?></div>
										<div class="cbhuge comnelips">Site MIN Date</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres " id="GatePassNo">
						<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status6">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-3">
										<i class="fa fa-money fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-9 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $GatePassNo; ?></div>
										<div class="cbhuge comnelips">GatePass No</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres " id="RefNo">
						<div class="cbpln cbpln-default bx-wte cbpln-status cbpln-status7">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-3">
										<i class="fa fa-cube fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-9 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $RefNo; ?></div>
										<div class="cbhuge comnelips">Req. No</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres " id="DCNo">
						<div class="cbpln cbpln-default bx-wte cbpln-status cbpln-status8">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-2">
										<i class="fa fa-share fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-10 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $DCNo; ?></div>
										<div class="cbhuge comnelips">MIN No</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres " id="SiteDCNo">
						<div class="cbpln cbpln-default bx-wte cbpln-status cbpln-status3">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-2">
										<i class="fa fa-star-half-o fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-10 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $SiteDCNo; ?></div>
										<div class="cbhuge comnelips">Site MIN No </div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres " id="Approve">
						<div class="cbpln cbpln-default bx-wte cbpln-status cbpln-status4">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-2">
										<i class="fa fa-ticket fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-10 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $Approve; ?></div>
										<div class="cbhuge comnelips">Approve</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
            </div>

			<div class="col-lg-12 clear">
				<div class="table-responsive clear">
					<div id="dataTable"></div>
				</div>
			</div>
		</div>
		<div id="accordion" class="panel-group">
			<!-------------------------------Bill of Quantities------------------------------->
			<div class="panel panel-info">
				<div data-target="#collapseOne" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-1">
					<h4 class="panel-title accordion-toggle defa_panels">MIN Quantity</h4>
				</div>
				<div class="panel-collapse collapse" id="collapseOne" style="height: 0px;">
					<div class="panel-body bgcolr">
						<div class="col-lg-12">
							<div class="table-responsive top-30">
								<table id="workorderTable" class="table table-bordered tableView dataTable no-footer" style=" margin-bottom:0px;">
									<thead>
									<tr>
										<th class="blubg">Description</th>
										<th class="blubg">Unit</th>
										<th class="blubg" style="text-align:center">Qty</th>
										<th class="blubg" style="text-align:center">AcceptQty</th>
										<th class="blubg" style="text-align:center">RejectQty</th>
										<th class="blubg">Expire Date</th>
										<th class="blubg">Remarks</th>
										<th class="blubg">&nbsp;</th>
									</tr>
									</thead>
									<tbody class="main"></tbody>
									<tbody class="total">
									</tbody>
								</table>
								<input type="hidden" name="rowid" id="rowid" value="0"/>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-------------------------------/Bill of Quantities end------------------------------->
			<!-------------------------------Trip Sheet------------------------------->

			<div class="panel panel-info" id="trip">
				<div data-target="#collapseTwo" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-2">
					<h4 class="panel-title accordion-toggle defa_panels">Trip Sheet</h4>
				</div>
				<div class="panel-collapse collapse" id="collapseTwo" style="height: 0px;">
					<div class="panel-body bgcolr">
						<div class="col-lg-12">
							<div class="col-lg-4 col-lg-offset-0 col-md-3 col-md-offset-0 col-sm-2 col-sm-offset-0 col-xs-12 col-xs-offset=0 mar_tpbm">
								<div class="polymer-form">
									<select name="vehicleId" id="vehicleId"  class="single_dropdown lbl_move select2-hidden-accessible"
											style="width:100%;" label="Vehicle Reg.No." tabindex="-1" aria-hidden="true" disabled >
										<option value="">Select vehicle</option>
										<option>None</option>
										<?php if(isset($arr_vehicle)) {
											foreach ($arr_vehicle as $vehicles) {
												if(isset($vehicleData)){ ?>
													<option value="<?php echo $vehicles['VehicleId']; ?>" <?php echo ($vehicles['VehicleId'] == $vehicleData['VehicleId']) ? 'selected' : ''; ?>><?php echo $vehicles['VehicleRegNo']; ?></option>
												<?php }
												else{ ?>
													<option value="<?php echo $vehicles['VehicleId']; ?>"><?php echo $vehicles['VehicleRegNo']; ?></option>
												<?php }
											}
										}?>
									</select>
									<div class="error_message">
										<p>Please select the vehicle...</p>
									</div>
								</div>
							</div>

							<div class="col-lg-4 col-lg-offset-0 col-md-3 col-md-offset-0 col-sm-2 col-sm-offset-0 col-xs-12 col-xs-offset=0 mar_tpbm">
								<input type="text" name="VehicleName" id="VehicleName" class="diff_txt" placeholder="Vehicle Name" value="<?php echo isset($vehicleData['VehicleName']) ? $vehicleData['VehicleName']:''; ?>" disabled >
								<div class="error_message">
									<p>Please select the vehicle Name...</p>
								</div>
							</div>
						</div>
						<div class="col-lg-12">
							<div class="table-responsive">
								<p class="par_stl">a)Body Level Measurement Above Body Level</p>
								<table class="table bm" id="b1">
									<tr>
										<div class="col-lg-3">
											<input type="text" name="bLength" id="bLength" style="text-align:right;" onchange = "btotal();" class="vhle_txt" placeholder="Length" onkeypress="return isDecimal(event,this)" onblur="return FormatNum(this, 3, true)"   value="<?php echo isset($vehicleData['BLLen']) ? $vehicleData['BLLen']:''; ?>" disabled>
										</div>
										<div class="col-lg-3">
											<input type="text" name="bBreadth" id="bBreadth" style="text-align:right;" onchange="btotal();" class="vhle_txt" placeholder="Breadth" onkeypress="return isDecimal(event,this)" onblur="return FormatNum(this, 3, true)"  value="<?php echo isset($vehicleData['BLBreadth']) ? $vehicleData['BLBreadth']:''; ?>" disabled >
										</div>
										<div class="col-lg-3">
											<input type="text" name="bHeight" id="bHeight" style="text-align:right;" onchange="btotal();" class="vhle_txt" placeholder="Height"onkeypress="return isDecimal(event,this)" onblur="return FormatNum(this, 3, true)"  value="<?php echo isset($vehicleData['BLHeight']) ? $vehicleData['BLHeight']:''; ?>" disabled >
										</div>
										<div class="col-lg-3">
											<input type="text" name="bQty" id="bQty"  style="text-align:right;" readonly class="vhle_txt" placeholder="Qty" onblur="return FormatNum(this, 3, true)"  value="<?php echo isset($vehicleData['BLQty']) ? $vehicleData['BLQty']:''; ?>" disabled >
										</div>
									</tr>
								</table>
							</div>
							<div class="table-responsive">
								<p class="par_stl">b)Tapper Size Maximum</p>
								<table class="table bm" id="t1">
									<tr>
										<div class="col-lg-3">
											<input type="text" name="tMaxLength" id="tMaxLength" style="text-align:right;" onchange = "tMaxTot();" class="vhle_txt" placeholder="Length"onkeypress="return isDecimal(event,this)" onblur="return FormatNum(this, 3, true)"  value="<?php echo isset($vehicleData['TSMAXLen']) ? $vehicleData['TSMAXLen']:''; ?>" disabled >
										</div>
										<div class="col-lg-3">
											<input type="text" name="tMaxBreadth" id="tMaxBreadth" style="text-align:right;"  onchange = "tMaxTot();" class="vhle_txt" placeholder="Breadth" onkeypress="return isDecimal(event,this)" onblur="return FormatNum(this, 3, true)"  value="<?php echo isset($vehicleData['TSMAXBreadth']) ? $vehicleData['TSMAXBreadth']:''; ?>" disabled >
										</div>
										<div class="col-lg-3">
											<input type="text" name="tMaxHeight" id="tMaxHeight" style="text-align:right;"  onchange = "tMaxTot();" class="vhle_txt"  placeholder="Height"  onkeypress="return isDecimal(event,this)" onblur="return FormatNum(this, 3, true)"  value="<?php echo isset($vehicleData['TSMAXHeight']) ? $vehicleData['TSMAXHeight']:''; ?>" disabled >
										</div>
										<div class="col-lg-3">
											<input type="text" name="tMaxQty" id="tMaxQty" style="text-align:right;" readonly class="vhle_txt" placeholder="Qty" onblur="return FormatNum(this, 3, true)"  value="<?php echo isset($vehicleData['TSMAXQty']) ? $vehicleData['TSMAXQty']:''; ?>" disabled >
										</div>
									</tr>
								</table>
							</div>
							<div class="table-responsive">
								<p class="par_stl">c)Tapper Size Minimum</p>
								<table class="table bm" id="t2">
									<tr>
										<div class="col-lg-3">
											<input type="text" name="tMinLength" id="tMinLength"  style="text-align:right;" onchange = "tMinTot();" class="vhle_txt" placeholder="Length" onkeypress="return isDecimal(event,this)" onblur="return FormatNum(this, 3, true)"  value="<?php echo isset($vehicleData['TSMinLen']) ? $vehicleData['TSMinLen']:''; ?>" disabled >
										</div>
										<div class="col-lg-3">
											<input type="text" name="tMinBreadth" id="tMinBreadth" style="text-align:right;" onchange = "tMinTot();" class="vhle_txt"  placeholder="Breadth" onkeypress="return isDecimal(event,this)" onblur="return FormatNum(this, 3, true)"  value="<?php echo isset($vehicleData['TSMinBreadth']) ? $vehicleData['TSMinBreadth']:''; ?>" disabled >
										</div>
										<div class="col-lg-3">
											<input type="text" name="tMinHeight" id="tMinHeight" style="text-align:right;"  onchange = "tMinTot();" class="vhle_txt" placeholder="Height"onkeypress="return isDecimal(event,this)" onblur="return FormatNum(this, 3, true)"   value="<?php echo isset($vehicleData['TSMinHeight']) ? $vehicleData['TSMinHeight']:''; ?>" disabled >
										</div>
										<div class="col-lg-3">
											<input type="text" name="tMinQty" id="tMinQty" style="text-align:right;"  readonly class="vhle_txt" placeholder="Qty" value="<?php echo isset($vehicleData['TSMinQty']) ? $vehicleData['TSMinQty']:''; ?>" disabled >
										</div>
									</tr>
								</table>
							</div>
							<div class="table-responsive">
								<table class="table bl" id="total">
									<tr>
										<div class="col-lg-4 mar_tb">
											<label class="lbl_stl" style="text-align:center;"> d) Total (b+c) <label>
										</div>
										<div class="col-lg-4 mar_tb">
											<label class="lbl_stl" style="text-align:center;">e) 50% Above of (d) Quantity<label>
										</div>
										<div class="col-lg-4 mar_tb">
											<label class="lbl_stl" style="text-align:center;">Net Quantity for the Trip (a+e)<label>
										</div>
									</tr>
									<tr>
										<div class="col-lg-4 mar_tb">
											<input type="text" name="bctotal" id="bctotal" readonly class="vhle_txt" style="text-align:right;"  placeholder="Qty" value="<?php echo isset($vehicleData['Total1']) ? $vehicleData['Total1']:''; ?>" disabled >
										</div>
										<div class="col-lg-4 mar_tb">
											<input type="text" name="perQty" id="perQty" readonly class="vhle_txt"  style="text-align:right;" placeholder="Qty" value="<?php echo isset($vehicleData['Total2']) ? $vehicleData['Total2']:''; ?>" disabled >
										</div>
										<div class="col-lg-4 mar_tb">
											<input type="text" name="netQty" id="netQty" readonly class="vhle_txt"  style="text-align:right;"  placeholder="Qty" value="<?php echo isset($vehicleData['NetTotal']) ? $vehicleData['NetTotal']:''; ?>" disabled >
										</div>
									</tr>
								</table>
							</div>
							<div class="table-responsive">
								<table class="table tx" id="total">
									<tr>
										<div class="col-lg-12">
											<textarea class="exp-tex" name="remarks" id="remarks" disabled ><?php echo isset($vehicleData['Remarks']) ? $vehicleData['Remarks']:''; ?></textarea>
										</div>
									</tr>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-------------------------------/Trip Sheet------------------------------->
			<!-------------------------------Others Details------------------------------->
			<div class="panel panel-info" id="other">
				<div data-target="#collapseFour" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-4">
					<h4 class="panel-title accordion-toggle defa_panels">Other Details</h4>
				</div>
				<div class="panel-collapse collapse" id="collapseFour" style="height: 0px;">
					<div class="panel-body bgcolr">
						<div class="clearfix"></div>
						<div class="col-lg-12" style="margin-top:10px;margin-bottom: 10px;">
							<div class="card">
								<ul class="nav nav-tabs">
									<li id ="na" class=""><a href="#nar" id="narrationTabLink"  aria-controls="naration" role="tab" data-toggle="tab">Narration</a></li>
									<li id ="we" class=""><a href="#sample1" id="weightTabLink"  aria-controls="sample1" role="tab" data-toggle="tab">WeighBridge</a></li>
									<li id ="qu" class=""><a href="#sample2" id="quantityTabLink"  aria-controls="sample2" role="tab" data-toggle="tab">Quality Testing Details</a></li>
									<li id ="ve" class=""><a href="#sample3" id="vehicleTabLink"  aria-controls="sample3" role="tab" data-toggle="tab">Vehicle Images</a></li>
								</ul>
								<div class="tab-content">
									<div class="tab-pane active" id="nar">
										<p>
										<div class="col-lg-12">
											<?php
											if(isset($Narration)){
												?>
												<textarea class="exp-tex" name="Narration" id="Narration" disabled ><?php echo (isset($Narration)) ? $Narration : 'Enter your Notes.......';?></textarea>
											<?php }else{ ?>
												<textarea class="exp-tex" name="Narration" id="Narration"  disabled placeholder="Enter your Notes..."></textarea>
											<?php } ?>
										</div>
										</p>
									</div>
									<div class="tab-pane" id="sample1">
										<div class="col-lg-12">
											<div class="table-responsive">
												<table class="table" style=" margin-bottom:0px;" id="taskTable">
													<thead>
													<tr>
														<td align="left" class="atr_clr">With Load(a)</td>
														<td width="25%" ><input type="text" name="WithLoad" id="WithLoad" style="text-align:right;" onchange = "loadTot();" class="diff_txt" placeholder="" value="<?php echo (isset($WithLoad)) ? $WithLoad : '';?>" disabled />
														<td align="left" class="atr_clr"> Without Load(b)</td>
														<td width="25%" ><input type="text" name="WithOutLoad" id="WithOutLoad" style="text-align:right;" onchange = "loadTot();" class="diff_txt" placeholder="" value="<?php echo (isset($WithOutLoad)) ? $WithOutLoad : '';?>" disabled />
														<td align="left" class="atr_clr">Material Weigh(c=a-b)</td>
														<td width="25%" ><input type="text" name="MaterialWeigh" id="MaterialWeigh"  style="text-align:right;" onchange = "loadTot();" class="diff_txt" placeholder="" value="<?php echo (isset($MaterialWeigh)) ? $MaterialWeigh : '';?>" disabled />
													</tr>
													</thead>
													<tbody class="main"></tbody>
												</table>
											</div>
										</div>
									</div>
									<div class="tab-pane " id="sample2">
										<div class="col-lg-12">
											<div class="table-responsive">
												<table class="table" style=" margin-bottom:0px;" id="branchdetTable">
													<thead>
													<tr>
														<th>Tested</th>
														<th>Agency</th>
														<th>Testing Method</th>
														<th>Testing Result</th>
													</tr>
													<tr>
														<td width="20%">
															<div class="checkbox-styled">
																<label for="Tested" >
																	<input type="checkbox" name="Tested" id="Tested"  value="1" <?php echo (isset($Tested) && $Tested==1) ? 'checked':'' ; ?> disabled />
																	<span><p class="tick">Is Tested </p></span>
																</label>
															</div>
														</td>
														<td width="25%">
															<select name="AgencyId" id="AgencyId" class="form-control single_dropdown sortoption" data-placeholder="Please Select" style="width:100%;" disabled >
																<option value="">Select Agency....</option>
																<?php if(isset($arr_agency)) {
																	foreach ($arr_agency as $agency) {
																		if(isset($AgencyId)) {
																			?>
																			<option value="<?php echo $agency['VendorId']; ?>" <?php echo ($agency['VendorId'] == $AgencyId) ? 'selected' : ''; ?>><?php echo $agency['VendorName']; ?></option>
																		<?php }
																		else{?>
																			<option value="<?php echo $agency['VendorId']; ?>" >  <?php echo $agency['VendorName']; ?> </option>
																		<?php  }
																	}}?>
															</select>
														</td>
														<td width="25%">
															<input type="text" name="TestingMethod" id="TestingMethod" class="parent_txts"  value="<?php echo (isset($TestingMethod)) ? $TestingMethod : '';?>" disabled />
														</td>
														<td width="25%">
															<input type="text" name="TestResults" id="TestResults" class="parent_txts"  value="<?php echo (isset($TestResults)) ? $TestResults : '';?> " disabled />
														</td>
													</tr>
													</thead>
													<tbody class="main"></tbody>
												</table>
											</div>
										</div>
									</div>
									<div class="tab-pane " id="sample3">
										<div class="col-lg-12">
											<div class="table-responsive">
												<div class="demo-columns">
													<!-- / Left column -->
													<div class="col-md-12">
														<div class="panel panel-default">
															<div class="panel-heading">
																<h3 class="panel-title">Images</h3>
															</div>
															<?php if (isset($DCRegisterId) > 0) {?>
															<?php
																$dir = 'public/uploads/mms/'.$DCRegisterId;
																$files = glob($dir.'/*'); // get all file names									
															?>
															<div class="panel-body demo-panel-files" id='demo-files' file-counter="<?php echo count($files); ?>">
																<?php
																	function filesize_formatted($path){
																		$size = filesize($path);
																		$units = array( 'B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB');
																		$power = $size > 0 ? floor(log($size, 1024)) : 0;
																		return number_format($size / pow(1024, $power), 2, '.', ',') . ' ' . $units[$power];
																	}										
																	if(count($files) > 0){
																		foreach($files as $file){ // iterate files
																			if(is_file($file)){
																?>
																				<div class="file_content" style="background-color:#f5f5f5; border-color:1px solid #dcdcdc !important; padding:12px 16px 12px 16px;margin-top:10px;">
																					<a download="<?php echo basename($file); ?>" href="<?php echo $this->basePath().'/uploads/mms/'.$DCRegisterId.'/'.basename($file); ?>"><?php echo basename($file); ?></a>
																					<span class="demo-file-size">(<?php echo filesize_formatted($file); ?>)</span>
																					<div id=":197" role="button" class="" tabindex="-1" fname="<?php echo basename($file); ?>"></div>
																					<div class="progress progress-striped active" style="width:200px;float:right;display:none;">
																						<div class="progress-bar" role="progressbar" style="width: 0%;">
																						</div>
																					</div>
																				</div>
																<?php	
																			}
																		}
																	}
																	else{
																		echo '<span class="demo-note">No Files have been selected/droped yet...</span>';
																	}
																?>
															</div>
															<?php } else { ?>
															<div class="panel-body demo-panel-files" id='demo-files' file-counter="0">
																<span class="demo-note">No Files have been selected/droped yet...</span>
															</div>
															<?php } ?>
														</div>
													</div>
													<!-- / Right column -->
												</div>	
											</div>	
										</div>	
									</div>	
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		<!-------------------------------Others Details------------------------------->
		</div>
	</div>
	<div class="col-lg-12 savebtn_area">
		<ul>
			<li class="dropdown save_btn float_r">
				<a href="<?php echo $this->basePath();?>/mms/min/register" class="ripple">Close</a>
			</li>
		 </ul>
	</div>
	
<script id="resource-template"  type="text/template" class="hide">
    <tr class="count-tr">
        <td width="35%" name="desc__" id="desc__">
            <input type="hidden" name="resourceid__" id="resourceid__"/>
            <input type="hidden" name="itemid__" id="itemid__"/>
        </td>
        <td width="8%" name="unitname__" id="unitname__">
            <input type="hidden" name="unitid__" id="unitid__"/>
        </td>
        <td width="10%" name="qty__" id="qty__" style="text-align:right">
            <input type="hidden" name="hiddenqty__" id="hiddenqty__">
        </td>
        <td width="15%" name="AcceptQty__" id="AcceptQty__" style="text-align:right"></td>
        <td width="10%" name="RejectQty__" id="RejectQty__" style="text-align:right"></td>
        <td width="15%" name="RefDate__" id="RefDate__"></td>
        <td width="17%" name="Remarks__" id="Remarks__"></td>
        <td width="2%" align="center" class="action_btns_td">
            <ul class="action_btns">
                <li> <a href="#" class="mainTr" id="expandTr__" style="display:none;"> <i class="fa fa-chevron-circle-down" data-toggle="tooltip" data-placement="left" data-original-title="Add lines" ></i></a> </li>
            </ul>
        </td>
    </tr>

    <tr style="display:none" class="subTr count-tr">
        <td colspan="9" style="padding:0px !important; ">
            <div class="" style="margin-top:8px;">
                <div class="col-lg-12 col-lg-offset-0 rdbt">
                    <div class="card">
                        <ul class="nav nav-tabs">
                            <li class="active"><a class="ripple has-ripple" id="iowTableLink__" onclick="showtabs('po',this.id,event)" style="position: relative; overflow: hidden; cursor:pointer;">PO<span class="ripple-wrapper animated"></span></a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-12">
                    <div class="tab-content">
                        <div class="table-responsive topsp sub_tab" style="margin-bottom:10px;">
                            <table class="table table-bordered tableView dataTable no-footer" style=" margin-bottom:0px;" id="iowTable__" bgcolor="#00FF00">
                                <thead>
                                <tr>
                                    <th class="worktype-activity sub_tbl1">PONo</th>
                                    <th class="worktype-activity sub_tbl1" style="text-align:center">BalQty</th>
                                    <th class="worktype-activity sub_tbl1">PODate</th>
                                    <th class="worktype-activity sub_tbl1">ReqDate</th>
                                    <th class="worktype-activity sub_tbl1" style="text-align:center" >OrderQty</th>
                                    <th class="worktype-activity sub_tbl1" style="text-align:center" >MINQty</th>
                                    <th class="worktype-activity sub_tbl1" style="text-align:center" >SupplierMIN</th>
                                    <th class="worktype-activity sub_tbl1" style="text-align:center" >AcceptQty</th>
                                    <th class="worktype-activity sub_tbl1" style="text-align:center" >RejectQty</th>
									<th class="worktype-activity sub_tbl1" >&nbsp;</th>
                                    
                                </tr>
                                </thead>
                                <tbody class="main"></tbody>
                                <tbody class="total">
                                </tbody>
                                <input type="hidden" name="iow___rowid" id="iow___rowid" value="0"/>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </td>
    </tr>
</script>
<script id="iow-template"  type="text/template" class="hide">
    <tr class="dont-hide">
        <td width="8%" class="highlight1" name="iow___PONo_0" id="iow___PONo_0">
            <input type="hidden" name="iow___decisionid_0" id="iow___decisionid_0"/>
            <input type="hidden" name="iow___resourceid_0" id="iow___resourceid_0"/>
            <input type="hidden" name="iow___itemid_0" id="iow___itemid_0"/>
            <input type="hidden" name="iow___potransid_0" id="iow___potransid_0"/>
            <input type="hidden" name="iow___poprojtransid_0" id="iow___poprojtransid_0"/>
            <input type="hidden" name="iow___PORegisterId_0" id="iow___PORegisterId_0"/>
        </td>
        <td width="12%" name="iow___balqty_0" id="iow___balqty_0"  style="text-align:right"></td>
        <td width="15%" name="iow___PODate_0" id="iow___PODate_0"> </td>
        <td width="15%" name="iow___ReqDate_0" id="iow___ReqDate_0"> </td>
        <td width="10%" name="iow___OrderQty_0" id="iow___OrderQty_0" style="text-align:right"></td>
        <td width="10%" name="iow___MINQty_0" id="iow___MINQty_0" style="text-align:right"></td>
        <td width="10%" name="iow___SupplierMIN_0" id="iow___SupplierMIN_0" style="text-align:right">
            <input type="hidden" name="iow___hiddenSMQty_0" id="iow___hiddenSMQty_0" >
        </td>
        <td width="10%" name="iow___AcceptQty_0" id="iow___AcceptQty_0" style="text-align:right">
            <input type="hidden" name="iow___hiddenAQty_0" id="iow___hAQty_0">
        </td>
        <td width="10%" name="iow___RejectQty_0" id="iow___RejectQty_0" style="text-align:right">
            <input type="hidden" name="iow___hiddenRQty_0" id="iow___hiddenRQty_0">
        </td>
		<td width="2%" align="center" class="action_btns_td iow___requestfields border-none">
            <ul class="action_btns">
                <li> <a href="#" class="mainTr" id="expandTr__"> <i class="fa fa-chevron-circle-down" data-toggle="tooltip" data-placement="left" data-original-title="Add lines" ></i></a> </li>
            </ul>
        </td>
    </tr>


    <tr style="display:none" class="subTr dont-hide all">
        <td colspan="10" style="padding:0px !important; ">
            <div class="subDiv " style="margin-top:10px; margin-bottom:10px;  margin-left:10px;">
                <div class="col-lg-12 col-lg-offset-0 rdbt" style="margin-top:5px;"></div>
                <div class="col-lg-12">
                    <div class="table-responsive topsp">
                        <table class="table table-bordered tableView dataTable no-footer" style=" margin-bottom:0px;" id="sec___po_0_whreqno">

                        </table>
                        <input type="hidden" name="iow___request_0_rowid" id="iow___request_0_rowid" value="0"/>
                        <input type="hidden" name="wh___po_0_wrowid" id="wh___po_0_wrowid" value="0"/>
                    </div>
                </div>
            </div>
        </td>
    </tr>

</script>
<script id="iow-po-warehouse"  type="text/template" class="hide">
    <tr class="dont-hide">
        <td width="20%" name="wh___po_0_warehousename_4" id="wh___po_0_warehousename_4" >
            <input type="hidden" name="wh___po_0_warehouseid_4" id="wh___po_0_warehouseid_4"/>
            <input  type="hidden" name="wh___po_0_costcentreid_4" id="wh___po_0_costcentreid_4" />
        </td>
        <td width="20%" name="wh___po_0_desc_4" id="wh___po_0_desc_4"></td>
        <td width="20%" name="wh___po_0_qty_4" id="wh___po_0_qty_4" style="text-align:center">
            <input type="hidden" name="wh___po_0_hdqty_4" id="wh___po_0_hdqty_4" value="0"/>
        </td>
    </tr>
</script>
<script id="request-template"  type="text/template" class="hide">
    <tr class="dont-hide">
        <td width="30%" name="iow___request_0_wbsname__9" id="iow___request_0_wbsname__9">
            <input type="hidden" name="iow___request_0_wbsid__9" id="iow___request_0_wbsid__9"/>
            <input type="hidden" name="iow___request_0_poregisterid__9" id="iow___request_0_poregisterid__9"/>
            <input type="hidden" name="iow___request_0_potransid__9" id="iow___request_0_potransid__9"/>
            <input type="hidden" name="iow___request_0_poanaltransid__9" id="iow___request_0_poanaltransid__9"/>
            <input type="hidden" name="iow___request_0_itemid__9" id="iow___request_0_itemid__9"/>
            <input type="hidden" name="iow___request_0_resourceid__9" id="iow___request_0_resourceid__9"/>
        </td>

        <td width="12%" name="iow___request_0_balqty__9" id="iow___request_0_balqty__9" style="text-align:right"></td>
        <td width="12%" name="iow___request_0_orderqty__9" id="iow___request_0_orderqty__9" style="text-align:right"></td>
        <td width="12%" name="iow___request_0_minqty__9" id="iow___request_0_minqty__9" style="text-align:right"></td>
        <td width="12%" name="iow___request_0_suppliermin__9" id="iow___request_0_suppliermin__9" style="text-align:right">
            <input type="hidden" name="iow___request_0_hiddenSMqty__9" id="iow___request_0_hiddenSMqty__9" >
        </td>
        <td width="10%" name="iow___request_0_acceptqty__9" id="iow___request_0_acceptqty__9" style="text-align:right">
            <input type="hidden" name="iow___request_0_hiddenAqty__9" id="iow___request_0_hiddenAqty__9" >
        </td>
        <td width="12%" name="iow___request_0_rejectqty__9" id="iow___request_0_rejectqty__9" style="text-align:right">
            <input type="hidden" name="iow___request_0_hiddenRqty__9" id="iow___request_0_hiddenRqty__9"  >
        </td>
		<td width="1%" align="center" class="action_btns_td iow_1_requestfields">
            <ul class="action_btns">
                <li><a href="" class="mainTr" id="expandTr_1 "> <i class="fa fa-chevron-circle-down" data-toggle="modal" data-target="#myModal" data-placement="left"></i></a> </li>
            </ul>
        </td>
    </tr>

    <tr style="display:none" class="subTr dont-hide">
        <td colspan="9" style="padding:0px !important; ">
            <div class="subDiv" style="margin-top:10px; margin-bottom:10px;  margin-left:10px;">
                <div class="col-lg-12 col-lg-offset-0 rdbt" style="margin-top:5px;"></div>
                <div class="col-lg-12">
                    <div class="table-responsive topsp">
                        <table class="table table-bordered tableView dataTable no-footer" style=" margin-bottom:0px;" id="thr___request_0_wbs__9_whreqno">
                        </table>
                        <input type="hidden" name="wh___po_0_wbs_45_wrowid" id="wh___po_0_wbs_45_wrowid" value="0"/>
                    </div>
                </div>
            </div>
        </td>
    </tr>
</script>
<script type="text/javascript">
$(document).ready(function(){
var arr_requestResources = <?php echo (isset($arr_requestResources)) ? json_encode($arr_requestResources) : '[]';?>;
var arr_resource_iows = <?php echo (isset($arr_resource_iows)) ? json_encode($arr_resource_iows) : '[]';?>;
var arr_resource_iow_requests = <?php echo (isset($arr_resource_iow_requests)) ? json_encode($arr_resource_iow_requests) : '[]';?>;
var arr_sel_warehouse = <?php echo (isset($arr_sel_warehouse)) ? json_encode($arr_sel_warehouse) : '[]';?>;
var arr_dcwbswarehouse = <?php echo (isset($arr_dcwbswarehouse)) ? json_encode($arr_dcwbswarehouse) : '[]';?>;
var arr_dcpowarehouse = <?php echo (isset($arr_dcpowarehouse)) ? json_encode($arr_dcpowarehouse) : '[]';?>;
var arr_vehicle = <?php echo (isset($arr_vehicle)) ? json_encode($arr_vehicle) : '[]';?>;

    var $rowid = $('#rowid');
    var template = $('#resource-template').html();
    var iowtemplate = $('#iow-template').html();
    var requesttemplate = $('#request-template').html();
    var warepotemplate = $('#iow-po-warehouse').html();
    var gridtype = $('#gridtype').val();

    var rowid = 0;
    var $tbody = $('#workorderTable').find('> tbody.main');
	

    if(arr_requestResources.length != 0) {
        $.each(arr_requestResources, function(i, o) {
            rowid += 1;
            $tbody.append(template.replace(/__/g, '_' + rowid));

            $('#desc_' + rowid).html(o.Desc).addClass('border-none').prop('disabled', true);
            $('#resourceid_' + rowid).val(o.ResourceId);
            $('#itemid_' + rowid).val(o.ItemId);
            $('#unitname_' + rowid).html(o.UnitName).addClass('border-none').prop('disabled', true);
            $('#unitid_' + rowid).val(o.UnitId);
            $('#qty_' + rowid).html(o.Qty).addClass('border-none').prop('disabled', true);
            $('#AcceptQty_' + rowid).html(o.AcceptQty).addClass('border-none').prop('disabled', true);
            $('#RejectQty_' + rowid).html(o.RejectQty).addClass('border-none').prop('disabled', true);
            $('#RefDate_' + rowid).html(o.ExpiryDate).addClass('border-none').prop('disabled', true);
            $('#Remarks_' + rowid).html(o.Remarks).addClass('border-none').prop('disabled', true);
            $('#expandTr_' + rowid).show();
			
            var pocount = 0;
            if(arr_resource_iows.length > 0) {
                $.each(arr_resource_iows, function (j, l) {
                    if ((l.ResourceId != o.ResourceId || l.ItemId != o.ItemId)) {
                        return;
                    }
                    var iowrowid = parseInt($('#iow_' + rowid + '_rowid').val()) + 1;
                    $('#iowTable_' + rowid).find('> tbody.main').append(iowtemplate.replace(/__/g, '_' + rowid).replace(/_0/g, '_' + iowrowid));
                    $('#iow_' + rowid + '_rowid').val(iowrowid);
                    pocount++;
                    $('#iow_' + rowid + '_decisionid_' + iowrowid).val(l.DecisionId);
                    $('#iow_' + rowid + '_PONo_' + iowrowid).html(l.PONo).addClass('border-none').prop('disabled', true);
                    $('#iow_' + rowid + '_potransid_' + iowrowid).val(l.POTransId);
                    $('#iow_' + rowid + '_poprojtransid_' + iowrowid).val(l.POProjTransId);
                    $('#iow_' + rowid + '_resourceid_' + iowrowid).val(l.ResourceId);
                    $('#iow_' + rowid + '_PORegsiterId_' + iowrowid).val(l.PORegisterId);
                    $('#iow_' + rowid + '_itemid_' + iowrowid).val(l.ItemId);
                    $('#iow_' + rowid + '_balqty_' + iowrowid).html(l.BalQty).addClass('border-none').prop('disabled', true);
                    $('#iow_' + rowid + '_qty_' + iowrowid).html(l.Qty).addClass('border-none').prop('disabled', true);
                    $('#iow_' + rowid + '_PODate_' + iowrowid).html(l.PODate).addClass('border-none').prop('disabled', true);
                    $('#iow_' + rowid + '_ReqDate_' + iowrowid).html(l.ReqDate).addClass('border-none').prop('disabled', true);
                    $('#iow_' + rowid + '_OrderQty_' + iowrowid).html(l.OrderQty).addClass('border-none').prop('disabled', true);
                    $('#iow_' + rowid + '_MINQty_' + iowrowid).html(l.MINQty).addClass('border-none').prop('disabled', true);
                    $('#iow_' + rowid + '_SupplierMIN_' + iowrowid).html(l.SupplierMIN).addClass('border-none').prop('disabled', true);
                    $('#iow_' + rowid + '_AcceptQty_' + iowrowid).html(l.AcceptQty).addClass('border-none').prop('disabled', true);
                    $('#iow_' + rowid + '_RejectQty_' + iowrowid).html(l.RejectQty).addClass('border-none').prop('disabled', true);
                    $('#iow_' + rowid + '_hiddenSMQty_' + iowrowid).val(l.SupplierMIN);
                    $('#iow_' + rowid + '_hiddenAQty_' + iowrowid).val(l.AcceptQty);
                    $('#iow_' + rowid + '_hiddenRQty_' + iowrowid).val(l.RejectQty);

                    requestrowid = 0;
                    var wRequest = arr_resource_iow_requests.filter(function (obj) {
                        return (obj.ResourceId === o.ResourceId) && (obj.PORegisterId === l.PORegisterId) && (obj.ItemId === o.ItemId && (obj.BalQty > 0 || obj.Qty > 0));
                    });
                    if (wRequest.length > 0) {
                        $('#sec_' + rowid + '_po_' + iowrowid + '_whreqno').html('<thead> <tr> <th class="worktype-activity sub_tbl3">WBS Name</th> <th class="worktype-activity sub_tbl3" style="text-align:center">Bal Qty</th> <th class="worktype-activity sub_tbl3" style="text-align:center">OrderQty</th> <th class="worktype-activity sub_tbl3" style="text-align:center">MINQty</th> <th class="worktype-activity sub_tbl3" style="text-align:center">SupplierMIN</th> <th class="worktype-activity sub_tbl3" style="text-align:center">AcceptQty</th> <th class="worktype-activity sub_tbl3" style="text-align:center">RejectQty</th> <th class="worktype-activity sub_tbl3">&nbsp;</th> </tr> </thead> <tbody class="main"></tbody> <tbody class="total"> </tbody> ');
                        $.each(arr_resource_iow_requests, function (k, r) {
                            if (l.PORegisterId != r.PORegisterId || l.ResourceId != r.ResourceId || l.ItemId != r.ItemId) {
                                return;
                            }
                           // $('.iow_' + rowid + '_requestfields').show();
                            requestrowid = parseInt($('#iow_' + rowid + '_request_' + iowrowid + '_rowid').val()) + 1;
                            $('#wh_' + rowid + '_po_' + iowrowid + '_whreqno').hide();
                            $('#sec_' + rowid + '_po_' + iowrowid + '_whreqno').find('> tbody.main').append(requesttemplate
                                .replace(/__9/g, '_' + requestrowid)
                                .replace(/_0/g, '_' + iowrowid)
                                .replace(/__/g, '_' + rowid)
                                .replace(/_45/g, '_' + requestrowid));

                            $('#iow_' + rowid + '_request_' + iowrowid + '_rowid').val(requestrowid);
                            $('#iow_' + rowid + '_request_' + iowrowid + '_wbsname_' + requestrowid).html(r.WBSName).addClass('border-none').prop('disabled', true);;
                            $('#iow_' + rowid + '_request_' + iowrowid + '_wbsid_' + requestrowid).val(r.WBSId);
                            $('#iow_' + rowid + '_request_' + iowrowid + '_potransid_' + requestrowid).val(r.POTransId);
                            $('#iow_' + rowid + '_request_' + iowrowid + '_poanaltransid_' + requestrowid).val(r.POAnalTransId);
                            $('#iow_' + rowid + '_request_' + iowrowid + '_poregisterid_' + requestrowid).val(r.PORegisterId);
                            $('#iow_' + rowid + '_request_' + iowrowid + '_resourceid_' + requestrowid).val(r.ResourceId);
                            $('#iow_' + rowid + '_request_' + iowrowid + '_itemid_' + requestrowid).val(r.ItemId);
                            $('#iow_' + rowid + '_request_' + iowrowid + '_balqty_' + requestrowid).html(r.BalQty).addClass('border-none').prop('disabled', true);;
                            $('#iow_' + rowid + '_request_' + iowrowid + '_orderqty_' + requestrowid).html(r.OrderQty).addClass('border-none').prop('disabled', true);;
                            $('#iow_' + rowid + '_request_' + iowrowid + '_minqty_' + requestrowid).html(r.MINQty).addClass('border-none').prop('disabled', true);;
                            $('#iow_' + rowid + '_request_' + iowrowid + '_suppliermin_' + requestrowid).html(r.SupplierMIN).addClass('border-none').prop('disabled', true);;
                            $('#iow_' + rowid + '_request_' + iowrowid + '_acceptqty_' + requestrowid).html(r.AcceptQty).addClass('border-none').prop('disabled', true);;
                            $('#iow_' + rowid + '_request_' + iowrowid + '_rejectqty_' + requestrowid).html(r.RejectQty).addClass('border-none').prop('disabled', true);;
                            $('#iow_' + rowid + '_request_' + iowrowid + '_hiddenAqty_' + requestrowid).val(r.HAcceptQty);
                            $('#iow_' + rowid + '_request_' + iowrowid + '_hiddenSMqty_' + requestrowid).val(r.HSMqty);
                            $('#iow_' + rowid + '_request_' + iowrowid + '_hiddenRqty_' + requestrowid).val(r.RejectQty);
                            //start wbs warehouse
                            if (arr_dcwbswarehouse.length != 0) {

                                $('#thr_' + rowid + '_request_' + iowrowid + '_wbs_' + requestrowid + '_whreqno').html('<thead> <tr> <th class="worktype-activity sub_tbl2">Warehouse Name </th> <th class="worktype-activity sub_tbl2">Description </th> <th class="worktype-activity sub_tbl2" style="text-align:center">Qty </th> <th class="" style="display: none;">&nbsp;</th> </tr> </thead> <tbody class="main"></tbody> <tbody class="total"> </tbody>');
                                $.each(arr_dcwbswarehouse, function (u, v) {
                                    if ( r.POAnalTransId == v.POAnalTransId && o.ResourceId == v.ResourceId && o.ItemId == v.ItemId && v.Qty > 0) {
                                        var whrowid = parseInt($('#wh_' + rowid + '_po_' + iowrowid + '_wbs_' + requestrowid + '_wrowid').val()) + 1;
                                        $('#thr_' + rowid + '_request_' + iowrowid + '_wbs_' + requestrowid + '_whreqno').find('> tbody.main').append(warepotemplate
                                            .replace(/_4/g, '_' + whrowid)
                                            .replace(/_0/g, '_' + iowrowid + '_wbs_' + requestrowid)
                                            .replace(/__/g, '_' + rowid));

                                        $('#wh_' + rowid + '_po_' + iowrowid + '_wbs_' + requestrowid + '_wrowid').val(whrowid);
                                        $('#wh_' + rowid + '_po_' + iowrowid + '_wbs_' + requestrowid + '_warehouseid_' + whrowid).val(v.WareHouseId);
                                        $('#wh_' + rowid + '_po_' + iowrowid + '_wbs_' + requestrowid + '_warehousename_' + whrowid).html(v.WareHouseName).addClass('border-none').prop('disabled', true);
                                        $('#wh_' + rowid + '_po_' + iowrowid + '_wbs_' + requestrowid + '_costcentreid_' + whrowid).val(v.CostCentreId);
                                        $('#wh_' + rowid + '_po_' + iowrowid + '_wbs_' + requestrowid + '_desc_' + whrowid).html(v.Description).addClass('border-none').prop('disabled', true);
                                        $('#wh_' + rowid + '_po_' + iowrowid + '_wbs_' + requestrowid + '_qty_' + whrowid).html(v.Qty).addClass('border-none').prop('disabled', true);
                                        $('#wh_' + rowid + '_po_' + iowrowid + '_wbs_' + requestrowid + '_qty_' + whrowid).attr('onchange', 'checkWBSWHQuantity(this)');
                                    }
                                });
                            }
                            // end of wbs-warehouse
                        });
                    } else {
                        //$('.iow_' + rowid + '_requestfields').hide();
                        //start po warehouse
                        if (arr_dcpowarehouse.length != 0) {
                            $('#sec_' + rowid + '_po_' + iowrowid + '_whreqno').html('<thead> <tr> <th class="worktype-activity sub_tbl2">Warehouse Name </th> <th class="worktype-activity sub_tbl2">Description </th> <th class="worktype-activity sub_tbl2" style="text-align:center">Qty </th> <th class="" style="display: none;">&nbsp;</th> </tr> </thead> <tbody class="main"></tbody> <tbody class="total"> </tbody>');
                            $.each(arr_dcpowarehouse, function (u, v) {
                                if (l.POTransId == v.POTransId && o.ResourceId == v.ResourceId && o.ItemId == v.ItemId && v.Qty > 0) {
                                    var whrowid1 = parseInt($('#wh_' + rowid + '_po_' + iowrowid + '_wrowid').val()) + 1;
                                    $('#sec_' + rowid + '_po_' + iowrowid + '_whreqno').find('> tbody.main').append(warepotemplate
                                        .replace(/_4/g, '_' + whrowid1)
                                        .replace(/_0/g, '_' + iowrowid)
                                        .replace(/__/g, '_' + rowid));

                                    $('#wh_' + rowid + '_po_' + iowrowid + '_wrowid').val(whrowid1);
                                    $('#wh_' + rowid + '_po_' + iowrowid + '_warehouseid_' + whrowid1).val(v.WareHouseId);
                                    $('#wh_' + rowid + '_po_' + iowrowid + '_warehousename_' + whrowid1).html(v.WareHouseName).addClass('border-none').prop('disabled', true);
                                    $('#wh_' + rowid + '_po_' + iowrowid + '_costcentreid_' + whrowid1).val(v.CostCentreId);
                                    $('#wh_' + rowid + '_po_' + iowrowid + '_desc_' + whrowid1).html(v.Description).addClass('border-none').prop('disabled', true);
                                    $('#wh_' + rowid + '_po_' + iowrowid + '_qty_' + whrowid1).html(v.Qty).addClass('border-none').prop('disabled', true);
                                    $('#wh_' + rowid + '_po_' + iowrowid + '_qty_' + whrowid1).attr('onchange', 'checkPOWHQuantity(this)');
                                }
                            });
                        } else {
                            $('.all').hide();
                        }
                        //end of po-warehouse
                    }
                    if(requestrowid <= 0){
                    //  $('#all').closest("td").find(".subDiv").hide();
                        //$('.subDiv').attr('style','display: none');
                    }
                });
            }
        });
    }
    $('.container-fluid').on('click','.mainTr',function(e){
        e.preventDefault();
        if(!$(this).closest("tr").next(".subTr").is(":visible")){
            $(this).closest("tr").next(".subTr").show();
            $(this).closest("tr").next(".subTr").find(".subDiv").slideDown("slow");
            $(this).find("i").addClass("tform");
        }
        else{
            $(this).closest("tr").next(".subTr").find(".subDiv").slideUp("slow");
            $(this).closest("tr").next(".subTr").slideUp("slow");
            $(this).find("i").removeClass("tform");
        }
    });
	validation();
	nextAccordian(1);
});
function nextAccordian(id) {
	$('#panelheading-1').trigger('click');
}
function validation(){

    var checkAgn = "<?php echo (isset($AgencyId)) ? $AgencyId : '';?>";
    var checkmd = "<?php echo (isset($TestingMethod)) ? $TestingMethod : '';?>";


    if($('#Narration').val() == '' &&  $('#WithLoad').val() == 0 || '' && $('#WithOutLoad').val()==0 || '' && checkAgn == 0 && checkmd == '' && $('#demo-files').attr('file-counter')== 0){
        $("#other").hide();
    } else {
        if ($('#Narration').val() == '') {
            $('#nar').hide();
            $('#narrationTabLink').hide();
        }
        if ( parseInt($('#WithLoad').val()) == 0  && parseInt($('#WithOutLoad').val()) == 0 ) {
            $('#sample1').hide();
            $('#weightTabLink').hide();

        }
        if ( checkAgn ==  0  && checkmd == '' ) {
            $('#sample2').hide();
            $('#quantityTabLink').hide();

        }
        if($('#demo-files').attr('file-counter')== 0){
            $('#sample3').hide();
            $('#vehicleTabLink').hide();
        }
    }

//    if($('#Narration').val() != '' && $('#WithLoad').val() != 0 && $('#WithOutLoad').val() != 0 && checkAgn != 0 && checkmd != '' && $('#demo-files').attr('file-counter') != 0 ){
//        console.log("123");
//        $('#nar').addClass('active').siblings('div').removeClass('active');
//    }
//    if($('#Narration').val() == '' && $('#WithLoad').val() != 0 && $('#WithOutLoad').val() != 0 && checkAgn != 0 && checkmd != '' && $('#demo-files').attr('file-counter') != 0 ){
//
//        $('#sample1').addClass('active').siblings('div').removeClass('active');
//    }
//    if($('#Narration').val() == '' && $('#WithLoad').val() == 0 && $('#WithOutLoad').val() == 0 && checkAgn != 0 && checkmd != '' && $('#demo-files').attr('file-counter') != 0 ){
//
//        $('#sample2').addClass('active').siblings('div').removeClass('active');
//    }
//    if($('#Narration').val() == '' && $('#WithLoad').val() == 0 && $('#WithOutLoad').val() == 0 && checkAgn == 0 && checkmd == '' && $('#demo-files').attr('file-counter') != 0 ){
//
//        $('#sample3').addClass('active').siblings('div').removeClass('active');
//    }

	if($('#VehicleName').val()=='' || 0){
		$('#trip').hide();
	}else{
		$('#trip').show();
	}
}
var CostCentreName= <?php echo json_encode ($CostCentreName);?>;
var VendorName= <?php echo json_encode ($VendorName);?>;
var DCDate= <?php echo json_encode ($DCDate);?>;
var CCDCNo= <?php echo json_encode ($CCDCNo);?>;
var CDCNo= <?php echo json_encode ($CDCNo);?>;
var SiteDCDate= <?php echo json_encode ($SiteDCDate);?>;
var GatePassNo= <?php echo json_encode ($GatePassNo);?>;
var RefNo= <?php echo json_encode ($RefNo);?>;
var DCNo= <?php echo json_encode ($DCNo);?>;
var SiteDCNo= <?php echo json_encode ($SiteDCNo);?>;
var Approve= <?php echo json_encode ($Approve);?>;

if(CostCentreName == ''|| CostCentreName == null) {
	$('#CostCentreName').hide();
} 
if(VendorName == ''|| VendorName == null){
	$('#VendorName').hide();
} 
if(DCDate == ''|| DCDate == null){
	$('#DCDate').hide();
} 
if(CCDCNo == ''|| CCDCNo == null){
	$('#CCDCNo').hide();
} 
if(CDCNo == ''|| CDCNo == null){
	$('#CDCNo').hide();
} 
if(SiteDCDate == ''|| SiteDCDate == null){
	$('#SiteDCDate').hide();
} 
if(GatePassNo == ''|| GatePassNo == null){
	$('#GatePassNo').hide();
} 
if(RefNo == ''|| RefNo == null){
	$('#RefNo').hide();
} 
if(DCNo == ''|| DCNo == null){
	$('#DCNo').hide();
} 
if(SiteDCNo == ''|| SiteDCNo == null){
	$('#SiteDCNo').hide();
} 
if(Approve == ''|| Approve == null){
	$('#Approve').hide();
}
</script>