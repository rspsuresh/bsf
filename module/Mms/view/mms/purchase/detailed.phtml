<link rel="stylesheet" href="<?php echo $this->basePath() . '/css/mms.css'; ?>" />

<style type="text/css">
    .mar_20{margin-top:20px!important;}
    .jqx-widget-content {z-index:999 !important;}
    .highlight{background : #bfefd6 !important;}
    .highlight1{background-color: #efe7ad;}
    .highlight2{background-color: #efd2b9;}
    .highlight3{background-color:  #e6bfcb;}
    .table-responsive table.table tr td { padding: 10px !important;}
	.blubg{background : #B0C3EB !important;}
	.card{margin-top:0% !important; margin-bottom:0px !important;}
	.sub_tab {background-color: #e7e9ec;border: 1px solid #ddd;float: left;margin-top: 0px;padding:8px;width:100%;}
	.btnPrev:disabled {background-color:#ffffff;}
	.top-10 {padding-top: 5px !important;}
	.subDiv {background-color: #fff!important;border: 0px solid #ddd!important;}
</style>

<div class="content_wrapper">
<div class="container-fluid">
<div class="row">
<div class="col-lg-12 mar_20">
    <h1 style="margin-left:10px;">Purchase Order Details
        <!--					--><?php
        //					if($Approve != "Yes")
        //					{
        //					?>
        <!--					<a href="--><?php //echo $this->basePath();?><!--/mms/purchase/order-entry/--><?php //echo $regId; ?><!--" data-toggle="tooltip" data-placement="right" title="Edit Purchase Order"><span class="edit_symbols"><i class="fa fa-pencil"></i></span></a>-->
        <!--					<a href="--><?php //echo $this->basePath();?><!--/mms/purchase/deletePO/--><?php //echo $regId; ?><!--"  onclick="return confirm('Are you sure you want to delete?');" data-toggle="tooltip" data-placement="right" title="Delete Purchase Order"><span class="edit_symbols"><i class="fa fa-trash-o reg-icon"></i></span></a>-->
        <!--					--><?php
        //					}
        //					?>
    </h1>
</div>
<!--			<div class="tagcrd">-->
<!--				<ul>-->
<!--					<li class="mnimumwidthres90">-->
<!--						<div class="detcardhdng pnl-overflow mmsbrdrclr1">-->
<!--							<div class="icon-bg"><i class="fa fa-book i-text-111"></i></div>-->
<!--							<h2 class="comtex mmsbrdrclrhed1 commargin_bottom_5 comnelips" style="font-weight:600 !important;">Project Name</h2>-->
<!--							<h5 class="tetmuted tet-clr11 comnelips">--><?php //echo $CostCentreName; ?><!--</h5>-->
<!--						</div>-->
<!--					</li>-->
<!--					<li class="mnimumwidthres90">-->
<!--						<div class="detcardhdng pnl-overflow mmsbrdrclr2">-->
<!--							<div class="icon-bg"><i class="fa fa-book i-text-111"></i></div>-->
<!--							<h2 class="comtex mmsbrdrclrhed2 commargin_bottom_5 comnelips" style="font-weight:600 !important;">Vendor Name</h2>-->
<!--							<h5 class="tetmuted tet-clr11 comnelips">--><?php //echo $VendorName; ?><!--</h5>-->
<!--						</div>-->
<!--					</li>-->
<!--					<li class="mnimumwidthres90">-->
<!--						<div class="detcardhdng pnl-overflow mmsbrdrclr3">-->
<!--							<div class="icon-bg"><i class="fa fa-book  i-text-111"></i></div>-->
<!--							<h2 class="comtex mmsbrdrclrhed3 commargin_bottom_5 comnelips" style="font-weight:600 !important;">PO No</h2>-->
<!--							<h5 class="tetmuted tet-clr11 comnelips">--><?php //echo $PONo; ?><!--</h5>-->
<!--						</div>-->
<!--					</li>-->
<!--					<li class="mnimumwidthres90">-->
<!--						<div class="detcardhdng pnl-overflow mmsbrdrclr4">-->
<!--							<div class="icon-bg"><i class="fa fa-book i-text-111"></i></div>-->
<!--							<h2 class="comtex mmsbrdrclrhed4 commargin_bottom_5 comnelips" style="font-weight:600 !important;">Po Date</h2>-->
<!--							<h5 class="tetmuted tet-clr11 comnelips">--><?php //echo $PODate; ?><!--</h5>-->
<!--						</div>-->
<!--					</li>-->
<!--					<li class="mnimumwidthres90">-->
<!--						<div class="detcardhdng pnl-overflow mmsbrdrclr1">-->
<!--							<div class="icon-bg"><i class="fa fa-book i-text-111"></i></div>-->
<!--							<h2 class="comtex mmsbrdrclrhed1 commargin_bottom_5 comnelips" style="font-weight:600 !important;">Ref No</h2>-->
<!--							<h5 class="tetmuted tet-clr11 comnelips">--><?php //echo (isset($RefNo) && trim($RefNo)!="") ? $RefNo : '----';?><!--</h5>-->
<!---->
<!--						</div>-->
<!--					</li>-->
<!--					<li class="mnimumwidthres90">-->
<!--						<div class="detcardhdng pnl-overflow mmsbrdrclr2">-->
<!--							<div class="icon-bg"><i class="fa fa-book i-text-111"></i></div>-->
<!--							<h2 class="comtex mmsbrdrclrhed2 commargin_bottom_5 comnelips" style="font-weight:600 !important;">Approve</h2>-->
<!--							<h5 class="tetmuted tet-clr11 comnelips">--><?php //echo $Approve; ?><!--</h5>-->
<!--						</div>-->
<!--					</li>-->
<!--				</ul>-->
<!--			</div>-->


<div class="col-lg-12 top_ct">
    <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 clear">
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres" id="CostCentreName">
			<div class="cbpln cbpln-default bx-wte cbpln-status cbpln-status3">
				<div class="padding-none">
					<div class="row">
						<div class="col-xs-3">
							<i class="fa fa-bandcamp fa-5x cbpln-status-icon"></i>
						</div>
						<div class="col-xs-9 text-right">
							<div class="cbhuge comnelips fntwt600"><?php echo $CostCentreName; ?></div>
							<div class="cbhuge comnelips">Project Name</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres" id="VendorName">
			<div class="cbpln cbpln-default bx-wte cbpln-status cbpln-status4">
				<div class="padding-none">
					<div class="row">
						<div class="col-xs-3">
							<i class="fa fa-certificate fa-5x cbpln-status-icon"></i>
						</div>
						<div class="col-xs-9 text-right">
							<div class="cbhuge comnelips fntwt600"><?php echo $VendorName; ?></div>
							<div class="cbhuge comnelips">Vendor Name</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres" id="PONo">
			<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status1">
				<div class="padding-none">
					<div class="row">
						<div class="col-xs-3">
							<i class="fa fa-retweet fa-5x cbpln-status-icon"></i>
						</div>
						<div class="col-xs-9 text-right">
							<div class="cbhuge comnelips fntwt600"><?php echo $PONo; ?></div>
							<div class="cbhuge comnelips">PO No</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres" id="CCPONo">
			<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status1">
				<div class="padding-none">
					<div class="row">
						<div class="col-xs-3">
							<i class="fa fa-retweet fa-5x cbpln-status-icon"></i>
						</div>
						<div class="col-xs-9 text-right">
							<div class="cbhuge comnelips fntwt600"><?php echo $CCPONo; ?></div>
							<div class="cbhuge comnelips">CCPO No</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres" id="CPONo">
			<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status1">
				<div class="padding-none">
					<div class="row">
						<div class="col-xs-3">
							<i class="fa fa-retweet fa-5x cbpln-status-icon"></i>
						</div>
						<div class="col-xs-9 text-right">
							<div class="cbhuge comnelips fntwt600"><?php echo $CPONo; ?></div>
							<div class="cbhuge comnelips">CPO No</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres" id="PODate">
			<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status2">
				<div class="padding-none">
					<div class="row">
						<div class="col-xs-3">
							<i class="fa fa-calendar fa-5x cbpln-status-icon"></i>
						</div>
						<div class="col-xs-9 text-right">
							<div class="cbhuge comnelips fntwt600"><?php echo $PODate; ?></div>
							<div class="cbhuge comnelips">PO Date</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres " id="ReqDate">
			<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status5">
				<div class="padding-none">
					<div class="row">
						<div class="col-xs-3">
							<i class="fa fa-registered fa-5x cbpln-status-icon"></i>
						</div>
						<div class="col-xs-9 text-right">
							<div class="cbhuge comnelips fntwt600"><?php echo $ReqDate; ?></div>
							<div class="cbhuge comnelips">Reqd. Date</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres " id="Currency">
			<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status6">
				<div class="padding-none">
					<div class="row">
						<div class="col-xs-3">
							<i class="fa fa-money fa-5x cbpln-status-icon"></i>
						</div>
						<div class="col-xs-9 text-right">
							<div class="cbhuge comnelips fntwt600"><?php echo $Currency; ?></div>
							<div class="cbhuge comnelips">Currency</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres " id="RefNo">
			<div class="cbpln cbpln-default bx-wte cbpln-status cbpln-status7">
				<div class="padding-none">
					<div class="row">
						<div class="col-xs-3">
							<i class="fa fa-cube fa-5x cbpln-status-icon"></i>
						</div>
						<div class="col-xs-9 text-right">
							<div class="cbhuge comnelips fntwt600"><?php echo $RefNo; ?></div>
							<div class="cbhuge comnelips">Req. No</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres " id="Distributor">
			<div class="cbpln cbpln-default bx-wte cbpln-status cbpln-status8">
				<div class="padding-none">
					<div class="row">
						<div class="col-xs-2">
							<i class="fa fa-share fa-5x cbpln-status-icon"></i>
						</div>
						<div class="col-xs-10 text-right">
							<div class="cbhuge comnelips fntwt600"><?php echo $Distributor; ?></div>
							<div class="cbhuge comnelips">Distributor</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres " id="PurchaseType">
			<div class="cbpln cbpln-default bx-wte cbpln-status cbpln-status3">
				<div class="padding-none">
					<div class="row">
						<div class="col-xs-2">
							<i class="fa fa-star-half-o fa-5x cbpln-status-icon"></i>
						</div>
						<div class="col-xs-10 text-right">
							<div class="cbhuge comnelips fntwt600"><?php echo $PurchaseType; ?></div>
							<div class="cbhuge comnelips">Purchase Type</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres " id="AccountType">
			<div class="cbpln cbpln-default bx-wte cbpln-status cbpln-status4">
				<div class="padding-none">
					<div class="row">
						<div class="col-xs-2">
							<i class="fa fa-ticket fa-5x cbpln-status-icon"></i>
						</div>
						<div class="col-xs-10 text-right">
							<div class="cbhuge comnelips fntwt600"><?php echo $AccountType; ?></div>
							<div class="cbhuge comnelips">Account Type</div>
						</div>
					</div>
				</div>
			</div>
		</div>
    </div>
</div>

<div class="clearfix"></div>
<div class="col-lg-12 clear top-20">
<div id="accordion" class="panel-group">
<!-----Bill of Quantities----->
<div class="panel panel-info">
    <div data-target="#collapseOne" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-1">
        <h4 class="panel-title accordion-toggle defa_panels">Purchase Details</h4>
    </div>
    <div class="panel-collapse collapse" id="collapseOne" style="height: 0px;">
        <div class="panel-body bgcolr">
            <div class="col-lg-12">
                <div class="table-responsive">
                    <table class="table table-bordered tableView dataTable no-footer table-striped" style=" margin-bottom:0px;" id="workorderTable" >
                        <thead>
                        <tr>
                            <th tabindex="0" aria-controls="sequentialView" rowspan="1" colspan="1"  class="blubg">Description</th>
                            <th tabindex="1" aria-controls="sequentialView" rowspan="1" colspan="1"  class="blubg">Unit</th>
                            <th tabindex="2" aria-controls="sequentialView" rowspan="1" colspan="1" style="text-align:center" class="blubg">Qty</th>
                            <th tabindex="3" aria-controls="sequentialView" rowspan="1" colspan="1" style="text-align:center" class="blubg">Rate</th>
                            <th tabindex="4" aria-controls="sequentialView" rowspan="1" colspan="1" style="text-align:center" class="blubg">QRate</th>
                            <th tabindex="5" aria-controls="sequentialView" rowspan="1" colspan="1" style="text-align:center" class="blubg">BaseAmount</th>
                            <th tabindex="6" aria-controls="sequentialView" rowspan="1" colspan="1" style="text-align:center" class="blubg">Amount</th>
                            <th class="blubg">&nbsp;</th>
                        </tr>
                        </thead>
                        <tbody class="main seq-class"></tbody>
                        <tbody class="total">
                        <tr>
                            <td colspan="5">&nbsp;</td>
                            <td align="right" class="t_amt">Base Amount</td>
                            <td width="10%" >
                                <input class="parent_text border-none" style="text-align:right;" type="text" name="basetotal" id="basetotal" value="<?php echo (isset($BaseTotal)) ? $BaseTotal : 0; ?> " readonly/>
                            </td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td colspan="5">&nbsp;</td>
                            <td align="right" class="t_amt">Amount</td>
                            <td width="10%" >
                                <input class="parent_text border-none" style="text-align:right;" type="text" name="total" id="total" value="<?php echo (isset($Total)) ? $Total : 0; ?> " readonly/>
                            </td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td colspan="5">&nbsp;</td>
                            <td align="right" class="t_amt">Net Amount</td>
                            <td width="10%" >
                                <input class="parent_text border-none" style="text-align:right;" type="text" name="nettotal" id="nettotal" value="<?php echo (isset($NetTotal)) ? $NetTotal : 0; ?> " readonly/>
                            </td>
                            <td>&nbsp;</td>
                        </tr>
                        </tbody>
                    </table>
                    <input type="hidden" name="rowid" id="rowid" value="0"/>
                </div>
                <div class="cont_bt col-lg-5 col-lg-offset-7 col-md-9 col-md-offset-3 col-sm-7 col-sm-offset-5 col-xs-7 col-xs-offset-5 top-5">
                    <ul>
                        <li><a href="javascript:void(0);" onclick="checkTerms();">Continue &nbsp;<i class="fa fa-chevron-circle-right"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!-------/Bill of Quantities end/------->
<!-------Terms and Condition--------->
<!-- Terms remove -->
<div class="panel panel-info uniTrms" style="display: none;">
    <div data-target="#collapseTwo" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-2">
        <h4 class="panel-title accordion-toggle defa_panels">Terms And Conditions</h4>
    </div>
    <div class="panel-collapse collapse" id="collapseTwo" style="height: 0px;">
        <div class="panel-body bgcolr">
            <div class="col-lg-12">
                <div class="col-lg-3" style="margin-top:10px;">
                    <ul>
                        <li class="lbl_tp lbl_btm">
                            <label> Value From </label>
                            <span class="mgic"><?php echo (isset($valuefrom)) ? $valuefrom : '';?></span>
                        </li>
                    </ul>

                </div>
            </div>
            <div class="col-lg-12">
                <div class="table-responsive top-10 bot-10">
                    <table class="table table-bordered tableView dataTable no-footer" style=" margin-bottom:0px;" id="termsTable" >
                        <thead>
                        <tr>
                            <th class="blubg">Sl.No</th>
                            <th class="blubg">Terms</th>
                            <th class="blubg">Per</th>
                            <th class="blubg">Value</th>
                            <th class="blubg">Period</th>
                            <th class="blubg">Date</th>
                            <th class="blubg">Description</th>
                        </tr>
                        </thead>
                        <tbody class="main"></tbody>
                    </table>
                    <input type="hidden" name="trowid" id="trowid" value="0"/>
                </div>
            </div>
        </div>
    </div>
</div>
<!-------Others Details-------->
<div class="panel panel-info">
    <div data-target="#collapseThree" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-3">
        <h4 class="panel-title accordion-toggle defa_panels">Other Details</h4>
    </div>
    <div class="panel-collapse collapse" id="collapseThree" style="height: 0px;">
        <div class="panel-body bgcolr" style="padding:5px !important;">
            <div class="clearfix"></div>
            <div class="col-lg-12">
                <div class="card">
                    <ul class="nav nav-tabs">
                        <li class="active"><a href="#nar" id="narrationTabLink" onclick="showotherstabs('narration')" aria-controls="naration" role="tab" data-toggle="tab">Narration</a></li>
                        <li class=""><a href="#branchdetails" id="branchTabLink" onclick="showotherstabs('branch')" aria-controls="branchdetails" role="tab" data-toggle="tab">Branch Details</a></li>
                        <li class=""><a href="#deliverydetails" id="deliveryTabLink" onclick="showotherstabs('delivery')" aria-controls="deliverydetails" role="tab" data-toggle="tab">Delivery Details</a></li>
                        <li class=""><a href="#cccontactdetails" id="cccontactTabLink" onclick="showotherstabs('cccontact')" aria-controls="cccontact" role="tab" data-toggle="tab">CostCentre Contact Info</a></li>
                        <li class=""><a href="#ccontactdetails" id="ccontactTabLink" onclick="showotherstabs('ccontact')" aria-controls="ccontact" role="tab" data-toggle="tab">Company Contact Info</a></li>
                    </ul>
                    <div class="tab-content" id="narration">
                        <div class="tab-pane active" id="nar">
                            <p>
                            <div class="col-lg-12 sub_tab">
                                <?php
                                if(isset($Narration)){
                                    ?>
                                    <textarea class="exp-tex btnPrev" name="Narration" id="Narration" disabled><?php echo (isset($Narration)) ? $Narration : '';?></textarea>
                                <?php }else{ ?>
                                    <textarea class="exp-tex btnPrev" name="Narration" id="Narration" placeholder="" disabled></textarea>
                                <?php } ?>
                            </div>
                            </p>
                        </div>
                    </div>
                    <div class="tab-pane" id="branchdetails"  style="display: none;">
                        <div class="col-lg-12 top-30">
                            <div class="col-lg-6">
                                <input type="text" name="branchname" id="branchname" label="Branch Name" class="lbl_move mtrl_txt btnPrev" placeholder="" value="<?php echo (isset($branchName)) ? $branchName : ''; ?>" disabled />
                            </div>
                            <div class="col-lg-6">
                                <input type="text" name="cperson" id="cperson" label="Contact Person" class="lbl_move mtrl_txt btnPrev" placeholder="" value="<?php echo (isset($cPerson)) ? $cPerson : ''; ?>" disabled />
                            </div>
                            <input type="hidden" name="" id="" value="0"/>
                        </div>
                    </div>
                    <!----------Delivery Details ----->
                    <div class="tab-pane" id="deliverydetails"  style="display: none;">
                        <div class="col-lg-12 top-30 bot-20">
                            <div class="col-lg-4">
                                <input type="text" name="whname" id="whname" label="WareHouse" class="lbl_move mtrl_txt btnPrev" placeholder="" value="<?php echo (isset($whname)) ? $whname : ''; ?>" disabled />
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="col-lg-6">
                                <label class="pop_label">Delivery Address</label>
                                <textarea class="exp-tex btnPrev " name="deladdress" id="deladdress" placeholder="" disabled> <?php echo (isset($deladd)) ? $deladd : '';?> </textarea>
                            </div>
                            <div class="col-lg-6">
                                <label class="pop_label">Warehouse Address</label>
                                <textarea class="exp-tex btnPrev" readonly="true" name="whaddress" id="whaddress" placeholder="" disabled> <?php echo (isset($whadd)) ? $whadd : '';?> </textarea>
                            </div>
                            <input type="hidden" name="" id="" value="0"/>
                        </div>
                    </div>
                    <!----------CostCentre Contact Details ----->
                    <div class="tab-pane" id="cccontact"  style="display: none;">
                        <div class="col-lg-12 top-30">
                            <div class="col-lg-3">
                                <div class="polymer-form">
                                    <input class="form-control lbl_move" type="text" name="cccontact" id="cccontact" label="Contact Person" value="<?php echo (isset($cccontact)) ? $cccontact : '';?>" disabled/>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="polymer-form">
                                    <input class="form-control lbl_move" type="text" name="ccphone" id="ccphone" label="Phone No" value="<?php echo (isset($ccphone)) ? $ccphone : '';?>" disabled/>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="polymer-form">
                                    <input class="form-control lbl_move" type="text" name="ccmobile" id="ccmobile" label="Mobile" value="<?php echo (isset($ccmobile)) ? $ccmobile : '';?>" disabled />
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="polymer-form">
                                    <input class="form-control lbl_move" type="email"  name="ccemail" id="ccemail" label="Email" value="<?php echo (isset($ccemail)) ? $ccemail : '';?>" pattern="[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{1,63}$" disabled/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!----------Company Contact Details ----->
                    <div class="tab-pane" id="ccontact"  style="display: none;">
                        <div class="col-lg-12 top-30">
                            <div class="col-lg-3">
                                <div class="polymer-form">
                                    <input class="form-control lbl_move" type="text" name="ccontact" id="ccontact" label="Contact Person" value="<?php echo (isset($ccontact)) ? $ccontact : '';?>" disabled/>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="polymer-form">
                                    <input class="form-control lbl_move" type="text" name="cphone" id="cphone" label="Phone" value="<?php echo (isset($cphone)) ? $cphone : '';?>" disabled/>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="polymer-form">
                                    <input class="form-control lbl_move" type="text" name="cmobile" id="cmobile" label="Mobile" value="<?php echo (isset($cmobile)) ? $cmobile : '';?>" disabled/>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="polymer-form">
                                    <input class="form-control lbl_move" type="text" name="cemail" id="cemail" label="Email" value="<?php echo (isset($cemail)) ? $cemail : '';?>" pattern="[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{1,63}$" disabled/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div>

<div class="col-lg-12 clear">
    <div class="table-responsive">
        <div id="dataTable"></div>
    </div>
</div>
</div>
<div id="jqxgrid"></div>
</div>
</div>

<div class="col-lg-12 savebtn_area">
    <ul>
        <li class="dropdown save_btn float_r">
            <a href="<?php echo $this->basePath("/mms/purchase/display-register");?>" class="ripple">Close</a>
        </li>
    </ul>
</div>
<script id="resource-template"  type="text/template" class="hide">
    <?php
    $displayscreen="display:none";
    $displaymaintr="parent_text mainTr";
    if($gridtype==1)
    {
        $displayscreen="display:none";
        $displaymaintr="parent_text mainTr";
    }  ?>
    <tr class="count-tr">
        <td width="25%" name="desc__" id="desc__">
            <input type="hidden" name="resourceid__" id="resourceid__"/>
        </td>
        <td width="10%" name="unitname__" id="unitname__">
            <input type="hidden" name="unitid__" id="unitid__"/>
            <input type="hidden" name="itemid__" id="itemid__"/>
        </td>
        <td width="10%"  name="qty__" id="qty__" style="text-align:right;">
            <input type="hidden" name="hiddenqty__" id="hiddenqty__" >
            <input type="hidden" name="rfrom__" id="rfrom__" >
        </td>
        <td width="10%" name="rate__" id="rate__" style="text-align:right;">

        </td>
        <td width="10%"  name="qrate__" id="qrate__" style="text-align:right;" >

        </td>
        <td width="15%"  name="baseamount__" style="text-align:right;" id="baseamount__">

        </td>
        <td width="15%" name="amount__" style="text-align:right;" id="amount__">

        </td>

        <td width="2%"  align="center" class="action_btns_td" style="border:none !important;">
            <ul class="action_btns">
                <li> <a href="#" class="mainTr" id="expandTr__" style="display:none;cursor:pointer;"><i class="fa fa-chevron-circle-down" data-toggle="tooltip" data-placement="left" data-original-title="Add lines" ></i></a> </li>
            </ul>
        </td>

    </tr>
    <tr style="<?php echo $displayscreen; ?>;" class="subTr count-tr">
        <td colspan="9" style="padding:0px !important; ">
            <div class="subDiv" style="<?php echo $displayscreen; ?>;">
                <div class="col-lg-12 col-lg-offset-0 rdbt" style="">
                    <div class="card">
                        <ul class="nav nav-tabs">
                            <li class="active"><a class="ripple has-ripple" id="decisionTabLink__" onclick="showtabs('decision',this.id,event)" style="position: relative; overflow: hidden;cursor:pointer;"> Decision<span class="ripple-wrapper animated" style="width: 89px; height: 89px; top: -41.5px; left: 22.9531px;"></span></a></li>
                            <li class=""><a class="ripple has-ripple" id="wbsTabLink__" onclick="showtabs('wbs',this.id,event)" style="position: relative; overflow: hidden;cursor:pointer;"> Wbs<span class="ripple-wrapper animated" style="width: 89px; height: 89px; top: -41.5px; left: 22.9531px;"></span></a></li>
                            <li class=""><a class="ripple has-ripple" id="qualifierTabLink__" onclick="showtabs('qualifier',this.id,event)" style="position: relative; overflow: hidden;cursor:pointer;"> Qualifier<span class="ripple-wrapper animated" style="width: 105px; height: 105px; top: -29.5px; left: 16.9531px;"></span></a></li>
                            <li class=""><a class="ripple has-ripple" id="reqspeTabLink__" onclick="showtabs('reqspe',this.id,event)" style="position: relative; overflow: hidden;cursor:pointer;"> Resource Specification<span class="ripple-wrapper animated" style="width: 105px; height: 105px; top: -29.5px; left: 16.9531px;"></span></a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-12">
                    <div class="tab-content">
                        <div class="table-responsive topsp sub_tab">
                            <table class="table table-bordered tableView dataTable no-footer" style="margin-bottom:0px;" bgcolor="#00FF00" id="decisionTable__">
                                <thead>
                                <tr>
                                    <th class="worktype-activity  highlight">Decision No</th>
                                    <th class="worktype-activity  highlight" style="text-align:center">BalQty</th>
                                    <th class="highlight" style="text-align:center">Qty</th>
                                    <th class="iow___requestfields  highlight" style="display: none;">&nbsp;</th>
                                </tr>
                                </thead>
                                <tbody class="main"></tbody>
                                <tbody class="total">
                                </tbody>
                                <input type="hidden" name="iow___rowid" id="iow___rowid" value="0"/>
                            </table>
                            <table class="table table-bordered tableView dataTable no-footer" style="margin-bottom:0px;<?php echo $displayscreen; ?>;" id="wbsTable__">
                                <thead>
                                <tr>
                                    <th class="worktype-activity sub_tbl2">WBS Name</th>
                                    <th class="sub_tbl2">Qty</th>
                                    <th class="wbs___requestfields" style="display: none;">&nbsp;</th>
                                </tr>
                                </thead>
                                <tbody class="main"></tbody>
                                <tbody class="total">
                                </tbody>
                                <input type="hidden" name="wbs___rowid" id="wbs___rowid" value="0"/>
                            </table>
                            <table class="table" style="margin-bottom:0px; display: none;" id="qualifierTable__" onchange="CalculateRate(this.id)">
                            </table>
                            <div class="tab-content">
                                <div class="table-responsive topsp">
                                    <table class="table" style="margin-bottom:0px; display: none;" id="reqspeTable__">
                                        <tbody class="main"></tbody>
                                        <tbody class="total">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 col-xs-12 mar_10">
                    <span class="est1 mr_lt" id="estqty__" ></span>
                    <span class="est2 mr_lt" id="estrate__" ></span>
                    <span class="est3 mr_lt" id="avaqty__" ></span>
                    <span class="est3 mr_lt" id="balpoqty__" hidden="true" ></span>
                    <span class="est3 mr_lt" id="totpurchase__" hidden="true" ></span>
                </div>
            </div>
        </td>
    </tr>
</script>
<script id="iow-template"  type="text/template" class="hide">
    <tr class="dont-hide">
        <td width="20%" class="worktype-activity" name="iow___decisionno_0" id="iow___decisionno_0">
            <input type="hidden" name="iow___decisionid_0" id="iow___decisionid_0"/>
            <input type="hidden" name="iow___dectransid_0" id="iow___dectransid_0"/>
            <input type="hidden" name="iow___reqtransid_0" id="iow___reqtransid_0"/>
            <input type="hidden" name="iow___resourceid_0" id="iow___resourceid_0"/>
            <input type="hidden" name="iow___itemid_0" id="iow___itemid_0"/>
        </td>
        <td width="30%"  style="text-align:center;" name="iow___balqty_0" id="iow___balqty_0" >
        </td>
        <td width="30%"  name="iow___qty_0" id="iow___qty_0" style="text-align:center;">
            <input type="hidden" name="iow__hiddenqty_0" id="iow__hiddenqty_0"/>
        </td>
        <td width="10%" align="center" class="action_btns_td iow___requestfields" style="display: none;">
            <ul class="action_btns">
                <li><a href="#" class="mainTr"> <i class="fa fa-chevron-circle-down" data-toggle="tooltip" data-placement="left" data-original-title="Add lines" ></i></a> </li>
            </ul>
        </td>
    </tr>
    <tr style="<?php echo $displayscreen; ?>;" class="subTr dont-hide">
        <td colspan="9" style="padding:0px !important;">
            <div class="subDiv scrl" style="<?php echo $displayscreen; ?>;" id="decWbs">
                <div class="col-lg-12 col-lg-offset-0 rdbt" style="margin-top:5px;">
                    <div class="table-responsive topsp">
                        <table class="table table-bordered tableView dataTable no-footer" style="margin-bottom:0px;" id="iow___request_0_reqno">
                            <thead>
                            <tr>
                                <th class="sub_tbl2">WBS Name</th>
                                <th class="sub_tbl2">Bal Qty</th>
                                <th class="sub_tbl2">Qty</th>
                            </tr>
                            </thead>
                            <tbody class="main"></tbody>
                            <tbody class="total">
                            </tbody>
                            <input type="hidden" name="iow___request_0_rowid" id="iow___request_0_rowid" value="0"/>
                        </table>
                    </div>
                </div>
            </div>
        </td>
    </tr>
</script>
<script id="request-template"  type="text/template" class="hide">
    <tr class="dont-hide">
        <td width="50%" class="highlight2" name="iow___request_0_wbsname__9" id="iow___request_0_wbsname__9" >
            <input type="hidden" name="iow___request_0_wbsid__9" id="iow___request_0_wbsid__9"/>
            <input type="hidden" name="iow___request_0_dectransid__9" id="iow___request_0_dectransid__9"/>
            <input type="hidden" name="iow___request_0_decatransid__9" id="iow___request_0_decatransid__9"/>
            <input type="hidden" name="iow___request_0_reqtransid__9" id="iow___request_0_reqtransid__9"/>
            <input type="hidden" name="iow___request_0_reqahtransid__9" id="iow___request_0_reqahtransid__9"/>
            <input type="hidden" name="iow___request_0_resourceid__9" id="iow___request_0_resourceid__9"/>
            <input type="hidden" name="iow___request_0_itemid__9" id="iow___request_0_itemid__9"/>
        </td>
        <td width="24%" class="highlight2" style="text-align:right;" name="iow___request_0_balqty__9" id="iow___request_0_balqty__9" ></td>
        <td width="24%" class="highlight2" name="iow___request_0_qty__9" id="iow___request_0_qty__9" style="text-align:right;">
            <input type="hidden" name="iow___request_0_hiddenqty__9" id="iow___request_0_hiddenqty__9"/>
            <span class="nos" id="iow___request_0_estwbsqty__9" hidden="true"></span>
            <span class="nos" id="iow___request_0_avawbsqty__9" hidden="true"></span>
            <span class="nos" id="iow___request_0_excesswbsqty__9" hidden="true"></span>
            <span class="nos" id="iow___request_0_balpowbsqty__9" hidden="true"></span>
            <span class="nos" id="iow___request_0_totpurchasewbsqty__9" hidden="true"></span>
        </td>
    </tr>
</script>
<script id="resspec-template" type="text/template">
    <tr class="dont-hide">
        <td width="100%">
            <textarea class="exp-tex btnPrev"  name="resspec__" id="resspec__" class="parent_txts newRow"  value=""/>
        </td>
    </tr>
</script>
<script id="wbs-template"  type="text/template" class="hide">
    <tr class="dont-hide">
        <td width="70%" class="worktype-activity highlight2" name="wbs___wbsname_0" id="wbs___wbsname_0">
            <input type="hidden" name="wbs___wbsid_0" id="wbs___wbsid_0"/>
        </td>
        <td width="30%" class="highlight2" name="wbs___qty_0" id="wbs___qty_0" style="text-align:right;">
            <input type="hidden" name="wbs__hiddenqty_0" id="wbs__hiddenqty_0"/>
            <span class="nos" id="wbs___estwbsqty_0" hidden="true"></span>
            <span class="nos" id="wbs___avawbsqty_0" hidden="true"></span>
            <span class="nos" id="wbs___excesswbsqty_0" hidden="true"></span>
            <span class="nos" id="wbs___balpowbsqty_0" hidden="true"></span>
            <span class="nos" id="wbs___totpurchasewbsqty_0" hidden="true"></span>
            <span class="nos" id="wbs___isprojwbsqty_0" hidden="true"></span>
        </td>
    </tr>
</script>
<script id="terms-template"  type="text/template" class="hide">
    <tr class="dont-hide">
        <td width="10%"  name="slno__" id="slno__">
        </td>
        <td width="26%"  name="terms__" id="terms__">
            <input type="hidden" name="termsid__" id="termsid__"/>
            <input type="hidden"  name="isper__" id="isper__"/>
            <input type="hidden"  name="isvalue__" id="isvalue__"/>
            <input type="hidden"  name="isperiod__" id="isperiod__"/>
            <input type="hidden"  name="istdate__" id="istdate__"/>
            <input type="hidden"  name="iststring__" id="iststring__"/>
            <input type="hidden"  name="includegross__" id="includegross__"/>
        </td>
        <td width="10%"  name="per__" id="per__" style="text-align:right;">
        </td>
        <td width="15%"  name="value__" style="text-align:right;" id="value__" >
        </td>
        <td width="10%"  name="period__" style="text-align:right;" id="period__">
        </td>
        <td width="14%"  name="date__" id="date__"  >
<!--            <div class="col-lg-12 padlr0">-->
<!--                <input type="text" name="date__" id="date__" class="tbl_input date_picker" style="cursor:pointer;" value='--><?php //echo Date('d/m/Y'); ?><!--' />-->
<!--                <span class="date_icon"><i class="fa fa-calendar"></i></span>-->
<!--            </div>-->
        </td>
        <td width="15%"  name="string__" id="string__">
        </td>
    </tr>
</script>

<script>
    $(document).ready(function(){
        var arr_resources = <?php echo (isset($arr_resources)) ? json_encode($arr_resources) : '[]';?>;
        var arr_wbs =  <?php echo (isset($arr_res_wbs)) ? json_encode($arr_res_wbs) : '[]';?>;
        var arr_requestResources = <?php echo (isset($arr_requestResources)) ? json_encode($arr_requestResources) : '[]';?>;

        var arr_resource_iows = <?php echo (isset($arr_resource_iows)) ? json_encode($arr_resource_iows) : '[]';?>;
        var arr_resource_iow_requests = <?php echo (isset($arr_resource_iow_requests)) ? json_encode($arr_resource_iow_requests) : '[]';?>;

        var arr_terms=<?php echo (isset($arr_terms)) ? json_encode($arr_terms) : '[]';?>;
        var tmp_arr_terms=arr_terms;
        var arr_edit_terms=<?php echo (isset($arr_edit_terms)) ? json_encode($arr_edit_terms) : '[]';?>;
        var arr_qual_list=<?php echo (isset($arr_qual_list)) ? json_encode($arr_qual_list) : '[]';?>;
        var arr_estdetails = <?php echo (isset($arr_estimate)) ? json_encode($arr_estimate) : '[]';?>;//arr_estimate
        var arr_wbsestimate = <?php echo (isset($arr_wbsestimate)) ? json_encode($arr_wbsestimate) : '[]';?>;
        var PoRegId = <?php echo (isset($regId)) ? $regId : 0;?>;
        var CostCentreId =  <?php echo (isset($CostCentreId)) ? $CostCentreId : 0;?>;

        var WorkType = $('#WorkType').val();
        var OrderType = $('#OrderType').val();

        var qualiferHTML = '<?php echo (isset($qualHtml)) ? preg_replace('~>\s+<~', '><',$qualHtml) : '';?>';
        var $rowid = $('#rowid');

        var template = $('#resource-template').html();
        var iowtemplate = $('#iow-template').html();
        var requesttemplate = $('#request-template').html();
        var termstemplate = $('#terms-template').html();
        var resspectemplate = $('#resspec-template').html();
        var rowid = 0;
        var $tbody = $('#workorderTable').find('> tbody.seq-class');
        var otab = true;
        if (arr_requestResources.length != 0) {
            $.each(arr_requestResources, function (i, o) {
                rowid += 1;
                $tbody.append(template.replace(/__/g, '_' + rowid));
                $('#desc_' + rowid).html(o.Desc).addClass('border-none').prop('disabled', true);
                $('#resourceid_' + rowid).val(o.ResourceId);
                $('#itemid_' + rowid).val(o.ItemId);
                $('#unitname_' + rowid).html(o.UnitName).addClass('border-none').prop('disabled', true);
                $('#unitid_' + rowid).val(o.UnitId);
                $('#qty_' + rowid).html(sanitizeNumber(o.Qty, 3, true)).addClass('border-none').prop('disabled', true);
                $('#rate_' + rowid).html(sanitizeNumber(o.Rate, 2, true)).addClass('border-none').prop('disabled', true);
                $('#qrate_' + rowid).html(sanitizeNumber(o.QRate, 2, true)).addClass('border-none').prop('disabled', true);
                $('#baseamount_' + rowid).html(sanitizeNumber(o.BaseAmount, 2, true)).addClass('border-none').prop('disabled', true);
                $('#amount_' + rowid).html(sanitizeNumber(o.Amount, 2, true)).addClass('border-none').prop('disabled', true);
                $('#hiddenqty_' + rowid).val(o.HiddenQty);
                $('#rfrom_' + rowid).val(o.RFrom);
              //  $('#expandTr_' + rowid).show();
                if(o.ResSpec != '') {
                    $('#reqspeTabLink_'+rowid).show();
                    $('#reqspeTable_' + rowid).append(resspectemplate.replace(/__/g, '_' + rowid));
                    $('#resspec_' + rowid).val(o.ResSpec).addClass('border-none').prop('disabled', true);
                } else {
                    $('#reqspeTabLink_'+rowid).hide();
                }
                if (PoRegId >0) {
                    var RId = o.ResourceId;
                    var ItId = o.ItemId;
                    $.ajax({
                        url: getBaseURL() + 'mms/purchase/detailed',
                        type: "post",
                        data: "ResourceId=" + RId + "&mode=getqualdetails&ItemId=" + ItId + "&poId=" + PoRegId + "",
                        async: false,
                        success: function (data, textStatus, jqXHR) {
                            if (jqXHR.status == 200) {
                                data = JSON.parse(data);
                                if(data.length > 1578) {
                                    $('#expandTr_' + rowid).show();
                                    $('#qualifierTabLink_' + rowid).show();
                                    $('#qualifierTable_' + rowid).html(data.replace(/__1/g, '_' + rowid));
                                    $('#qualifierTable_' + rowid).find(':input').prop("disabled", true);
                                } else {
                                    $('#expandTr_' + rowid).hide();
                                    $('#qualifierTabLink_' + rowid).hide();
                                }
                            }
                            $('.loading_area').hide();
                        }, error: function (jqXHR, textStatus, errorThrown) {
                            $('.loading_area').hide();
                        }
                    });
                }
                var findRes = arr_resource_iows.filter(function(obj) {
                    return (obj.ResourceId === o.ResourceId) && (obj.ItemId === o.ItemId && (obj.BalQty > 0 || obj.Qty > 0));
                });
                if(findRes.length > 0) {
                    $('#expandTr_' + rowid).show();
                    $.each(arr_resource_iows, function (j, l) {
                        if ((l.ResourceId != o.ResourceId || l.ItemId != o.ItemId)) {
                            return;
                        }
                        var iowrowid = parseInt($('#iow_' + rowid + '_rowid').val()) + 1;
                        $('#decisionTable_' + rowid).find('> tbody.main').append(iowtemplate.replace(/__/g, '_' + rowid).replace(/_0/g, '_' + iowrowid));
                        $('#iow_' + rowid + '_rowid').val(iowrowid);
                        /////////////////
                        $('#wbsTable_' + rowid).hide();
                        $('#wbsTabLink_' + rowid).hide();
                        $('#decisionTable_' + rowid).show();
                        $('#decisionTabLink_' + rowid).show();
                        ////////////////
                        $('#iow_' + rowid + '_decisionid_' + iowrowid).val(l.DecisionId);
                        $('#iow_' + rowid + '_dectransid_' + iowrowid).val(l.DecTransId);
                        $('#iow_' + rowid + '_reqtransid_' + iowrowid).val(l.ReqTransId);
                        $('#iow_' + rowid + '_resourceid_' + iowrowid).val(l.ResourceId);
                        $('#iow_' + rowid + '_itemid_' + iowrowid).val(l.ItemId);
                        $('#iow_' + rowid + '_decisionno_' + iowrowid).html(l.DecisionNo);

                        $('#iow_' + rowid + '_balqty_' + iowrowid).html(sanitizeNumber(l.BalQty,3,true));
                        $('#iow_' + rowid + '_qty_' + iowrowid).html(sanitizeNumber(l.Qty,3,true));
                        $('#iow_' + rowid + '_hiddenqty_' + iowrowid).val(l.HiddenQty);

                        if (WorkType == 'activity') {
                            $('#iow_' + rowid + '_agtno_' + iowrowid).val(l.SerialNo);
                            $('#iow_' + rowid + '_spec_' + iowrowid).val(l.Specification);
                        } else if (WorkType == 'iow') {
                            $('.worktype-activity').remove();
                        }

                        var findAnal = arr_resource_iow_requests.filter(function(obj) {
                            return (obj.DecisionId === l.DecisionId  && obj.ResourceId === l.ResourceId &&  obj.ItemId === l.ItemId && (obj.BalQty > 0 || obj.Qty > 0));
                        });
                        if(findAnal.length > 0) {
                            $.each(arr_resource_iow_requests, function (k, r) {
                                if (l.DecisionId != r.DecisionId || l.ResourceId != r.ResourceId || l.ItemId != r.ItemId) {
                                    return;
                                }

                                $('#iow_' + rowid + '_qty_' + iowrowid).addClass('border-none').prop('readonly', true);
                                $('.iow_' + rowid + '_requestfields').show();
                                var requestrowid = parseInt($('#iow_' + rowid + '_request_' + iowrowid + '_rowid').val()) + 1;
                                $('#iow_' + rowid + '_request_' + iowrowid + '_reqno').find('> tbody.main').append(requesttemplate
                                    .replace(/__9/g, '_' + requestrowid)
                                    .replace(/_0/g, '_' + iowrowid)
                                    .replace(/__/g, '_' + rowid));
                                $('#iow_' + rowid + '_request_' + iowrowid + '_rowid').val(requestrowid);

                                $('#iow_' + rowid + '_request_' + iowrowid + '_wbsname_' + requestrowid).html(r.WBSName);
                                $('#iow_' + rowid + '_request_' + iowrowid + '_wbsid_' + requestrowid).val(r.WBSId);
                                $('#iow_' + rowid + '_request_' + iowrowid + '_dectransid_' + requestrowid).val(r.DecTransId);
                                $('#iow_' + rowid + '_request_' + iowrowid + '_decatransid_' + requestrowid).val(r.DecATransId);
                                $('#iow_' + rowid + '_request_' + iowrowid + '_reqtransid_' + requestrowid).val(r.ReqTransId);
                                $('#iow_' + rowid + '_request_' + iowrowid + '_reqahtransid_' + requestrowid).val(r.ReqAHTransId);
                                $('#iow_' + rowid + '_request_' + iowrowid + '_resourceid_' + requestrowid).val(r.ResourceId);
                                $('#iow_' + rowid + '_request_' + iowrowid + '_itemid_' + requestrowid).val(r.ItemId);
                                $('#iow_' + rowid + '_request_' + iowrowid + '_balqty_' + requestrowid).html(sanitizeNumber(r.BalQty,3,true));
                                $('#iow_' + rowid + '_request_' + iowrowid + '_qty_' + requestrowid).html(sanitizeNumber(r.Qty,3,true));
                                $('#iow_' + rowid + '_request_' + iowrowid + '_hiddenqty_' + requestrowid).val(r.HiddenQty);
                                $('#iow_' + rowid + '_request_' + iowrowid + '_expandWbs_' + requestrowid).show();

                                //Wbs Estimate
                                var findestwbs = arr_wbsestimate.filter(function(obj)
                                    {
                                        return (obj.ResourceId === r.ResourceId && obj.WBSId === r.WBSId);
                                    }
                                );

                            });
                        } else {
                            $('#iow_'+ rowid +'_request_'+ iowrowid +'_reqno').hide();
                        }

                    });
                } else {
                    //$('#expandTr_' + rowid).show();
                    $('#wbsTable_' + rowid).show();
                    $('#decisionTable_' + rowid).hide();
                    $('#decisionTabLink_' + rowid).hide();
                    $('#wbsTabLink_' + rowid).show();

                    //Without Request Decision Wbs Populate
                    var ResId = o.ResourceId;
                    var IteId = o.ItemId;
                    $.ajax({
                        url: getBaseURL() + 'mms/purchase/orderentry',
                        type: "post",
                        data: "ResourceId=" + ResId + "&Type=wbsEdit&ItemId=" + IteId + "&PORegId=" + PoRegId + "&CCId=" + CostCentreId + "",
                        async: false,
                        success: function (data, textStatus, jqXHR) {
                            if (jqXHR.status == 200) {
                                data = JSON.parse(data);
                                if(Object.keys(data).length > 1) {
                                    var wbstemplate = $('#wbs-template').html();
                                    $.each(data.wbs, function (i, l) {
                                        var iowrowid = parseInt($('#wbs_' + rowid + '_rowid').val()) + 1;
                                        $('#wbsTable_' + rowid).find('> tbody.main').append(wbstemplate.replace(/__/g, '_' + rowid).replace(/_0/g, '_' + iowrowid));
                                        $('#wbsTable_' + rowid).show();
                                        $('#decisionTable_' + rowid).hide();
                                        $('#decisionTabLink_' + rowid).hide();
                                        $('#wbsTabLink_' + rowid).show();
                                        $('#wbs_' + rowid + '_rowid').val(iowrowid);
                                        $('#wbs_' + rowid + '_wbsid_' + iowrowid).val(l.WBSId);
                                        $('#wbs_' + rowid + '_wbsname_' + iowrowid).html(l.WbsName);
                                        $('#wbs_' + rowid + '_qty_' + iowrowid).html(sanitizeNumber(l.Qty,3,true));
                                    });
                                }
                                else
                                {
                                    $('#wbsTable_' + rowid).hide();
                                    $('#decisionTable_' + rowid).hide();
                                    $('#decisionTabLink_' + rowid).hide();
                                    $('#wbsTabLink_' + rowid).hide();
                                    $('#qualifierTable_' + rowid).show();
                                    otab = false;
                                }
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            $('.loading_area').hide();
                        }

                    });


                    if (PoRegId >0)
                    {
                        var RId = o.ResourceId;
                        var ItId = o.ItemId;

                        $.ajax({
                            url: getBaseURL() + 'mms/purchase/detailed',
                            type: "post",
                            data: "ResourceId=" + RId + "&mode=getqualdetails&ItemId=" + ItId + "&poId=" + PoRegId + "",
                            async: false,
                            success: function (data, textStatus, jqXHR) {
                                if (jqXHR.status == 200) {
                                    data = JSON.parse(data);
                                    if(data.length > 1578) {
                                        $('#qualifierTabLink_' + rowid).show();
                                        $('#qualifierTable_' + rowid).html(data.replace(/__1/g, '_' + rowid));
                                        $('#qualifierTable_' + rowid).find(':input').prop("disabled", true);
                                        otab=true;
                                    }
                                    else
                                    {
                                        $('#qualifierTabLink_' + rowid).hide();
                                        otab=false;
                                    }
                                }
                                $('.loading_area').hide();
                            }, error: function (jqXHR, textStatus, errorThrown) {
                                $('.loading_area').hide();
                            }
                        });
                    }
                    if(otab == false)
                    {

                    }
                }
                /////
            });
        }
        //terms &condition end
        var $trowid = $('#trowid');
        var template = $('#terms-template').html();
        var trowid = 0;
        var $tbody = $('#termsTable').find('> tbody');

        if(arr_edit_terms.length != 0) {
            $('.uniTrms').show();
            $.each(arr_edit_terms, function(i, o) {
                trowid += 1;
                $tbody.append(termstemplate.replace(/__/g, '_' + trowid));

                $('#slno_' + trowid).html(o.SlNo).addClass('border-none').prop('disabled', true);
                $('#termsid_' + trowid).val(o.data);
                $('#terms_' + trowid).html(o.value).addClass('border-none').prop('disabled', true);
                $('#per_' + trowid).html(o.Per).addClass('border-none').prop('disabled', true);
                $('#value_' + trowid).html(o.Val).addClass('border-none').prop('disabled', true);
                $('#period_' + trowid).html(o.Period).addClass('border-none').prop('disabled', true);
                $('#date_' + trowid).html(o.Dte).addClass('border-none').prop('disabled', true);
                $('#string_' + trowid).html(o.Strg).addClass('border-none').prop('disabled', true);
                $('#isper_' + trowid).val(o.IsPer);
                $('#isvalue_' + trowid).val(o.IsValue);
                $('#isperiod_' + trowid).val(o.IsPeriod);
                $('#istdate_' + trowid).val(o.IsTDate);
                $('#iststring_' + trowid).val(o.IsTString);
                $('#includegross_' + trowid).val(o.IncludeGross);
                $('#trowid').val(trowid);
            });
        }

        $('.content_wrapper').on('click', '.mainTr', function (e) {
            e.preventDefault();
            if (!$(this).closest("tr").next(".subTr").is(":visible")) {
                $(this).closest("tr").prevAll(".subTr").find(".subDiv").slideUp("slow");
                $(this).closest("tr").prevAll(".subTr").slideUp("slow");
                $(this).closest("tr").nextAll(".subTr").find(".subDiv").slideUp("slow");
                $(this).closest("tr").nextAll(".subTr").slideUp("slow");
                $(this).find("i").removeClass("tform");

                $(this).closest("tr").next(".subTr").show();
                $(this).closest("tr").next(".subTr").find(".subDiv").slideDown("slow");
                $(this).find("i").addClass("tform");
            }
            else {
                $(this).closest("tr").next(".subTr").find(".subDiv").slideUp("slow");
                $(this).closest("tr").next(".subTr").slideUp("slow");
                $(this).find("i").removeClass("tform");
            }
        });

        nextAccordian(1);
        $(".flip0").click(function(){
            $(".pane0").slideToggle("slow");
        });
    });
    function checkTerms(){
        var tRowid = $('#trowid').val();
        alert(tRowid);
        if(tRowid != 0){
            nextAccordian(2);
        } else {
            nextAccordian(3);
        }
    }

    function showtabs(type,id,event) {
        event.preventDefault();
        $('#' + id).parent('li').addClass('active').siblings('li').removeClass('active');
        var rowid = id.split('_')[1];
        if (type=="decision") {
            $('#decisionTable_'+rowid).show();
            $('#qualifierTable_'+rowid).hide();
            $('#reqspeTable_'+rowid).hide();
            $('#wbsTable_'+rowid).hide();

        } else if (type=="qualifier") {
            $('#qualifierTable_'+rowid).show();
            $('#decisionTable_'+rowid).hide();
            $('#reqspeTable_'+rowid).hide();
            $('#wbsTable_'+rowid).hide();
        }
        else if (type=="wbs") {
            $('#wbsTable_'+rowid).show();
            $('#qualifierTable_'+rowid).hide();
            $('#decisionTable_'+rowid).hide();
            $('#reqspeTable_'+rowid).hide();
        }
        else
        {
            $('#reqspeTable_'+rowid).show();
            $('#qualifierTable_'+rowid).hide();
            $('#decisionTable_'+rowid).hide();
            $('#wbsTable_'+rowid).hide();
        }
        return false;
    }

    function showotherstabs(type) {
        if (type=="narration") {
            $('#narration').show();
            $('#branchdetails').hide();
            $('#deliverydetails').hide();
            $('#vendorcontact').hide();
            $('#cccontact').hide();
            $('#ccontact').hide();
        }
        else if(type == "branch"){
            $('#branchdetails').show();
            $('#narration').hide();
            $('#deliverydetails').hide();
            $('#vendorcontact').hide();
            $('#cccontact').hide();
            $('#ccontact').hide();
        }
        else if(type == "delivery")
        {
            $('#deliverydetails').show();
            $('#branchdetails').hide();
            $('#narration').hide();
            $('#vendorcontact').hide();
            $('#cccontact').hide();
            $('#ccontact').hide();
        }
        else if(type == "vcontact")
        {
            $('#vendorcontact').show();
            $('#deliverydetails').hide();
            $('#branchdetails').hide();
            $('#narration').hide();
            $('#cccontact').hide();
            $('#ccontact').hide();
        }
        else if(type == "cccontact")
        {
            $('#cccontact').show();
            $('#vendorcontact').hide();
            $('#deliverydetails').hide();
            $('#branchdetails').hide();
            $('#narration').hide();
            $('#ccontact').hide();
        }
        else if(type == "ccontact")
        {
            $('#ccontact').show();
            $('#vendorcontact').hide();
            $('#deliverydetails').hide();
            $('#branchdetails').hide();
            $('#narration').hide();
            $('#cccontact').hide();
        }

    }

    function nextAccordian(id) {
        $('#panelheading-' + id).trigger('click');
    }

    function myFunction(x) {
        x.classList.toggle("change");
    }
	
	
	var CostCentreName= <?php echo json_encode ($CostCentreName);?>;
	var VendorName= <?php echo json_encode ($VendorName);?>;
	var PONo= <?php echo json_encode ($PONo);?>;
	var CCPONo= <?php echo json_encode ($CCPONo);?>;
	var CPONo= <?php echo json_encode ($CPONo);?>;
	var ReqDate= <?php echo json_encode ($ReqDate);?>;
	var Currency= <?php echo json_encode ($Currency);?>;
	var RefNo= <?php echo json_encode ($RefNo);?>;
	var Distributor= <?php echo json_encode ($Distributor);?>;
	var PurchaseType= <?php echo json_encode ($PurchaseType);?>;
	var AccountType= <?php echo json_encode ($AccountType);?>;
	if(CostCentreName == ''|| CostCentreName == null) {
		$('#CostCentreName').hide();
	} 
	if(VendorName == ''|| VendorName == null){
		$('#VendorName').hide();
	} 
	if(PONo == ''|| PONo == null){
		$('#PONo').hide();
	} 
	if(CCPONo == ''|| CCPONo == null){
		$('#CCPONo').hide();
	} 
	if(CPONo == ''|| CPONo == null){
		$('#CPONo').hide();
	} 
	if(ReqDate == ''|| ReqDate == null){
		$('#ReqDate').hide();
	} 
	if(Currency == ''|| Currency == null){
		$('#Currency').hide();
	} 
	if(RefNo == ''|| RefNo == null){
		$('#RefNo').hide();
	}
	if(Distributor == ''|| Distributor == null){
		$('#Distributor').hide();
	}
	if(PurchaseType == ''|| PurchaseType == null){
		$('#PurchaseType').hide();
	}
	if(AccountType == ''|| AccountType == null){
		$('#AccountType').hide();
	}
</script>