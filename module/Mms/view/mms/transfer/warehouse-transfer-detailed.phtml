<link rel="stylesheet" href="<?php echo $this->basePath() . '/css/mms.css'; ?>" />

<style type="text/css">
    .mar_20{margin-top:20px!important;}
    .jqx-widget-content {z-index:999 !important;}
	.highlight{background-color: #efefed;}
	.top-30 {margin-top:20px!important;}
	.blubg{background : #B0C3EB !important;}
	.sub_tab {background-color: #e7e9ec;border: 1px solid #ddd;float: left;margin-top: 2px;padding:8px;width:100%;}
</style>
<div class="content_wrapper padlr0">
	<div class="container-fluid">
		<div class="row">
			<div class="col-lg-12">
				<h1 style="margin-left:10px;"> WareHouse Transfer Detail</h1>
			</div>
			<div class="col-lg-12">
				<div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 clear padlr0">
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres">
						<div class="cbpln cbpln-default bx-wte cbpln-status cbpln-status3">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-3">
										<i class="fa fa-bandcamp fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-9 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $costCentreName; ?></div>
										<div class="cbhuge comnelips">Project Name</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres">
						<div class="cbpln cbpln-default bx-wte cbpln-status cbpln-status4">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-3">
										<i class="fa fa-certificate fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-9 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $fWarehouseName; ?></div>
										<div class="cbhuge comnelips">From WareHouseName</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres">
						<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status1">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-3">
										<i class="fa fa-retweet fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-9 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $tWarehouseName; ?></div>
										<div class="cbhuge comnelips">To WareHouseName</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres">
						<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status1">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-3">
										<i class="fa fa-retweet fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-9 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $wtno; ?></div>
										<div class="cbhuge comnelips">WT No</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres">
						<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status1">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-3">
										<i class="fa fa-retweet fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-9 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $date; ?></div>
										<div class="cbhuge comnelips">Date</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6 col-xs-6 mnimumwidthres">
						<div class="cbpln cbpln-default  bx-wte cbpln-status cbpln-status2">
							<div class="padding-none">
								<div class="row">
									<div class="col-xs-3">
										<i class="fa fa-calendar fa-5x cbpln-status-icon"></i>
									</div>
									<div class="col-xs-9 text-right">
										<div class="cbhuge comnelips fntwt600"><?php echo $approve; ?></div>
										<div class="cbhuge comnelips">Approve</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-12">
					<div class="table-responsive top-30 ">
						<table class="table table-bordered" style=" margin-bottom:0px;" id="workorderTable">
							<thead>
							<tr>
								<th class="blubg">Code</th>
								<th class="blubg" >Description</th>
								<th class="blubg" >Unit</th>
								<th class="blubg" >Required Date</th>
								<th class="blubg" style="text-align:center;">Qty</th>
							</tr>
							</thead>
							<tbody class="main"></tbody>
						</table>
						<input type="hidden" name="rowid" id="rowid" value="0"/>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="col-lg-12 savebtn_area">
    <ul>
        <li class="dropdown save_btn float_r">
            <a href="<?php echo $this->basePath();?>/mms/Transfer/warehouse-transfer-register" class="ripple">Close</a>
        </li>
    </ul>
</div>

<script id="resource-template"  type="text/template" class="hide">
    <tr class="count-tr" >

        <td class="mar_20 border-none" width="15%" name="code__" id="code__"></td>
        <td width="25%" name="desc__" id="desc__" class=" border-none">
            <input type="hidden" name="resourceid__" id="resourceid__"/>
            <input type="hidden" name="itemid__" id="itemid__"/>
        </td>
        <td width="20%" name="unitname__" id="unitname__" class=" border-none">
            <input type="hidden" name="unitid__" id="unitid__"/>
        </td>
        <td width="15%" name="date__" id="date__" class="border-none"></td>
        <td width="25%" name="qty__" id="qty__" style="text-align:center;" class="border-none">
            <input type="hidden" name="hideQty__" id="hideQty__"  />
            <span class="nos" id="closingStock__" hidden="true"></span>
            <span class="nos" id="resourceId__" hidden="true" ></span>
            <span class="nos" id="itemId__" hidden="true"></span>
        </td>
    </tr>
    <tr style="display:none;" class="subTr count-tr">
    </tr>
</script>

<script type="text/javascript">
    var arr_requestResources = <?php echo (isset($arr_requestResources)) ? json_encode($arr_requestResources) : '[]';?>;
    var arr_resources = <?php echo (isset($arr_resources)) ? json_encode($arr_resources) : '[]';?>;

    $(function () {
        var $rowid = $('#rowid');
        var template = $('#resource-template').html();
        var $tbody = $('#workorderTable').find('> tbody.main');
        var rowid = 0;

        if(arr_requestResources.length != 0) {
            $.each(arr_requestResources, function(i, o) {
                rowid += 1;
                $tbody.append(template.replace(/__/g, '_' + rowid));

                $('#code_' + rowid).html(o.Code);
                $('#desc_' + rowid).html(o.ResourceName);
                $('#resourceid_' + rowid).val(o.ResourceId);
                $('#itemid_' + rowid).val(o.ItemId);
                $('#unitname_' + rowid).html(o.UnitName);
                $('#unitid_' + rowid).val(o.UnitId);
                $('#qty_' + rowid).html(o.Qty);
                $('#date_' + rowid).html(o.Date);
            });
        }
        rowid += 1;
        //$tbody.append(template.replace(/__/g, '_' + rowid));
        $rowid.val(rowid);
        nextAccordian(1);
    });
	
	function nextAccordian(id) {
        $('#panelheading-1').trigger('click');
    }
</script>
<!--<script>
    $.ajax({
        url: getBaseURL() + "mms/transfer/warehouse-transfer-detailed",
        type: "post",
        data: "mode=final&WTRegisterId=<?php //echo $wtId; ?>",
        dataType: "json",
        success: function (data, textStatus, jqXHR){
            $("#jqxgrid").jqxGrid('clear');
            var source =
            {
                dataFields: [
                    {name: 'Code', type: 'string'},
                    {name: 'ResourceName', type: 'string'},
                    {name: 'UnitName', type: 'string'},
                    {name: 'Qty', type: 'string'},
                    {name: 'WTTransId', type: 'string'}
                ],
                localdata:data,
                id: 'WTTransId',
                datatype: "json",
                async: false
            };
            var wtAdapter = new $.jqx.dataAdapter(source);


            // create jqxfirstGrid
            $("#jqxgrid").jqxGrid(
                {
                    width: '100%',
                    source: wtAdapter,
                    autoheight: true,
                    sortable: true,
                    filterable: true,
                    pageable: true,
                    pageSize: 10,
                    rowsheight: 35,
                    rowdetails: true,
                    columnsresize: true,
                    columnsreorder: true,
                    rowdetailstemplate: {
                        rowdetails: "<div id='grid' style='margin: 10px;'></div>",
                        rowdetailsheight: 500,
                        rowdetailshidden: true
                    },
                    ready: function () {
                        //$("#dataTable").jqxDataTable('showDetails', 1);
                    },
                    columns: [

                        {text: 'Code', dataField: 'Code'},
                        {text: 'ResourceName', dataField: 'ResourceName'},
                        {text: 'UnitName', dataField: 'UnitName'},
                        {text: 'Qty', dataField: 'Qty'},
                        {text: 'WTTransId', dataField: 'WTTransId', hidden:true}
                    ]
                });
        }, error: function (jqXHR, textStatus, errorThrown) {
            alert(textStatus + "-----" + errorThrown);
        }
    });
    </script>-->