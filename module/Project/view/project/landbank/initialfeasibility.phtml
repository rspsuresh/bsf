<script type="text/javascript" src="<?php echo $this->basePath(); ?>/js/select2.full.min.js"></script>
<link type="text/css" rel="stylesheet" href="<?php echo $this->basePath(); ?>/css/select2.min.css" />
<script type="text/javascript" src="<?php echo $this->basePath(); ?>/js/UnoDropZone.js"></script>
<link rel="stylesheet" href="<?php echo $this->basePath() . '/css/project.css';?>" />
<?php echo $this->headScript()
    ->appendFile($this->basePath() . '/library/amcharts/amcharts.js')
    ->appendFile($this->basePath() . '/library/amcharts/serial.js')
    ->appendFile($this->basePath() . '/library/amcharts/themes/light.js');
?>
<style>
    button, input, select, textarea 			{border:medium none;}
    .form-horizontal .control-label				{text-align:left;}
    .form-control:hover, .form-control:focus 	{border: 1px solid #1275a5;}
    .form-control								{box-shadow:0 1px 3px 0 rgba(0,0,0,0.2),0 1px 1px 0 rgba(0,0,0,0.14),0 2px 1px -1px rgba(0,0,0,0.12); border:1px solid #cacfd6}
    .panel 										{border-radius:0px !important;}
    .panel-info 								{border:none;border-top:none;}
    .ios_checkbox + div span::before 			{color:#fff);content: "No";display: inline-block;font-size: 11px;font-weight: 600;padding-top: 3px;position: absolute;right: 8px;z-index: 1;}
    .ios_checkbox:checked + div span::before 	{color:#fff;content:"Yes";display:inline-block;font-size:11px;font-weight:600;left:8px;padding-top 3px;position:absolute;z-index: 1;}
    .input-grouping > .polymer-form 			{width: 70%;float: left;}
    .input-grouping > .input-group-btn 			{width:30%;top:2px;}
    .input-grouping > .input-group-btn > select.parent_text {padding: 5px 4px 6px 4px;}
    .input-grouping > input.parent_text 		{width:60%;float:left;}
    .content_commt ul 							{height:100% !important;border:none !important;}
    .content_commt 								{border:none !important;}
    .custom-drop-zone 							{/*width:500px;*/height:380px;}
    .file-upload 								{/*width:490px;float:left;*/height:350px;border:2px solid #fff;  box-shadow: 0 2px 2px hsla(0, 0%, 0%, 0.125);}
    .file-upload:hover 							{cursor: pointer;/* border-style: solid;border-width: 1px;border-color: rgb(221, 220, 220);*/}
    .file-upload .filethumbnail img.img 		{width: 100%;height: 100%;}
    .file-upload .file-input 					{display: none;}
    .file-upload .drop-click-zone 				{width: 100%;height: 100%;/* position: absolute; */ /* z-index: 2;*//* background-color: red;*/}
    .file-upload .info 							{display: none;}
    .file-upload .filethumbnail 				{/*background-color: green;*/width: 100%;height: 100%;/* top: -100%;*/ position: relative;/* z-index: -1;*/}
    .qtip-file-message span 					{display: block;}
    .file-upload .message 						{position: relative;top: -100%;color:#333;height:100%;display:none;text-align:center;}
    .file-upload:hover .message 				{color:whitesmoke;display:block;}
    /*Bootstrap file styling*/
    .btn-file 									{position: relative;overflow: hidden;}
    .btn-file input[type=file] 					{position: absolute;top: 0;right: 0;min-width:100%;min-height: 100%;text-align:right;filter: alpha(opacity=0);opacity: 0;outline: none;background:#fff;cursor:inherit;display:block;}
    .new-pg 									{display: none;}
    .comments,
    .comment-delete 							{display: none;}
    .btn.selectpicker 							{padding: 13px 12px 30px !important;}
    .select-style select						{height:32px !important; border-left:none !important; padding-left:0px !important;}
    .right-o									{border-right:none !important;}
    .in-select									{margin:-1px}
    .upimg									 	{font-size:20px;padding:5px;color:#3F51B5;background:none;}
    .text-fileup							 	{font-size:14px;font-weight:600;}
    .cam-img								 	{margin-top:10px;}
    .form-control:hover, .form-control:focus	{border:none !important;}
    .btn_newlist 								{width:50px; font-size:18px; height:50px; color:#000; background:#e3edf1; border: 2px solid #93cee5; border-radius:50%; margin-top:15px;float:left; line-height:47px; text-align:center;}
	.btn_newlist a i							{text-align:center; font-size:18px; color:#000; padding-left:16px; line-height:45px; transition:all 0.3s ease;}
	.btn_newlist a i:hover						{-webkit-transform: scale(1.3); -ms-transform: scale(1.3); transform: scale(1.3); padding-left:14px}
	.bor-sty									{width:100% !important;}

</style>
<script>
    $(document).ready(function() {
        $(".lightGallery").lightGallery({
            loop             : true
        });
    });
</script>
<!--content-->
<?php $selectUnit = ''; $selectSaleType = '';
if(isset($unittypes)) {
    foreach($unittypes as $list) {
        $selectUnit .= '<option value="'. $list['UnitId'] .'">' . $list['UnitName'] .'</option>';
    }
}
if(isset($saletypelists)) {
    foreach($saletypelists as $list){
        $checked = '';
        // $checked = (isset($landInitial) && $list['SaleTypeId'] == $landInitial['SaleTypeId']) ? 'selected' : '';
        $selectSaleType .= '<option value="'. $list['SaleTypeId'].'"'.$checked.'>' . $list['SaleTypeName'] .'</option>';
    }
}
?>
<div class="content_wrapper padlr0">
<div class="container-fluid">
<div class="row">
<form onsubmit="return entryValidate()" method="post" id="formWrapper" enctype="multipart/form-data">
<div class="col-lg-12">
    <h1>Land Bank - Initial Feasibility</h1>
</div>
<!--form start-->
<div class="col-lg-12 top_ct" >
    <div class="form-group col-lg-4 col-lg-offset-0 col-md-4 col-md-offset-0 col-sm-4 col-sm-offset-0"> <span class="date_icon"><i class="fa fa-calendar"></i></span>
        <input type="text" name="RefDate" id="RefDate" class="form-control date_picker lbl_move" label="Reference Date" value="<?php if ($feasibilityId !=0) { echo date("d-m-Y", strtotime($landInitial['RefDate'])) ;} else { echo date("d-m-Y");  }?>" />
    </div>
    <div class="form-group col-lg-4 col-lg-offset-0 col-md-4 col-md-offset-0 col-sm-4 col-sm-offset-0">
        <input type="text" name="RefNo" id="RefNo" class="form-control lbl_move" label="Reference No" value="<?php if ($feasibilityId !=0) { echo $landInitial['RefNo']; } else { echo $svNo; } ?>"  readonly />
    </div>
    <div class="form-group col-lg-4 col-lg-offset-0 col-md-4 col-md-offset-0 col-sm-4 col-sm-offset-0">
        <input type="text" name="PropertyName" id="PropertyName" class="form-control lbl_move" label="Name of Property" value="<?php if ($feasibilityId !=0) { echo $landInitial['PropertyName']; } else if(isset($EnqId)){ echo $EnqId['PropertyName']; } ?>" <?php if ($feasibilityId !=0) { ?> readonly <?php } ?> />
        <input type="hidden" id="EnquiryId" name="EnquiryId" value="<?php if ($feasibilityId !=0) { echo $landInitial['EnquiryId']; } else { echo ''; } ?>" />
        <input type="hidden" id="FeasibilityId" name="FeasibilityId" value="<?php if ($feasibilityId !=0) { echo $feasibilityId; } else { echo ''; } ?>" />
        <input type="hidden" id="pageUrl" name="pageUrl" value="<?php if ($page != '') { echo $page; } else { echo ''; } ?>" />
    </div>
</div>
<!--form end-->
<!--accordion start-->
<div class="col-lg-12 clear">
<div id="accordion" class="panel-group">
<div class="panel panel-info">
    <div data-target="#collapseOne" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-1">
        <h4 class="panel-title accordion-toggle defa_panels">Soil Condition and Topography</h4>
    </div>
    <div class="panel-collapse collapse" id="collapseOne" style="height: 0px;">
        <div class="panel-body bgcolr">
            <div class="deft_act">
                <div class="col-lg-10 col-lg-offset-1 col-md-12 col-md-offset-0 col-sm-12">
                    <div class="col-lg-6 col-lg-offset-0 col-md-6 col-md-offset-0 col-sm-6">
                        <div class="form-group">
                            <input type="text" class="form-control lbl_move" label="Soil Type" name="SoilType" id="SoilType" value="<?php echo (isset($landInitial)) ? $landInitial['SoilType'] : ''; ?>">
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control lbl_move" label="Authority of Soil Report" name="SoilReportAuthority" id="SoilReportAuthority" onkeypress="return alphaNumeric(event);" value="<?php echo (isset($landInitial)) ? $landInitial['SoilReportAuthority'] : ''; ?>">
                        </div>
                    </div>
                    <div class="col-lg-6 col-lg-offset-0 col-md-6 col-md-offset-0 col-sm-6">
                        <div class="form-group col-md-12">
                            <select name='GroundWaterLevel' class="single_dropdown2 lbl_move" style="width:100%;" label="Ground Water Level">
                                <option></option>
                                <option <?php echo (isset($landInitial) && $landInitial['GroundWaterLevel'] == 'Good') ? 'selected' : '';?>>Good</option>
                                <option <?php echo (isset($landInitial) && $landInitial['GroundWaterLevel'] == 'Normal') ? 'selected' : '';?>>Normal</option>
                                <option <?php echo (isset($landInitial) && $landInitial['GroundWaterLevel'] == 'Poor') ? 'selected' : '';?>>Poor</option>
                            </select>
                        </div>
                        <div class="form-group col-md-12">
                            <div class="col-md-9" style="padding-left:0 !important; padding-right:0 !important"><input type="text" name="GroundElevation" id="GroundElevation" class="form-control in-select lbl_move" label="Ground Elevation" maxlength="18" /></div>
                            <div class="col-md-3" style="padding-left:0 !important; padding-right:0 !important">
                                <select class="form-control selectpicker show-tick" name="GroundElevationUnitId" id="GroundElevationUnitId">
                                    <?php if(isset($unittypesKm) && isset($landInitial)) {
                                        foreach($unittypesKm as $dist){ ?>
                                            <option value="<?php echo $dist['UnitId'];?>" <?php echo ($dist['UnitId'] == $landInitial['DistanceFromAirportUnitId']) ? 'selected' : '';?>><?php echo $dist['UnitName']; ?></option>
                                        <?php } } else { foreach($unittypesKm as $dist) { ?>
                                        <option value="<?php echo $dist['UnitId'];?>"> <?php echo $dist['UnitName'];?> </option>
                                    <?php } } ?>
                                </select>
                            </div>
                        </div>
                    </div>
                    <!--Documents start-->
                    <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 clear">
                        <div class="table-responsive topsp" style="margin-top:10px;">
                            <table class="table tableWithFloatingHeader" style=" margin-bottom:0px;">
                                <thead>
                                <tr>
                                    <th width="15%">Document Type (Soil Test Report)</th>
                                    <th width="15%">Document Description</th>
                                    <th width="3%">&nbsp;</th>
                                </tr>
                                </thead>
                                <tbody>
                                <?php if(isset($landInitialSoilDocument) && count($landInitialSoilDocument) != 0): $i=1;
                                    foreach($landInitialSoilDocument as $soilDoc): ?>
                                        <tr>
                                            <td width="15%"><input class="parent_text" type="text" name="soilDocType_<?php echo $i; ?>" id="soilDocType_<?php echo $i; ?>" maxlength="155" onblur="addNewSoilDocRow(this)" value="<?php echo $soilDoc['Type']; ?>" /></td>
                                            <td width="15%"><textarea class="parent_texts" name="soilDocDesc_<?php echo $i; ?>" id="soilDocDesc_<?php echo $i; ?>"><?php echo $soilDoc['Description']; ?></textarea></td>
                                            <td width="4%" class="action_btns_td"><ul class="action_btns">
                                                    <?php if($soilDoc['URL'] == ''){?>
                                                        <li style="float:left;"> <a href="#"> <span  data-toggle="tooltip" data-placement="left" data-original-title="Click to attach documents" class="btn-file butclr_imp"> <i class="fa fa-paperclip dcm_atch"></i>
                                                        <input type="file" name="soilDocFile_<?php echo $i; ?>" id="soilDocFile_<?php echo $i; ?>">
                                                    <?php } else{?>
                                                        <li style="float:left;"> <a class="mainTr_<?php echo $i; ?>" download href="<?php echo $this->basePath() . $soilDoc['URL']; ?>"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Views"><i class="fa fa-eye"></i></span> </a> </li>
                                                        <input type="hidden" name="soilDocFile_<?php echo $i; ?>" id="soilDocFile_<?php echo $i; ?>" value="<?php echo $soilDoc['URL'];?>">
                                                        <?php }?>
                                                    <li style="float:left;"> <a href="#" onclick="deleteSoilDoc(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                                </ul></td>
                                        </tr>
                                        <?php $i++; endforeach; else: ?>
                                    <tr>
                                        <td width="15%"><input class="parent_text" type="text" name="soilDocType_1" id="soilDocType_1" maxlength="155" onchange="addNewSoilDocRow(this)" /></td>
                                        <td width="15%"><textarea class="parent_texts" name="soilDocDesc_1" id="soilDocDesc_1"></textarea></td>
                                        <td width="4%" class="action_btns_td"><ul class="action_btns">
                                                <li style="float:left;"> <a href="#"> <span  data-toggle="tooltip" data-placement="left" data-original-title="Click to attach documents" class="btn-file butclr_imp"> <i class="fa fa-paperclip dcm_atch"></i>
                                            <input type="file" name="soilDocFile_1" id="soilDocFile_1">
                                            </span> </a> </li>
                                                <!--                            <li style="float:left;"> <a class="mainTr_1" href="#"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Views"><i class="fa fa-eye"></i></span> </a> </li>-->
                                                <li style="float:left;"> <a href="#" onclick="deleteSoilDoc(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                            </ul></td>
                                    </tr>
                                <?php endif; ?>
                                </tbody>
                            </table>
                            <input type="hidden" name="soildocumentrowid" id="soildocumentrowid" value="<?php echo (isset($landInitialSoilDocument) && count($landInitialSoilDocument) != 0) ? count($landInitialSoilDocument) : 1; ?>" />
                        </div>
                        <div class="cont_bt col-lg-5 col-lg-offset-7 col-md-9 col-md-offset-3 col-sm-7 col-sm-offset-3 col-xs-7 col-xs-offset-4">
                            <ul>
                                <li><a href="javascript:nextAccordian(2)">Continue &nbsp;<i class="fa fa-chevron-circle-right"></i></a></li>
                            </ul>
                        </div>
                    </div>
                    <!--Documents end-->
                </div>
            </div>
        </div>
    </div>
</div>
<div class="panel panel-info">
    <div data-target="#collapseTwo" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-2">
        <h4 class="panel-title accordion-toggle defa_panels">Area & Zoning</h4>
    </div>
    <div class="panel-collapse collapse" id="collapseTwo" style="height: 0px;">
        <div class="panel-body bgcolr">
            <div class="deft_act">
                <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0">
                    <div class="col-lg-6 col-lg-offset-0 col-md-6 col-md-offset-0 col-sm-6 col-sm-offset-0">
                        <div class="form-group input-grouping">
                            <input type="text" class="form-control lbl_move" label="Road width" name="RoadWidth" style="text-align:right;" id="RoadWidth" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" value="<?php echo (isset($landInitial)) ? $landInitial['RoadWidth'] : '';?>">
                            <div class="input-group-btn">
                                <select class="form-control selectpicker show-tick" name="RoadWidthUnitId" id="RoadWidthUnitId">
                                    <?php if(isset($unittypesKm) && isset($landInitial)) {
                                        foreach($unittypesKm as $dist){ ?>
                                            <option value="<?php echo $dist['UnitId'];?>" <?php echo ($dist['UnitId'] == $landInitial['DistanceFromAirportUnitId']) ? 'selected' : '';?>><?php echo $dist['UnitName']; ?></option>
                                        <?php } } else { foreach($unittypesKm as $dist) { ?>
                                        <option value="<?php echo $dist['UnitId'];?>"> <?php echo $dist['UnitName'];?> </option>
                                    <?php } } ?>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name="ZoneTypeId" class="single_dropdown2 lbl_move" style="width:100%;" label="Zone Type" id="ZoneTypeId">
                                    <option></option>
                                    <?php if(isset($zonetypelists)):
                                        foreach($zonetypelists as $list):?>
                                            <option value="<?php echo $list['ZoneId'];?>" <?php echo (isset($landInitial) && $landInitial['ZoneTypeId'] == $list['ZoneId']) ? 'selected' : ''; ?>><?php echo $list['ZoneName'];?></option>
                                        <?php endforeach; endif; ?>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="form-group input-grouping">
                                <input type="text" class="form-control lbl_move" label="Frontage Area" name="FrontageArea" id="FrontageArea"  style="text-align:right;" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" value="<?php echo (isset($landInitial)) ? $landInitial['FrontageArea'] : '';?>">
                                <div class="input-group-btn">
                                    <select class="form-control selectpicker show-tick" name="FrontageAreaUnitId" id="FrontageAreaUnitId">
                                        <?php if(isset($unittypes) && isset($landInitial)):
                                            foreach($unittypes as $list): ?>
                                                <option value="<?php echo $list['UnitId'];?>" <?php echo ($list['UnitId'] == $landInitial['FrontageAreaUnitId']) ? 'selected' : '';?>><?php echo $list['UnitName']; ?></option>
                                            <?php endforeach;
                                        else: echo $selectUnit;
                                        endif;?>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--image upload-->
                    <div class="col-lg-6 col-lg-offset-0 col-md-6 col-md-offset-0 col-sm-6 col-sm-offset-0 col-xs-12 col-xs-offset-0">
                        <?php if(isset($images)):?>
                            <!--gallery-->
                            <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0">
                                <h1 class="pt_dtl">Property Images</h1>
                                <div class="site-img sliderarea lightGallery">
                                    <?php $imgCount = 1;
                                    foreach($images as $image): ?>
                                        <div class="pro-land effects-pro pn" data-src="<?php echo $this->basePath() . $image['URL']; ?>" data-sub-html="#html<?php echo $imgCount;?>">
                                            <div class="img" style="background-image:url('<?php echo $this->basePath(). $image['URL']; ?>');"></div>
                                            <div class="read-pl"> <a class="infos" href="#myModal" data-toggle="modal"></a></div>
                                        </div>
                                        <?php $imgCount++;
                                    endforeach; ?>
                                </div>
                            </div>
                            <!--gallery-->
                        <?php endif; ?>

                        <?php if(isset($videos)):?>
                            <!--gallery video-->
                            <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0">
                                <h1 class="pt_dtl">Property Video</h1>
                                <div class="scheduler gallery_vid">
                                    <video height="241" id="player2" style="width:100%;" controls="controls">
                                        <source src="<?php echo $this->basePath() . $videos['URL']; ?>" type="video/mp4">
                                        <p>Your browser doesn't support this video format.</p>
                                    </video>
                                </div>
                            </div>
                            <!--gallery video-->
                        <?php endif; ?>
                        <div class="col-lg-12"><!-- Trigger the modal with a button -->
                            <span class="text-fileup">File Upload <button type="button" class="upimg" data-toggle="modal" id="btnCamera" data-target="#myModal"><i class="fa fa-camera cam-img"></i> &nbsp; <i class="fa fa-video-camera cam-img"></i> </button></span>
                            <!-- Modal --></div>
                        <div id="files" class="files"></div>
                        <!--<input id="file-fr" name="file-fr[]" type="file" multiple>-->
                        <input id="file-fr" name="attachedfiles[]" type="file" multiple>
                        <div id="upload_photo" class="upload_area_photo tab-pane">
                            <p class="strm_loader txt_center clear" style="display:none;"><span></span>Loading...</p>
                            <div id="label" style="display:none"><label>Images and Video's to be uploaded</label></div>
                            <div id="upload_photos" class="upload_photos"></div>
                        </div>
                    </div>
                    <!--image upload-->
                    <div class="cont_bt col-lg-5 col-lg-offset-7 col-md-9 col-md-offset-3 col-sm-7 col-sm-offset-3 col-xs-7 col-xs-offset-4">
                        <ul>
                            <li><a href="javascript:nextAccordian(3)">Continue &nbsp;<i class="fa fa-chevron-circle-right"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="panel panel-info">
    <div data-target="#collapsethree" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-3">
        <h4 class="panel-title accordion-toggle defa_panels">Facilities</h4>
    </div>
    <div class="panel-collapse collapse" id="collapsethree" style="height: 0px;">
        <div class="panel-body bgcolr">
            <div class="deft_act">
                <div class="col-lg-10 col-lg-offset-1 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0">
                    <div class="col-lg-6 col-lg-offset-0 col-md-6 col-md-offset-0 col-sm-6 col-sm-offset-0">
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='SoilType' class="single_dropdown2 lbl_move" style="width:100%;" label="Soil Type">
                                    <option></option>
                                    <option <?php echo (isset($landInitial) && $landInitial['SoilType'] == 'Clay') ? 'selected' : '';?>>Clay</option>
                                    <option <?php echo (isset($landInitial) && $landInitial['SoilType'] == 'Sandy') ? 'selected' : '';?>>Sandy</option>
                                    <option <?php echo (isset($landInitial) && $landInitial['SoilType'] == 'Gravel') ? 'selected' : '';?>>Gravel</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='GroundWater' class="single_dropdown2 lbl_move" style="width:100%;" label="Ground Water Facility">
                                    <option></option>
                                    <option <?php echo (isset($landInitial) && $landInitial['GroundWater'] == 'Poor') ? 'selected' : '';?>>Poor</option>
                                    <option <?php echo (isset($landInitial) && $landInitial['GroundWater'] == 'Fair') ? 'selected' : '';?>>Fair</option>
                                    <option <?php echo (isset($landInitial) && $landInitial['GroundWater'] == 'Good') ? 'selected' : '';?>>Good</option>
                                    <option <?php echo (isset($landInitial) && $landInitial['GroundWater'] == 'VeryGood') ? 'selected' : '';?>>VeryGood</option>
                                    <option <?php echo (isset($landInitial) && $landInitial['GroundWater'] == 'Abundant') ? 'selected' : '';?>>Abundant</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='DrainageFacility' class="single_dropdown2 lbl_move" style="width:100%;" label="Drainage Facility">
                                    <option></option>
                                    <option value="1" <?php echo (isset($landInitial) && $landInitial['Drainage'] == '1') ? 'selected' : '';?>>Yes</option>
                                    <option value="0" <?php echo (isset($landInitial) && $landInitial['Drainage'] == '0') ? 'selected' : '';?>>No</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='MaterialStorageArea' class="single_dropdown2 lbl_move" style="width:100%;" label="Area for Material Storage">
                                    <option></option>
                                    <option value="1" <?php echo (isset($landInitial) && $landInitial['MaterialStorageArea'] == '1') ? 'selected' : '';?>>Yes</option>
                                    <option value="0" <?php echo (isset($landInitial) && $landInitial['MaterialStorageArea'] == '0') ? 'selected' : '';?>>No</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='FlightPath' class="single_dropdown2 lbl_move" style="width:100%;" label="Is It On The Flight Path">
                                    <option value=""></option>
                                    <option <?php echo (isset($landInitial) && $landInitial['FlightPath'] == 'Yes') ? 'selected' : '';?>>Yes</option>
                                    <option <?php echo (isset($landInitial) && $landInitial['FlightPath'] == 'No') ? 'selected' : '';?>>No</option>
                                    <option <?php echo (isset($landInitial) && $landInitial['FlightPath'] == 'Future Expansion') ? 'selected' : '';?>>Future Expansion</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='HighTensionWires' class="single_dropdown2 lbl_move" style="width:100%;" label="Any High Tension Wires Dissecting Site">
                                    <option></option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['HighTensionWires'] == 'Yes') ? 'selected' : '';?>>Yes</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['HighTensionWires'] == 'No') ? 'selected' : '';?>>No</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='GarbageDumps' class="single_dropdown2 lbl_move" style="width:100%;" label="Any Garbage Dumps Within 750m Of Site">
                                    <option></option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['GarbageDumps'] == 'Yes') ? 'selected' : '';?>>Yes</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['GarbageDumps'] == 'No') ? 'selected' : '';?>>No</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['GarbageDumps'] == 'Future Expansion') ? 'selected' : '';?>>Future Expansion</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='BurialOrCrematorium' class="single_dropdown2 lbl_move" style="width:100%;" label="Any BurialGround/Crematorium Within 750m Of Site">
                                    <option></option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['BurialOrCrematorium'] == 'Yes') ? 'selected' : '';?>>Yes</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['BurialOrCrematorium'] == 'No') ? 'selected' : '';?>>No</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['BurialOrCrematorium'] == 'Future Expansion') ? 'selected' : '';?>>Future Expansion</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='ReligiousEstablish' class="single_dropdown2 lbl_move" style="width:100%;" label="Any Religious Establishment Within 250m Of Site">
                                    <option></option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['ReligiousEstablish'] == 'Yes') ? 'selected' : '';?>>Yes</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['ReligiousEstablish'] == 'No') ? 'selected' : '';?>>No</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='TrafficAbutt' class="single_dropdown2 lbl_move" style="width:100%;" label="Traffic On Abutting Road">
                                    <option></option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['TrafficAbutt'] == 'Light') ? 'selected' : '';?>>Light</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['TrafficAbutt'] == 'Medium') ? 'selected' : '';?>>Medium</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['TrafficAbutt'] == 'Heavy') ? 'selected' : '';?>>Heavy</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['TrafficAbutt'] == 'Congested') ? 'selected' : '';?>>Congested</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-lg-offset-0 col-md-6 col-md-offset-0 col-sm-6 col-sm-offset-0">
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='GovtWaterSupply' class="single_dropdown2 lbl_move" style="width:100%;" label="Govt. Water Supply Facility">
                                    <option></option>
                                    <option <?php echo (isset($landInitial) && $landInitial['GovtWaterSupply'] == 'Yes') ? 'selected' : '';?>>Yes</option>
                                    <option <?php echo (isset($landInitial) && $landInitial['GovtWaterSupply'] == 'No') ? 'selected' : '';?>>No</option>
                                    <option <?php echo (isset($landInitial) && $landInitial['GovtWaterSupply'] == 'Proposed') ? 'selected' : '';?>>Proposed</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='GovtSewage' class="single_dropdown2 lbl_move" style="width:100%;" label="Govt. Sewage Connection">
                                    <option></option>
                                    <option <?php echo (isset($landInitial) && $landInitial['GovtSewage'] == 'Yes') ? 'selected' : '';?>>Yes</option>
                                    <option <?php echo (isset($landInitial) && $landInitial['GovtSewage'] == 'No') ? 'selected' : '';?>>No</option>
                                    <option <?php echo (isset($landInitial) && $landInitial['GovtSewage'] == 'Proposed') ? 'selected' : '';?>>Proposed</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='Electricity' class="single_dropdown2 lbl_move" style="width:100%;" label="Electricity Facility">
                                    <option></option>
                                    <option value="1" <?php echo (isset($landInitial) && $landInitial['Electricity'] == '1') ? 'selected' : '';?>>Yes</option>
                                    <option value="0" <?php echo (isset($landInitial) && $landInitial['Electricity'] == '0') ? 'selected' : '';?>>No</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='LabourShedArea' class="single_dropdown2 lbl_move" style="width:100%;" label="Area for Labour Shed">
                                    <option></option>
                                    <option value="1" <?php echo (isset($landInitial) && $landInitial['LabourShedArea'] == '1') ? 'selected' : '';?>>Yes</option>
                                    <option value="0" <?php echo (isset($landInitial) && $landInitial['LabourShedArea'] == '0') ? 'selected' : '';?>>No</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="form-group input-grouping">
                                <input type="text" class="form-control lbl_move" label="Distance from Airport" name="DistanceFromAirport" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" value="<?php echo (isset($landInitial)) ? $landInitial['DistanceFromAirport'] : '';?>">
                                <div class="input-group-btn">
                                    <select class="form-control selectpicker show-tick" name="DistanceFromAirportUnitId">
                                        <?php if(isset($unittypesKm) && isset($landInitial)) {
                                            foreach($unittypesKm as $dist){ ?>
                                                <option value="<?php echo $dist['UnitId'];?>" <?php echo ($dist['UnitId'] == $landInitial['DistanceFromAirportUnitId']) ? 'selected' : '';?>><?php echo $dist['UnitName']; ?></option>
                                            <?php } } else { foreach($unittypesKm as $dist) { ?>
                                            <option value="<?php echo $dist['UnitId'];?>"> <?php echo $dist['UnitName'];?> </option>
                                        <?php } } ?>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='FloodMarks' class="single_dropdown2 lbl_move" style="width:100%;" label="Any Flood Marks Seen In Site">
                                    <option></option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['FloodMarks'] == 'Yes') ? 'selected' : '';?>>Yes</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['FloodMarks'] == 'No') ? 'selected' : '';?>>No</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['FloodMarks'] == 'Future Expansion') ? 'selected' : '';?>>Future Expansion</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='RailwayTrack' class="single_dropdown2 lbl_move" style="width:100%;" label="Any Railway Track Within 500m Of Site">
                                    <option></option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['RailwayTrack'] == 'Yes') ? 'selected' : '';?>>Yes</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['RailwayTrack'] == 'No') ? 'selected' : '';?>>No</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='ChannelOrTank' class="single_dropdown2 lbl_move" style="width:100%;" label="Any Channel/Tank Near Site">
                                    <option></option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['ChannelOrTank'] == 'Yes') ? 'selected' : '';?>>Yes</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['ChannelOrTank'] == 'No') ? 'selected' : '';?>>No</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['ChannelOrTank'] == 'Future Expansion') ? 'selected' : '';?>>Future Expansion</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='SchoolOrCollege' class="single_dropdown2 lbl_move" style="width:100%;" label="Any School/College Within 250m Of Site">
                                    <option></option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['SchoolOrCollege'] == 'Yes') ? 'selected' : '';?>>Yes</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['SchoolOrCollege'] == 'No') ? 'selected' : '';?>>No</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='AuraIssues' class="single_dropdown2 lbl_move" style="width:100%;" label="Any Other Aura Issues">
                                    <option></option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['AuraIssues'] == 'Yes') ? 'selected' : '';?>>Yes</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['AuraIssues'] == 'No') ? 'selected' : '';?>>No</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="cont_bt col-lg-5 col-lg-offset-7 col-md-9 col-md-offset-3 col-sm-7 col-sm-offset-3 col-xs-7 col-xs-offset-4">
                        <ul>
                            <li><a href="javascript:nextAccordian(4)">Continue &nbsp;<i class="fa fa-chevron-circle-right"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="panel panel-info">
    <div data-target="#collapsefour" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-4">
        <h4 class="panel-title accordion-toggle defa_panels">Approvals & Government Norms</h4>
    </div>
    <div class="panel-collapse collapse" id="collapsefour" style="height: 0px;">
        <div class="panel-body bgcolr">
            <div class="deft_act">
                <div class="col-lg-10 col-lg-offset-1 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0">
                    <div class="col-lg-6 col-lg-offset-0 col-md-6 col-md-offset-0 col-sm-6 col-sm-offset-0">
                        <div class="form-group">
                            <input type="text" class="form-control lbl_move" label="Sanctioning Authority" name="SanctioningAuth"  style="text-align:right;" onkeypress="return alphaNumeric(event);" maxlength="155" value="<?php echo (isset($landInitial)) ? $landInitial['SanctioningAuth'] : ''; ?>" />
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control lbl_move" label="Maximum No of Floors" style="text-align:right;" name="Floors" onblur="return FormatNum(this, 0)" onkeypress="return isNumberKey(event,this)" maxlength="3" value="<?php echo (isset($landInitial)) ? $landInitial['Floors'] : ''; ?>" />
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control lbl_move" label="Premium FSI" style="text-align:right;" name="PremiumFSI" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="5" value="<?php echo (isset($landInitial)) ? $landInitial['PremiumFSI'] : '';?>">
                        </div>
                        <div class="form-group">
                            <div class="frmwrk_div">
                                <select name='FSIAchieve' class="single_dropdown2 lbl_move" style="width:100%;" label="FSI Achievable">
                                    <option></option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['FSIAchieve'] == 'Yes') ? 'selected' : '';?>>Yes</option>
                                    <option  <?php echo (isset($landInitial) && $landInitial['FSIAchieve'] == 'No') ? 'selected' : '';?>>No</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control lbl_move" label="Loading On  FSI" style="text-align:right;" name="LoadingFSI" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="5" value="<?php echo (isset($landInitial)) ? $landInitial['LoadingFSI'] : '';?>">
                        </div>
                    </div>
                    <div class="col-lg-6 col-lg-offset-0 col-md-6 col-md-offset-0 col-sm-6 col-sm-offset-0">
                        <div class="form-group input-grouping">
                            <input type="text" class="form-control lbl_move" label="Guideline value" name="Guideline" style="text-align:right;" id="Guideline" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" value="<?php echo (isset($landInitial)) ? $landInitial['Guideline'] : '';?>">
                            <div class="input-group-btn">
                                <option value="0">select</option>
                                <select class="form-control selectpicker show-tick" name="GuidelineUnitId" id="GuidelineUnitId">
                                    <?php if(isset($unittypesKm) && isset($landInitial)) {
                                        foreach($unittypesKm as $dist){ ?>
                                            <option value="<?php echo $dist['UnitId'];?>" <?php echo ($dist['UnitId'] == $landInitial['GuidelineUnitId']) ? 'selected' : '';?>><?php echo $dist['UnitName']; ?></option>
                                        <?php } } else { foreach($unittypesKm as $dist) { ?>
                                        <option value="<?php echo $dist['UnitId'];?>"> <?php echo $dist['UnitName'];?> </option>
                                    <?php } } ?>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <input type="text" class="form-control lbl_move" label="FSI" name="FSI" style="text-align:right;" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="5" value="<?php echo (isset($landInitial)) ? $landInitial['FSI'] : '';?>">
                        </div>
                        <div class="form-group">
                            <div class="form-group">
                                <input type="text" class="form-control lbl_move" label="Expandable FSI %" style="text-align:right;" name="ExpandableArea" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="5" value="<?php echo (isset($landInitial)) ? $landInitial['ExpandableArea'] : '';?>">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="form-group">
                                <input type="text" class="form-control lbl_move" label="Allowable Non FSI" style="text-align:right;" name="AllowableArea" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="5" value="<?php echo (isset($landInitial)) ? $landInitial['AllowableArea'] : '';?>">
                            </div>
                        </div>
                    </div>
                    <div class="cont_bt col-lg-5 col-lg-offset-7 col-md-9 col-md-offset-3 col-sm-7 col-sm-offset-3 col-xs-7 col-xs-offset-4">
                        <ul>
                            <li><a href="javascript:nextAccordian(5)">Continue &nbsp;<i class="fa fa-chevron-circle-right"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="panel panel-info">
<div data-target="#collapsefive" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-5">
    <h4 class="panel-title accordion-toggle defa_panels">Owner Details</h4>
</div>
<div class="panel-collapse collapse" id="collapsefive" style="height: 0px;">
<div class="panel-body bgcolr">
<div class="table-responsive topsp">
<table class="table tableWithFloatingHeader" style=" margin-bottom:0px;" id="ownerDetailsTable">
<thead>
<tr>
    <th>Survey No</th>
    <th>Owner Name</th>
    <th>Owner address</th>
    <th>Area of Land</th>
    <th>&nbsp;</th>
</tr>
</thead>
<tbody>
<?php if(isset($landInitialOwnerDetail) && count($landInitialOwnerDetail) != 0): $i=0;
    foreach($landInitialOwnerDetail as $ownerDetail): $i++; ?>
        <tr>
            <td width="20%"><input class="parent_text" type="text" name="surveyno_<?php echo $i;?>" id="surveyno_<?php echo $i;?>" onblur="addMainTr(this)" maxlength="10" value="<?php echo $ownerDetail['SurveyNo'];?>" /></td>
            <td width="30%"><input class="parent_text" type="text" name="ownername_<?php echo $i;?>" id="ownername_<?php echo $i;?>" maxlength="155" value="<?php echo $ownerDetail['OwnerName'];?>" onblur="addMainTr(this)" /></td>
            <td width="30%"><input class="parent_text" type="text" name="owneraddress_<?php echo $i;?>" id="owneraddress_<?php echo $i;?>" maxlength="155" onchange="addres(this)" value="<?php echo $ownerDetail['OwnerAddress'];?>" onblur="addMainTr(this)" /></td>
            <td width="20%"><div class="input-grouping">
                    <input class="parent_text" type="text" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" style="text-align:right;" name="landarea_<?php echo $i;?>" id="landarea_<?php echo $i;?>" value="<?php echo $ownerDetail['LandArea'];?>" onblur="addMainTr(this)" />
                    <div class="input-group-btn select-style" style="top: 0;">
                        <select  name="landareaunitid_<?php echo $i;?>" id="landareaunitid_<?php echo $i;?>">
                            <?php if(isset($unittypes)):
                                foreach($unittypes as $list): ?>
                                    <option value="<?php echo $list['UnitId'];?>" <?php if($list['UnitId'] == $ownerDetail['LandAreaUnitId']) echo 'selected'; else echo '';?>><?php echo $list['UnitName']; ?></option>
                                <?php endforeach;
                            else: echo $selectUnit;
                            endif;?>
                        </select>
                    </div>
                    <div class="clearfix"></div>
                </div></td>
            <td width="4%" align="center"><ul class="action_btns">
                    <li> <a href="#" class="deleteOwnerDetails_<?php echo $i;?>" style="margin-right: 10px;" onclick="deleteMainTr(this, event);"><i class="fa fa-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete" ></i></a> </li>
                    <li> <a href="#" class="mainTr"> <i class="fa fa-chevron-circle-down" data-toggle="tooltip" data-placement="top" data-original-title="Expand" ></i></a> </li>
                </ul></td>
        </tr>
        <!--expand table-->
        <tr style="display:none;" class="subTr">
            <td colspan="9" style="padding:0px !important; "><div class="subDiv" style="display:none;">
                    <div class="col-lg-12">
                        <div class="table-responsive topsp">
                            <table class="table tableWithFloatingHeader" style=" margin-bottom:0px;">
                                <thead>
                                <tr>
                                    <th>Father Name</th>
                                    <th>DOB</th>
                                    <th>Contact No</th>
                                    <th>Passport No</th>
                                    <th>PAN No</th>
                                    <th>NRI</th>
                                    <th>Purchase Type</th>
                                    <th>&nbsp;</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td width="15%"><input class="parent_text" type="text" name="workinfo_<?php echo $i;?>_fathername" id="workinfo_<?php echo $i;?>_fathername" maxlength="155" value="<?php echo $ownerDetail['FatherName'];?>" /></td>
                                    <td width="12%"><input class="parent_text date_picker" type="text" placeholder="DD-MM-YYYY" name="workinfo_<?php echo $i;?>_dob" id="workinfo_<?php echo $i;?>_dob" value="<?php echo date('d-m-Y', strtotime($ownerDetail['DOB']));?>" onchange="validateDate(this)" /></td>
                                    <td width="17%"><input class="parent_text" type="text" name="workinfo_<?php echo $i;?>_contactno" id="workinfo_<?php echo $i;?>_contactno" maxlength="20" onkeypress="return contactKeyPress(event,this)" onchange="validateContactNo(this)"  value="<?php echo $ownerDetail['ContactNo'];?>" /></td>
                                    <td width="17%"><input class="parent_text" type="text" name="workinfo_<?php echo $i;?>_passportno" id="workinfo_<?php echo $i;?>_passportno" onkeypress="return alphaNumeric(event);" onblur="return passjsvalidation(this.value);" maxlength="10" value="<?php echo $ownerDetail['PassportNo'];?>" /></td>
                                    <td width="16%"><input class="parent_text" type="text" name="workinfo_<?php echo $i;?>_panno" id="workinfo_<?php echo $i;?>_panno" onblur="return panjsvalidation(this.value);" onkeypress="return alphaNumeric(event);" maxlength="10" value="<?php echo $ownerDetail['PanNo'];?>" /></td>
                                    <td width="4"><div class="radio_check clear">
                                            <p>
                                                <input type="checkbox" <?php if($ownerDetail['NRI']=='1') echo "checked"; else '';?> value="1" name="workinfo_<?php echo $i;?>_NRI" id="workinfo_<?php echo $i;?>_NRI" />
                                                <label for="workinfo_<?php echo $i;?>_NRI" class="ripple"></label>
                                            </p>
                                        </div>
                                    </td>
                                    <td width="16%"><select class="parent_text" data-size="6" title="Sale Type" name="workinfo_<?php echo $i;?>_purchasetype" id="workinfo_<?php echo $i;?>_purchasetype">
                                            <?php if(isset($saletypelists)):
                                                foreach($saletypelists as $list): ?>
                                                    <option value="<?php echo $list['SaleTypeId']; ?>" <?php echo (isset($landInitial) && $list['SaleTypeId'] == $ownerDetail['PurchaseTypeId']) ? 'selected' : ''; ?>><?php echo $list['SaleTypeName']; ?></option>
                                                <?php endforeach; endif;?>
                                        </select></td>
                                    <td width="3%" align="center"><ul class="action_btns">
                                            <li> <a href="#" class="mainTr"> <i class="fa fa-chevron-circle-down" data-toggle="tooltip" data-placement="top" data-original-title="Expand" ></i></a> </li>
                                        </ul></td>
                                </tr>
                                <!--expand table-->
                                <tr style="display:none;" class="subTr">
                                    <td colspan="9" style="padding:0px !important; "><div class="subDiv" style="display:none;">
                                            <!-- Nav tabs -->
                                            <div class="table-responsive">
                                                <table style=" margin-bottom:0px;background:#E8FAFD!important; " class="table">
                                                    <tbody>
                                                    <tr>
                                                        <td style="padding:0px !important; border:none;" colspan="9"><div>
                                                                <div style=" margin-top:10px;" class="col-lg-12">
                                                                    <ul class="nav nav-tabs navs-tabs">
                                                                        <li class="active"><a href="#owner_<?php echo $i;?>" data-toggle="tab" aria-expanded="true">Co Owner Details</a></li>
                                                                        <li class=""><a href="#landinfo_<?php echo $i;?>" data-toggle="tab" aria-expanded="false">Land Information</a></li>
                                                                        <li class=""><a href="#prevowner_<?php echo $i;?>" data-toggle="tab" aria-expanded="false">Previous Owner Details</a></li>
                                                                    </ul>
                                                                </div>
                                                                <div class="tab-content">
                                                                    <div class="tab-pane fade active in" id="owner_<?php echo $i;?>">
                                                                        <div class="col-lg-12">
                                                                            <div class="table-responsive topsp">
                                                                                <table style=" margin-bottom:0px;" class="table tableWithFloatingHeader">
                                                                                    <thead>
                                                                                    <tr>
                                                                                        <th class="bg_clo">Co Owner Name</th>
                                                                                        <th class="bg_clo">Father Name</th>
                                                                                        <th class="bg_clo">DOB</th>
                                                                                        <th class="bg_clo">Co Owner Address</th>
                                                                                        <th class="bg_clo">Contact No</th>
                                                                                        <th class="bg_clo">Passport No</th>
                                                                                        <th class="bg_clo">Pan No</th>
                                                                                        <th class="bg_clo">NRI</th>
                                                                                        <th class="bg_clo">Relationship with Owner</th>
                                                                                        <th class="bg_clo">&nbsp;</th>
                                                                                    </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                    <?php $j=0; if(isset($landInitialCoOwnerDetail) && sizeof($landInitialCoOwnerDetail)>0  ):
                                                                                        foreach($landInitialCoOwnerDetail as $coOwnerDetail):
                                                                                            if($ownerDetail['OwnerId'] != $coOwnerDetail['OwnerId'])
                                                                                                continue;$j++;?>
                                                                                            <tr>
                                                                                                <td width="10%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_co_coownername_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_coownername_<?php echo $j;?>" onchange="addSubTr(this)" maxlength="155" value="<?php echo $coOwnerDetail['CoOwnerName'];?>"></td>
                                                                                                <td width="10%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_co_fathername_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_fathername_<?php echo $j;?>" maxlength="155" value="<?php echo $coOwnerDetail['FatherName'];?>" onchange="addSubTr(this)"></td>
                                                                                                <td width="10%"><input type="text" class="parent_text date_picker"  name="workinfo_<?php echo $i;?>_co_dob_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_dob_<?php echo $j;?>" placeholder="DD-MM-YYYY" value="<?php echo date('d-m-Y', strtotime($coOwnerDetail['DOB']));?>" onchange="validateDate(this)"></td>
                                                                                                <td width="15%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_co_coowneraddress_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_coowneraddress_<?php echo $j;?>" onchange="addSubTr(this)" onchange="addres(this)" maxlength="155" value="<?php echo $coOwnerDetail['CoOwnerAddress'];?>"></td>
                                                                                                <td width="12%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_co_contactno_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_contactno_<?php echo $j;?>" maxlength="20" value="<?php echo $coOwnerDetail['ContactNo'];?>" onkeypress="return contactKeyPress(event,this)" onchange="validateContactNo(this)"></td>
                                                                                                <td width="12%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_co_passportno_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_passportno_<?php echo $j;?>" onblur="return passjsvalidation(this.value);" onkeypress="return alphaNumeric(event);"  maxlength="10" value="<?php echo $coOwnerDetail['PassportNo'];?>"></td>
                                                                                                <td width="12%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_co_panno_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_panno_<?php echo $j;?>" onkeypress="return alphaNumeric(event);" onblur="return panjsvalidation(this.value);" maxlength="10" value="<?php echo $coOwnerDetail['PanNo'];?>"></td>
                                                                                                <td width=4><div class="radio_check clear">
                                                                                                        <p>
                                                                                                            <input type="checkbox"  <?php if($coOwnerDetail['CNRI']=='1') echo "checked"; else '';?> value="1" name="workinfo_<?php echo $i;?>_co_NRI_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_NRI_<?php echo $j;?>" />
                                                                                                            <label for="workinfo_<?php echo $i;?>_co_NRI_<?php echo $j;?>" class="ripple"></label>
                                                                                                        </p>
                                                                                                    </div>
                                                                                                </td>
                                                                                                <td width="12%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_co_relationship_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_relationship_<?php echo $j;?>" maxlength="20" value="<?php echo $coOwnerDetail['RelationshipWithOwner'];?>" onchange="addSubTr(this)"></td>
                                                                                                <td width="3%" align="center"><ul class="action_btns">
                                                                                                        <li><a href="#" class="workinfo_<?php echo $i;?>_co_subTrDelete_<?php echo $j;?>" onclick="deleteSubTr(this, event);" class="subTrDelete" style="margin-right: 10px;"><i class="fa fa-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete" ></i></a></li>
                                                                                                    </ul></td>
                                                                                            </tr>
                                                                                            <?php endforeach; ?>
                                                                                    <?php endif;
                                                                                    $j++;?>
                                                                                    <tr>
                                                                                        <td width="10%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_co_coownername_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_coownername_<?php echo $j;?>" onchange="addSubTr(this)" maxlength="155" value=""></td>
                                                                                        <td width="10%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_co_fathername_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_fathername_<?php echo $j;?>" maxlength="155" value="" onchange="addSubTr(this)"></td>
                                                                                        <td width="10%"><input type="text" class="parent_text date_picker"  name="workinfo_<?php echo $i;?>_co_dob_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_dob_<?php echo $j;?>" placeholder="DD-MM-YYYY" value="" onchange="validateDate(this)"></td>
                                                                                        <td width="15%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_co_coowneraddress_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_coowneraddress_<?php echo $j;?>" onchange="addres(this)" onchange="addSubTr(this)" maxlength="155" value=""></td>
                                                                                        <td width="12%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_co_contactno_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_contactno_<?php echo $j;?>" maxlength="20" value="" onkeypress="return contactKeyPress(event,this)" onchange="validateContactNo(this)"></td>
                                                                                        <td width="12%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_co_passportno_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_passportno_<?php echo $j;?>" onblur="return passjsvalidation(this.value);" onkeypress="return alphaNumeric(event);"  maxlength="10" value=""></td>
                                                                                        <td width="12%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_co_panno_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_panno_<?php echo $j;?>" onkeypress="return alphaNumeric(event);" onblur="return panjsvalidation(this.value);" maxlength="10" value=""></td>
                                                                                        <td width="4"><div class="radio_check clear">
                                                                                                <p>
                                                                                                    <input type="checkbox" value="1"  name="workinfo_<?php echo $i;?>_co_NRI_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_NRI_<?php echo $j;?>" />
                                                                                                    <label for="workinfo_<?php echo $i;?>_co_NRI_<?php echo $j;?>" class="ripple"></label>
                                                                                                </p>
                                                                                            </div>
                                                                                        </td>
                                                                                        <td width="12%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_co_relationship_<?php echo $j;?>" id="workinfo_<?php echo $i;?>_co_relationship_<?php echo $j;?>" maxlength="20" value="" onchange="addSubTr(this)"></td>
                                                                                        <td width="3%" align="center"><ul class="action_btns">
                                                                                                <li><a href="#" class="workinfo_<?php echo $i;?>_co_subTrDelete_<?php echo $j;?>" onclick="deleteSubTr(this, event);" class="subTrDelete" style="margin-right: 10px;"><i class="fa fa-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete" ></i></a></li>
                                                                                            </ul></td>
                                                                                    </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                                <input type="hidden" name="coownerid_<?php echo $i;?>" id="coownerid_<?php echo $i;?>" value="<?php echo $j;?>">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="tab-pane fade" id="landinfo_<?php echo $i;?>">
                                                                        <div class="col-lg-12">
                                                                            <div class="table-responsive topsp">
                                                                                <table style=" margin-bottom:0px;" class="table tableWithFloatingHeader">
                                                                                    <thead>
                                                                                    <tr>
                                                                                        <th class="bg_clo">Patta No</th>
                                                                                        <th class="bg_clo">Patta Name</th>
                                                                                        <th class="bg_clo">Area</th>
                                                                                    </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                    <tr>
                                                                                        <td width="5%"><input class="parent_text" name="workinfo_<?php echo $i;?>_pattano" id="workinfo_<?php echo $i;?>_pattano" maxlength="50" value="<?php echo $ownerDetail['PattaNo'];?>"></td>
                                                                                        <td width="10%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_pattaname" id="workinfo_<?php echo $i;?>_pattaname" maxlength="155" value="<?php echo $ownerDetail['PattaName'];?>"></td>
                                                                                        <td width="5%"><div class="input-grouping">
                                                                                                <input class="parent_text" type="text" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" name="workinfo_<?php echo $i;?>_area" id="workinfo_<?php echo $i;?>_area" value="<?php echo $ownerDetail['Area'];?>" />
                                                                                                <div class="input-group-btn select-style" style="top: 0;">
                                                                                                    <select name="workinfo_<?php echo $i;?>_areaunitid" id="workinfo_<?php echo $i;?>_areaunitid">
                                                                                                        <?php if(isset($unittypes)):
                                                                                                            foreach($unittypes as $list): ?>
                                                                                                                <option value="<?php echo $list['UnitId'];?>" <?php echo ($list['UnitId'] == $ownerDetail['AreaUnitId']) ? 'selected' : '';?>><?php echo $list['UnitName']; ?></option>
                                                                                                            <?php endforeach;
                                                                                                        else: echo $selectUnit;
                                                                                                        endif;?>
                                                                                                    </select>
                                                                                                </div>
                                                                                                <div class="clearfix"></div>
                                                                                            </div></td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td colspan="4"><div class="col-lg-12">
                                                                                                <div class="col-lg-12 tap_work">
                                                                                                    <ul>
                                                                                                        <li>
                                                                                                            <label>East Side Details</label>
                                                                                                            <input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_eastdetail" id="workinfo_<?php echo $i;?>_eastdetail" maxlength="255" value="<?php echo $ownerDetail['EastSideDetail'];?>">
                                                                                                        </li>
                                                                                                        <li>
                                                                                                            <label>West Side Details</label>
                                                                                                            <input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_westdetail" id="workinfo_<?php echo $i;?>_westdetail" maxlength="255" value="<?php echo $ownerDetail['WestSideDetail'];?>">
                                                                                                        </li>
                                                                                                        <li>
                                                                                                            <label>North Side Details</label>
                                                                                                            <input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_northdetail" id="workinfo_<?php echo $i;?>_northdetail" maxlength="255" value="<?php echo $ownerDetail['NorthSideDetail'];?>">
                                                                                                        </li>
                                                                                                        <li>
                                                                                                            <label>South Side Details</label>
                                                                                                            <input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_southdetail" id="workinfo_<?php echo $i;?>_southdetail" maxlength="255" value="<?php echo $ownerDetail['SouthSideDetail'];?>">
                                                                                                        </li>
                                                                                                    </ul>
                                                                                                </div>
                                                                                            </div></td>
                                                                                    </tr>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="tab-pane fade" id="prevowner_<?php echo $i;?>">
                                                                        <div class="col-lg-12">
                                                                            <div class="table-responsive topsp">
                                                                                <table style=" margin-bottom:0px;" class="table tableWithFloatingHeader">
                                                                                    <thead>
                                                                                    <tr>
                                                                                        <th class="bg_clo">Prev. Owner Name</th>
                                                                                        <th class="bg_clo">Father Name</th>
                                                                                        <th class="bg_clo">DOB</th>
                                                                                        <th class="bg_clo">Contact No</th>
                                                                                        <th class="bg_clo">Passport No</th>
                                                                                        <th class="bg_clo">PAN No</th>
                                                                                        <th class="bg_clo">&nbsp;</th>
                                                                                    </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                    <?php $k=0; if(isset($landInitialPrevOwnerDetail) && sizeof($landInitialPrevOwnerDetail)>0):
                                                                                    foreach($landInitialPrevOwnerDetail as $poOwnerDetail):
                                                                                        if($ownerDetail['OwnerId'] != $poOwnerDetail['OwnerId'])
                                                                                             continue;$k++;?>
                                                                                    <tr>
                                                                                        <td width="8%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_po_prevownername_<?php echo $k;?>" id="workinfo_<?php echo $i;?>_po_prevownername_<?php echo $k;?>" onchange="addPrevOwnerSubTr(this)" value="<?php echo $poOwnerDetail['PrevOwnerName'];?>" maxlength="155"></td>
                                                                                        <td width="8%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_po_fathername_<?php echo $k;?>" id="workinfo_<?php echo $i;?>_po_fathername_<?php echo $k;?>" onchange="addPrevOwnerSubTr(this)" value="<?php echo $poOwnerDetail['PrevFatherName'];?>" maxlength="155"></td>
                                                                                        <td width="5%"><input type="text" class="parent_text date_picker" readonly placeholder="DD-MM-YYYY" name="workinfo_<?php echo $i;?>_po_dob_<?php echo $k;?>" id="workinfo_<?php echo $i;?>_po_dob_<?php echo $k;?>" value="<?php echo $poOwnerDetail['PrevDOB'];?>" ></td>
                                                                                        <td width="5%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_po_contactno_<?php echo $k;?>" id="workinfo_<?php echo $i;?>_po_contactno_<?php echo $k;?>" maxlength="20" onkeypress="return contactKeyPress(event,this)" value="<?php echo $poOwnerDetail['PrevContactNo'];?>" onchange="validateContactNo(this)" ></td>
                                                                                        <td width="5%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_po_passportno_<?php echo $k;?>" id="workinfo_<?php echo $i;?>_po_passportno_<?php echo $k;?>" onblur="return passjsvalidation(this.value);" onkeypress="return alphaNumeric(event);" value="<?php echo $poOwnerDetail['PrevPassportNo'];?>" maxlength="10"></td>
                                                                                        <td width="5%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_po_panno_<?php echo $k;?>" id="workinfo_<?php echo $i;?>_po_panno_<?php echo $k;?>" onkeypress="return alphaNumeric(event);" onblur="return panjsvalidation(this.value);" value="<?php echo $poOwnerDetail['PrevPanNo'];?>" maxlength="10"></td>
                                                                                        <td width="3%" align="center"><ul class="action_btns">
                                                                                                <li> <a href="#" id="workinfo_<?php echo $i;?>_po_delete_<?php echo $k;?>" onclick="deletePrevOwnerSubTr(this, event);" class="subTrDelete" style="margin-right: 10px;"><i class="fa fa-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete" ></i></a></li>
                                                                                            </ul></td>
                                                                                    </tr>
                                                                                    <?php endforeach; ?>
                                                                                    <?php endif;
                                                                                    $k++; ?>
                                                                                    <tr>
                                                                                        <td width="8%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_po_prevownername_<?php echo $k;?>" id="workinfo_<?php echo $i;?>_po_prevownername_<?php echo $k;?>" onchange="addPrevOwnerSubTr(this)" maxlength="155"></td>
                                                                                        <td width="8%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_po_fathername_<?php echo $k;?>" id="workinfo_<?php echo $i;?>_po_fathername_<?php echo $k;?>" onchange="addPrevOwnerSubTr(this)" maxlength="155"></td>
                                                                                        <td width="5%"><input type="text" class="parent_text date_picker" readonly placeholder="DD-MM-YYYY" name="workinfo_<?php echo $i;?>_po_dob_<?php echo $k;?>" id="workinfo_<?php echo $i;?>_po_dob_<?php echo $k;?>"></td>
                                                                                        <td width="5%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_po_contactno_<?php echo $k;?>" id="workinfo_<?php echo $i;?>_po_contactno_<?php echo $k;?>" maxlength="20" onkeypress="return contactKeyPress(event,this)" onchange="validateContactNo(this)" ></td>
                                                                                        <td width="5%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_po_passportno_<?php echo $k;?>" id="workinfo_<?php echo $i;?>_po_passportno_<?php echo $k;?>" onblur="return passjsvalidation(this.value);" onkeypress="return alphaNumeric(event);"  maxlength="10"></td>
                                                                                        <td width="5%"><input type="text" class="parent_text" name="workinfo_<?php echo $i;?>_po_panno_<?php echo $k;?>" id="workinfo_<?php echo $i;?>_po_panno_<?php echo $k;?>" onkeypress="return alphaNumeric(event);" onblur="return panjsvalidation(this.value);" maxlength="10"></td>
                                                                                        <td width="3%" align="center"><ul class="action_btns">
                                                                                                <li> <a href="#" id="workinfo_<?php echo $i;?>_po_delete_1" onclick="deletePrevOwnerSubTr(this, event);" class="subTrDelete" style="margin-right: 10px;"><i class="fa fa-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete" ></i></a></li>
                                                                                            </ul></td>
                                                                                    </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                                <input type="hidden" name="prevownerid_<?php echo $i;?>" id="prevownerid_<?php echo $i;?>" value="<?php echo $k;?>">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div></td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!-- Tab panes -->
                                        </div
                                            ></td>
                                </tr>
                                <!--expand end-->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div></td>
        </tr>
        <?php  endforeach; else: ?>
    <tr>
        <td width="10%"><input class="parent_text" type="text" name="surveyno_1" id="surveyno_1" onchange="addMainTr(this)" maxlength="50"/></td>
        <td width="15%"><input class="parent_text" type="text" name="ownername_1" id="ownername_1" maxlength="155" onchange="addMainTr(this)" /></td>
        <td width="15%"><input class="parent_text" type="text" name="owneraddress_1" id="owneraddress_1" maxlength="155" onchange="addres(this)" onchange="addMainTr(this)" /></td>
        <td width="10%"><div class="input-grouping">
                <input class="parent_text text-right" type="text" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" style="text-align:right;" name="landarea_1" id="landarea_1" onchange="addMainTr(this)" />
                <div class="input-group-btn select-style" style="top: 0; border-left:none !important;">
                    <select name="landareaunitid_1" id="landareaunitid_1">
                        <?php echo $selectUnit; ?>
                    </select>
                </div>
                <div class="clearfix"></div>
            </div></td>
        <td width="3%" align="center"><ul class="action_btns">
                <li><a href="#" class="mainTrDelete_1" style="margin-right: 10px; display: none;" onclick="deleteMainTr(this, event);"><i class="fa fa-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete" ></i></a> </li>
                <li><a href="#" class="mainTr"> <i class="fa fa-chevron-circle-down" data-toggle="tooltip" data-placement="top" data-original-title="Expand" ></i></a></li>
            </ul></td>
    </tr>
    <!--expand table-->
    <tr style="display:none;" class="subTr">
        <td colspan="9" style="padding:0px !important; "><div class="subDiv" style="display:none;">
                <div class="col-lg-12">
                    <div class="table-responsive topsp">
                        <table class="table tableWithFloatingHeader" style=" margin-bottom:0px;">
                            <thead>
                            <tr>
                                <th>Father Name<?php echo"ashh";?></th>
                                <th>DOB</th>
                                <th>Contact No</th>
                                <th>Passport No</th>
                                <th>PAN No</th>
                                <th>NRI</th>
                                <th>Purchase Type</th>
                                <th>&nbsp;</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td width="15%"><input class="parent_text" type="text" name="workinfo_1_fathername" id="workinfo_1_fathername" maxlength="155" /></td>
                                <td width="12%"><input class="parent_text date_picker" type="text" readonly placeholder="DD-MM-YYYY" name="workinfo_1_dob" id="workinfo_1_dob" value="<?php echo $Date;?>" onchange="validateDate(this)" /></td>
                                <td width="17%"><input class="parent_text" type="text" name="workinfo_1_contactno" id="workinfo_1_contactno" maxlength="20" onkeypress="return contactKeyPress(event,this)" onchange="validateContactNo(this)" /></td>
                                <td width="17%"><input class="parent_text" type="text" name="workinfo_1_passportno" id="workinfo_1_passportno" onkeypress="return alphaNumeric(event);" onblur="return passjsvalidation(this.value);" maxlength="10" /></td>
                                <td width="17%"><input class="parent_text" type="text" name="workinfo_1_panno" id="workinfo_1_panno" onkeypress="return alphaNumeric(event);" onblur="return panjsvalidation(this.value);" maxlength="10" /></td>
                                <td width="4"><div class="radio_check clear">
                                        <p>
                                            <input type="checkbox" value="1" name="workinfo_1_NRI" id="workinfo_1_NRI" />
                                            <label for="workinfo_1_NRI" class="ripple"></label>
                                        </p>
                                    </div>
                                </td>
                                <td width="16%">
                                    <div class="select-style"><select data-size="6" title="Sale Type" name="workinfo_1_purchasetype" id="workinfo_1_purchasetype">
                                            <?php echo $selectSaleType; ?>
                                        </select></div></td>
                                <td width="3%" align="center"><ul class="action_btns">
                                        <li><a href="#" class="mainTr"> <i class="fa fa-chevron-circle-down" data-toggle="tooltip" data-placement="top" data-original-title="Expand" ></i></a></li>
                                    </ul></td>
                            </tr>
                            <!--expand table-->
                            <tr style="display:none;" class="subTr">
                                <td colspan="9" style="padding:0px !important; "><div class="subDiv" style="display:none;">
                                        <!-- Nav tabs -->
                                        <div class="table-responsive">
                                            <table style=" margin-bottom:0px;background:#E8FAFD!important; " class="table">
                                                <tbody>
                                                <tr>
                                                    <td style="padding:0px !important; border:none;" colspan="9"><div>
                                                            <div style=" margin-top:10px;" class="col-lg-12">
                                                                <ul class="nav nav-tabs navs-tabs">
                                                                    <li class="active"><a href="#owner_1" data-toggle="tab" aria-expanded="true">Co Owner Details</a></li>
                                                                    <li class=""><a href="#landinfo_1" data-toggle="tab" aria-expanded="false">Land Information</a></li>
                                                                    <li class=""><a href="#prevowner_1" data-toggle="tab" aria-expanded="false">Previous Owner Details</a></li>
                                                                </ul>
                                                            </div>
                                                            <div class="tab-content">
                                                                <div class="tab-pane fade active in" id="owner_1">
                                                                    <div class="col-lg-12">
                                                                        <div class="table-responsive topsp">
                                                                            <table style=" margin-bottom:0px;" class="table tableWithFloatingHeader">
                                                                                <thead>
                                                                                <tr>
                                                                                    <th class="bg_clo">Co Owner Name</th>
                                                                                    <th class="bg_clo">Father Name</th>
                                                                                    <th class="bg_clo">DOB</th>
                                                                                    <th class="bg_clo">CO Owner Address</th>
                                                                                    <th class="bg_clo">Contact No</th>
                                                                                    <th class="bg_clo">Passport No</th>
                                                                                    <th class="bg_clo">PAN No</th>
                                                                                    <th class="bg_clo">NRI</th>
                                                                                    <th class="bg_clo">Relationship with Owner</th>
                                                                                    <th class="bg_clo">&nbsp;</th>
                                                                                </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                <tr>
                                                                                    <td width="10%"><input type="text" class="parent_text" name="workinfo_1_co_coownername_1" id="workinfo_1_co_coownername_1" onchange="addSubTr(this)" maxlength="155"></td>
                                                                                    <td width="10%"><input type="text" class="parent_text" name="workinfo_1_co_fathername_1" id="workinfo_1_co_fathername_1" maxlength="155" onchange="addSubTr(this)"></td>
                                                                                    <td width="10%"><input type="text" class="parent_text date_picker" placeholder="DD-MM-YYYY" name="workinfo_1_co_dob_1" id="workinfo_1_co_dob_1" onchange="validateDate(this)"></td>
                                                                                    <td width="15%"><input type="text" class="parent_text" name="workinfo_1_co_coowneraddress_1" id="workinfo_1_co_coowneraddress_1" onchange="addSubTr(this)" onchange="addres(this)" maxlength="155"></td>
                                                                                    <td width="12%"><input type="text" class="parent_text" name="workinfo_1_co_contactno_1" id="workinfo_1_co_contactno_1" maxlength="20" onkeypress="return contactKeyPress(event,this)" onchange="validateContactNo(this)"></td>
                                                                                    <td width="12%"><input type="text" class="parent_text" name="workinfo_1_co_passportno_1" id="workinfo_1_co_passportno_1" onkeypress="return alphaNumeric(event);" onblur="return passjsvalidation(this.value);" maxlength="10"></td>
                                                                                    <td width="12%"><input type="text" class="parent_text" name="workinfo_1_co_panno_1" id="workinfo_1_co_panno_1" onkeypress="return alphaNumeric(event);" onblur="return panjsvalidation(this.value);" maxlength="10"></td>
                                                                                    <td width="4"><div class="radio_check clear">
                                                                                            <p>
                                                                                                <input type="checkbox" value="1" name="workinfo_1_co_NRI_1" id="workinfo_1_co_NRI_1" />
                                                                                                <label for="workinfo_1_co_NRI_1" class="ripple"></label>
                                                                                            </p>
                                                                                        </div>
                                                                                    </td>
                                                                                    <td width="12%"><input type="text" class="parent_text" name="workinfo_1_co_relationship_1" id="workinfo_1_co_relationship_1" maxlength="20" onchange="addSubTr(this)"></td>
                                                                                    <td width="3%" align="center"><ul class="action_btns">
                                                                                            <li> <a href="#" class="workinfo_1_co_subTrDelete_1 subTrDelete" onclick="deleteSubTr(this, event);" style="margin-right: 10px; display: none;"><i class="fa fa-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete" ></i></a> </li>
                                                                                        </ul></td>
                                                                                </tr>
                                                                                </tbody>
                                                                            </table>
                                                                            <input type="hidden" name="coownerid_1" id="coownerid_1" value="1">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="tab-pane fade" id="landinfo_1">
                                                                    <div class="col-lg-12">
                                                                        <div class="table-responsive topsp">
                                                                            <table style=" margin-bottom:0px;" class="table tableWithFloatingHeader">
                                                                                <thead>
                                                                                <tr>
                                                                                    <th class="bg_clo">Patta No</th>
                                                                                    <th class="bg_clo">Patta Name</th>
                                                                                    <th class="bg_clo">Area</th>
                                                                                </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                <tr>
                                                                                    <td width="5%"><input class="parent_text" name="workinfo_1_pattano" id="workinfo_1_pattano" maxlength="50"></td>
                                                                                    <td width="10%"><input type="text" class="parent_text" name="workinfo_1_pattaname" id="workinfo_1_pattaname" maxlength="155"></td>
                                                                                    <td width="5%"><div class="input-grouping">
                                                                                            <input class="parent_text" type="text" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" name="workinfo_1_area" id="workinfo_1_area" />
                                                                                            <div class="input-group-btn select-style" style="top: 0;">
                                                                                                <select name="workinfo_1_areaunitid" id="workinfo_1_areaunitid">
                                                                                                    <?php echo $selectUnit; ?>
                                                                                                </select>
                                                                                            </div>
                                                                                            <div class="clearfix"></div>
                                                                                        </div></td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td colspan="4"><div class="col-lg-12">
                                                                                            <div class="col-lg-12 tap_work">
                                                                                                <ul>
                                                                                                    <li>
                                                                                                        <label>East Side Details</label>
                                                                                                        <input type="text" class="parent_text" name="workinfo_1_eastdetail" id="workinfo_1_eastdetail" maxlength="255">
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <label>West Side Details</label>
                                                                                                        <input type="text" class="parent_text" name="workinfo_1_westdetail" id="workinfo_1_westdetail" maxlength="255">
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <label>North Side Details</label>
                                                                                                        <input type="text" class="parent_text" name="workinfo_1_northdetail" id="workinfo_1_northdetail" maxlength="255">
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <label>South Side Details</label>
                                                                                                        <input type="text" class="parent_text" name="workinfo_1_southdetail" id="workinfo_1_southdetail" maxlength="255">
                                                                                                    </li>
                                                                                                </ul>
                                                                                            </div>
                                                                                        </div></td>
                                                                                </tr>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="tab-pane fade" id="prevowner_1">
                                                                    <div class="col-lg-12">
                                                                        <div class="table-responsive topsp">
                                                                            <table style=" margin-bottom:0px;" class="table tableWithFloatingHeader">
                                                                                <thead>
                                                                                <tr>
                                                                                    <th class="bg_clo">Prev. Owner Name</th>
                                                                                    <th class="bg_clo">Father Name</th>
                                                                                    <th class="bg_clo">DOB</th>
                                                                                    <th class="bg_clo">Contact No</th>
                                                                                    <th class="bg_clo">Passport No</th>
                                                                                    <th class="bg_clo">PAN No</th>
                                                                                    <th class="bg_clo">&nbsp;</th>
                                                                                </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                <tr>
                                                                                    <td width="8%"><input type="text" class="parent_text" name="workinfo_1_po_prevownername_1" id="workinfo_1_po_prevownername_1" onchange="addPrevOwnerSubTr(this)" maxlength="155"></td>
                                                                                    <td width="8%"><input type="text" class="parent_text" name="workinfo_1_po_fathername_1" id="workinfo_1_po_fathername_1" onchange="addPrevOwnerSubTr(this)" maxlength="155"></td>
                                                                                    <td width="8%"><input type="text" class="parent_text date_picker" placeholder="DD-MM-YYYY" readonly name="workinfo_1_po_dob_1" id="workinfo_1_po_dob_1"></td>
                                                                                    <td width="5%"><input type="text" class="parent_text" name="workinfo_1_po_contactno_1" id="workinfo_1_po_contactno_1" maxlength="20" onkeypress="return contactKeyPress(event,this)" onchange="validateContactNo(this)"></td>
                                                                                    <td width="5%"><input type="text" class="parent_text" name="workinfo_1_po_passportno_1" id="workinfo_1_po_passportno_1" onkeypress="return alphaNumeric(event);"  onblur="return passjsvalidation(this.value);" maxlength="10"></td>
                                                                                    <td width="5%"><input type="text" class="parent_text" name="workinfo_1_po_panno_1" id="workinfo_1_po_panno_1" onkeypress="return alphaNumeric(event);" onblur="return panjsvalidation(this.value);" maxlength="10"></td>
                                                                                    <td width="3%" align="center"><ul class="action_btns">
                                                                                            <li> <a href="#" id="workinfo_1_po_delete_1" onclick="deletePrevOwnerSubTr(this, event);" class="subTrDelete" style="margin-right: 10px;"><i class="fa fa-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete" ></i></a></li>
                                                                                        </ul></td>
                                                                                </tr>
                                                                                </tbody>
                                                                            </table>
                                                                            <input type="hidden" name="prevownerid_1" id="prevownerid_1" value="1">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <!-- Tab panes -->
                                    </div></td>
                            </tr>
                            <!--expand end-->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div></td>
    </tr>
<?php endif; ?>
<!--expand end-->
</tbody>
</tbody>

</table>
<input type="hidden" name="OwnerId" id="OwnerId" value="<?php echo (isset($landInitialOwnerDetail) && count($landInitialOwnerDetail) != 0) ? count($landInitialOwnerDetail) : 1; ?>">
</div>
<div class="cont_bt col-lg-5 col-lg-offset-7 col-md-9 col-md-offset-3 col-sm-7 col-sm-offset-3 col-xs-7 col-xs-offset-4">
    <ul>
        <li style="padding-top:10px;"><a href="javascript:nextAccordian(6)">Continue &nbsp;<i class="fa fa-chevron-circle-right"></i></a></li>
    </ul>
</div>
</div>
</div>
</div>
<div class="panel panel-info">
    <div data-target="#collapsesix" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-6">
        <h4 class="panel-title accordion-toggle defa_panels">Joint Ventures</h4>
    </div>
    <div class="panel-collapse collapse" id="collapsesix" style="height: 0px;">
        <div class="panel-body bgcolr">
            <div class="table-responsive topsp" style="margin-top:10px;">
                <table class="table tableWithFloatingHeader" style=" margin-bottom:0px;">
                    <thead>
                    <tr>
                        <th>Share Type</th>
                        <th>Area</th>
                        <th>Percentage</th>
                        <th class="text-right">Amount</th>
                        <th>&nbsp;</th>
                    </tr>
                    </thead>
                    <tbody>
                    <?php if(isset($landInitialJVShare) && count($landInitialJVShare) != 0): $i=1;
                        foreach($landInitialJVShare as $jvShare): ?>
                            <tr>
                                <td width="10%"><input class="parent_text" type="text" name="shareType_<?php echo $i; ?>" id="shareType_<?php echo $i; ?>" maxlength="155" value="<?php echo $jvShare['ShareTypeName']; ?>" onblur="addNewShareTypeRow(this)" />
                                    <input type="hidden" name="shareTypeId_<?php echo $i; ?>" id="shareTypeId_<?php echo $i; ?>" value="<?php echo $jvShare['Type'];?>" /></td>
                                <td width="10%"><div class="input-grouping">
                                        <input class="parent_text" type="text" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" onchange="addNewShareTypeRow(this)" maxlength="18" style="text-align:right;" name="shareArea_<?php echo $i; ?>" id="shareArea_<?php echo $i; ?>" value="<?php echo $jvShare['Area'];?>" />
                                        <div class="input-group-btn select-style" style="top: 0;">
                                            <select  name="shareAreaUnitId_<?php echo $i; ?>" id="shareAreaUnitId_<?php echo $i; ?>">
                                                <?php if(isset($unittypes) && isset($landInitial)):
                                                    foreach($unittypes as $list): ?>
                                                        <option value="<?php echo $list['UnitId'];?>" <?php echo ($list['UnitId'] == $jvShare['AreaUnitId']) ? 'selected' : '';?>><?php echo $list['UnitName']; ?></option>
                                                    <?php endforeach;
                                                else: echo $selectUnit;
                                                endif;?>
                                            </select>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                <td width="5%"><input class="parent_text" type="text" name="sharePercentage_<?php echo $i; ?>" style="text-align:right;" id="sharePercentage_<?php echo $i; ?>" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" onchange="addNewShareTypeRow(this)" maxlength="18" value="<?php echo $jvShare['Percentage'];?>" /></td>
                                <td width="5%"><input class="parent_text text-right" type="text" name="shareAmount_<?php echo $i; ?>" id="shareAmount_<?php echo $i; ?>" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" onchange="addNewShareTypeRow(this)" maxlength="18" value="<?php echo $jvShare['Amount'];?>" /></td>
                                <td width="3%"><ul class="action_btns">
                                        <li style="float:left;"> <a href="#" class="deleteShareType_<?php echo $i; ?>"  onclick="deleteShareType(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span></a> </li>
                                    </ul></td>
                            </tr>
                            <?php $i++; endforeach; ?>
                        <tr class="terms">
                            <td colspan="5"><textarea class="remrk terms" placeholder="Terms and Conditions" name="shareTerms" id="shareTerms"></textarea></td>
                        </tr>
                    <?php else: ?>
                        <tr>
                            <td width="10%"><input class="parent_text" type="text" name="shareType_1" id="shareType_1" maxlength="155" onchange="addNewShareTypeRow(this)" />
                                <input type="hidden" name="shareTypeId_1" id="shareTypeId_1" /></td>
                            <td width="10%"><div class="input-grouping">
                                    <input class="parent_text right-o" type="text" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" onchange="addNewShareTypeRow(this)" style="text-align:right;" maxlength="18" name="shareArea_1" id="shareArea_1">
                                    <div class="input-group-btn select-style" style="top: 0;">
                                        <select name="shareAreaUnitId_1" id="shareAreaUnitId_1" >
                                            <?php echo $selectUnit; ?>
                                        </select>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            <td width="5%"><input class="parent_text" type="text" name="sharePercentage_1" style="text-align:right;" id="sharePercentage_1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" onchange="addNewShareTypeRow(this)" maxlength="18" /></td>
                            <td width="5%"><input class="parent_text text-right" type="text" name="shareAmount_1" id="shareAmount_1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" onchange="addNewShareTypeRow(this)" maxlength="18" /></td>
                            <td width="3%"><ul class="action_btns">
                                    <li style="float:left;"> <a href="#" class="deleteShareType_1" style="display: none;" onclick="deleteShareType(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span></a> </li>
                                </ul></td>
                        </tr>
                        <tr class="terms">
                            <td colspan="5"><textarea class="remrk terms" placeholder="Terms and Conditions" name="shareTerms" id="shareTerms"></textarea></td>
                        </tr>
                    <?php endif; ?>
                    </tbody>
                </table>
                <input type="hidden" name="sharetyperowid" id="sharetyperowid" value="<?php echo (isset($landInitialJVShare) && count($landInitialJVShare) != 0) ? count($landInitialJVShare) : 1; ?>" />
            </div>
            <div class="table-responsive topsp" style="margin-top:10px;">
                <table class="table tableWithFloatingHeader" style=" margin-bottom:0px;">
                    <thead>
                    <tr>
                        <th width="15%">Document Type</th>
                        <th width="15%">Document Description</th>
                        <th width="3%">&nbsp;</th>
                    </tr>
                    </thead>
                    <tbody>
                    <?php if(isset($landInitialJvDocument) && count($landInitialJvDocument) != 0): $i=1;
                        foreach($landInitialJvDocument as $jvDocument): ?>
                            <tr>
                                <td width="15%"><input class="parent_text" type="text" name="joinVentureDocType_<?php echo $i; ?>" id="joinVentureDocType_<?php echo $i; ?>" maxlength="155" onblur="addNewJoinVentureDocRow(this)" value="<?php echo $jvDocument['Type']; ?>" /></td>
                                <td width="15%"><textarea class="parent_texts" name="joinVentureDocDesc_<?php echo $i; ?>" id="joinVentureDocDesc_<?php echo $i; ?>"><?php echo $jvDocument['Description']; ?></textarea></td>
                                <td width="4%" class="action_btns_td"><ul class="action_btns">
                                        <?php if(trim($jvDocument['URL']) !=''){?>
                                        <li style="float:left;"> <a class="mainTr_<?php echo $i; ?>" download href="<?php echo  $this->basePath() . $jvDocument['URL']; ?>"> <span data-toggle="tooltip" data-placement="left" data-original-title="View"><i class="fa fa-eye"></i></span> </a> </li>
                                        <input type="hidden" name="joinVentureDocFile_<?php echo $i; ?>" id="joinVentureDocFile_<?php echo $i; ?>" value="<?php echo $jvDocument['URL'];?>">
                                        <?php }else{?>
                                        <li style="float:left;"> <a href="#"> <span  data-toggle="tooltip" data-placement="left" data-original-title="Documents Attached" class="btn-file butclr_imp"> <i class="fa fa-paperclip dcm_atch"></i>
                                         <input type="file" name="joinVentureDocFile_<?php echo $i;?>" id="joinVentureDocFile_<?php echo $i;?>">
                                        <?php }?>
                                        <li style="float:left;"> <a href="#" onclick="deleteJoinVentureDoc(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                    </ul></td>
                            </tr>
                            <?php $i++; endforeach; else: ?>
                        <tr>
                            <td width="15%"><input class="parent_text" type="text" name="joinVentureDocType_1" id="joinVentureDocType_1" maxlength="155" onchange="addNewJoinVentureDocRow(this)" /></td>
                            <td width="15%"><textarea class="parent_texts" name="joinVentureDocDesc_1" id="joinVentureDocDesc_1"></textarea></td>
                            <td width="4%" class="action_btns_td"><ul class="action_btns">
                                    <li style="float:left;"> <a href="#"> <span  data-toggle="tooltip" data-placement="left" data-original-title="Documents Attached" class="btn-file butclr_imp"> <i class="fa fa-paperclip dcm_atch"></i>
                                <input type="file" name="joinVentureDocFile_1" id="joinVentureDocFile_1">
                                </span> </a> </li>
                                    <!--                            <li style="float:left;"> <a class="mainTr_1" href="#"> <span data-toggle="tooltip" data-placement="left" data-original-title="View"><i class="fa fa-eye"></i></span> </a> </li>-->
                                    <li style="float:left;"> <a href="#" onclick="deleteJoinVentureDoc(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                </ul></td>
                        </tr>
                    <?php endif; ?>
                    </tbody>
                </table>
                <input type="hidden" name="joinventuredocumentrowid" id="joinventuredocumentrowid" value="<?php echo (isset($landInitialJvDocument) && count($landInitialJvDocument) != 0) ? count($landInitialJvDocument) : 1; ?>" />
            </div>
            <div class="col-lg-12">
                <span data-toggle="modal" data-target="#ven-chklist">
                    <a href="javascript:void(0)" data-toggle="tooltip"  data-placement="right" title="Add New Checklist" class="btn_newlist"> <i class="fa fa-plus"></i>  </a>
                </span>
            </div>
            <div class="checklisters clear">
                <ul id="ven-checklist-wrapper"></ul>
                <input type="hidden" name="jvchk-rowid" id="jvchecklist-rowid">
            </div>
            <div class="cont_bt col-lg-5 col-lg-offset-7 col-md-9 col-md-offset-3 col-sm-7 col-sm-offset-3 col-xs-7 col-xs-offset-4">
                <ul style="margin-top:10px;">
                    <li><a href="javascript:nextAccordian(7)">Continue &nbsp;<i class="fa fa-chevron-circle-right"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="panel panel-info">
    <div data-target="#collapseseventh" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-7">
        <h4 class="panel-title accordion-toggle defa_panels">Checklist</h4>
    </div>
    <div class="panel-collapse collapse" id="collapseseventh" style="height: 0px;">
        <div class="panel-body bgcolr">
            <div class="col-lg-12">
                <span data-toggle="modal" data-target="#chklist">
                    <a href="javascript:void(0)" data-toggle="tooltip"  data-placement="right" title="Add New Checklist" class="btn_newlist"> <i class="fa fa-plus"></i>  </a>
                </span>
            </div>
            <div class="checklisters clear">
                <ul id="checklist-wrapper"></ul>
                <input type="hidden" name="chk-rowid" id="checklist-rowid">
            </div>
            <div class="cont_bt col-lg-5 col-lg-offset-7 col-md-9 col-md-offset-3 col-sm-7 col-sm-offset-3 col-xs-7 col-xs-offset-4">
                <ul style="margin-top:10px;">
                    <li><a href="javascript:nextAccordian(8)">Continue &nbsp;<i class="fa fa-chevron-circle-right"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="panel panel-info">
    <div data-target="#collapseeight" data-parent="#accordion" data-toggle="collapse" class="panel-heading collapsed panel_heads" id="panelheading-8">
        <h4 class="panel-title accordion-toggle defa_panels">Market Trend</h4>
    </div>
    <div class="panel-collapse collapse" id="collapseeight" style="height: 0px;">
        <div class="panel-body bgcolr">
            <div class="col-lg-6">
                <h1 class="sq_tl">Competitor Rates for this Area</h1>
                <div class="table-responsive topsp" style="margin-top:10px;">
                    <table class="table tableWithFloatingHeader" style=" margin-bottom:0px;">
                        <thead>
                        <tr>
                            <th>Competitor Name</th>
                            <th>Project Type</th>
                            <th>Rate (Per. Sqft)</th>
                            <th>&nbsp;</th>
                        </tr>
                        </thead>
                        <tbody>
                        <?php if(isset($landInitialCompetitor) && count($landInitialCompetitor) != 0): $i=1;
                            foreach($landInitialCompetitor as $competitor): ?>
                                <tr>
                                    <td width="10%"><input class="parent_text" type="text" name="competitorname_<?php echo $i; ?>" id="competitorname_<?php echo $i; ?>" onblur="addCompetitorRow(this)" value="<?php echo $competitor['Name']; ?>" /></td>
                                    <td width="10%"><input class="parent_text" type="text" id="competitorprojecttype_<?php echo $i; ?>" value="<?php echo $competitor['ProjectTypeName']; ?>" />
                                        <input type="hidden" name="competitorprojecttypeid_<?php echo $i; ?>" id="competitorprojecttypeid_<?php echo $i; ?>" value="<?php echo $competitor['ProjectTypeId']; ?>" /></td>
                                    <td width="5%"><input class="parent_text" type="text" name="competitorrate_<?php echo $i; ?>"  style="text-align:right;" id="competitorrate_<?php echo $i; ?>" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="updateCompChart()" value="<?php echo $competitor['Rate']; ?>" /></td>
                                    <td width="3%"><ul class="action_btns">
                                            <li style="float:left;"> <a href="#" onclick="deleteCompetitorRate(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                        </ul></td>
                                </tr>
                                <?php $i++; endforeach; else: ?>
                            <tr>
                                <td width="10%"><input class="parent_text" type="text" name="competitorname_1" id="competitorname_1" onchange="addCompetitorRow(this)" /></td>
                                <td width="10%"><input class="parent_text" type="text" id="competitorprojecttype_1" />
                                    <input type="hidden" name="competitorprojecttypeid_1" id="competitorprojecttypeid_1" /></td>
                                <td width="5%"><input class="parent_text" type="text" name="competitorrate_1" id="competitorrate_1" style="text-align:right;" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="updateCompChart()" /></td>
                                <td width="3%"><ul class="action_btns">
                                        <li style="float:left;"> <a href="#" onclick="deleteCompetitorRate(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                    </ul></td>
                            </tr>
                        <?php endif; ?>
                        </tbody>
                    </table>
                    <input type="hidden" name="competitorrowid" id="competitorrowid" value="<?php echo (isset($landInitialCompetitor) && count($landInitialCompetitor) != 0) ? count($landInitialCompetitor) : 1; ?>" />
                </div>
                <div class="clearfix"></div>
                <!--chat-->
                <div class="col-lg-12 cht">
                    <div id="competitorChart" style="height:400px;"></div>
                </div>
                <!--chat end-->
            </div>
            <div class="col-lg-6">
                <h1 class="sq_tl">Average Rate Trend for this Area</h1>
                <div class="table-responsive topsp" style="margin-top:10px;">
                    <table class="table tableWithFloatingHeader" style=" margin-bottom:0px;">
                        <thead>
                        <tr>
                            <th>Month/Year</th>
                            <th>Project Type</th>
                            <th>Rate (Per. Sqft)</th>
                            <th>&nbsp;</th>
                        </tr>
                        </thead>
                        <tbody>
                        <?php if(isset($landInitialAverage) && count($landInitialAverage) != 0): $i=1;
                            foreach($landInitialAverage as $average): ?>
                                <tr>
                                    <td width="10%"><input class="parent_text avgRate_date_picker" type="text" name="avgdate_<?php echo $i; ?>"  id="avgdate_<?php echo $i; ?>" onblur="addAvgRateRow(this)" value="<?php echo $average['Date']; ?>" /></td>
                                    <td width="10%"><input class="parent_text" type="text" id="avgprojecttype_<?php echo $i; ?>" value="<?php echo $average['ProjectTypeName']; ?>" />
                                        <input type="hidden" name="avgprojecttypeid_<?php echo $i; ?>" id="avgprojecttypeid_<?php echo $i; ?>" value="<?php echo $average['ProjectTypeId']; ?>" /></td>
                                    <td width="5%"><input class="parent_text" type="text" name="avgrate_<?php echo $i; ?>" id="avgrate_<?php echo $i; ?>" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="updateAvgChart()" value="<?php echo $average['Rate']; ?>" /></td>
                                    <td width="3%"><ul class="action_btns">
                                            <li style="float:left;"> <a href="#" onclick="deleteAvgRate(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                        </ul></td>
                                </tr>
                                <?php $i++; endforeach; else: ?>
                            <tr>
                                <td width="10%"><input class="parent_text avgRate_date_picker" type="text" name="avgdate_1"  id="avgdate_1" onchange="addAvgRateRow(this)" /></td>
                                <td width="10%"><input class="parent_text" type="text" id="avgprojecttype_1" />
                                    <input type="hidden" name="avgprojecttypeid_1" id="avgprojecttypeid_1" /></td>
                                <td width="5%"><input class="parent_text" type="text" name="avgrate_1" id="avgrate_1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="updateAvgChart()" /></td>
                                <td width="3%"><ul class="action_btns">
                                        <li style="float:left;"> <a href="#" onclick="deleteAvgRate(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
                                    </ul></td>
                            </tr>
                        <?php endif; ?>
                        </tbody>
                    </table>
                    <input type="hidden" name="avgrowid" id="avgrowid" value="<?php echo (isset($landInitialAverage) && count($landInitialAverage) != 0) ? count($landInitialAverage) : 1; ?>" />
                </div>
                <div class="clearfix"></div>
                <!--chat-->
                <div class="col-lg-12 cht">
                    <div id="avgChart" style="height:400px;"></div>
                </div>
                <!--chat end-->
            </div>
        </div>
    </div>
</div>
</div>
</div>
<!--accordion end-->
</form>
</div>
</div>
</div>

<div style="display: none">
    <form class="form-horizontal" method="post" action="<?php echo $this->basePath() .'/project/landbank/followup' ?>" id="followupform">
        <input type="hidden" id="IFEnquiryId" name="EnquiryId" value = "" />
        <input type="hidden" id="EnquiryName" name="EnquiryName" value = "" />
        <input type="hidden" id="formfrom" name="formfrom" value="title" />
    </form>
</div>
<!--table header script-->
<!--table header script end-->
<!--table expand start-->
<!--footer-->
<div class="col-lg-12 savebtn_area">
    <ul>
        <li class="dropdown save_btn float_r" id="submit-btn" ><a href="javascript:submitForm();" data-toggle="tooltip" class="ripple" title="Submit!">Submit</a>
        <li class="cancel_btn float_r" id="back-btn"><a href="javascript:void(0);" data-toggle="tooltip" class="ripple" title="Cancel!" onclick="return goBack();">Cancel</a></li>
    </ul>
</div>
<script id="dummy-checklist"  type="text/template" class="hide">
    <li>
        <span class="cheched">
            <span class="users_det">
                <img src="--USERPIC--" width="50" height="50p" />
                <p>--USERNAME--</p>
            </span>
            <span class="dons">--PROGRESS--</span>
            <span class="checklistnames">
                <p>--CHECKLISTNAME--</p>
            </span>
            <span class="time_datelist">
                <a href="#" class="comments cd-btn" data-id="--CHECKLISTTRANSID--">Comments <i class="fa fa-comment"></i></a>
                <a href="#" class="comment-delete cd-btn" data-id="--CHECKLISTTRANSID--"><i class="fa fa-trash"></i></a>
                <p>--DATETIME--</p>
            </span>
        </span>
        <input type="hidden" name="id__" value="--CHECKLISTID--"/>
        <input type="hidden" name="name__" value="--CHECKLISTNAME--"/>
        <input type="hidden" name="progress__" value="--PROGRESS--"/>
        <input type="hidden" name="date__" value="--DATETIME--"/>
        <input type="hidden" name="assignedto__" value="--ASSIGNEDTO--"/>
        <input type="hidden" name="updaterow__" id="chkupdaterow__" value="0"/>
        <input type="hidden" name="transid__" value="--CHECKLISTTRANSID--" />
    </li>
</script>
<script id="dummy-checklist-history"  type="text/template" class="hide">
    <li>
        <span class="chat_content">
            <div class="avatars">
                <div class="ava_img">
                    <img src="--USERPIC--" width="50" height="50p" />
                </div>
                <div class="username_detalis">
                    <p>--USERNAME--</p>
                    <strong>--DATETIME--</strong>
                </div>
            </div>
            <div class="bubble bubble-left">
                <strong>--PROGRESS--</strong>
                <p>--REMARKS--</p>
            </div>
        </span>
    </li>
</script>
<table id="dummy-soildoctype" style="display: none;">
    <tbody>
    <tr>
        <td width="15%"><input class="parent_text" type="text" name="soilDocType__1" id="soilDocType__1" maxlength="155" onchange="addNewSoilDocRow(this)" /></td>
        <td width="15%"><textarea class="parent_texts" name="soilDocDesc__1" id="soilDocDesc__1"></textarea></td>
        <td width="4%" class="action_btns_td"><ul class="action_btns">
                <li style="float:left;"> <a href="#"> <span  data-toggle="tooltip" data-placement="left" data-original-title="Click to attach documents" class="btn-file butclr_imp"> <i class="fa fa-paperclip dcm_atch" ></i>
            <input type="file" name="soilDocFile__1" id="soilDocFile__1">
            </span> </a> </li>
                <!--                    <li style="float:left;"> <a class="mainTr__1" href="#"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Views"><i class="fa fa-eye"></i></span> </a> </li>-->
                <li style="float:left;"> <a href="#" onclick="deleteSoilDoc(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Document Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<table id="dummy-joinventureshare" style="display: none;">
    <tbody>
    <tr>
        <td width="10%"><input class="parent_text" type="text" name="shareType__1" id="shareType__1" maxlength="155" onchange="addNewShareTypeRow(this)" />
            <input type="hidden" name="shareTypeId__1" id="shareTypeId__1" /></td>
        <td width="10%"><div class="input-grouping">
                <input class="parent_text" type="text" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" name="shareArea__1" style="text-align:right;" id="shareArea__1">
                <div class="input-group-btn select-style" style="top: 0;">
                    <select name="shareAreaUnitId__1" id="shareAreaUnitId__1">
                        <?php echo $selectUnit; ?>
                    </select>
                </div>
                <div class="clearfix"></div>
            </div></td>
        <td width="5%"><input class="parent_text" type="text" name="sharePercentage__1" style="text-align:right;" id="sharePercentage__1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" onchange="return isPercentage(this)" maxlength="18" /></td>
        <td width="5%"><input class="parent_text" type="text" name="shareAmount__1" id="shareAmount__1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" onchange="addNewShareTypeRow(this)" maxlength="18" /></td>
        <td width="3%"><ul class="action_btns">
                <li style="float:left;"> <a href="#" class="deleteShareType__1" style="display: none;" onclick="deleteShareType(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span></a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<table id="dummy-joinventuredoctype" style="display: none;">
    <tbody>
    <tr>
        <td width="15%"><input class="parent_text" type="text" name="joinVentureDocType__1" id="joinVentureDocType__1" maxlength="155" onchange="addNewJoinVentureDocRow(this)" /></td>
        <td width="15%"><textarea class="parent_texts" name="joinVentureDocDesc__1" id="joinVentureDocDesc__1"></textarea></td>
        <td width="4%" class="action_btns_td"><ul class="action_btns">
                <li style="float:left;"> <a href="#"> <span  data-toggle="tooltip" data-placement="left" data-original-title="Documents Attached" class="btn-file butclr_imp"> <i class="fa fa-paperclip dcm_atch"></i>
            <input type="file" name="joinVentureDocFile__1" id="joinVentureDocFile__1">
            </span> </a> </li>
                <!--                            <li style="float:left;"> <a class="mainTr__1" href="#"> <span data-toggle="tooltip" data-placement="left" data-original-title="View"><i class="fa fa-eye"></i></span> </a> </li>-->
                <li style="float:left;"> <a href="#" onclick="deleteJoinVentureDoc(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<!--Dummy Main Tr-->
<table id="dummy-ownerdetails" style="display: none;">
<tbody>
<tr>
    <td width="10%"><input class="parent_text" type="text" name="surveyno__1" id="surveyno__1" onchange="addMainTr(this)" maxlength="10"></td>
    <td width="30%"><input class="parent_text" type="text" name="ownername__1" id="ownername__1" maxlength="155" onchange="addMainTr(this)"></td>
    <td width="30%"><input class="parent_text" type="text" name="owneraddress__1" id="owneraddress__1" maxlength="155" onchange="addres(this)" onchange="addMainTr(this)"></td>
    <td width="10%"><div class="input-grouping">
            <input class="parent_text" type="text" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" name="landarea__1"  style="text-align:right;" id="landarea__1" onchange="addMainTr(this)">
            <div class="input-group-btn select-style" style="top: 0;">
                <select name="landareaunitid__1" id="landareaunitid__1">
                    <?php echo $selectUnit; ?>
                </select>
            </div>
            <div class="clearfix"></div>
        </div></td>
    <td width="3%" align="center"><ul class="action_btns">
            <li> <a href="#" class="deleteOwnerDetails__1" style="margin-right: 10px; display: none;" onclick="deleteMainTr(this, event);"><i class="fa fa-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete"></i></a> </li>
            <li><a href="#" class="mainTr"> <i class="fa fa-chevron-circle-down" data-toggle="tooltip" data-placement="top" data-original-title="Expand"></i></a></li>
        </ul></td>
</tr>
<!--expand table-->
<tr style="display: none;" class="subTr">
    <td colspan="9" style="padding:0px !important;"><div class="subDiv" style="display:none;">
            <div class="col-lg-12">
                <div class="table-responsive topsp">
                    <table class="table tableWithFloatingHeader" style="margin-bottom:0px;">
                        <thead>
                        <tr>
                            <th>Father Name</th>
                            <th>DOB</th>
                            <th>Contact No</th>
                            <th>Passport No</th>
                            <th>PAN No</th>
                            <th>Purchase Type</th>
                            <th>&nbsp;</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td width="10%"><input class="parent_text" type="text" name="workinfo__1_fathername" id="workinfo_1_fathername" maxlength="155"></td>
                            <td width="8%"><input class="parent_text date_picker" type="text" placeholder="DD-MM-YYYY" readonly name="workinfo__1_dob" id="workinfo__1_dob"></td>
                            <td width="8%"><input class="parent_text" type="text" name="workinfo__1_contactno" id="workinfo__1_contactno" maxlength="20" onkeypress="return contactKeyPress(event,this)" onchange="validateContactNo(this)"></td>
                            <td width="10%"><input class="parent_text" type="text" name="workinfo__1_passportno" id="workinfo__1_passportno" onkeypress="return alphaNumeric(event);" onblur="return passjsvalidation(this.value);" maxlength="10"></td>
                            <td width="10%"><input class="parent_text" type="text" name="workinfo__1_panno" id="workinfo__1_panno" onkeypress="return alphaNumeric(event);" onblur="return panjsvalidation(this.value);" maxlength="10"></td>
                            <td width="10%">
                            <div class="select-style">
                            <select data-size="6" title="Sale Type" name="workinfo__1_purchasetype" id="workinfo__1_purchasetype">
                                    <?php echo $selectSaleType; ?>
                                </select></div></td>
                            <td width="3%" align="center"><ul class="action_btns">
                                    <li> <a href="#" class="mainTr"> <i class="fa fa-chevron-circle-down" data-toggle="tooltip" data-placement="top" data-original-title="Expand"></i></a></li>
                                </ul></td>
                        </tr>
                        <!--expand table-->
                        <tr style="display: none;" class="subTr">
                            <td colspan="9" style="padding:0px !important;"><div class="subDiv" style="display: none;">
                                    <!-- Nav tabs -->
                                    <div class="table-responsive">
                                        <table style=" margin-bottom:0px;background:#E8FAFD!important; " class="table">
                                            <tbody>
                                            <tr>
                                                <td style="padding:0px !important; border:none;" colspan="9"><div>
                                                        <div style=" margin-top:10px;" class="col-lg-12">
                                                            <ul class="nav nav-tabs navs-tabs">
                                                                <li class="active"><a href="#owner__1" data-toggle="tab" aria-expanded="true">Co Owner Details</a></li>
                                                                <li class=""><a href="#landinfo__1" data-toggle="tab" aria-expanded="false">Land Information</a></li>
                                                                <li class=""><a href="#prevowner__1" data-toggle="tab" aria-expanded="false">Previous Owner Details</a></li>
                                                            </ul>
                                                        </div>
                                                        <div class="tab-content">
                                                            <div class="tab-pane fade active in" id="owner__1">
                                                                <div class="col-lg-12">
                                                                    <div class="table-responsive topsp">
                                                                        <table style=" margin-bottom:0px;" class="table tableWithFloatingHeader">
                                                                            <thead>
                                                                            <tr>
                                                                                <th class="bg_clo">Co Owner Name</th>
                                                                                <th class="bg_clo">Father Name</th>
                                                                                <th class="bg_clo">DOB</th>
                                                                                <th class="bg_clo">Contact No</th>
                                                                                <th class="bg_clo">Passport No</th>
                                                                                <th class="bg_clo">PAN No</th>
                                                                                <th class="bg_clo">Relationship with Owner</th>
                                                                                <th class="bg_clo">&nbsp;</th>
                                                                            </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                            <tr>
                                                                                <td width="8%"><input type="text" class="parent_text" name="workinfo__1_co_coownername_1" id="workinfo__1_co_coownername_1" onchange="addSubTr(this)" maxlength="155"></td>
                                                                                <td width="8%"><input type="text" class="parent_text" name="workinfo__1_co_fathername_1" id="workinfo__1_co_fathername_1" onchange="addSubTr(this)" maxlength="155"></td>
                                                                                <td width="8%"><input type="text" class="parent_text date_picker" placeholder="DD-MM-YYYY" readonly name="workinfo__1_co_dob_1" id="workinfo__1_co_dob_1" onchange="addSubTr(this)"></td>
                                                                                <td width="5%"><input type="text" class="parent_text" name="workinfo__1_co_contactno_1" id="workinfo__1_co_contactno_1" maxlength="10" onkeypress="return contactKeyPress(event,this)" onchange="validateContactNo(this)" ></td>
                                                                                <td width="5%"><input type="text" class="parent_text" name="workinfo__1_co_passportno_1" id="workinfo__1_co_passportno_1" onkeypress="return alphaNumeric(event);"  onblur="return passjsvalidation(this.value);" onchange="addSubTr(this)" maxlength="10"></td>
                                                                                <td width="5%"><input type="text" class="parent_text" name="workinfo__1_co_panno_1" id="workinfo__1_co_panno_1" onkeypress="return alphaNumeric(event);" onblur="return panjsvalidation(this.value);" onchange="addSubTr(this)" maxlength="10"></td>
                                                                                <td width="8%"><input type="text" class="parent_text" name="workinfo__1_co_relationship_1" id="workinfo__1_co_relationship_1" onchange="addSubTr(this)" maxlength="20"></td>
                                                                                <td width="3%" align="center"><ul class="action_btns">
                                                                                        <li><a href="#" id="workinfo__1_co_delete_1" onclick="deleteSubTr(this, event);" class="subTrDelete" style="margin-right: 10px;"><i class="fa fa-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete" ></i></a></li>
                                                                                    </ul></td>
                                                                            </tr>
                                                                            </tbody>
                                                                        </table>
                                                                        <input type="hidden" name="coownerid__1" id="coownerid__1" value="1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="tab-pane fade" id="landinfo__1">
                                                                <div class="col-lg-12">
                                                                    <div class="table-responsive topsp">
                                                                        <table style=" margin-bottom:0px;" class="table tableWithFloatingHeader">
                                                                            <thead>
                                                                            <tr>
                                                                                <th class="bg_clo">Patta No</th>
                                                                                <th class="bg_clo">Patta Name</th>
                                                                                <th class="bg_clo">Area</th>
                                                                            </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                            <tr>
                                                                                <td width="5%"><input class="parent_text" name="workinfo__1_pattano" id="workinfo__1_pattano" maxlength="50"></td>
                                                                                <td width="10%"><input type="text" class="parent_text" name="workinfo__1_pattaname" id="workinfo__1_pattaname" maxlength="155"></td>
                                                                                <td width="5%"><div class="input-grouping">
                                                                                        <input class="parent_text" type="text" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" name="workinfo__1_area" id="workinfo__1_area">
                                                                                        <div class="input-group-btn select-style" style="top: 0;">
                                                                                            <select  name="workinfo__1_areaunitid" id="workinfo__1_areaunitid">
                                                                                                <?php echo $selectUnit; ?>
                                                                                            </select>
                                                                                        </div>
                                                                                        <div class="clearfix"></div>
                                                                                    </div></td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td colspan="4"><div class="col-lg-12">
                                                                                        <div class="col-lg-12 tap_work">
                                                                                            <ul>
                                                                                                <li>
                                                                                                    <label>East Side Details</label>
                                                                                                    <input type="text" class="parent_text" name="workinfo__1_eastdetail" id="workinfo__1_eastdetail" maxlength="255">
                                                                                                </li>
                                                                                                <li>
                                                                                                    <label>West Side Details</label>
                                                                                                    <input type="text" class="parent_text" name="workinfo__1_westdetail" id="workinfo__1_westdetail" maxlength="255">
                                                                                                </li>
                                                                                                <li>
                                                                                                    <label>North Side Details</label>
                                                                                                    <input type="text" class="parent_text" name="workinfo__1_northdetail" id="workinfo__1_northdetail" maxlength="255">
                                                                                                </li>
                                                                                                <li>
                                                                                                    <label>South Side Details</label>
                                                                                                    <input type="text" class="parent_text" name="workinfo__1_southdetail" id="workinfo__1_southdetail" maxlength="255">
                                                                                                </li>
                                                                                            </ul>
                                                                                        </div>
                                                                                    </div></td>
                                                                            </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="tab-pane fade" id="prevowner__1">
                                                                <div class="col-lg-12">
                                                                    <div class="table-responsive topsp">
                                                                        <table style=" margin-bottom:0px;" class="table tableWithFloatingHeader">
                                                                            <thead>
                                                                            <tr>
                                                                                <th class="bg_clo">Prev. Owner Name</th>
                                                                                <th class="bg_clo">Father Name</th>
                                                                                <th class="bg_clo">DOB</th>
                                                                                <th class="bg_clo">Contact No</th>
                                                                                <th class="bg_clo">Passport No</th>
                                                                                <th class="bg_clo">PAN No</th>
                                                                                <th class="bg_clo">&nbsp;</th>
                                                                            </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                            <tr>
                                                                                <td width="8%"><input type="text" class="parent_text" name="workinfo__1_po_prevownername_1" id="workinfo__1_po_prevownername_1" onchange="addPrevOwnerSubTr(this)" maxlength="155"></td>
                                                                                <td width="8%"><input type="text" class="parent_text" name="workinfo__1_po_fathername_1" id="workinfo__1_po_fathername_1" onchange="addPrevOwnerSubTr(this)" maxlength="155"></td>
                                                                                <td width="8%"><input type="text" class="parent_text date_picker" placeholder="DD-MM-YYYY" readonly name="workinfo__1_po_dob_1" id="workinfo__1_po_dob_1"></td>
                                                                                <td width="5%"><input type="text" class="parent_text" name="workinfo__1_po_contactno_1" id="workinfo__1_po_contactno_1" maxlength="20" onkeypress="return contactKeyPress(event,this)" maxlength="10" onchange="validateContactNo(this)" ></td>
                                                                                <td width="5%"><input type="text" class="parent_text" name="workinfo__1_po_passportno_1" id="workinfo__1_po_passportno_1" onblur="return passjsvalidation(this.value);" onkeypress="return alphaNumeric(event);"  maxlength="10"></td>
                                                                                <td width="5%"><input type="text" class="parent_text" name="workinfo__1_po_panno_1" id="workinfo__1_po_panno_1" onkeypress="return alphaNumeric(event);" onblur="return panjsvalidation(this.value);" maxlength="10"></td>
                                                                                <td width="3%" align="center"><ul class="action_btns">
                                                                                        <li><a href="#" id="workinfo__1_po_delete_1" onclick="deletePrevOwnerSubTr(this, event);" class="subTrDelete" style="margin-right: 10px;"><i class="fa fa-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete" ></i></a></li>
                                                                                    </ul></td>
                                                                            </tr>
                                                                            </tbody>
                                                                        </table>
                                                                        <input type="hidden" name="prevownerid__1" id="prevownerid__1" value="1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <!-- Tab panes -->
                                </div></td>
                        </tr>
                        <!--expand end-->
                        </tbody>
                    </table>
                </div>
            </div>
        </div></td>
</tr>
<!--expand end-->
</tbody>
</table>

<!--Dummy CoOwner subTr-->
<table id="dummy-coowner" style="display: none;">
    <tbody>
    <tr>
        <td width="8%"><input type="text" class="parent_text" name="workinfo__0_co_coownername__1" id="workinfo__0_co_coownername__1" onchange="addSubTr(this)"></td>
        <td width="8%"><input type="text" class="parent_text" name="workinfo__0_co_fathername__1" id="workinfo__0_co_fathername__1" onchange="addSubTr(this)"></td>
        <td width="5%"><input type="text" class="parent_text date_picker" placeholder="DD-MM-YYYY" readonly name="workinfo__0_co_dob__1" id="workinfo__0_co_dob__1" onchange="validateDate(this)"></td>
        <td width="5%"><input type="text" class="parent_text" name="workinfo__0_co_contactno__1" id="workinfo__0_co_contactno__1" onkeypress="return contactKeyPress(event,this)" maxlength="10" onchange="validateContactNo(this)" ></td>
        <td width="5%"><input type="text" class="parent_text" name="workinfo__0_co_passportno__1" id="workinfo__0_co_passportno__1" onkeypress="return alphaNumeric(event);" onblur="return passjsvalidation(this.value);" onchange="addSubTr(this)" maxlength="10"></td>
        <td width="5%"><input type="text" class="parent_text" name="workinfo__0_co_panno__1" id="workinfo__0_co_panno__1" onkeypress="return alphaNumeric(event);" onchange="addSubTr(this)" onblur="return panjsvalidation(this.value);" maxlength="10"></td>
        <td width="8%"><input type="text" class="parent_text" name="workinfo__0_co_relationship__1" id="workinfo__0_co_relationship__1" onchange="addSubTr(this)"></td>
        <td width="3%" align="center"><ul class="action_btns">
                <li><a href="#" id="workinfo__0_co_delete__1" onclick="deleteSubTr(this, event);" class="subTrDelete" style="margin-right: 10px;"><i class="fa fa-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete" ></i></a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>

<!--Dummy PrevOwner subTr-->
<table id="dummy-prevowner" style="display: none;">
    <tbody>
    <tr>
        <td width="8%"><input type="text" class="parent_text" name="workinfo__0_po_prevownername__1" id="workinfo__0_po_prevownername__1" onchange="addPrevOwnerSubTr(this)" maxlength="155"></td>
        <td width="8%"><input type="text" class="parent_text" name="workinfo__0_po_fathername__1" id="workinfo__0_po_fathername__1" onchange="addPrevOwnerSubTr(this)"></td>
        <td width="5%"><input type="text" class="parent_text date_picker" placeholder="DD-MM-YYYY" readonly name="workinfo__0_po_dob__1" id="workinfo__0_po_dob__1" onchange="validateDate(this)"></td>
        <td width="5%"><input type="text" class="parent_text" name="workinfo__0_po_contactno__1" id="workinfo__0_po_contactno__1" onkeypress="return contactKeyPress(event,this)" onchange="validateContactNo(this)" maxlength="10"></td>
        <td width="5%"><input type="text" class="parent_text" name="workinfo__0_po_passportno__1" id="workinfo__0_po_passportno__1" onkeypress="return alphaNumeric(event);" onblur="return passjsvalidation(this.value);" onchange="addPrevOwnerSubTr(this)" maxlength="10"></td>
        <td width="5%"><input type="text" class="parent_text" name="workinfo__0_po_panno__1" id="workinfo__0_po_panno__1" onchange="addPrevOwnerSubTr(this)" onkeypress="return alphaNumeric(event);" onblur="return panjsvalidation(this.value);" maxlength="10"></td>
        <td width="3%" align="center"><ul class="action_btns">
                <li><a href="#" id="workinfo__0_po_delete__1" onclick="deletePrevOwnerSubTr(this, event);" class="subTrDelete" style="margin-right: 10px;"><i class="fa fa-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete" ></i></a></li>
            </ul></td>
    </tr>
    </tbody>
</table>
<table id="dummy-competitor" style="display: none;">
    <tbody>
    <tr>
        <td width="10%"><input class="parent_text" type="text" name="competitorname__1" id="competitorname__1" onchange="addCompetitorRow(this)" /></td>
        <td width="10%"><input class="parent_text" type="text" id="competitorprojecttype__1" onchange="addCompetitorRow(this)"  />
            <input type="hidden" name="competitorprojecttypeid__1" id="competitorprojecttypeid__1" onchange="addCompetitorRow(this)"  /></td>
        <td width="5%"><input class="parent_text" type="text" name="competitorrate__1" id="competitorrate__1" style="text-align:right;" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="updateCompChart()" /></td>
        <td width="3%"><ul class="action_btns">
                <li style="float:left;"> <a href="#" onclick="deleteCompetitorRate(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<table id="dummy-avgrate" style="display: none;">
    <tbody>
    <tr>
        <td width="10%"><input class="parent_text avgRate_date_picker" type="text" name="avgdate__1" id="avgdate__1" onchange="addAvgRateRow(this)" /></td>
        <td width="10%"><input class="parent_text" type="text" id="avgprojecttype__1" />
            <input type="hidden" name="avgprojecttypeid__1" id="avgprojecttypeid__1" /></td>
        <td width="5%"><input class="parent_text" type="text" name="avgrate__1" id="avgrate__1" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" maxlength="18" onchange="updateAvgChart()" /></td>
        <td width="3%"><ul class="action_btns">
                <li style="float:left;"> <a href="#" onclick="deleteAvgRate(this, event);"> <span data-toggle="tooltip" data-placement="left" data-original-title="Delete"><i class="fa fa-trash-o"></i></span> </a> </li>
            </ul></td>
    </tr>
    </tbody>
</table>
<!--table expand end-->
<!--Comments area-->
<div class="comments_content" id="comments">
    <div class="comments_content_full">
        <div class="comments_heade">
            <h1 id="checklist-history-title"></h1>
            <a href="javascript:closeComment();"><i class="fa fa-times"></i></a> </div>
        <div class="content_commt toolbar_ddown">
            <div class="content_detaliss">
                <ul id="checklist-history-wrapper">
                </ul>
            </div>
        </div>
        <div class="comments_footer">
            <form id="chklist-history-form">
                <ul>
                    <li>
                        <div class="select-style select-status">
                            <select id="chk-history-status" name="status">
                                <option value="">Select Status </option>
                                <option value="Done">Done </option>
                                <option value="In Progress">In Progress</option>
                            </select>
                        </div>
                    </li>
                    <li>
                        <textarea class="commentstext" placeholder="Remarks" id="chk-history-remarks" name="remarks"></textarea>
                    </li>
                    <li>
                        <input type="hidden" name="transid" id="chk-history-transid"/>
                        <input type="button" value="Submit" id="btn-chk-history">
                    </li>
                </ul>
            </form>
        </div>
    </div>
</div>
<!--Comments area-->
<!--Add Comments area-->

<!-- Modal -->
<div id="ven-chklist" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times-circle-o clpot"></i></button>
                <h1>Add Joint Ventures CheckList</h1>
            </div>
            <div class="clearfix"></div>
            <div class="modal-body">
                <form id="ven-chklist-form">
                    <div class="col-lg-8 col-lg-offset-2">
                    <ul class="addcheck">
                        <li>
                            <label>CheckList Name</label>
                            <input type="text" class="parent_text" name="name" id="ven-chklist-name"/>
                            <strong class="new-pg" id="ven-chklist-new">New</strong>
                            <input type="hidden" name="id" id="ven-chklist-id"/>
                        </li>
                        <li>
                            <label>Assigned To</label>
                            <input type="text" class="parent_text users-list" name="username" id="ven-chklist-assigned"/>
                            <input type="hidden" class="user-id" id="ven-chklist-assigned-id" name="userid"/>
                        </li>
                        <li>
                            <label>Target Date</label>
                            <input type="text" class="parent_text date_picker" name="targetdate" id="ven-chklist-date" onkeypress="return isDate(event);" onchange="validateDate(this);"/>
                        </li>
                        <li>
                            <label>Status</label>
                               <div class="select-style bor-sty">
                            <select id="ven-chk-status" name="status">
                                <option value="Done">Done</option>
                                <option value="In Progress">In Progress</option>
                            </select></div>
                        </li>
                    </ul>
                    </div>
                    <input type="hidden" class="static" name="chktype" value="2" />
                </form>
            </div>
            <div class="clearfix"></div>
            <div class="modal-footer">
             <div class="col-lg-8 col-lg-offset-2" style="margin-top:5px;">  <a style="position: relative; overflow: hidden;" data-dismiss="modal" class="md_cance" href="#">Cancel<span class="ripple-wrapper"></span><span class="ripple-wrapper"></span></a>
                    <button onclick="savechklist('venture')" class="md_ok" type="button">Submit</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!--Add Comments area-->

<!-- Modal -->
<div id="chklist" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times-circle-o clpot"></i></button>
                <h1>Add CheckList</h1>
            </div>
            <div class="clearfix"></div>
            <div class="modal-body">
                <form id="chklist-form">
                <div class="col-lg-8 col-lg-offset-2">
                    <ul class="addcheck">
                        <li>
                            <label>CheckList Name</label>
                            <input type="text" class="parent_text" name="name" id="chklist-name"/>
                            <strong class="new-pg" id="chklist-new">New</strong>
                            <input type="hidden" name="id" id="chklist-id"/>
                        </li>
                        <li>
                            <label>Assigned To</label>
                            <input type="text" class="parent_text users-list" name="username" id="chklist-assigned"/>
                            <input type="hidden" class="user-id" id="chklist-assigned-id" name="userid"/>
                        </li>
                        <li>
                            <label>Target Date</label>
                            <input type="text" class="parent_text date_picker" name="targetdate" id="chklist-date" onkeypress="return isDate(event);" onchange="validateDate(this);"/>
                        </li>
                        <li>
                            <label>Status</label>
                            <div class="select-style bor-sty">
                                <select id="chk-status" name="status">
                                    <option value="Done">Done</option>
                                    <option value="In Progress">In Progress</option>
                                </select>
                            </div>
                        </li>
                    </ul>
                    </div>
                    <input type="hidden" class="static" name="chktype" value="1" />
                </form>
            </div>
            <div class="clearfix"></div>
            <div class="modal-footer">
                <div class="col-lg-8 col-lg-offset-2" style="margin-top:5px;"> 
                
                <a style="position: relative; overflow: hidden;" data-dismiss="modal" class="md_cance" href="#">Cancel<span class="ripple-wrapper"></span><span class="ripple-wrapper"></span></a>
                    <button onclick="savechklist()" class="md_ok" type="button">Submit</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Add Comments area-->
<script type="text/javascript">
var arr_propertynames = <?php echo (isset($propertynames)) ? json_encode($propertynames) : '[]';?>;
var arr_jvsharetypes = <?php echo (isset($jvsharetypes)) ? json_encode($jvsharetypes) : '[]';?>;
var arr_projecttypes = <?php echo (isset($projecttypes)) ? json_encode($projecttypes) : '[]';?>;
var arr_users = <?php echo (isset($users)) ? json_encode($users) : '[]';?>;
var arr_checklists = <?php echo (isset($checklists)) ? json_encode($checklists) : '[]';?>;
var tmp_arr_checklists = <?php echo (isset($checklists)) ? json_encode($checklists) : '[]';?>;
var arr_jvchecklists = <?php echo (isset($jvchecklists)) ? json_encode($jvchecklists) : '[]';?>;
var tmp_arr_jvchecklists = <?php echo (isset($jvchecklists)) ? json_encode($jvchecklists) : '[]';?>;
var arrSoilType = <?php echo (isset($SoilType)) ? json_encode($SoilType) : '[]';?>;

var checklist_trans = <?php echo (isset($checklisttrans)) ? json_encode($checklisttrans) : '[]';?>;
var jv_checklist_trans = <?php echo (isset($jvchecklisttrans)) ? json_encode($jvchecklisttrans) : '[]';?>;

var landInitialOwnerDetail = <?php echo (isset($landInitialOwnerDetail)) ? json_encode($landInitialOwnerDetail) : '[]';?>;

var $roadWidth = $('#RoadWidth'),
    $roadWidthUnitId = $('#RoadWidthUnitId'),
    $frontageArea = $('#FrontageArea'),
    $frontageAreaUnitId = $('#FrontageAreaUnitId'),
    $zoneType = $('#ZoneTypeId'),
    $propertyName = $('#PropertyName'),
    $enquiryId = $('#EnquiryId');

var competitorChart = null,
    avgChart = null;


$(function(){

    $('#file-fr').hide();

    bindExpandTr();
    bindShareTypeAutoComplete();
    bindCompeProjTypeAutoComplete();

    // expand first accordian
    $('#panelheading-1').trigger('click');

    // comments on click
    //open the lateral panel
    $('.cd-btn').on('click', function(event){
        event.preventDefault();
        $('.cd-panel').addClass('is-visible');
    });
    //clode the lateral panel
    $('.cd-panel').on('click', function(event){
        if( $(event.target).is('.cd-panel') || $(event.target).is('.cd-panel-close') ) {
            $('.cd-panel').removeClass('is-visible');
            event.preventDefault();
        }
    });

    // select2 initialize
    $(".single_dropdown2").select2({
        placeholder: "",
        minimumResultsForSearch: -1
    });

    var $SoilType = $('#SoilType');
    $SoilType.autocomplete({
        lookup: arrSoilType,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        },
        onSearchComplete: function (query, suggestions) {
            if (!suggestions.length) {
                $(this).addClass('error');
            } else $(this).removeClass('error');
        }
    });

    // bind property name autocomplete
    $propertyName.autocomplete({
        lookup: arr_propertynames,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        },
        onSelect: function (suggestion) {
            if (suggestion) {
                $enquiryId.val(suggestion.data);
                updateDetails(suggestion.data);
                $(this).removeClass('error');
            }
        },
        onSearchStart: function (suggestion) {
            $enquiryId.val(0);
        },
        onSearchComplete: function (query, suggestions) {
            if (!suggestions.length) {
                $(this).addClass('error');
                $enquiryId.val(0);
            } else
                $(this).removeClass('error');
        }
    });

    // bind users autocomplete
    $('.users-list').autocomplete({
        lookup: arr_users,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        },
        onSelect: function (suggestion) {
            if (suggestion) {
                $(this).next('.user-id').val(suggestion.data);
                $(this).removeClass('error');
            }
        },
        onSearchStart: function (suggestion) {
            $(this).next('.user-id').val(0);
        },
        onSearchComplete: function (query, suggestions) {
            if (!suggestions.length) {
                $(this).addClass('error');
                $(this).next('.user-id').val(0);
            } else
                $(this).removeClass('error');
        }
    });

    bindChecklistAutocomplete();
    bindJVChecklistAutocomplete();

    bindAvgRateDatepicker();
    bindDocAttached();
    bindVentureDocAttached();

    // show comments history link
    $('#formWrapper').on('click', '.comments', function (e) {
        e.preventDefault();
        $('.loading_area').show();
        var id = $(this).attr('data-id');
        $.ajax({
            url: getBaseURL() +'project/landbank/getchecklisthistory?requesttype=initialfeasibility',
            data: {'CheckListTransId' : $(this).attr('data-id')},
            async: false,
            type: 'post',
            success: function(data,status, jqXHR){
                if (jqXHR.status == 200) {
                    var chklist = JSON.parse(data);
                    var template = $('#dummy-checklist-history').html();
                    var $checkListHistoryWrapper = $('#checklist-history-wrapper');

                    $('#chk-history-transid').val(chklist.CheckListTransId);
                    $('#checklist-history-title').html(chklist.CheckListName);
                    $checkListHistoryWrapper.html('');
                    $.each(chklist.history, function (i, obj) {
                        $checkListHistoryWrapper.append(
                            template.replace(/--USERPIC--/g, obj.UserLogo)
                                .replace(/--USERNAME--/g, obj.UserName)
                                .replace(/--DATETIME--/g, obj.RefDate)
                                .replace(/--PROGRESS--/g, obj.Status)
                                .replace(/--REMARKS--/g, obj.Remarks)
                        );
                    });
                    $('.comments_content').addClass('show');
                } else {
                    alert('Unable to get checklist, try again later!');
                }

                $('.loading_area').hide();
            }, error:function(jqXHR, textStatus, errorThrown){
                alert('Unable to get checklist, try again later!');
                $('.loading_area').hide();
            }
        });

        return false;
    });

    // delete comment link
    $('#formWrapper').on('click', '.comment-delete', function (e) {
        e.preventDefault();
        $('.loading_area').show();

        // check if checklist has history
        var hasChecklist = false;
        $.ajax({
            url: getBaseURL() +'project/landbank/checkforchecklisttrans?requesttype=initialfeasibility',
            data: {'CheckListTransId' : $(this).attr('data-id')},
            async: false,
            type: 'post',
            success: function(data,status, jqXHR){
                if (jqXHR.status == 200) {
                    hasChecklist = true;
                }

            }, error:function(jqXHR, textStatus, errorThrown){
                hasChecklist = true;
            }
        });

        if(hasChecklist) {
            alert('Sorry you cannot delete this checklist, since it has history!');
            $('.loading_area').hide();
            return false;
        }

        if (!confirm('Do you want to delete this checklist?')) {
            $('.loading_area').hide();
            return false;
        }

        var id = $(this).attr('data-id'),
            $li = $(this).closest('li');
        $.ajax({
            url: getBaseURL() +'project/landbank/deletechecklist?requesttype=initialfeasibility',
            data: {'CheckListTransId' : $(this).attr('data-id')},
            async: false,
            type: 'post',
            success: function(data,status, jqXHR){
                if (jqXHR.status == 200) {
                    $li.remove();
                } else {
                    alert('Unable to delete checklist, try again later!');
                }

                $('.loading_area').hide();
            }, error:function(jqXHR, textStatus, errorThrown){
                alert('Unable to delete checklist, try again later!');
                $('.loading_area').hide();
            }
        });

        return false;
    });

    // comment save
    var $chklist_history_form = $('#chklist-history-form');
    $('#btn-chk-history').on('click', function() {
        var $status = $('#chk-history-status');
        var $remarks = $('#chk-history-remarks');

        if($status.find('option:selected').val() == '') {
            alert('Status is required!');
            return;
        }

        if($remarks.val().length == 0) {
            alert('Remarks is required!');
            return;
        }

        $('.loading_area').show();
        $.ajax({
            url: getBaseURL() +'project/landbank/addchecklisthistory?requesttype=initialfeasibility',
            data: $chklist_history_form.serialize(),
            async: false,
            type: 'post',
            success: function(data,status, jqXHR){
                if (jqXHR.status == 200) {
                    renderChecklistHistory(JSON.parse(data));
                } else {
                    alert('Unable to add remarks, try again later!');
                }

            }, error:function(jqXHR, textStatus, errorThrown){
                alert('Unable to add remarks, try again later!');
            }
        });

        $status.find('option:first-child').prop('selected', true);
        $remarks.val('');
        $('.loading_area').hide();
    });

    // load checklist
    if(checklist_trans.length != 0) {
        renderChecklist(checklist_trans);
    }
    if(jv_checklist_trans.length != 0) {
        renderChecklist(jv_checklist_trans);
    }
    showHideCommentOptions();

    /*var CompetitorId = $('#competitorrowid').val();
     if(CompetitorId > 1) {
     updateCompChart();
     }*/
    if($('#competitorname_1').val().length != 0 && $('#competitorprojecttype_1').val().length != 0 && $('#competitorrate_1').val().length != 0 ) {
        updateCompChart();
    }
    if($('#avgdate_1').val().length != 0 && $('#avgprojecttype_1').val().length != 0 && $('#avgrate_1').val().length != 0 ) {
        updateAvgChart();
    }
    var rowid = $('#OwnerId').val();
    $('#surveyno_'+rowid).triggerHandler('blur');

    for(var i=1;i<=rowid;i++) {
        var Coowner = $('#coownerid_'+i).val();
        $('#workinfo_'+i+'_co_coownername_'+Coowner).triggerHandler('change');

        var Poowner = $('#prevownerid_'+i).val();
        $('#workinfo_'+i+'_po_prevownername_'+Poowner).triggerHandler('change');
    }

    var rowidSoil = $('#soildocumentrowid').val();
    $('#soilDocType_'+rowidSoil).triggerHandler('blur');

    var rowidJoint = $('#joinventuredocumentrowid').val();
    $('#joinVentureDocType_'+rowidJoint).triggerHandler('blur');

    var rowidShare = $('#sharetyperowid').val();
    $('#shareType_'+rowidShare).triggerHandler('blur');

    var rowidCompetitor = $('#competitorrowid').val();
    $('#competitorname_'+rowidCompetitor).triggerHandler('blur');

    var rowidAvg = $('#avgrowid').val();
    $('#avgdate_'+rowidAvg).triggerHandler('blur');

    $('#PropertyName').focus();
    $('#PropertyName').focusout();
});

/*function checkFSI(x) {
 var $x = $(x);
 var FSI = $x.val();
 if(FSI > 9.99) {
 showError($x, "Please Enter a valid FSI");
 } else {
 removeError($x);
 }

 }*/

//    function bindMap() {
////        $("#mapdiv").innerHTML="<object type='type/html' data='" + getBaseURL() + "project/landbank/locationmap" + "' ></object>";
//        //$("#mapdiv").load(getBaseURL() + "project/landbank/locationmap");
//    }


function showHideCommentOptions() {
    var cmts = $('.comments'),
        cmts_delete = $('.comment-delete');

    $.each(cmts, function (i, obj) {
        var $this = $(this),
            $cmt_delete = $this.next('.comment-delete');
        if($this.attr('data-id') != 0) {
            $this.show();
        }

        if($cmt_delete.attr('data-id') != 0) {
            $cmt_delete.show();
        }
    });
}

function removePropImage(x) {
    $(x).hide();
    $('#inputPropImage').remove();
    $('#propImg').remove();
    $('#landimage').show();
}

function bindChecklistAutocomplete() {
    // bind checklist autocomplete
    $('#chklist-name').autocomplete({
        lookup: tmp_arr_checklists,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        },
        onSelect: function (suggestion) {
            if (suggestion) {
                $('#chklist-id').val(suggestion.data);
            } else
                $('#chklist-new').hide();
        },
        onSearchStart: function (suggestion) {
            $('#chklist-id').val(0);
        },
        onSearchComplete: function (query, suggestions) {
            if (!suggestions.length) {
                $('#chklist-id').val('new');
                $('#chklist-new').show();
            } else {
                $('#chklist-new').hide();
            }
        }
    });
}

function bindJVChecklistAutocomplete() {
    // bind jv checklist autocomplete
    $('#ven-chklist-name').autocomplete({
        lookup: tmp_arr_jvchecklists,
        showNoSuggestionNotice: false,
        lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
            if (queryLowerCase == '*') {
                return suggestion.value;
            } else {
                var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                return re.test(suggestion.value);
            }
        },
        onSelect: function (suggestion) {
            if (suggestion) {
                $('#ven-chklist-id').val(suggestion.data);
            } else
                $('#ven-chklist-new').hide();
        },
        onSearchStart: function (suggestion) {
            $('#ven-chklist-id').val(0);
        },
        onSearchComplete: function (query, suggestions) {
            if (!suggestions.length) {
                $('#ven-chklist-id').val('new');
                $('#ven-chklist-new').show();
            } else {
                $('#ven-chklist-new').hide();
            }
        }
    });
}
// fetch data from land enquiry
function updateDetails(id) {
    $('.loading_area').show();
    $.ajax({
        url: getBaseURL() + "project/landbank/getenquirydetails",
        async: false,
        data: {'EnquiryId': id},
        type: 'post',
        success: function (data, status) {
            if(!data)
                return;

            var jsonData = $.parseJSON(data),
                detail = jsonData.enquiry;
            $roadWidth.val(detail.RoadWidth);
            $roadWidthUnitId.find('option[value="'+detail.RoadWidthUnitId+'"]').attr('selected','selected').siblings('option').removeAttr('selected');
            $roadWidthUnitId.trigger('change');
            $frontageArea.val(detail.FrontageArea);
            $frontageAreaUnitId.find('option[value="'+detail.FrontageAreaUnitId+'"]').attr('selected','selected').siblings('option').removeAttr('selected');
            $frontageAreaUnitId.trigger('change');
            $zoneType.find('option[value="'+detail.ZoneTypeId+'"]').attr('selected','selected').siblings('option').removeAttr('selected');
            $zoneType.trigger('change');

            if (jsonData.ownerDetailsCount != 0) {
                var $tbody = $('#ownerDetailsTable > tbody');
                $tbody.html(jsonData.ownerDetails);
                $('#OwnerId').val(jsonData.ownerDetailsCount);
                $('#surveyno_'+jsonData.ownerDetailsCount).trigger('change');
            }

            $propertyName.prop('readonly', true);
        }
    });

    // get checklist
//        $('#checklist-wrapper').html('');
//        $('#ven-checklist-wrapper').html('');
//        $.ajax({
//            url: getBaseURL() +'project/landbank/getchecklist?requesttype=initialfeasibility',
//            data: {'EnquiryId' : id},
//            async: false,
//            type: 'post',
//            success: function(data,status, jqXHR){
//                if (jqXHR.status == 200) {
//                    renderChecklist(JSON.parse(data));
//                }
//            }, error:function(jqXHR, textStatus, errorThrown){
//            }
//        });

    $('.loading_area').hide();
}

function renderChecklist(data) {
    $('.loading_area').show();

    var template = $('#dummy-checklist').html();
    var $checkListWrapper = $('#checklist-wrapper');
    var $venCheckListWrapper = $('#ven-checklist-wrapper');

    var $ven_rowid = $('#jvchecklist-rowid');
    var ven_rowid = parseInt($ven_rowid.val());
    if(isNaN(ven_rowid))
        ven_rowid = 0;

    var $rowid = $('#checklist-rowid');
    var rowid = parseInt($rowid.val());
    if(isNaN(rowid))
        rowid = 0;

    $.each(data, function (i, obj) {
        var userpic  = getBaseURL();
        var chkType  = obj.TypeId;

        if(obj.UserLogo != '' || obj.UserLogo != 'null')
            userpic += obj.UserLogo;
        else
            userpic += 'images/pro_user.png';

        if(chkType == '1') {
            rowid += 1;
            $checkListWrapper.append(
                template.replace(/--CHECKLISTNAME--/g, obj.CheckListName)
                    .replace(/--CHECKLISTID--/g, obj.CheckListId)
                    .replace(/--CHECKLISTTRANSID--/g, obj.CheckListTransId)
                    .replace(/--USERNAME--/g, obj.UserName)
                    .replace(/--ASSIGNEDTO--/g, obj.AssignedTo)
                    .replace(/--DATETIME--/g, obj.TargetDate)
                    .replace(/--PROGRESS--/g, obj.Status)
                    .replace(/--USERPIC--/g, userpic)
                    .replace(/__/g, '_'+rowid)
            );
        } else if(chkType == '2') {
            ven_rowid += 1;
            $venCheckListWrapper.append(
                template.replace(/--CHECKLISTNAME--/g, obj.CheckListName)
                    .replace(/--CHECKLISTID--/g, obj.CheckListId)
                    .replace(/--CHECKLISTTRANSID--/g, obj.CheckListTransId)
                    .replace(/--USERNAME--/g, obj.UserName)
                    .replace(/--ASSIGNEDTO--/g, obj.AssignedTo)
                    .replace(/--DATETIME--/g, obj.TargetDate)
                    .replace(/--PROGRESS--/g, obj.Status)
                    .replace(/--USERPIC--/g, userpic)
                    .replace(/__/g, '_jv_'+ven_rowid)
            );
        }
    });
    $ven_rowid.val(ven_rowid);
    $rowid.val(rowid);

    $('.loading_area').hide();
}

function renderChecklistHistory(history) {
    $('.loading_area').show();

    var template = $('#dummy-checklist-history').html();
    var $checkListHistoryWrapper = $('#checklist-history-wrapper');

    $checkListHistoryWrapper.append(
        template.replace(/--USERPIC--/g, history.UserLogo)
            .replace(/--USERNAME--/g, history.UserName)
            .replace(/--DATETIME--/g, history.RefDate)
            .replace(/--PROGRESS--/g, history.Status)
            .replace(/--REMARKS--/g, history.Remarks)
    );

    $('.loading_area').hide();
}

function closeComment() {
    $('#comments').removeClass('show');
}

// save checklist
function savechklist(type) {
    var prefix = '';
    var chktype = '1';
    if(typeof type != 'undefined' && type =='venture') {
        prefix = 'ven-';
        chktype = '2';
    }

    var $name = $('#' + prefix + 'chklist-name');
    var $id = $('#' + prefix + 'chklist-id');
    var $assigned_to = $('#' + prefix + 'chklist-assigned');
    var assigned_to_id = $('#' + prefix + 'chklist-assigned-id').val();
    var $date = $('#' + prefix + 'chklist-date');
    var $status = $('#' + prefix + 'chk-status');

    if($name.val().length == 0) {
        showError($name, "Required");
        return false;
    } else {
        removeError($name);
    }

    // check for checklist name exitst
    if($id.val() == 'new' && checkForCheckListUsage($name.val(), chktype)) {
        showError($name, "Already exists!");
        return false;
    } else {
        removeError($name);
    }

    if($assigned_to.val().length == 0 || assigned_to_id.length == 0 || assigned_to_id == 0 ) {
        showError($assigned_to, "Required");
        return false;
    } else {
        removeError($assigned_to);
    }

    if($date.val().length == 0) {
        showError($date, "Required");
        return false;
    } else {
        removeError($date);
    }

    if($status.val().length == 0 || $status.val() == '') {
        showError($status, "Required");
        return false;
    } else {
        removeError($status);
    }

    renderChecklist([{
        'CheckListName': $name.val(),
        'CheckListId': $id.val(),
        'CheckListTransId': 0,
        'TypeId': chktype,
        'UserName': $assigned_to.val(),
        'AssignedTo': assigned_to_id,
        'TargetDate': $date.val(),
        'Status': $status.val(),
        'UserLogo': ''
    }]);

    var json = {'data': $id.val(), 'value': $name.val()};
    if($id.val() == 'new' && prefix == '') {
        arr_checklists.push(json);
    } else if($id.val() == 'new' && prefix != '') {
        arr_jvchecklists.push(json);
    }

    $('#'+prefix+'chklist').modal('hide');
    $('#'+prefix+'chklist-form').find('input:not(.static)').val('');
    $('#'+prefix+'chklist-new').hide();

    if(prefix == '')
        checklistUnique();
    else
        vendorChecklistUnique();
}

function checklistUnique() {
    var name = $('input[name^=name_]');
    tmp_arr_checklists = arr_checklists;
    tmp_arr_checklists = $.grep(arr_checklists, function (element, index) {
        var is_selected = true;
//        console.log(name);
        $.each(name, function (i, obj) {
            var $this = $(this);
//            console.log($.trim(element.value),$.trim($this.val()))
            if ($.trim(element.value) == $.trim($this.val())) {
                is_selected = false;
            }
        });
        return is_selected;
    });

    bindChecklistAutocomplete();
}

function vendorChecklistUnique() {
    var name = $('input[name^=name_jv_]');
    tmp_arr_jvchecklists = arr_jvchecklists;
    tmp_arr_jvchecklists = $.grep(arr_jvchecklists, function (element, index) {
        var is_selected = true;
        $.each(name, function (i, obj) {
            var $this = $(this);
            if ($.trim(element.value) == $.trim($this.val())) {
                is_selected = false;
            }
        });
        return is_selected;
    });

    bindJVChecklistAutocomplete();
}

function toggleChkModal(modal) {
    var enquiryId = $('#EnquiryId').val();
    if(enquiryId.length == 0 || enquiryId == 0) {
        alert('Please select a property!');
        $('#PropertyName').focus();
        return false;
    }

    $(modal).modal('show');
}

function checkForCheckListUsage(name, type) {
    var isUsed = false;

    $('.loading_area').show();
    $.ajax({
        url: getBaseURL() + 'project/landbank/findchecklist',
        type: "post",
        data: {'name': name, 'type' : type},
        async: false,
        success: function (data, textStatus, jqXHR) {
            if(data == 'Y')
                isUsed = true;
            else
                isUsed = false;

            $('.loading_area').hide();
        }, error: function (jqXHR, textStatus, errorThrown) {
            isUsed = true;
            $('.loading_area').hide();
        }
    });
    return isUsed;
}

function bindAvgRateDatepicker() {
    // change avgRate datepicker format
    $('.avgRate_date_picker').datepicker( {
        format: "M-yyyy",
        startView: "months",
        minViewMode: "months"
    });
}

$(".content_wrapper").on('change', '.avgRate_date_picker',function(){
    $('.datepicker-dropdown').hide();
});

function bindShareTypeAutoComplete() {
    var $sharetypes = $('input[id^=shareType_]');
    $sharetypes.unbind('autocomplete');
    $.each($sharetypes, function (i, obj) {
        var $this = $(this),
            name = $this[0].id;
        if (name.indexOf('__') != -1) return;
        var key1 = name.split('_')[1];
        $this.autocomplete({
            lookup: arr_jvsharetypes,
            showNoSuggestionNotice: false,
            lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
                if (queryLowerCase == '*') {
                    return suggestion.value;
                } else {
                    var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                    return re.test(suggestion.value);
                }
            },
            onSelect: function (suggestion) {
                if (suggestion) {
                    $("#shareTypeId_" + key1).val(suggestion.data);
                    $("#shareType_" + key1).triggerHandler('change');
                    $(this).removeClass('error');
                }
            },
            onSearchStart: function (suggestion) {
                $("#shareTypeId_" + key1).val(0);
            },
            onSearchComplete: function (query, suggestions) {
                if (!suggestions.length) {
                    $(this).addClass('error');
                    $("#shareTypeId_" + key1).val(0);
                } else $(this).removeClass('error');
            }
        });
    });
}

function bindExpandTr() {
    var $tr = $(".mainTr");
    $tr.unbind('click');
    $tr.click(function(e){
        e.preventDefault();
        var $subtr = $(this).closest("tr").next(".subTr"),
            $i = $(this).find("i");

        if(!$subtr.is(":visible")){
            $subtr.show();
            $subtr.find(".subDiv").slideDown("slow");
            $i.addClass("tform");
        } else{
            $subtr.find(".subDiv").slideUp("slow");
            $subtr.slideUp("slow");
            $i.removeClass("tform");
        }
    });
}

function nextAccordian(id) {
    $('#panelheading-' + id).trigger('click');
}

function submitForm() {
    $('#formWrapper').submit();
}

var $propertyName = $('#PropertyName'),
    $enquiryId = $('#EnquiryId');

function entryValidate() {
    $propertyName.removeClass('error');
    if($propertyName.val().length == 0 || $enquiryId.val() == 0 || $enquiryId.val().length == 0) {
        $propertyName.addClass('error');
        $propertyName.focus();
        return false;
    }
    var rowlength = $('#ownerDetailsTable > tbody > tr:not(.subTr)').length;
    if(rowlength < 2) {
        alert("Owner details cannot be Empty");
        if($('#panelheading-5').attr('aria-expanded') == "false"){
            $('#panelheading-5').trigger('click');
        }
        return false;
    }

    var $error = $('.error');
    if($error.length != 0) {
        alert('Kindly notice the error notifications!');

        $error.parents('.collapse:not(.in)').siblings('.panel-heading').trigger('click');
        return false;
    }

    return true;
}

function changeSourceName(x) {
    var $el = $(x),
        name = 'Source Name';

    if ($el.val() != "")
        name = $el.find('option:selected').html() + ' Name';

    $('#SourceName').attr('label', name).nextAll('label.placeholder').html(name);
}

function validateEmail(x) {
    var $el = $(x);
    if(!/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test($el.val()))
        $el.addClass('error');
    else
        $el.removeClass('error');

}

function validateContactNo(x) {
    var $el = $(x);
    if(!/^[0-9\-\.\+]+$/.test($el.val()))
        $el.addClass('error');
    else
        $el.removeClass('error');
}

function contactKeyPress(event,x) {
    var charCode = (event.which) ? event.which : event.keyCode,
        value = $(x).val();
    if ((charCode != 43 || value.indexOf('+') != -1 || value.length != 0) &&
        (charCode < 48 || charCode > 57) && charCode !=37 && charCode!=39 && charCode!=8 && charCode!=35 && charCode!=36 && charCode!=9)
        return false;

    return true;
}

// Owner Details
function deleteSubTr(x,e) {
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $x = $(x),
        $tr = $x.closest('tr');

    if ($tr.parent('tbody').find('> tr').length == 1)
        addSubTr(x,true);

    $tr.remove();
    return false;
}

function deletePrevOwnerSubTr(x,e) {
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $x = $(x),
        $tr = $x.closest('tr');

    if ($tr.parent('tbody').find('> tr').length == 1)
        addPrevOwnerSubTr(x, true);

    $tr.remove();
    return false;
}

function deleteMainTr(x,e) {
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr:not(.subTr)').length == 1) {
        var template = $('#dummy-ownerdetails tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tbody.append(template);
        $('#OwnerId').val(1);

        bindExpandTr();
    }

    $tr.next('tr.subTr').remove();
    $tr.remove();
    return false;
}

function addSubTr(x, reset) {
    var $x = $(x),
        $tr = $x.closest('tr'),
        key = $x[0].id.split('_')[1];

    if ($tr.next('tr').length != 0)
        return;

    var $coownerid = $('#coownerid_' + key),
        count = parseInt($coownerid.val()) + 1,
        rowId = parseInt($coownerid.val()),
        template = $('#dummy-coowner tbody').html();

    if ($('#workinfo_'+key+'_co_coownername_' + rowId).val().length == 0 || $('#workinfo_'+key+'_co_fathername_' + rowId).val().length == 0
        || $('#workinfo_'+key+'_co_relationship_' + rowId).val().length == 0)
        return;

    if(typeof reset != 'undefined' && reset == true)
        count = 1;

    template = template.replace(/__0/g, '_' + key).replace(/__1/g, '_' + count);
    $tr.after(template);

    bindDatePicker();
    $coownerid.val(count);
}


function bindDatePicker() {
    $('.date_picker').datepicker({
        'format': 'dd-mm-yyyy'
    }).on('changeDate', function() {
        $('.datepicker').hide();
    }).data('datepicker');
}


function addPrevOwnerSubTr(x, reset) {
    var $x = $(x),
        $tr = $x.closest('tr'),
        key = $x[0].id.split('_')[1];

    if ($tr.next('tr').length != 0)
        return;

    var $prevownerid = $('#prevownerid_' + key),
        count = parseInt($prevownerid.val()) + 1,
        rowId = parseInt($prevownerid.val()),
        template = $('#dummy-prevowner tbody').html();

    if ($('#workinfo_'+key+'_po_prevownername_' + rowId).val().length == 0 || $('#workinfo_'+key+'_po_fathername_' + rowId).val().length == 0)
        return;

    if(typeof reset != 'undefined' && reset == true)
        count = 1;

    template = template.replace(/__0/g, '_' + key).replace(/__1/g, '_' + count);
    $tr.after(template);

    bindDatePicker();
    $prevownerid.val(count);
}

function addMainTr(x) {

    var $x = $(x),
        rowid  = $x[0].id.split('_')[1],
        $tr = $x.closest('tr');

    if ($tr.nextAll('tr:not(.subTr)').length != 0)
        return;

    if ($('#surveyno_' + rowid).val().length == 0 || $('#ownername_' + rowid).val().length == 0 || $('#landarea_' + rowid).val().length == 0)
        return;

    var $OwnerId = $('#OwnerId'),
        count = parseInt($OwnerId.val()) + 1,
        template = $('#dummy-ownerdetails tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.parent('tbody').append(template);

    $('.deleteOwnerDetails_' + rowid).show();
    $OwnerId.val(count);
    bindExpandTr();
}

function addNewSoilDocRow(x) {
    var $tr = $(x).closest('tr');
    if ($tr.next('tr').length != 0)
        return;

    var $rowid = $('#soildocumentrowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-soildoctype tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.parent('tbody').append(template);

    bindDocAttached();
    $rowid.val(count);
}

function bindDocAttached() {
    var soilDocFiles = $('input[id^=soilDocFile_]');
    soilDocFiles.unbind('change');

    soilDocFiles.on('change', function() {
        var $this = $(this);
        var $tarEl = $(this).siblings('i');
        var $tooltip = $tarEl.parent('span');
        var $tarA = $tarEl.closest('a');
        if($(this).val() != '') {
            $tarA.addClass('pull-left');
            $tarEl.removeClass('fa-paperclip').addClass('fa-file-o file-do');
            $tooltip.attr('data-original-title', 'Document Attached');

            if($tarA.next('i.brkn').length == 0)
                $('<i class="fa fa-chain-broken brkn" onclick="removeAttachment($(this));"></i>').insertAfter($tarA);

        } else {
            $tarA.next('i.brkn').remove();
            $tarEl.addClass('fa-paperclip').removeClass('fa-file-o file-do');
            $tooltip.attr('data-original-title', 'Click to attach documents');
        }
    });
}

function removeAttachment($tarEl) {

    if (!confirm('Do you want to Remove')) {
        return false;
    }

    var $tarLi = $tarEl.closest('li');
    var $tarA = $tarLi.find('a');
    var $tarI = $tarA.find('i.fa-file-o');
    var $tarIp = $tarLi.find('input[type="hidden"]');

    $tarIp.attr('type', 'file').removeAttr('value');
//        $tarA.attr('href', '#').removeAttr('download').removeAttr('target');
    $tarI.addClass('fa-paperclip').removeClass('fa-file-o file-do');
    $tarA.html('<span class="btn-file butclr_imp">' + $tarA.html() + '</span>');
    bindDocAttached();

    $tarEl.remove();
}


function deleteSoilDoc(x,e) {
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr').length == 1) {
        var template = $('#dummy-soildoctype tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tbody.append(template);
        $('#soildocumentrowid').val(1);

        bindExpandTr();
    }

    $tr.next('tr.subTr').remove();
    $tr.remove();
    return false;
}

function addNewJoinVentureDocRow(x) {
    var $tr = $(x).closest('tr');
    if ($tr.next('tr').length != 0)
        return;

    var $rowid = $('#joinventuredocumentrowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-joinventuredoctype tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.parent('tbody').append(template);

    bindVentureDocAttached();
    $rowid.val(count);
}

function bindVentureDocAttached() {
    var soilDocFiles = $('input[id^=joinVentureDocFile_]');
    soilDocFiles.unbind('change');

    soilDocFiles.on('change', function() {
        var $this = $(this);
        var $tarEl = $(this).siblings('i');
        var $tooltip = $tarEl.parent('span');
        var $tarA = $tarEl.closest('a');
        if($(this).val() != '') {
            $tarA.addClass('pull-left');
            $tarEl.removeClass('fa-paperclip').addClass('fa-file-o file-do');
            $tooltip.attr('data-original-title', 'Document Attached');

            if($tarA.next('i.brkn').length == 0)
                $('<i class="fa fa-chain-broken brkn" onclick="removeVentureAttachment($(this));"></i>').insertAfter($tarA);

        } else {
            $tarA.next('i.brkn').remove();
            $tarEl.addClass('fa-paperclip').removeClass('fa-file-o file-do');
            $tooltip.attr('data-original-title', 'Click to attach documents');
        }
    });
}

function removeVentureAttachment($tarEl) {

    if (!confirm('Do you want to Remove')) {
        return false;
    }

    var $tarLi = $tarEl.closest('li');
    var $tarA = $tarLi.find('a');
    var $tarI = $tarA.find('i.fa-file-o');
    var $tarIp = $tarLi.find('input[type="hidden"]');

    $tarIp.attr('type', 'file').removeAttr('value');
//        $tarA.attr('href', '#').removeAttr('download').removeAttr('target');
    $tarI.addClass('fa-paperclip').removeClass('fa-file-o file-do');
    $tarA.html('<span class="btn-file butclr_imp">' + $tarA.html() + '</span>');
    bindDocAttached();

    $tarEl.remove();
}

function deleteJoinVentureDoc(x,e) {
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr').length == 1) {
        var template = $('#dummy-joinventuredoctype tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tbody.append(template);
        $('#joinventuredocumentrowid').val(1);

        bindExpandTr();
    }

    $tr.next('tr.subTr').remove();
    $tr.remove();
    return false;
}

function addNewShareTypeRow(x) {
    var $x = $(x),
        rowid  = $x[0].id.split('_')[1],
        $tr = $x.closest('tr');

    var idStart = $x[0].id.split('_')[0];
    if(idStart == "sharePercentage") {
        var $x = $(x);
        if($x.val() > 100.00) {
            showError($x, "Percentage Cannot be more than 100%");
        } else {
            removeError($x);
        }
    }

    if ($tr.next('tr:not(.terms)').length != 0)
        return;

    if ($('#shareTypeId_' + rowid).val().length == 0 || $('#shareType_' + rowid).val().length == 0 || $('#shareArea_' + rowid).val().length == 0 || $('#sharePercentage_' + rowid).val().length == 0 || $('#shareAmount_' + rowid).val().length == 0)
        return;

    var $rowid = $('#sharetyperowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-joinventureshare tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.parent('tbody').find('tr.terms').before(template);
    $rowid.val(count);
    $('.deleteShareType_' + rowid).show();


    bindShareTypeAutoComplete();
}

function deleteShareType(x,e) {
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr:not(.terms)').length == 1) {
        var template = $('#dummy-joinventureshare tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tbody.find('tr.terms').before(template);
        $('#sharetyperowid').val(1);

        bindExpandTr();
        bindShareTypeAutoComplete();
    }

    $tr.next('tr.subTr').remove();
    $tr.remove();
    return false;
}

function addCompetitorRow(x) {
    var $tr = $(x).closest('tr');
    if ($tr.next('tr').length != 0)
        return;

    var $rowid = $('#competitorrowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-competitor tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.parent('tbody').append(template);
    $rowid.val(count);

    bindCompeProjTypeAutoComplete();
}

function addAvgRateRow(x) {
    var $tr = $(x).closest('tr');
    if ($tr.next('tr').length != 0)
        return;

    var $rowid = $('#avgrowid'),
        count = parseInt($rowid.val()) + 1,
        template = $('#dummy-avgrate tbody').html();

    template = template.replace(/__1/g, '_' + count);
    $tr.parent('tbody').append(template);
    $rowid.val(count);

    bindCompeProjTypeAutoComplete();
    bindAvgRateDatepicker();
}

function deleteCompetitorRate(x,e) {
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr').length == 1) {
        var template = $('#dummy-competitor tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tbody.append(template);
        $('#competitorrowid').val(1);

        bindCompeProjTypeAutoComplete();
        bindAvgRateDatepicker();
    }

    $tr.next('tr.subTr').remove();
    $tr.remove();
    updateCompChart();
    return false;
}

function deleteAvgRate(x,e) {
    e.preventDefault();
    if (!confirm('Do you want to Delete'))
        return false;

    var $tr = $(x).closest('tr'),
        $tbody = $tr.parent('tbody');

    if ($tbody.find('> tr').length == 1) {
        var template = $('#dummy-avgrate tbody').html();
        template = template.replace(/__1/g, '_' + 1);
        $tbody.append(template);
        $('#avgrowid').val(1);

        bindCompeProjTypeAutoComplete();
    }

    $tr.next('tr.subTr').remove();
    $tr.remove();
    updateAvgChart();
    return false;
}

function bindCompeProjTypeAutoComplete() {
    var $projecttypes = $('input[id*=projecttype_]');
    $projecttypes.unbind('autocomplete');
    $.each($projecttypes, function (i, obj) {
        var $this = $(this),
            name = $this[0].id;
        if (name.indexOf('__') != -1) return;
        var sStr =  name.split('_'),
            input = "#"+sStr[0]+"id_" + sStr[1];
        $this.autocomplete({
            lookup: arr_projecttypes,
            showNoSuggestionNotice: false,
            lookupFilter: function (suggestion, originalQuery, queryLowerCase) {
                if (queryLowerCase == '*') {
                    return suggestion.value;
                } else {
                    var re = new RegExp($.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');
                    return re.test(suggestion.value);
                }
            },
            onSelect: function (suggestion) {
                if (suggestion) {
                    $(input).val(suggestion.data);
                    $(this).removeClass('error');
                }
            },
            onSearchStart: function (suggestion) {
                $(input).val(0);
            },
            onSearchComplete: function (query, suggestions) {
                if (!suggestions.length) {
                    $(this).addClass('error');
                    $(input).val(0);
                } else $(this).removeClass('error');
            }
        });
    });
}

function updateCompChart() {
    var $rate = $('input[id^=competitorrate_]');
    var chartData = [];
    $.each($rate, function() {
        var $this = $(this),
            name = $this[0].id;
        if (name.indexOf('__') != -1) return;

        var key = name.split('_')[1],
            name = $('#competitorname_'+key).val(),
            rate =  $this.val();

        if (isNaN(parseFloat(rate)) || name == '')
            return;

        chartData.push({
            'Name': name,
            'Rate': rate
        });
    });
    if (competitorChart != null) {
        competitorChart.dataProvider = chartData;
        competitorChart.validateData();
        return;
    }

    competitorChart = AmCharts.makeChart("competitorChart", {
        "theme": "light",
        "type": "serial",
        "marginRight": 80,
        "autoMarginOffset": 20,
        "marginTop":20,
        "balloon": {
            "adjustBorderColor": false,
            "horizontalPadding": 10,
            "verticalPadding": 8,
            "color": "#ffffff"
        },

        "dataProvider": chartData,
        "valueAxes": [{
            "id": "v1",
            "axisAlpha": 0.1
        }],
        "graphs": [{
            "alphaField": "alpha",
            "balloonText": "<span style='font-size:12px;'>[[category]]<br><b>value: [[value]]</b></span>",
            "fillAlphas": 1,
            "title": "Income",
            "type": "column",
            "valueField": "Rate",
            "dashLengthField": "dashLengthColumn"
        }],
        "chartCursor": {
            "valueLineEnabled": true,
            "valueLineBalloonEnabled": true
        },
        "categoryField": "Name",
        "categoryAxis": {
            "gridPosition": "start",
            "axisAlpha": 0,
            "tickLength": 0
        }
    });
}

function updateAvgChart() {
    var $rate = $('input[id^=avgrate_]');
    var chartData = [];
    $.each($rate, function() {
        var $this = $(this),
            name = $this[0].id;
        if (name.indexOf('__') != -1) return;

        var key = name.split('_')[1],
            name = $('#avgdate_'+key).val(),
            rate =  $this.val();

        if (isNaN(parseFloat(rate)) || name == '')
            return;

        chartData.push({
            'Month/Year': name,
            'Rate': rate
        });
    });

    if (avgChart != null) {
        avgChart.dataProvider = chartData;
        avgChart.validateData();
        return;
    }

    avgChart = AmCharts.makeChart("avgChart", {
        "theme": "light",
        "type": "serial",
        "marginRight": 80,
        "autoMarginOffset": 20,
        "marginTop":20,
        "dataProvider": chartData,
        "valueAxes": [{
            "id": "v1",
            "axisAlpha": 0.1
        }],
        "graphs": [{
            "useNegativeColorIfDown": true,
            "balloonText": "[[category]]<br><b>value: [[value]]</b>",
            "bullet": "round",
            "bulletBorderAlpha": 1,
            "bulletBorderColor": "#FFFFFF",
            "hideBulletsCount": 50,
            "lineThickness": 2,
            "lineColor": "#fdd400",
            "negativeLineColor": "#67b7dc",
            "valueField": "Rate"
        }],
        "chartCursor": {
            "valueLineEnabled": true,
            "valueLineBalloonEnabled": true
        },
        "categoryField": "Month/Year",
        "categoryAxis": {
            "axisAlpha": 0,
            "minHorizontalGap": 60
        }
    });
}

function goBack() {
    <?php if($page == 'F') { ?>
        $('#IFEnquiryId').val($('#EnquiryId').val());
        $('#EnquiryName').val($('#PropertyName').val());
        $('#formfrom').val("title");
        $('#followupform').submit();
    <?php } else { ?>
        location.href =  getBaseURL() +'project/landbank/register';
    <?php } ?>
}
</script>
<script>
    $(document).ready(function () {
        UnoDropZone.init();
    });

    //Display files temp before upload
    function handleFileSelect(evt) {
        var files = evt.target.files; // FileList object
        if(files.length > 0) {
            $('#upload_photos').show();
            $('#label').show();
            // Loop through the FileList and render image files as thumbnails.
            for (var i = 0, f; f = files[i]; i++) {
                // Only process image files.
                if (!f.type.match('image.*')) {
                    continue;
                }
                var reader = new FileReader();
                // Closure to capture the file information.
                reader.onload = (function(theFile) {
                    return function(e) {
                        // Render thumbnail.
                        var span = document.createElement('span');
                        span.innerHTML = ['<img class="thumb_photos" src="', e.target.result,'" title="', escape(theFile.name), '"/>'].join('');
                        document.getElementById('upload_photos').insertBefore(span, null);
                    };
                })(f);
                // Read in the image file as a data URL.
                reader.readAsDataURL(f);
            }
            for (var i = 0, f; f = files[i]; i++) {
                // Only process image files.
                if (!f.type.match('video.*')) {
                    continue;
                }
                var span = document.createElement('span');
                var src = getBaseURL() + 'images/default_video.png';

                span.innerHTML = ['<img class="thumb_photos" src="', src,'" title="', escape('default_video.png'), '"/>'].join('');
                document.getElementById('upload_photos').insertBefore(span, null);

            }
        } else{
            $('#upload_photos').hide();
            $('#upload_photos').html("");
            $('#label').hide();
        }
    }
    document.getElementById('file-fr').addEventListener('change', handleFileSelect, false);

    $('#btnCamera').click(function () {
        $('#file-fr').click();
    });
    function panjsvalidation(pan){
        var panReg =/^([a-zA-Z]){5}([0-9]){4}([a-zA-Z]){1}?$/;
        if(!panReg.test(pan)){
            <?php if(isset($landInitialOwnerDetail) && count($landInitialOwnerDetail) != 0): $i=0;
            foreach($landInitialOwnerDetail as $ownerDetail): $i++; ?>
            if($('#workinfo_<?php echo $i;?>_panno').val() != 0) {
                alert("Please Enter a Valid pan Number");
                $('#workinfo_<?php echo $i;?>_panno').val('');
            }
            <?php $j=0; if(isset($landInitialCoOwnerDetail) && sizeof($landInitialCoOwnerDetail)>0):
           foreach($landInitialCoOwnerDetail as $coOwnerDetail):
           continue;$j++;?>

            if($('#workinfo_<?php echo $i;?>_co_panno_<?php echo $j;?>').val()!=0) {
                alert("Please Enter a Valid pan Number");
                $('#workinfo_<?php echo $i;?>_co_panno_<?php echo $j;?>').val('');
            }
            <?php endforeach; else:?>
            if($('#workinfo_1_co_panno_1').val() != 0) {
            alert("Please Enter a Valid pan Number");
            $('#workinfo__1_co_panno_1').val(''));
            }
            <?php  endif;?>
            return false;
            <?php endforeach; else:?>
            if($('#workinfo_1_panno').val() != 0) {
                alert("Please Enter a Valid pan Number");
                $('#workinfo_1_panno').val('');
            }
            <?php  endif;?>
            return false;
        }
    }
//    function passjsvalidation(pass){
//        var passReg =/[a-zA-Z]{2}[0-9]{7}/;
//        if(!passReg.test(pass)){
//            <?php //if(isset($landInitialOwnerDetail) && count($landInitialOwnerDetail) != 0): $i=0;
//            foreach($landInitialOwnerDetail as $ownerDetail): $i++; ?>
//            if($('#workinfo_<?php //echo $i;?>//_passportno').val() != 0) {
//                alert("Please Enter a Valid passport Number");
//                $('#workinfo_<?php //echo $i;?>//_passportno').val('');
//            }
//            <?php //$j=0; if(isset($landInitialCoOwnerDetail) && sizeof($landInitialCoOwnerDetail)>0  ):
//           foreach($landInitialCoOwnerDetail as $coOwnerDetail):
//           continue;$j++;?>
//            if($('#workinfo_<?php //echo $i;?>//_co_passportno_<?php //echo $j;?>//').val() != 0) {
//                alert("Please Enter a Valid passport Number");
//                $('#workinfo_<?php //echo $i;?>//_co_passportno_<?php //echo $j;?>//').val('');
//            }
//            <?php //endforeach; else:?>
//            if($('#workinfo_1_co_passportno_1').val() != 0) {
//                alert("Please Enter a Valid passport Number");
//                $('#workinfo_1_co_passportno_1').val('');
//            }
//            <?php // endif;?>
//            return false;
//            <?php //endforeach; else:?>
//            if($('#workinfo_1_passportno').val() != 0) {
//                alert("Please Enter a Valid passport Number");
//                $('#workinfo_1_passportno').val('');
//            }
//            <?php // endif;?>
//            return false;
//        }
//    }
function addres(va){
    <?php if(isset($landInitialOwnerDetail) && count($landInitialOwnerDetail) != 0): $i=0;
            foreach($landInitialOwnerDetail as $ownerDetail): $i++; ?>
    $('#owneraddress_<?php echo $i;?>').attr('title',$(va).val());

    <?php $j=0; if(isset($landInitialCoOwnerDetail) && sizeof($landInitialCoOwnerDetail)>0  ):
       foreach($landInitialCoOwnerDetail as $coOwnerDetail):
       continue;$j++;?>
    $('#workinfo_<?php echo $i;?>_co_coowneraddress_<?php echo $j;?>').attr('title',$(va).val());
    <?php endforeach; else:?>
    $('#workinfo_1_co_coowneraddress_1').attr('title',$(va).val());
    <?php  endif;?>
    <?php endforeach; else:?>
    $('#owneraddress_1').attr('title',$(va).val());
    <?php  endif;?>
}

</script>
