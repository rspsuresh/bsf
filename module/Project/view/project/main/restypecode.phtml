<!--STYLE-->
<link rel="stylesheet" href="<?php echo $this->basePath() . '/css/project.css';?>"/>
<!--STYLE-->
<style>
    .savebtn_areas {
        margin-bottom:25px !important;
    }
</style>
<div class="content_wrapper padlr0">
    <div class="container-fluid">
        <div class="col-lg-12 page_tittle">
            <h1 class="text-center">Resource Type Code</h1>
        </div>
        <div class="col-lg-12 clear top-mar">
            <div class="row">
                <div class="col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3 inbotom">
                    <form class="form-horizontal" method="post" role="form" >
                        <div>
                        <table class="table" style=" margin-bottom:0px;">
                            <thead>
                            <tr>
                                <th>Resource Type</th>
                                <th>Code</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td><label>Labour</label></td>
                                <td><input type="text" class="parent_text" maxlength="5" id ="labourcode" name="labourcode" value="<?php echo isset($labourcode)?$labourcode:''; ?>" onblur="checkAll()"></td>
                            </tr>
                            <tr>
                                <td><label>Material</label></td>
                                <td><input type="text" class="parent_text" maxlength="5" id ="materialcode" name="materialcode" value="<?php echo isset($materialcode)?$materialcode:''; ?>" onblur="checkAll()"></td>
                            </tr>
                            <tr>
                                <td><label>Asset</label></td>
                                <td><input type="text" class="parent_text" maxlength="5" id ="assetcode" name="assetcode" value="<?php echo isset($assetcode)?$assetcode:''; ?>" onblur="checkAll()"></td>
                            </tr>
                            <tr>
                                <td><label>Activity</label></td>
                                <td><input type="text" class="parent_text" maxlength="5" id ="activitycode" name="activitycode" value="<?php echo isset($activitycode)?$activitycode:''; ?>" onblur="checkAll()"></td>
                            </tr>
                            </tbody>
                         </table>
                        </div>
                        <div class="clearfix"></div>
                            <div class="row">
                            <div class="savebtn_areas col-lg-8 col-lg-offset-4 col-md-8 col-md-offset-4 col-sm-8 col-sm-offset-3 col-xs-9 col-xs-offset-2 clear padtop20" style="border:none;">
                                <ul>
                                    <li><a href="<?php echo $this->basePath(); ?>/project/dashboard/projectmain" class="ripple">Cancel</a></li>
                                    <li class="subs"> <a href="javascript:submitForm();" class="ripple">Submit</a> </li>
                                </ul>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!--
<div class="col-lg-12 savebtn_area">
    <ul>
        <li class="dropdown save_btn float_r">
            <a href="javascript:submitForm();" data-toggle="tooltip" class="ripple" title="Submit!">Submit</a>
        </li>
        <li class="cancel_btn float_r"><a href="codesetup" class="ripple">Cancel</a></li>

    </ul>
</div>-->
<script type="text/javascript">
    function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode;

        if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;

        return true;
    }
    function submitForm() {
        checkAll();
        if ($('#labourcode').hasClass('error')) return;
        if ($('#materialcode').hasClass('error')) return;
        if ($('#assetcode').hasClass('error')) return;
        if ($('#activitycode').hasClass('error')) return;

        $('form').submit();
    }

    function checkAll() {
        checkCode("labourcode");
        checkCode("materialcode");
        checkCode("assetcode");
        checkCode("activitycode");
    }

    function checkCode(id) {
        removeError($('#'+id));
        var sCode = $('#'+id).val().trim();
        if (sCode =="")  showError($('#'+id), 'Code Should not Empty');
        if (id == "labourcode") {
            if (sCode.toLowerCase() == $('#materialcode').val().trim().toLowerCase()) {
                showError($('#'+id), 'Already Available');
                return;
            }
            if (sCode.toLowerCase() == $('#assetcode').val().trim().toLowerCase()) {
                showError($('#'+id), 'Already Available');
                return;
            }
            if (sCode.toLowerCase() == $('#activitycode').val().trim().toLowerCase()) {
                showError($('#'+id), 'Already Available');
                return;
            }
        } else if (id == "materialcode") {
            if (sCode.toLowerCase() == $('#labourcode').val().trim().toLowerCase()) {
                showError($('#'+id), 'Already Available');
                return;
            }
            if (sCode.toLowerCase() == $('#assetcode').val().trim().toLowerCase()) {
                showError($('#'+id), 'Already Available');
                return;
            }
            if (sCode.toLowerCase() == $('#activitycode').val().trim().toLowerCase()) {
                showError($('#'+id), 'Already Available');
                return;
            }
        } else if (id == "assetcode") {
            if (sCode.toLowerCase() == $('#labourcode').val().trim().toLowerCase()) {
                showError($('#' + id), 'Already Available');
                return;
            }
            if (sCode.toLowerCase() == $('#materialcode').val().trim().toLowerCase()) {
                showError($('#' + id), 'Already Available');
                return;
            }
            if (sCode.toLowerCase() == $('#activitycode').val().trim().toLowerCase()) {
                showError($('#' + id), 'Already Available');
                return;
            }
        } else if (id == "activitycode") {
            if (sCode.toLowerCase() == $('#labourcode').val().trim().toLowerCase()) {
                showError($('#' + id), 'Already Available');
                return;
            }
            if (sCode.toLowerCase() == $('#materialcode').val().trim().toLowerCase()) {
                showError($('#' + id), 'Already Available');
                return;
            }
            if (sCode.toLowerCase() == $('#assetcode').val().trim().toLowerCase()) {
                showError($('#' + id), 'Already Available');
                return;
            }
        }
    }

</script>