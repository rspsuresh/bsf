<link rel="stylesheet" href="<?php echo $this->basePath() . '/css/vendor.css';?>"/>
<?php $this->bsf = new \BuildsuperfastClass(); ?>
<style type="text/css">
    .heading_checkbox{float:left;margin-right:20px;}
    .srch{margin-bottom:5px;}
    .srch_icn {position: absolute;z-index: 999;bottom: 21px;left: 145px;font-size: 18px;color: #0aa89e;}
    .srch > input[type=text] {width: 122px;box-sizing: border-box;border: 2px solid #d3e4ef;font-size: 16px;background-color: white;background-position: 1px 5px;background-repeat: no-repeat;padding: 9px 8px 12px 32px;transition: width 0.4s ease-in-out;position: relative;}
    .srch>input[type=text]:focus {width: 55%;}
    </style>
<div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1">
    <div class="col-lg-12">
        <div class="row">
            <div class="step_by_liner animated slideInDown"></div>
            <ul class="step_by stepby_mb60">
                <li class="opacity_08">
                    <div  class="step_by_sep  animated slideInRight"><p>17</p></div>
                    <p class="stepli_p3">Manufacture</p>
                </li>
                <li>
                    <div class="step_by_sep stepsep_active animated_1_5s  slideInRight"><p>18</p></div>
                    <p class="stepli_p2">Dealer</p>
                </li>
                <li class="opacity_08">
                    <div class="step_by_sep  animated slideInRight"><p>19</p></div>
                    <p class="stepli_p3">Distributor</p>
                </li>
            </ul>
        </div>
    </div>
</div>
<div class="content_wrapper  padlr0">
	<div class="container-fluid">
<!--	--><?php //include("menu.phtml"); ?>
	<div class="panel-group commargin_top" id="accordion" role="tablist" aria-multiselectable="true">
		<div class="panel panel-default">
			<div class="panel-heading accordion_head accordion_head_crnt" style="cursor:pointer" role="tab" id="headingOne" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
				<h4>Dealer</h4>
			</div>
			<form method="post" role="form"  action="" enctype="multipart/form-data">
				<input type="hidden" name="vendorId" id="vendorId" value="<?php echo $this->bsf->encode($vendorId); ?>">
                <input type="hidden" name="saveExit" id="saveExit" value="1">
				<div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" style="overflow: hidden;" aria-labelledby="headingOne">
					<div class="panel-body">
						<div class="col-lg-6 col-md-8 clear">
							<label class="heading_checkbox">Dealer List</label>
                            <div class="srch">
                                <i class="fa fa-search srch_icn" style=""></i>
                                <input type="text" name="search" id="searchDealer" placeholder="Search by DealerName" style="color: #0aa89e;"/>
                            </div>
						</div>
						<div class="col-lg-6 col-md-8 ">
							<label class="heading_checkbox">Selected Dealer</label>
						</div>
                        <div class="clearfix"></div>
						<div class="col-lg-6 col-md-8 ">
							<div class="card">
								<div class="card-body" style="min-height:50px; max-height:310px;" id="serdeal">
									<!--checkboxtabel-->              
									<ul class="sampleUI list ui-sortable" data-sortable="true" id="unCheckedUl">                                                                                       
									<?php
									$Hidcid = array();
									foreach($ResultWG as $rdata1){	
									?>															
									<li class="tile ui-sortable-handle<?php echo (($rdata1['Sel']==1)?' check_vendor_background': '');?>">
										<div class="checkbox checkbox-styled tile-text vendor_checkboxborder_gray">
											<label>
												<input type="checkbox" name="customize_<?php echo $rdata1['VendorId'];?>" tagname='cid' cid="<?php echo $rdata1['VendorId'];?>" id="customize_<?php echo $rdata1['VendorId'];?>" value="<?php echo $rdata1['VendorId'];?>_S" <?php echo (($rdata1['Sel']==1)?'checked="checked"': '');?>>											
												<span><?php echo $rdata1['VendorName'];?></span>
											</label>
										</div>									
									</li>
									<?php
									}								
									?>	
									</ul>																								
									<!--end of checkboxtabel-->               
								</div>
							</div>													
						</div>           
						<!--end of scrollbar-->
						<div class="col-lg-6 col-md-8">
							<div class="card">
								<div class="card-body" style="min-height:50px; max-height:310px;">
									<!--checkboxtabel-->              
									<ul class="sampleUI list ui-sortable" data-sortable="true" id="checkedUl">                                                                                       
									<?php
									$Hidcid = array();
									foreach($ResultSelWG as $rdataSel1){	
									?>															
									<li class="tile ui-sortable-handle<?php echo (($rdataSel1['Sel']==1)?' check_vendor_background': '');?>">
										<div class="checkbox checkbox-styled tile-text vendor_checkboxborder_gray">
											<label>
												<input type="checkbox" name="customize_<?php echo $rdataSel1['VendorId'];?>" tagname='cid' cid="<?php echo $rdataSel1['VendorId'];?>" id="customize_<?php echo $rdataSel1['VendorId'];?>" value="<?php echo $rdataSel1['VendorId'];?>_S" <?php echo (($rdataSel1['Sel']==1)?'checked="checked"': '');?>>
												<?php
												if ($rdataSel1['Sel']==1){
													array_push($Hidcid, $rdataSel1['VendorId']);
												}
												?>
												<span><?php echo $rdataSel1['VendorName'];?></span>
											</label>
										</div>									
									</li>
									<?php
									}
									$hid = implode(",", $Hidcid);
									?>	
									<input type="hidden" name="hidcid" id="hidcid" value="<?php echo $hid; ?>"> 
									</ul>																								
									<!--end of checkboxtabel-->               
								</div>
							</div>													
						</div>
						
					</div>
					<!--end .card-body -->
				</div>
				<!--end .card -->
			</form>
		</div>
	</div>
	</div>
</div>
<div class="col-lg-12 savebtn_area">
    <ul>
        <li id="sData" class="save_btn float_r">
            <a href="javascript:void(0);" data-attr="1" class="ripple">Save &amp; Exit </a>
        </li>
        <li id="submitData" class="dropdown save_btn float_r">
            <a href="javascript:void(0);" class="ripple" >Save &amp; Next</a>
        </li>
        <li class="goto">
        <label for="go_to" class="float_l">Go to</label>
            <select id="dropdown" name="dropdown" class="dropdown float_l goto_select" title="Choose Page to go....">
                <option value="1">Basic Details</option>
                <option value="2">Contact Details</option>
                <option value="3">Statutory Details</option>
                <option value="4">Bank Details</option>
                <option value="5">Branch Details</option>
                <option value="6">Experience Details</option>
                <option value="7">Vendor Terms</option>
                <option value="8">Assessment</option>
                <option value="9">Vendor Registration</option>
                <option value="10">Resource</option>
                <option value="11">Financial</option>
                <option value="12">Supply</option>
                <option value="13">Work Group</option>
                <option value="14">Service</option>
                <option value="15">Other Details</option>
                <option value="16">Manufacture Details</option>
                <option value="17"selected="selected" style="background-color:gray;color:white;">Dealer Details</option>
                <option value="18">Distributor Details</option>
                <option value="19">Vehicle Details</option>
                <option value="20">Vendor Renewal</option>
                <option value="21">Vendor Profile</option>
            </select>
        </li>
        <li id="back" class="cancel_btn float_r" ><a href="<?php echo $this->basePath();?>/vendor/index/manufacture-detail/<?php echo $this->bsf->encode($vendorId); ?>" class="ripple">back</a></li>
    </ul>
</div>
<script>

    $("#dropdown").change(function(){
        if($(this).val() == 1){
            $(location).attr('href',"../basic-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 2){
            $(location).attr('href',"../contact-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 3){
            $(location).attr('href',"../statutory-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 4){
            $(location).attr('href',"../bankfinance-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 5){
            $(location).attr('href',"../branch/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 6){
            $(location).attr('href',"../experience-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 7){
            $(location).attr('href',"../vendor-terms/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 8){
            $(location).attr('href',"../assessment-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 9){
            $(location).attr('href',"../vendor-registration/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 10){
            $(location).attr('href',"../resource/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 11){
            $(location).attr('href',"../financial/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 12){
            $(location).attr('href',"../supply/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 13){
            $(location).attr('href',"../works/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 14){
            $(location).attr('href',"../service/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 15){
            $(location).attr('href',"../others/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 16){
            $(location).attr('href',"../manufacture-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 17){
            $(location).attr('href',"../dealer-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 18){
            $(location).attr('href',"../distributor-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 19){
            $(location).attr('href',"../vehicleregister/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 20){
            $(location).attr('href',"../vendor-renewal/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 21){
            $(location).attr('href',"../vendor-profile/<?php echo $vendorId; ?>");
        }
    });


    var cid = <?php echo json_encode($Hidcid); ?>;

    $(document).on('change','.sampleUI input:checkbox', function (){
     var current = $(this).closest('li');
	 if(current.find("input:checkbox").is(':checked')){
		var prependToDiv = $('#checkedUl');
		current.animate({
			top: -30,
			left: prependToDiv.offset().left
		}, 200, function() {
			current.prependTo(prependToDiv).css({
			   top: 'auto',
			   left: 'auto'
			});
		});
	 }
	 else{
		var prependToDiv = $('#unCheckedUl');
		current.animate({
			top: -30,
			left: -prependToDiv.offset().left
			
		}, 200, function() {
			current.prependTo(prependToDiv).css({
			   top: 'auto',
			   left: 'auto'
			});        
		});		 
	 }
  });
  
$("input:checkbox").click(function(){
   var id = $(this).attr("cid");
	if($(this).is(":checked")){
		if($(this).attr("tagname") == 'cid'){
			cid.push(id);
			$(this).closest("li").addClass('check_vendor_background');
		}									
	}
	else{
		//cid.splice($.inArray($(this).attr("resurceid"), resourceId),1)
		if($(this).attr("tagname") == 'cid'){
			cid.splice($.inArray(id, cid), 1);
			$(this).closest("li").removeClass('check_vendor_background');
		}						
	}
});

$("#submitData").click(function(){
	$("#hidcid").val(cid);
	$("form").submit();
});

    $("#sData").click(function(){
        $("#hidcid").val(cid);
        var sum=2;
        $("#saveExit").val(sum);
        $("form").submit();
    });

    var DealerResult=<?php echo (isset($ResultWG)) ? json_encode($ResultWG) : '[]';?>;
    var dealerlist ='';
    dealerlist = DealerResult;
    $("#searchDealer").on('keyup', function () {
        var dn = '';
        var dealer = $.trim($(this).val());
        if(dealer.length != 0 && DealerResult.length != 0) {
            var filtered_data = $.grep(DealerResult, function (o) {
                return new RegExp('^.*'+dealer+'.*$','gi').test(o.VendorName);
            });
            $('#serdeal').html('');
            $.each(filtered_data, function(i,t){
                dn += '<ul class="sampleUI list ui-sortable" data-sortable="true"  id="unCheckedUl">' +
                '<li class="tile ui-sortable-handle_'+ t.Sel + '"> ' +
                '<div class="checkbox checkbox-styled tile-text vendor_checkboxborder_gray"> ' +
                '<label> ' +
                '<input type="checkbox" name="customize_' + t.VendorId + '" id="customize_' + t.VendorId + '"  tagname= "cid"  cid="' + t.VendorId + ' value="' + t.VendorId + '" '+((t.Sel == 1)? "checked": "")+' /> ' +
                '<span> '+t.VendorName+' </span> ' +
                '</label> ' +
                '</div> ' +
                '</li> '  +
                '</ul>';
            });
            $('#serdeal').html(dn);
        }
        else if(dealer.length==0 || dealer==''){
            var dealername='';
            $.each(dealerlist, function(i,n){
                dealername += '<ul class="sampleUI list ui-sortable" data-sortable="true"  id="unCheckedUl">' +
                '<li class="tile ui-sortable-handle_'+ n.Sel + '"> ' +
                '<div class="checkbox checkbox-styled tile-text vendor_checkboxborder_gray"> ' +
                '<label> ' +
                '<input type="checkbox" name="customize_' + n.VendorId + '" id="customize_' + n.VendorId + '"  tagname= "cid"  cid="' + n.VendorId + ' value="' + n.VendorId + '" '+((n.Sel == 1)? "checked": "")+' /> ' +
                '<span> '+n.VendorName+' </span> ' +
                '</label> ' +
                '</div> ' +
                '</li> '  +
                '</ul>';
            });
            $('#serdeal').html(dealername);
        }
    });

</script>
		