<?php $this->bsf = new \BuildsuperfastClass(); ?>
<div class="content_wrapper  padlr0">
	<div class="container-fluid">
<!--	--><?php //include("menu.phtml"); ?>
<!--        <div class="col-lg-12">-->
<!--            <h1 class="padbtm0">Financial Details</h1>-->
<!--        </div>-->
        <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1">
            <div class="col-lg-12">
                <div class="row">
                    <div class="step_by_liner animated slideInDown"></div>
                    <ul class="step_by stepby_mb60">
                        <li class="opacity_08">
                            <div  class="step_by_sep  animated slideInRight"><p>11</p></div>
                            <p class="stepli_p3">Resource</p>
                        </li>
                        <li>
                            <div class="step_by_sep stepsep_active animated_1_5s  slideInRight"><p>12</p></div>
                            <p class="stepli_p2">Financial Details</p>
                        </li>
                        <li class="opacity_08">
                            <div class="step_by_sep  animated slideInRight"><p>13</p></div>
                            <p class="stepli_p3">Supply Details</p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
	<form action="" method="post" enctype="multipart/form-data">
		 <div class="row">
			<div class="col-lg-12 clear commargin_top">
				<div class="table-responsive clear">
                    <input type="hidden" name="saveExit" id="saveExit" value="1">
				<input type='hidden' name='vendorId' id='vendorId' value='<?php echo $this->bsf->encode($vendorId) ?>' />
				<input type="hidden" name="hidFinId" id="hidFinId">						
					<table class="table table-hover clear" id="techTable">
						<thead>
						  <tr>
							<th>Financial year</th>
							<th>Value</th>
							<th></th>
						  </tr>
						</thead>
						<tbody>
						<?php 
							$count=0;
							foreach($financialResult as $financialData){
								$count=$count+1;																							
						?>
							<tr>
								<td width="11%"> <input type="text" class="parent_txts newRow" onkeypress="return alphaNumeric(event)" onkeypress="return isNumberKey(event)" maxlength="4" name="financial_year_<?php echo $count;?>" id="financial_year_<?php echo $count;?>" tagname="financial_year" value="<?php echo $financialData['FYear'];?>" /></td>
								<td width="11%"> <input type="text" class="parent_txts" style="text-align: right;" name="financial_value_<?php echo $count;?>" id="financial_value_<?php echo $count;?>" tagname="financial_value" value="<?php echo number_format((float)$financialData['Value'], 2, '.', '');?>" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" /></td>
								<td width="2%"><a href="#" class="removeTech vendar_styles"><span class="glyphicon glyphicon-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete"></span></a></td>									
							</tr>
						<?php
						}
						if($count==0){
						?>
							<tr>
								<td width="11%"> <input type="text" class="parent_txts newRow" onkeypress="return alphaNumeric(event)" name="financial_year_1" id="financial_year_1" maxlength="4"  tagname="financial_year" /></td>
								<td width="11%"> <input type="text" class="parent_txts" style="text-align: right;" name="financial_value_1" id="financial_value_1" tagname="financial_value" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)"  /></td>
								<td width="2%"><a href="#" class="removeTech vendar_styles"><span class="glyphicon glyphicon-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete"></span></a></td>									
							</tr>
						<?php
						}
						else{
							$count=$count+1;
						?>
							<tr>
								<td width="11%"> <input type="text" class="parent_txts newRow" name="financial_year_<?php echo $count;?>" id="financial_year_<?php echo $count;?>" maxlength="4"  tagname="financial_year" /></td>
								<td width="11%"> <input type="text" class="parent_txts" style="text-align: right;" name="financial_value_<?php echo $count;?>" id="financial_value_<?php echo $count;?>" tagname="financial_value" onblur="return FormatNum(this, 2)" onkeypress="return isDecimal(event,this)" /></td>
								<td width="2%"><a href="#" class="removeTech vendar_styles"><span class="glyphicon glyphicon-trash" data-toggle="tooltip" data-placement="top" data-original-title="Delete"></span></a></td>									
							</tr>
						<?php
						}
						?>		  
						</tbody>
					</table>
				</div>                         
			 </div> 
		</div>
		</form>
	 </div>
</div>
<div class="col-lg-12 savebtn_area">
    <ul>
        <li id="sData" class="save_btn float_r">
            <a href="javascript:void(0);" data-attr="1" class="ripple">Save &amp; Exit </a>
        </li>
        <li id="submitData" class="dropdown save_btn float_r">
            <a href="javascript:void(0);" class="ripple" >Save &amp; Next</a>
        </li>
        <li class="goto">
        <label for="go_to" class="float_l">Go to</label>
            <select id="dropdown" name="dropdown" class="dropdown float_l goto_select" title="Choose Page to go....">
                <option value="1">Basic Details</option>
                <option value="2">Contact Details</option>
                <option value="3">Statutory Details</option>
                <option value="4">Bank Details</option>
                <option value="5">Branch Details</option>
                <option value="6">Experience Details</option>
                <option value="7">Vendor Terms</option>
                <option value="8">Assessment</option>
                <option value="9">Vendor Registration</option>
                <option value="10">Resource</option>
                <option value="11" selected="selected" style="background-color:gray;color:white;">Financial</option>
                <option value="12">Supply</option>
                <option value="13">Work Group</option>
                <option value="14">Service</option>
                <option value="15">Other Details</option>
                <option value="16">Manufacture Detail</option>
                <option value="17">Dealer Detail</option>
                <option value="18">Distributor Detail</option>
                <option value="19">Vehicle Details</option>
                <option value="20">Vendor Renewal</option>
                <option value="21">Vendor Profile</option>
            </select>
        </li>
        <li id="back" class="cancel_btn float_r" ><a href="<?php echo $this->basePath();?>/vendor/index/resource/<?php echo $this->bsf->encode($vendorId); ?>" class="ripple">back</a></li>
    </ul>
</div>
<script>

    $("#dropdown").change(function(){
        if($(this).val() == 1){
            $(location).attr('href',"../basic-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 2){
            $(location).attr('href',"../contact-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 3){
            $(location).attr('href',"../statutory-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 4){
            $(location).attr('href',"../bankfinance-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 5){
            $(location).attr('href',"../branch/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 6){
            $(location).attr('href',"../experience-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 7){
            $(location).attr('href',"../vendor-terms/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 8){
            $(location).attr('href',"../assessment-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 9){
            $(location).attr('href',"../vendor-registration/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 10){
            $(location).attr('href',"../resource/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 11){
            $(location).attr('href',"../financial/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 12){
            $(location).attr('href',"../supply/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 13){
            $(location).attr('href',"../works/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 14){
            $(location).attr('href',"../service/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 15){
            $(location).attr('href',"../others/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 16){
            $(location).attr('href',"../manufacture-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 17){
            $(location).attr('href',"../dealer-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 18){
            $(location).attr('href',"../distributor-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 19){
            $(location).attr('href',"../vehicleregister/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 20){
            $(location).attr('href',"../vendor-renewal/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 21){
            $(location).attr('href',"../vendor-profile/<?php echo $vendorId; ?>");
        }
    });



    removeTechtr();
	$(".addTech").bind("click", function(){
		var table = $("#techTable tbody");
		table.append("<tr>"+table.find("tr:first").html()+"</tr>");
		table.find("tr:last td:last").append("<input type='button' class='btn btn-primary removeTech' value='Remove'>");
		var len = table.find("tr").length;
		table.find("tr").each(function(){
			var index=$(this).index() + 1;
			$(this).find("select, input:text").each(function(){
				$(this).attr("name", $(this).attr("tagname")+'_'+index);
				$(this).attr("id", $(this).attr("tagname")+'_'+index);
				if(len == index)
					$(this).val('');
			});
		});
		removeTechtr();
	});

    function removeTechtr(){
        $('.removeTech').click(function(){
            if (!confirm('Do you want to Delete'))
                return false;
            if($(this).closest('tr').parent().find('tr').length != 1){
                $(this).closest('tr').remove();
                $('#documentTable tbody tr').each(function(){
                    var index=$(this).index() + 1;
                    $(this).find('select, input:text').each(function(){
                        $(this).attr('name', $(this).attr('tagname')+'_'+index);
                        $(this).attr('id', $(this).attr('tagname')+'_'+index);
                    })

                });
            } else {
                $('.delFirst').val('');
            }
        });
    }


//	function removeTechtr(){
//		$(".removeTech").unbind("click");
//		$(".removeTech").bind("click", function(){
//			if($(this).closest("tr").index() != 0){
//                if (!confirm('Do you want to Delete'))
//                return false;
//				var table = $(this).closest("table");
//				$(this).closest("tr").remove();
//				var len = table.find("tbody:first tr").length;
//				table.find("tbody tr").each(function(){
//					var index=$(this).index() + 1;
//					$(this).find("select, input:text").each(function(){
//						$(this).attr("name", $(this).attr("tagname")+'_'+index);
//						$(this).attr("id", $(this).attr("tagname")+'_'+index);
//					});
//				});
//			}
//		});
//	}
	
	addRow();
	function addRow(){
		$( ".newRow" ).unbind();
		$( ".newRow" ).bind('keyup', function() {
		//alert($(this).closest("tr").index()+"------------"+$("#contactTable tbody tr:last").index())
			if($(this).val().length>0 && $(this).closest("tr").index() == $("#techTable tbody tr:last").index()){
				$("#techTable tbody").append("<tr>"+$("#techTable tbody tr:first").html()+"</tr>");
					$("#techTable tbody tr").each(function(){
					var index=$(this).index() + 1;
					var lastIndex=$("#techTable tbody tr:last").index() + 1;
					$(this).find("select, input:text").each(function(){
						if(index==lastIndex){
							if($(this).prop("tagName").toLowerCase() == 'input')
								$(this).val("");
							else
								$(this).val("1");
						}
						$(this).attr("name", $(this).attr("tagname")+'_'+index);
						$(this).attr("id", $(this).attr("tagname")+'_'+index);		
					})
				});	
				removeTechtr();
				addRow();
			}
		});
	}
	$("#submitData").click(function(){
		$("#hidFinId").val($("#techTable tbody tr").length);
		$("form").submit();
	})

    $("#sData").click(function(){
        $("#hidFinId").val($("#techTable tbody tr").length);
        var sum=2;
        $("#saveExit").val(sum);
        $("form").submit();
    })
</script>
		