<style>
.stat {font-size: 16px;color: #2559AA;margin-top: 28px !important;float: left;padding-right: 6px !important;}
.error_message  {z-index:1 !important;}
.idnty{color:#3a4ed5;font-size:14px;padding-top:5px;padding-bottom:5px;}
.mar_btm{margin-bottom:30px;}
.top_30{margin-top:30px;}
</style>

<?php $this->bsf = new \BuildsuperfastClass(); ?>
<div class="content_wrapper padlr0">
	<div class="container-fluid">
        <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1">
            <div class="col-lg-12">
                <div class="row">
                    <div class="step_by_liner animated slideInDown"></div>
                    <ul class="step_by stepby_mb60">
                        <li class="opacity_08">
                            <div  class="step_by_sep  animated slideInRight"><p>3</p></div>
                            <p class="stepli_p3">Contact Details</p>
                        </li>
                        <li>
                            <div class="step_by_sep stepsep_active animated_1_5s  slideInRight"><p>4</p></div>
                            <p class="stepli_p2">Statutory Details</p>
                        </li>
                        <li class="opacity_08">
                            <div class="step_by_sep  animated slideInRight"><p>5</p></div>
                            <p class="stepli_p3">Bank Details</p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
		<div class="row"> 
			<form class="form-horizontal" method="post" enctype="multipart/form-data">
			<input type="hidden" name="vendorId" id="vendorId" value="<?php echo $this->bsf->encode($vendorId); ?>" />
			<input type="hidden" name="saveExit" id="saveExit" value="1">
				<div class="col-lg-12">
					<div class="col-lg-3">
						<div class="" id="statutorydetail1">
							<h1 class="txt_center mar_btm">VAT Details</h1>
							<div class="form-group req_flds">
								<input type="text" class="form-control lbl_move" label="Constitution Firm" name="constitutionfirm" onkeypress="return alphaNumeric(event)" value="<?php if($statutoryResults) { echo $statutoryResults['FirmType']; }?>">
							</div>
							<div class="form-group req_flds">
								<input type="text" class="form-control lbl_move" label="Year Of Establishment" id="year" name="yearofestablishment" value="<?php if($statutoryResults) { echo $statutoryResults['EYear']; } ?>" onkeypress="return isNumberKey(event);" maxlength="4" onblur="return yearcheck(this.value);" ondrop="return false;" onpaste="return false;">
							</div>
							<div class="form-group req_flds">
								<input type="text" class="form-control lbl_move" label="TIN No" name="tinno" value="<?php if($statutoryResults) { echo $statutoryResults['TINNo']; } ?>" onkeypress="return isNumberKey(event);" maxlength="11" ondrop="return false;" onpaste="return false;">
							</div>
							<div class="form-group req_flds">
								<input type="text" class="form-control lbl_move special" label="Cheque On Name"   name="con" value="<?php if($statutoryResults) { echo $statutoryResults['ChequeonName']; } ?>">
							</div>
							<div class="form-group req_flds">
								<input type="text" class="form-control lbl_move" label="TAN No" name="tanno" id="tannum" value="<?php if($statutoryResults) { echo $statutoryResults['TANNo']; } ?> " onkeypress="return alphaNumeric(event);" maxlength="10" ondrop="return false;" onpaste="return false;">
							</div>
							<div class="form-group req_flds">
								<input type="text" class="form-control lbl_move" label="CST No" name="cstno" value="<?php if($statutoryResults) { echo $statutoryResults['CSTNo']; } ?> " maxlength="11" ondrop="return false;" onpaste="return false;">
							</div>
							<div class="form-group req_flds col-lg-12 padlr0">
								<span class="date_icon"><i class="fa fa-calendar"></i></span>
								<input type="text" name="cstdate" id="cstdate" readonly class="form-control lbl_move datepickerinput"  label="CST Date" value="<?php echo (($statutoryResults)?date('m-d-Y',strtotime($statutoryResults['CSTDate'])): date("d-m-Y")); ?>"  />
							</div>
						</div>
					</div>
					<!-- Step 2 -->
					<div class="col-lg-3 col-lg-offset-1">
						<div class="" id="statutorydetail2">
							<h1 class="txt_center mar_btm">Service Tax Details</h1>
							<div class="form-group req_flds">
								<input type="text" class="form-control lbl_move" label="Service Tax No" style='text-transform:uppercase' onkeypress="return alphaNumeric(event)" id="service" maxlength="15" name="servicetaxno" value="<?php if($statutoryResults) { echo $statutoryResults['ServiceTaxNo']; } ?>" onblur="return taxValidation(this.value);"  ondrop="return false;" onpaste="return false;">
								<div class="error_message"><p>(Ex: SDEFR3452DFR456)</p></div>
							</div>
							<div class="form-group req_flds">
								<input type="text" class="form-control lbl_move" label="TNGST No" name="tngstno" maxlength="20" onkeypress="return isNumberKey(event)" value="<?php if($statutoryResults) { echo $statutoryResults['TNGSTNo']; } ?>">
							</div>
							<div class="form-group req_flds">
								<input type="text" class="form-control lbl_move" label="SSI REGD. No" maxlength="20" onkeypress="return isNumberKey(event)" name="ssiregdno" value="<?php if($statutoryResults) { echo $statutoryResults['SSIREGDNo']; } ?>">
							</div>
							<div class="form-group req_flds">
								<input type="text" class="form-control lbl_move" id="service" label="Service Tax Circle" maxlength="20" onkeypress="return alphaNumeric(event)" name="servicetaxcircle" value="<?php if($statutoryResults) { echo $statutoryResults['ServiceTaxCir']; } ?>">
							</div>
							<div class="form-group req_flds">
								<input type="text" class="form-control lbl_move" label="EPF No" style='text-transform:uppercase' name="epino" id="epf" maxlength="15" onkeypress="return alphaNumeric(event)" value="<?php if($statutoryResults) { echo $statutoryResults['EPFNo']; } ?>"  ondrop="return false;" onpaste="return false;">
							</div>
							<div class="form-group req_flds">
								<input type="text" class="form-control lbl_move" label="ESI No" style='text-transform:uppercase' name="esino" id="esi" maxlength="15" onkeypress="return alphaNumeric(event)" value="<?php if($statutoryResults) { echo $statutoryResults['ESINo']; } ?> "  ondrop="return false;" onpaste="return false;">
							</div>
						</div>
					</div>
					<!-- Step 3 -->
					<div class="col-lg-3 col-lg-offset-1">
						<div class="" id="statutorydetail3">
							<h1 class="txt_center mar_btm">Excise Details</h1>		
							<div class="clear" style="margin-top:5px;margin-bottom:5px;"> 
								<label for="statutorydetail3" class="stat">Excise Details</label>								
								<div class="radio_check">
									<p class="stat_lbl">
										<input type="radio" value="1" id="availExciseYes" name="availExcise" <?php if(isset($statutoryResults) && $statutoryResults['AvailExcise'] == 1) { echo "checked"; } ?> />
										<label for="availExciseYes" class="ripple">Yes</label>
									</p>
									<p class="stat_lbl">
										<input type="radio" value="0" id="availExciseNo" name="availExcise" <?php if(isset($statutoryResults) && $statutoryResults['AvailExcise'] == 0) { echo "checked"; } if(!isset($statutoryResults)){ echo "checked";} ?> />
										<label for="availExciseNo" class="ripple">No</label>
									</p>
								</div>
							</div>
							<div id="q1"> 
								<div class="form-group req_flds">
									<input type="text" class="form-control lbl_move" onkeypress="return alphaNumeric(event)" label="Excise RegNo" maxlength='20' name="exciseregno" value="<?php if($statutoryResults) { echo $statutoryResults['ExciseRegNo']; } ?> ">
								</div>
							</div>
							<div id="q2"> 
								<div class="form-group req_flds">
									<input type="text" class="form-control lbl_move" onkeypress="return alphaNumeric(event)" label="Excise Range" maxlength='20' name="exciserange" value="<?php if($statutoryResults) { echo $statutoryResults['ExciseRange']; } ?> ">
								</div>
							</div>
							<div id="q3"> 
								<div class="form-group req_flds">
									<input type="text" class="form-control lbl_move" onkeypress="return alphaNumeric(event)" label="Excise Division" maxlength='20' name="excisedivision" value="<?php if($statutoryResults) { echo $statutoryResults['Excisedivision']; } ?> " />
								</div>
							</div>
							<div id="q4">
								<div class="form-group req_flds">
									<input type="text" class="form-control lbl_move"  style='text-transform:uppercase' onkeypress="return alphaNumeric(event)" maxlength='20' label="ECCNo" name="eccno" value="<?php if($statutoryResults) { echo $statutoryResults['ECCno']; } ?> ">
								</div>
							</div>
							<div class="" style="margin-top:5px;margin-bottom:5px;">
								<label for="statutorydetail3" class="stat">VAT Remittence</label>
								<div class="radio_check">
									<p class="stat_lbl">
										<input type="radio" value="1" id="vatYes" name="vatRemittance" <?php if(isset($statutoryResults) && $statutoryResults['VatRemittance'] == 1) { echo "checked"; } ?> />
										<label for="vatYes" class="ripple">Yes</label>
									</p>
									<p class="stat_lbl">
										<input type="radio" value="0" id="vatNo" name="vatRemittance" <?php if(isset($statutoryResults) && $statutoryResults['VatRemittance'] == 0) { echo "checked"; } if(!isset($statutoryResults)){ echo "checked";} ?> />
										<label for="vatNo" class="ripple">No</label>
									</p>
								</div>
							</div>
							<div id="q5">
								<div class="form-group req_flds col-lg-12 padlr0">
									<span class="date_icon"><i class="fa fa-calendar"></i></span>
									<input type="text" name="remittanceDate" id="RemittanceDate" value="<?php echo (($statutoryResults)?date("d-m-y",strtotime($statutoryResults['RemittanceDate'])): date("d-m-Y")); ?>" readonly class="form-control lbl_move datepickerinput"   label="Remittence Effects From" />
								</div>
							</div>
						</div>
					</div>
				</div>
            </form>
		</div>
   	</div>
</div>
<div class="col-lg-12 savebtn_area">
	<ul>
        <li id="sData" class="save_btn float_r">
            <a href="javascript:void(0);" data-attr="1" class="ripple">Save &amp; Exit </a>
        </li>
        <li id="continue" class="dropdown save_btn float_r">
            <a href="javascript:void(0);" class="ripple">Save &amp; Next</a>
        </li>
        <li class="goto">
        <label for="go_to" class="float_l">Go to</label>
            <select id="dropdown" name="dropdown" class="dropdown float_l goto_select" title="Choose Page to go....">
                <option value="1">Basic Details</option>
                <option value="2">Contact Details</option>
                <option value="3" selected="selected"  style="background-color:gray;color:white;">Statutory Details</option>
                <option value="4">Bank Details</option>
                <option value="5">Branch Details</option>
                <option value="6">Experience Details</option>
                <option value="7">Terms</option>
                <option value="8">Assessment</option>
                <option value="9">Registration</option>
                <option value="10">Resource</option>
                <option value="11">Financial</option>
                <option value="12">Supply</option>
                <option value="13">Work Group</option>
                <option value="14">Service</option>
                <option value="15">Other Details</option>
                <option value="16">Manufacture</option>
                <option value="17">Dealer</option>
                <option value="18">Distributor</option>
                <option value="19">Vehicle Details</option>
                <option value="20">Vendor Renewal</option>
                <option value="21">Vendor Profile</option>
            </select>
        </li>
        <li id="back" class="cancel_btn float_r"><a href="javascript:void(0);" class="ripple">back</a></li>
  	</ul>
</div>

<script>
$(document).ready(function() {
    var mode = <?php  echo (isset($smode)) ? $smode : 0; ?>;
    var yoe =$("#year");

//    if(mode==1) {
//        $(".showDiv").hide();
//        $("#statutorydetail3").show();
//        $("#sData").show();
//    }
    if(yoe == ''){
        var ab='';
        $("#year").val(ab);
    }
//    if ($("#statutorydetail3").is(":visible")) {
//        $("#continue").find("a").text("Save & Next");
//    }
});

$("#dropdown").change(function(){
    if($(this).val() == 1){
        $(location).attr('href',"../basic-detail/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 2){
        $(location).attr('href',"../contact-detail/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 3){
        $(location).attr('href',"../statutory-detail/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 4){
        $(location).attr('href',"../bankfinance-detail/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 5){
        $(location).attr('href',"../branch/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 6){
        $(location).attr('href',"../experience-detail/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 7){
        $(location).attr('href',"../vendor-terms/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 8){
        $(location).attr('href',"../assessment-detail/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 9){
        $(location).attr('href',"../vendor-registration/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 10){
        $(location).attr('href',"../resource/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 11){
        $(location).attr('href',"../financial/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 12){
        $(location).attr('href',"../supply/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 13){
        $(location).attr('href',"../works/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 14){
        $(location).attr('href',"../service/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 15){
        $(location).attr('href',"../others/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 16){
        $(location).attr('href',"../manufacture-detail/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 17){
        $(location).attr('href',"../dealer-detail/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 18){
        $(location).attr('href',"../distributor-detail/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 19){
        $(location).attr('href',"../vehicleregister/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 20){
        $(location).attr('href',"../vendor-renewal/<?php echo $this->bsf->encode($vendorId); ?>");
    }
    if($(this).val() == 21){
        $(location).attr('href',"../vendor-profile/<?php echo $vendorId;?>");
    }
});

//$(".showDiv").hide();
//$("#statutorydetail1").show();

// newly added
<?php if(isset($statutoryResults) && $statutoryResults['AvailExcise']==1 ){ ?>
	$('#q1 , #q2 , #q3 , #q4').show();
<?php } else { ?>
	$('#q1 , #q2 , #q3 , #q4').hide();
<?php } ?>

$('input[name="availExcise"]').on('change', function() {
	if($(this).val() == 1){ 
		$('#q1, #q2, #q3 , #q4').show();
	} else {
		$('#q1, #q2, #q3 , #q4').hide();
	}
});

<?php if(isset($statutoryResults) && $statutoryResults['VatRemittance']==1 ){ ?>
	$('#q5').show();
<?php } else { ?>
	$('#q5').hide();
<?php } ?>

$('input[name="vatRemittance"]').on('change', function() {
	if($(this).val() == 1){ 
		$('#q5').show();
	} else {
		$('#q5').hide();
	}
});
 function yearcheck(year)
 {
     if(year>2017){
         $("#year").closest(".req_flds").find(".error_message").show();
         $("#year").focus();
         return false;
     }
     else{
         $("#year").closest(".req_flds").find(".error_message").hide();
     }

 }
// newly added
$("#continue").click(function(){
	var ele = $(".showDiv:visible");
	var bool = true;
	if(bool){
        if(errorFlag == 1){
            alert("Kindly Notice the Service TaxNo");
            return false;
        }
//		if($(".showDiv:visible").index() != $(".showDiv:last").index()){
//			$("#back").show();
//            if(errorFlag == 1){
//                alert("Kindly Notice the Service TaxNo Notifications");
//                return false;
//            }else{
//                $(".showDiv:visible").next(".showDiv").show();
//                ele.hide();
//                if ($("#statutorydetail2").is(":visible")) {
//                    if(errorFlag == 1){
//                        alert("Kindly Notice the Service TaxNo");
//                        return false;
//                    }
//                }
//                if ($("#statutorydetail3").is(":visible")) {
//                    $("#continue").find("a").text("Save & Next");
//                    $("#sData").show();
//                }
//            }
//		}
		else{
			$('form').submit();
		}
	}
});




$("#back").click(function(){
    location.replace("<?php echo $this->basePath();?>/vendor/index/contact-detail/<?php echo $this->bsf->encode($vendorId); ?>");
//    if ($("#statutorydetail3").is(":visible")) {
//        $("#continue").find("a").text("Save & Next");
//        $("#sData").hide();
//    }
//   else if ($("#statutorydetail2").is(":visible")) {
//        $("#continue").find("a").text("Continue");
//        $("#sData").hide();
//    }
//    else if ($("#statutorydetail1").is(":visible")) {
//        $("#continue").find("a").text("Continue");
//        $("#sData").hide();
//    }
//	var ele = $(".showDiv:visible");
//	if($(".showDiv:visible").index() == 1)

//	    $(".showDiv:visible").closest(".showDiv").prev(".showDiv").show();
//		ele.hide();
});


errorFlag = 0;
function taxValidation(tax) {
    var taxVal = /^([a-zA-Z]){5}([0-9]){4}([a-zA-Z]){3}([0-9]){3}?$/;
    if (!taxVal.test(tax)) {
        $("#service").closest(".req_flds").find(".error_message ").show();
        errorFlag = 1;
        $("#service").focus();
        return false;
    }
    else{
        $("#service").closest(".req_flds").find(".error_message ").hide();
        errorFlag = 0;
    }
}

$('.datepickerinput').datepicker({
    format: "dd-mm-yyyy",
    startDate: new Date(),
    orientation: "top auto",
    autoclose: true
}).on("changeDate", function(e){
    $("#dateSpan").text($(this).val());
});
$('.date_icon').click(function() {
    var input = $(this).parent().find('input').datepicker('show');
});

function goBack() {
    window.history.back();
}

//$(".special").keydown(function (e) {
//    var key = e.which || e.keyCode;
//    if (!e.shiftKey && !e.altKey && !e.ctrlKey &&
//            // numbers
//        key >= 48 && key <= 57 ||
//            // Numeric keypad
//        key == 48 || key == 57){
//        return false;
//    }
//    else{
//        return true;
//    }
//
//});

$("#sData").click(function(){
        var sum=2;
        $("#saveExit").val(sum);
        $('form').submit();
});
</script>








