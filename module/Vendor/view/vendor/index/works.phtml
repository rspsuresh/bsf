<link rel="stylesheet" href="<?php echo $this->basePath() . '/css/vendor.css';?>"/>
<style type="text/css">
</style>
<?php $this->bsf = new \BuildsuperfastClass(); ?>
<!--<div class="col-lg-12">-->
<!--    <h1 class="padbtm0">Work Group</h1>-->
<!--</div>-->
<div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1">
    <div class="col-lg-12">
        <div class="row">
            <div class="step_by_liner animated slideInDown"></div>
            <ul class="step_by stepby_mb60">
                <li class="opacity_08">
                    <div  class="step_by_sep  animated slideInRight"><p>13</p></div>
                    <p class="stepli_p3">Supply</p>
                </li>
                <li>
                    <div class="step_by_sep stepsep_active animated_1_5s  slideInRight"><p>14</p></div>
                    <p class="stepli_p2">Work Group</p>
                </li>
                <li class="opacity_08"><div class="step_by_sep  animated slideInRight"><p>15</p></div>
                    <p class="stepli_p3">Service</p>
                </li>
            </ul>
        </div>
    </div>
</div>
<div class="content_wrapper  padlr0">
	<div class="container-fluid">
<!--		--><?php //include("menu.phtml"); ?>
		<form method="post" role="form"  action="" enctype="multipart/form-data">
            <input type="hidden" name="saveExit" id="saveExit" value="1">
			<input type="hidden" name="vendorId" id="vendorId" value="<?php echo $this->bsf->encode($vendorId); ?>">
			<div class="panel-group commargin_top" id="accordion2" role="tablist" aria-multiselectable="true">
				<div class="panel panel-default">
					<div class="panel-heading accordion_head accordion_head_crnt" style="cursor:pointer" role="tab" id="heading-6" data-toggle="collapse" data-parent="#accordion2" href="#collapse6" aria-expanded="true" aria-controls="collapse6">
						<h4>Work Group</h4>
					</div>
					<div id="collapse6" class="panel-collapse collapse in" role="tabpanel" style="overflow: hidden;" aria-labelledby="heading-6">
						<div class="panel-body">
							<div class="col-lg-6 col-md-8">
								<label class="heading_checkbox" >WorkGroup List</label>
<!--								<div class="checkbox checkbox-styled">-->
<!--									<label>-->
<!--										<input type="checkbox" class="select" id="select_all" onclick="selectAll(this);"/>-->
<!--										<span style="font-size:16px !important;">Select All</span>-->
<!--									</label>-->
<!--								</div>-->
							</div>
							<div class="col-lg-6 col-md-8">
								<label class="heading_checkbox" >Selected Work Group</label>
<!--								<div class="checkbox checkbox-styled">-->
<!--									<label>-->
<!--										<input type="checkbox" class="deselect" id="deselect_all" onclick="selectAll(this);"/>-->
<!--										<span style="font-size:16px !important;">Deselect All</span>-->
<!--									</label>-->
<!--								</div>-->
							</div>
                            <div class="srch">
                                <i class="fa fa-search srch_icn"></i>
                                <input type="text" name="search" id="searchwork" placeholder="Search by WorkGroupName" style="color: #0aa89e;"/>
                            </div>
							<div class="col-lg-6 col-md-8">
								<div class="card">
									<div class="card-body" style="min-height:50px; max-height:310px;" id="searchWorkgrp">
									   <!--checkboxtabel-->              
										<ul class="sampleUI list ui-sortable sel_group" data-sortable="true" id="unCheckedUl">
											<?php
											foreach($ResultWG as $rdata1){
											?>															
											<li class="tile ui-sortable-handle<?php echo (($rdata1['Sel']==1)?' check_vendor_background': '');?>">
												<div class="checkbox checkbox-styled tile-text vendor_checkboxborder_gray">
													<label>
														<input type="checkbox" name="customize_<?php echo $rdata1['WorkGroupId'];?>" tagname='cid' cid="<?php echo $rdata1['WorkGroupId'];?>" id="customize_<?php echo $rdata1['WorkGroupId'];?>" value="<?php echo $rdata1['WorkGroupId'];?>_S">												
														<span><?php echo $rdata1['WorkGroupName'];?></span>
													</label>
												</div>									
											</li>
											<?php
											}				
											?>																										                                                                                       
										</ul>
									   <!--end of checkboxtabel-->               
									</div>
								</div>
							</div>           
							<!--end of scrollbar-->
                            <div class="col-lg-6 col-md-8">
								<div class="card">
									<div class="card-body" style="min-height:50px; max-height:310px;">
									   <!--checkboxtabel-->
										<ul class="sampleUI select list ui-sortable deselect" data-sortable="true" id="checkedUl">
											<?php
											$Hidcid = array();
											foreach($ResultSelWG as $rdataSel1){
											?>
											<li class="tile ui-sortable-handle<?php echo (($rdataSel1['Sel']==1)?' check_vendor_background': '');?>">
												<div class="checkbox checkbox-styled tile-text vendor_checkboxborder_gray">
													<label>
														<input type="checkbox" name="customize_<?php echo $rdataSel1['WorkGroupId'];?>" tagname='cid' cid="<?php echo $rdataSel1['WorkGroupId'];?>" id="customize_<?php echo $rdataSel1['WorkGroupId'];?>" value="<?php echo $rdataSel1['WorkGroupId'];?>_S" <?php echo (($rdataSel1['Sel']==1)?'checked="checked"': '');?>>
														<?php
														if ($rdataSel1['Sel']==1){
															array_push($Hidcid, $rdataSel1['WorkGroupId']);
														}
														?>
														<span><?php echo $rdataSel1['WorkGroupName'];?></span>
													</label>
												</div>
											</li>
											<?php
											}

											?>
											<input type="hidden" name="hidcid" id="hidcid" value="<?php echo implode(",", $Hidcid); ?>">
										</ul>
									   <!--end of checkboxtabel-->
									</div>
								</div>
							</div>
						</div>
                        <div class="cont_bt col-lg-5 col-lg-offset-7 col-md-9 col-md-offset-3 col-sm-7 col-sm-offset-5 col-xs-7 col-xs-offset-5 top-5">
                            <ul>
                                <li><a href="javascript:nextAccordian(7)">Continue &nbsp;<i class="fa fa-chevron-circle-right"></i></a></li>
                            </ul>
                        </div>
					</div>                                                	
				</div>
				<div class="panel panel-default">
					<div class="panel-heading accordion_head" style="cursor:pointer" role="tab" id="heading-7"  data-toggle="collapse" data-parent="#accordion2" href="#collapse7" aria-expanded="false" aria-controls="collapse7">
						<h4>Activity Group</h4>
					</div>
					<div id="collapse7" class="panel-collapse collapse" role="tabpanel" style="height:485px; overflow: hidden;" aria-labelledby="heading-7">
						<div class="panel-body">
                            <div class="col-lg-6 col-md-8">
                                <label class="heading_checkbox" >Select ActivityGroup</label>
                            </div>
                            <div class="col-lg-6 col-md-8">
                                <label class="heading_checkbox" >Selected ActivityGroup</label>
                            </div>
                            <div class="srch">
                                <i class="fa fa-search srch_icn"></i>
                                <input type="text" name="search" id="searchactivity" placeholder="Search by ActivityName" style="color: #0aa89e;"/>
                            </div>
                            <div class="col-lg-6 col-md-8">
                                <div class="card">
                                    <div class="card-body" style="min-height:50px; max-height:310px;" id="seractgrp">
                                        <!--checkboxtabel-->
                                        <ul class="sampleUI1 list ui-sortable sel_group" data-sortable="true" id="unCheckedUl_1">
                                            <?php
                                            foreach($ResultAG as $rdata2){
                                                ?>
                                                <li class="tile ui-sortable-handle<?php echo (($rdata2['Sel']==1)?' check_vendor_background': '');?>">
                                                    <div class="checkbox checkbox-styled tile-text vendor_checkboxborder_gray">
                                                        <label>
                                                            <input type="checkbox" name="customize_<?php echo $rdata2['ResourceGroupId'];?>" tagname='cid1' cid1="<?php echo $rdata2['ResourceGroupId'];?>" id="customize_<?php echo $rdata2['ResourceGroupId'];?>" value="<?php echo $rdata2['ResourceGroupId'];?>_S">
                                                            <span><?php echo $rdata2['ResourceGroupName'];?></span>
                                                        </label>
                                                    </div>
                                                </li>
                                            <?php
                                            }
                                            ?>
                                        </ul>
                                        <!--end of checkboxtabel-->
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-8">
                                <div class="card">
                                    <div class="card-body" style="min-height:50px; max-height:310px;">
                                        <!--checkboxtabel-->
                                        <ul class="sampleUI1 select list ui-sortable deselect" data-sortable="true" id="checkedUl_1">
                                            <?php
                                            $Hidcid1 = array();
                                            foreach($ResultSelAG as $rdataSel2){
                                                ?>
                                                <li class="tile ui-sortable-handle<?php echo (($rdataSel2['Sel']==1)?' check_vendor_background': '');?>">
                                                    <div class="checkbox checkbox-styled tile-text vendor_checkboxborder_gray">
                                                        <label>
                                                            <input type="checkbox" name="customize_<?php echo $rdataSel2['ResourceGroupId'];?>" tagname='cid1' cid1="<?php echo $rdataSel2['ResourceGroupId'];?>" id="customize_<?php echo $rdataSel2['ResourceGroupId'];?>" value="<?php echo $rdataSel2['ResourceGroupId'];?>_S" <?php echo (($rdataSel2['Sel']==1)?'checked="checked"': '');?>>
                                                            <?php
                                                            if ($rdataSel2['Sel']==1){
                                                                array_push($Hidcid1, $rdataSel2['ResourceGroupId']);
                                                            }
                                                            ?>
                                                            <span><?php echo $rdataSel2['ResourceGroupName'];?></span>
                                                        </label>
                                                    </div>
                                                </li>
                                            <?php
                                            }
                                            ?>
                                            <input type="hidden" name="hidcid1" id="hidcid1" value="<?php echo implode(",", $Hidcid1); ?>">
                                        </ul>
                                        <!--end of checkboxtabel-->
                                    </div>
                                </div>
                            </div>
						</div>
					</div>			
				</div>                                                	
			</div>
		</form>
	</div>
	<div class="col-lg-12 savebtn_area">
		<ul>
            <li id="sData" class="save_btn float_r">
                <a href="javascript:void(0);" data-attr="1" class="ripple">Save &amp; Exit </a>
            </li>
            <li id="submitData" class="dropdown save_btn float_r">
				<a href="javascript:void(0);" class="ripple" >Save &amp; Next</a>
			</li>
			<li class="goto">
				<label for="go_to" class="float_l">Go to</label>
				<select id="dropdown" name="dropdown" class="dropdown float_l goto_select" title="Choose Page to go....">
					<option value="1">Basic Details</option>
					<option value="2">Contact Details</option>
					<option value="3">Statutory Details</option>
					<option value="4">Bank Details</option>
					<option value="5">Branch Details</option>
					<option value="6">Experience Details</option>
					<option value="7">Vendor Terms</option>
					<option value="8">Assessment</option>
					<option value="9">Vendor Registration</option>
					<option value="10">Resource</option>
					<option value="11">Financial</option>
					<option value="12">Supply</option>
                    <option value="13"  selected="selected" style="background-color:gray;color:white;">Work Group</option>
					<option value="14">Service</option>
					<option value="15">Other Details</option>
					<option value="16">Manufacture Details</option>
					<option value="17">Dealer Details</option>
					<option value="18">Distributor Details</option>
					<option value="19">Vehicle Details</option>
					<option value="20">Vendor Renewal</option>
					<option value="21">Vendor Profile</option>
				</select>
			</li>
			<li id="back" class="cancel_btn float_r" ><a href="<?php echo $this->basePath();?>/vendor/index/supply/<?php echo $this->bsf->encode($vendorId); ?>" class="ripple">back</a></li>
		</ul>
	</div>
</div>

<script>

    $("#dropdown").change(function(){
        if($(this).val() == 1){
            $(location).attr('href',"../basic-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 2){
            $(location).attr('href',"../contact-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 3){
            $(location).attr('href',"../statutory-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 4){
            $(location).attr('href',"../bankfinance-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 5){
            $(location).attr('href',"../branch/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 6){
            $(location).attr('href',"../experience-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 7){
            $(location).attr('href',"../vendor-terms/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 8){
            $(location).attr('href',"../assessment-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 9){
            $(location).attr('href',"../vendor-registration/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 10){
            $(location).attr('href',"../resource/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 11){
            $(location).attr('href',"../financial/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 12){
            $(location).attr('href',"../supply/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 13){
            $(location).attr('href',"../works/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 14){
            $(location).attr('href',"../service/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 15){
            $(location).attr('href',"../others/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 16){
            $(location).attr('href',"../manufacture-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 17){
            $(location).attr('href',"../dealer-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 18){
            $(location).attr('href',"../distributor-detail/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 19){
            $(location).attr('href',"../vehicleregister/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 20){
            $(location).attr('href',"../vendor-renewal/<?php echo $this->bsf->encode($vendorId); ?>");
        }
        if($(this).val() == 21){
            $(location).attr('href',"../vendor-profile/<?php echo $vendorId; ?>");
        }
    });
    $('.panel-heading').click(function(){
	$('.panel-heading').removeClass('accordion_head_crnt');
	if($(this).next('div.in'))
		$(this).addClass('accordion_head_crnt');
	else
		$(this).removeClass('accordion_head_crnt')
});
var cid = <?php echo  json_encode($Hidcid); ?>;
var cid1 = <?php echo  json_encode($Hidcid1); ?>;

function selectAll(el) {
    if($(el).hasClass('select')) {
        if($("#select_all").is(':checked') ) {
            $('input[id*=customize_]:not(:checked)').trigger('click');
        }else {
            $('input[id*=customize_]:checked').trigger('click');
        }
    } else {
        if($("#deselect_all").is(':checked') ) {
            $('input[id*=customize_]:not(:checked)').trigger('click');
        }else {
            $('input[id*=customize_]:checked').trigger('click');
        }
    }

}

    $(document).on('change','.sampleUI input:checkbox', function (){
        var current = $(this).closest('li');
        if (current.find("input:checkbox").is(':checked')) {
            var prependToDiv = $('#checkedUl');
            current.animate({
                top: -30,
                left: prependToDiv.offset().left
            }, 200, function () {
                current.prependTo(prependToDiv).css({
                    top: 'auto',
                    left: 'auto'
                });
            });
        }
        else {
            var prependToDiv = $('#unCheckedUl');
            current.animate({
                top: -30,
                left: -prependToDiv.offset().left

            }, 200, function () {
                current.prependTo(prependToDiv).css({
                    top: 'auto',
                    left: 'auto'
                });
            });
        }
    });

    $(document).on('change','.sampleUI1 input:checkbox', function (){
        var current = $(this).closest('li');
        if (current.find("input:checkbox").is(':checked')) {
            var prependToDiv = $('#checkedUl_1');
            current.animate({
                top: -30,
                left: prependToDiv.offset().left
            }, 200, function () {
                current.prependTo(prependToDiv).css({
                    top: 'auto',
                    left: 'auto'
                });
            });
        }
        else {
            var prependToDiv = $('#unCheckedUl_1');
            current.animate({
                top: -30,
                left: -prependToDiv.offset().left

            }, 200, function () {
                current.prependTo(prependToDiv).css({
                    top: 'auto',
                    left: 'auto'
                });
            });
        }
    });

    $("input:checkbox").click(function(){
   var wid = $(this).attr("cid");
   var aid = $(this).attr("cid1");
	if($(this).is(":checked")){
		if($(this).attr("tagname") == 'cid'){
			cid.push(wid);
			$(this).closest("li").addClass('check_vendor_background');
		}			
		else if($(this).attr("tagname") == 'cid1'){
			cid1.push(aid);
			$(this).closest("li").addClass('check_vendor_background');
		}		
	}
	else{		
		//cid.splice($.inArray($(this).attr("resurceid"), resourceId),1)
		if($(this).attr("tagname") == 'cid'){
			cid.splice($.inArray(wid, cid), 1);
			$(this).closest("li").removeClass('check_vendor_background');
		}			
		else if($(this).attr("tagname") == 'cid1'){
			cid1.splice($.inArray(aid, cid1), 1);
			$(this).closest("li").removeClass('check_vendor_background');
		}					
	}
});
//var inputs = new Array();
//
//$("input").each(function() {
//    var id = $(this).attr("id");
//  cid.push(id);
//        $(this).closest("li").addClass('check_vendor_background');
//    }
//});

$("#submitData").click(function(){
	$("#hidcid").val(cid);
    $("#hidcid1").val(cid1);
	$("form").submit();
});

    $("#sData").click(function(){
        $("#hidcid").val(cid);
        $("#hidcid1").val(cid1);
        var sum=2;
        $("#saveExit").val(sum);
        $("form").submit();
    });

    function nextAccordian(id) {
        $('#heading-' + id).trigger('click');
    }

    var worksResult=<?php echo (isset($ResultWG)) ? json_encode($ResultWG) : '[]';?>;
    var workslist='';
    workslist = worksResult;
    $("#searchwork").on('keyup', function () {
        var wn = '';
        var workgrp= $.trim($(this).val());
        if(workgrp.length != 0 && worksResult.length != 0) {
            var filtered_data = $.grep(worksResult, function (o) {
                return new RegExp('^.*'+workgrp+'.*$','gi').test(o.WorkGroupName);
            });
            $('#searchWorkgrp').html('');
            $.each(filtered_data, function(i,w){
                wn += '<ul class="sampleUI list ui-sortable" data-sortable="true"  id="unCheckedUl">' +
                '<li class="tile ui-sortable-handle_'+ w.Sel + '"> ' +
                '<div class="checkbox checkbox-styled tile-text vendor_checkboxborder_gray"> ' +
                '<label> ' +
                '<input type="checkbox" name="customize_' + w.WorkGroupId + '" id="customize_' + w.WorkGroupId + '"  tagname= "cid"  cid="' + w.WorkGroupId + ' value="' + w.WorkGroupId + '" '+((w.Sel == 1)? "checked": "")+' /> ' +
                '<span> '+w.WorkGroupName+' </span> ' +
                '</label> ' +
                '</div> ' +
                '</li> '  +
                '</ul>';
            });
            $('#searchWorkgrp').html(wn);
        }
        else if(workgrp.length==0 || workgrp==''){
            var worksname='';
            $.each(workslist, function(i,n){
                worksname += '<ul class="sampleUI list ui-sortable" data-sortable="true"  id="unCheckedUl">' +
                '<li class="tile ui-sortable-handle_'+ n.Sel + '"> ' +
                '<div class="checkbox checkbox-styled tile-text vendor_checkboxborder_gray"> ' +
                '<label> ' +
                '<input type="checkbox" name="customize_' + n.WorkGroupId + '" id="customize_' + n.WorkGroupId + '"  tagname= "cid"  cid="' + n.WorkGroupId + ' value="' + n.WorkGroupId + '" '+((n.Sel == 1)? "checked": "")+' /> ' +
                '<span> '+n.WorkGroupName+' </span> ' +
                '</label> ' +
                '</div> ' +
                '</li> '  +
                '</ul>';
            });
            $('#searchWorkgrp').html(worksname);
        }
    });

    var activityResult=<?php echo (isset($ResultAG)) ? json_encode($ResultAG) : '[]';?>;
    var activitylist='';
    activitylist = activityResult;
    $("#searchactivity").on('keyup', function () {
        var an = '';
        var actgrp= $.trim($(this).val());
        if(actgrp.length != 0 && activityResult.length != 0) {
            var filtered_data = $.grep(activityResult, function (o) {
                return new RegExp('^.*'+actgrp+'.*$','gi').test(o.ResourceGroupName);
            });
            $('#seractgrp').html('');
            $.each(filtered_data, function(i,a){
                an += '<ul class="sampleUI1 list ui-sortable" data-sortable="true"  id="unCheckedUl_1">' +
                '<li class="tile ui-sortable-handle_'+ a.Sel + '"> ' +
                '<div class="checkbox checkbox-styled tile-text vendor_checkboxborder_gray"> ' +
                '<label> ' +
                '<input type="checkbox" name="customize_' + a.ResourceGroupId + '" id="customize_' + a.ResourceGroupId + '"  tagname= "cid1"  cid1="' + a.ResourceGroupId + ' value="' + a.ResourceGroupId + '" '+((a.Sel == 1)? "checked": "")+' /> ' +
                '<span> '+a.ResourceGroupName+' </span> ' +
                '</label> ' +
                '</div> ' +
                '</li> '  +
                '</ul>';
            });
            $('#seractgrp').html(an);
        }
        else if(actgrp.length==0 || actgrp==''){
            var actsname='';
            $.each(activitylist, function(i,g){
                actsname += '<ul class="sampleUI1 list ui-sortable" data-sortable="true"  id="unCheckedUl_1">' +
                '<li class="tile ui-sortable-handle_'+ g.Sel + '"> ' +
                '<div class="checkbox checkbox-styled tile-text vendor_checkboxborder_gray"> ' +
                '<label> ' +
                '<input type="checkbox" name="customize_' + g.ResourceGroupId + '" id="customize_' + g.ResourceGroupId + '"  tagname= "cid1"  cid1="' + g.ResourceGroupId + ' value="' + g.ResourceGroupId + '" '+((g.Sel == 1)? "checked": "")+' /> ' +
                '<span> '+g.ResourceGroupName+' </span> ' +
                '</label> ' +
                '</div> ' +
                '</li> '  +
                '</ul>';
            });
            $('#seractgrp').html(actsname);
        }
    });


</script>
		