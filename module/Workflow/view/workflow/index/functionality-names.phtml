
<form  action="" method="post" role="form" id="functionality-names">
<div class="content_wrapper padlr0">
    <div class="container-fluid padlr0">
	<div class="col-lg-12">
        	<h1>Functional Names</h1>
        </div>
        <div class="col-lg-12 clear">
        	<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
			<?php if(isset($resultsfunctions)){ $i=1;?>
            	<div class="panel panel-default">
                    <div class="panel-heading accordion_head accordion_head_crnt" role="tab" data-toggle="collapse" id="heading1" data-parent="#accordion" href="#collapse1" aria-expanded="false" aria-controls="collapse1">
                        <h4>CRM</h4>
                    </div>
                    <div id="collapse1" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading1">
                        <div class="panel-body">
                         <tbody>
								<div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Functionality</th>
                                            <th>Display Name</th>
                                        </tr>
                                    </thead>
                                    <tbody>
									  <?php 
								           foreach($resultsfunctions as $funct){ 
										   if($funct['ModuleId']==8){?>
                                        <tr>
                                            <td id="fId_<?php echo $i; ?>"><?php echo $funct['FunctionName'];?></td>
                                            <td class="tbl_input_td"><input type="text" class="tbl_input" placeholder="Display Name" name="displayname_<?php echo $i; ?>" id="displayname_<?php echo $i; ?>" value="<?php echo $funct['DisplayName']; ?>"></td>
                                           <input type="hidden" name="functionname_<?php echo $i; ?>" id="functn_<?php echo $i; ?>" value="<?php echo $funct['FunctionName'];?>" />
                                         <input type="hidden" name="modulename_<?php echo $i; ?>" id="modulename_<?php echo $i; ?>" value="CRM" />
										 <input type="hidden" name="moduleId_<?php echo $i; ?>" id="moduleId_<?php echo $i; ?>" value="<?php echo $funct['ModuleId'];?>" />
                                          <input type="hidden" name="funtionId_<?php echo $i; ?>" id="funtionId_<?php echo $i; ?>" value="<?php echo $funct['FunctionId'];?>" />
									   </tr>
										   <?php $i++; }}?>
										
                                    </tbody>
                                </table>
                            </div>
                         </tbody>
                    </div>
                    </div>
        		</div>
                <div class="panel panel-default">
                    <div class="panel-heading accordion_head" role="tab" data-toggle="collapse" id="heading2" data-parent="#accordion" href="#collapse2" aria-expanded="false" aria-controls="collapse2">
                        <h4>HRM</h4>
                    </div>
                    <div id="collapse2" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading2">
                        <div class="panel-body">
                        HRM
                        </div>
                    </div>
        		</div>
                <div class="panel panel-default">
                    <div class="panel-heading accordion_head" role="tab" data-toggle="collapse" id="heading3" data-parent="#accordion" href="#collapse3" aria-expanded="false" aria-controls="collapse3">
                        <h4>FA</h4>
                    </div>
                    <div id="collapse3" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading3">
                        <div class="panel-body">
                        FA
                        </div>
                    </div>
        		</div>
                <div class="panel panel-default">
                    <div class="panel-heading accordion_head" role="tab" data-toggle="collapse" id="heading4" data-parent="#accordion" href="#collapse4" aria-expanded="true" aria-controls="collapse4">
                        <h4>Vendor Management</h4>
                    </div>
                    <div id="collapse4" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading4">
                        <div class="panel-body">
                            <tbody>
								<div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Functionality</th>
                                            <th>Display Name</th>
                                        </tr>
                                    </thead>
                                    <tbody>
									 <?php 
								           foreach($resultsfunctions as $vendr){ if($vendr['ModuleId']==2){?>
                                        <tr>
                                            <td id="fId"><?php echo $vendr['FunctionName'];?></td>
                                            <td class="tbl_input_td"><input type="text" class="tbl_input" placeholder="Display Name" name="displayname_<?php echo $i; ?>" id="displayname_<?php echo $i; ?>" value="<?php echo $vendr['DisplayName']; ?>"></td>
                                           <input type="hidden" name="functionname_<?php echo $i; ?>" id="functn_<?php echo $i; ?>" value="<?php echo $vendr['FunctionName'];?>" />
                                           <input type="hidden" name="moduleId_<?php echo $i; ?>" id="moduleId_<?php echo $i; ?>" value="<?php echo $vendr['ModuleId'];?>" />
                                           <input type="hidden" name="modulename_<?php echo $i; ?>" id="modulename_<?php echo $i; ?>" value="Vendor" />
                                          <input type="hidden" name="funtionId_<?php echo $i; ?>" id="funtionId_<?php echo $i; ?>" value="<?php echo $vendr['FunctionId'];?>" />
									   </tr>
										   <?php $i++; }}?>
									
                                    </tbody>
                                </table>
                            </div>
                         </tbody>
                        </div>
                    </div>
        		</div>
                <div class="panel panel-default">
                    <div class="panel-heading accordion_head" role="tab" data-toggle="collapse" id="heading5" data-parent="#accordion" href="#collapse5" aria-expanded="false" aria-controls="collapse5">
                        <h4>Projects</h4>
                    </div>
                    <div id="collapse5" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading5">
                        <div class="panel-body">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Functionality</th>
                                            <th>Display Name</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
				</div>
			<?php $i++; }?>
			</div>
			<input type="hidden" id="rowCount" name="rowCount" value="<?php echo count($resultsfunctions); ?>" />
        </div>
    </div>
</div> 
</form>
<div class="col-lg-12 savebtn_area clear">
	<ul>
        <li class="save_btn float_r">
            <a href="javascript:void(0);" class="ripple continue">Save</a>
        </li>
    </ul>
</div>

<script>

$('.continue').click(function(){
	var rowCount = $('#rowCount').val();
	for(i=1;i<=rowCount;i++) {
	var dp=$('#displayname_'+i).val();
	 var dpname=$('#modulename_'+i).val();
	 var funname=$('#functn_'+i).val();
	 if (dp == '') {
		$('#displayname_'+i).closest('.panel-collapse').addClass("in").height("");
		alert('Sorry,IN  ' + dpname + ', displayname is missing for '+funname+'!');
	     showError($('#displayname_'+i), 'displayname is required!');
		 $('#displayname_'+i).focus();
               return false;
            } else {
                removeError($('#displayname_'+i));
            }
    }
	 $("#functionality-names").submit();
	
	
})
</script>