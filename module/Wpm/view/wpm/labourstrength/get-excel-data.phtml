<?php
if(isset($exlArray['ContractorName']) && count($exlArray['ContractorName']) != 0) {
	$i = 1; $k = 0;
	foreach($exlArray['ContractorName'] as $exArr) {
		$conId = 'c'.$i;
?>
<tr id="rowId_<?php echo $i; ?>">
	<td width="25%">
		<input class="parent_text" type="text" name="conName_<?php echo $i; ?>" id="conName_<?php echo $i; ?>" onchange="return addConRow(this);" value="<?php echo $exArr; ?>" />
		<input type="hidden" name="conId_<?php echo $i; ?>" id="conId_<?php echo $i; ?>" value="" />
	</td>
	<td width="10%"><input class="parent_text" type="text" name="conQty_<?php echo $i; ?>" id="conQty_<?php echo $i; ?>" value="" readonly /></td>
	<td width="15%"><input class="parent_text" type="text" name="conAmount_<?php echo $i; ?>" id="conAmount_<?php echo $i; ?>" value="" readonly /></td>
	<td width="15%"><input class="parent_text" type="text" name="conOtHrs_<?php echo $i; ?>" id="conOtHrs_<?php echo $i; ?>" value="" readonly /></td>
	<td width="15%"><input class="parent_text" type="text" name="conOtAmount_<?php echo $i; ?>" id="conOtAmount_<?php echo $i; ?>" value="" readonly /></td>
	<td width="15%"><input class="parent_text" type="text" name="conNetAmount_<?php echo $i; ?>" id="conNetAmount_<?php echo $i; ?>" value="" readonly /></td>
	<td width="5%" align="center" class="action_btns_td">
		<ul class="action_btns">
			<li>
				<a id="showDivId_<?php echo $i; ?>" href="javascript:void(0);" class="mainTr" onclick="return showDiv(this, 'm', '');"><i class="fa fa-chevron-circle-down" data-toggle="tooltip" data-placement="left" data-original-title="Add lines"></i></a>
			</li>
			<li>
				<a href="#" class="conDelete_<?php echo $i; ?>" onclick="deleteCon(this, event);"><i class="fa fa-trash-o" data-toggle="tooltip" data-placement="top" data-original-title="Delete"></i></a>
			</li>
		</ul>
	</td>
</tr>
<tr id="subRowId_<?php echo $i; ?>" style="display:none;" class="subTr">
	<td colspan="7" style="padding:0px !important;">
		<div class="subDiv" style="display:none;">
			<div class="col-lg-12 col-lg-offset-0 rdbt" style="margin-top:5px;"></div>
			<div class="col-lg-12">
				<div class="table-responsive topsp">
					<table class="table" style="margin-bottom:0px;" id="wbsTable_<?php echo $i; ?>">
						<thead>
							<tr>
								<th>WBS Name</th>
								<th>Total Qty</th>
								<th>Amount</th>
								<th>OT Hrs</th>
								<th>OT Amount</th>
								<th>Net Amount</th>
								<th>&nbsp;</th>
							</tr>
						</thead>
						<tbody>
							<?php
							$j = 1;
							$wbsId = 'w'.$i;
							?>
							<tr id="subRowRowId_<?php echo $conId; ?>_<?php echo $j; ?>">
								<td width="25%">
									<input class="parent_text" type="text" name="wbsName_<?php echo $conId; ?>_<?php echo $j; ?>" id="wbsName_<?php echo $conId; ?>_<?php echo $j; ?>" onchange="return addWbsRow(this, '<?php echo $conId; ?>', '<?php echo $i; ?>', '<?php echo $j; ?>');" value="<?php if(isset($exlArray['WBSName'][$k])) { echo $exlArray['WBSName'][$k]; } ?>" />
									<input type="hidden" name="wbsId_<?php echo $conId; ?>_<?php echo $j; ?>" id="wbsId_<?php echo $conId; ?>_<?php echo $j; ?>" value="" />
								</td>
								<td width="10%"><input class="parent_text" type="text" name="wbsQty_<?php echo $conId; ?>_<?php echo $j; ?>" id="wbsQty_<?php echo $conId; ?>_<?php echo $j; ?>" value="" readonly /></td>
								<td width="15%"><input class="parent_text" type="text" name="wbsAmount_<?php echo $conId; ?>_<?php echo $j; ?>" id="wbsAmount_<?php echo $conId; ?>_<?php echo $j; ?>" value="" readonly /></td>
								<td width="14%"><input class="parent_text" type="text" name="wbsOtHrs_<?php echo $conId; ?>_<?php echo $j; ?>" id="wbsOtHrs_<?php echo $conId; ?>_<?php echo $j; ?>" value="" readonly /></td>
								<td width="15%"><input class="parent_text" type="text" name="wbsOtAmount_<?php echo $conId; ?>_<?php echo $j; ?>" id="wbsOtAmount_<?php echo $conId; ?>_<?php echo $j; ?>" value="" readonly /></td>
								<td width="15%"><input class="parent_text" type="text" name="wbsNetAmount_<?php echo $conId; ?>_<?php echo $j; ?>" id="wbsNetAmount_<?php echo $conId; ?>_<?php echo $j; ?>" value="" readonly /></td>
								<td width="6%" align="center" class="action_btns_td">
									<ul class="action_btns">
										<li>
											<a id="showDivSubId_<?php echo $conId; ?>_<?php echo $j; ?>" href="javascript:void(0);" class="mainTr" onclick="return showDiv(this, 's', '<?php echo $conId; ?>');"><i class="fa fa-chevron-circle-down" data-toggle="tooltip" data-placement="left" data-original-title="Add lines" ></i></a>
										</li>
										<li>
											<a href="#" class="wbsDelete_<?php echo $conId; ?>_<?php echo $j; ?>" onclick="deleteWbs(this, event, '<?php echo $conId; ?>', '<?php echo $i; ?>');"><i class="fa fa-trash-o" data-toggle="tooltip" data-placement="top" data-original-title="Delete"></i></a>
										</li>
									</ul>
								</td>
							</tr>
							<tr id="subRowSubRowId_<?php echo $conId; ?>_<?php echo $j; ?>" style="display:none;" class="subTr">
								<td colspan="7" style="padding:0px !important;">
									<div class="subDiv" style="display:none;">
										<div class="col-lg-12 col-lg-offset-0 rdbt" style="margin-top:5px;"></div>
										<div class="col-lg-12">
											<div class="table-responsive topsp">
												<table class="table" style="margin-bottom:0px;" id="labTable_<?php echo $conId; ?>_<?php echo $j; ?>">
													<thead>
														<tr>
															<th>Labour Type Name</th>
															<th>Qty</th>
															<th>Rate</th>
															<th>Amount</th>
															<th>OT Hrs</th>
															<th>OT Rate</th>
															<th>OT Amount</th>
															<th>Total Amount</th>
														</tr>
													</thead>
													<tbody>
														<?php $kk = 1; ?>
														<tr>
															<td width="15%"><input type="hidden" name="labId_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" id="labId_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" value="" /><input class="parent_text" type="text" name="labName_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" id="labName_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" value="<?php if(isset($exlArray['LabourType'][$k])) { echo $exlArray['LabourType'][$k]; } ?>" onchange="return addLabTypeRow(this, '<?php echo $conId; ?>', '<?php echo $wbsId; ?>', '<?php echo $i; ?>', '<?php echo $j; ?>');" readonly /></td>
															<td width="10%"><input class="parent_text" type="text" name="labQty_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" id="labQty_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" value="<?php if(isset($exlArray['Qty'][$k])) { echo $exlArray['Qty'][$k]; } ?>" onkeypress="return isDecimal(event,this);" onblur="return calSumAmount('<?php echo $conId; ?>', '<?php echo $wbsId; ?>', '<?php echo $j; ?>', '<?php echo $i; ?>', '<?php echo $kk; ?>');" /></td>
															<td width="10%"><input class="parent_text" type="text" name="labRate_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" id="labRate_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" value="<?php if(isset($exlArray['Rate'][$k])) { echo $exlArray['Rate'][$k]; } ?>" onkeypress="return isDecimal(event,this);" onblur="return calSumAmount('<?php echo $conId; ?>', '<?php echo $wbsId; ?>', '<?php echo $j; ?>', '<?php echo $i; ?>', '<?php echo $kk; ?>');" /></td>
															<td width="15%"><input class="parent_text" type="text" name="labAmount_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" id="labAmount_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" value="" readonly /></td>
															<td width="10%"><input class="parent_text" type="text" name="labOtHrs_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" id="labOtHrs_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" value="<?php if(isset($exlArray['OTHours'][$k])) { echo $exlArray['OTHours'][$k]; } ?>" onkeypress="return isDecimal(event,this);" onblur="return calSumAmount('<?php echo $conId; ?>', '<?php echo $wbsId; ?>', '<?php echo $j; ?>', '<?php echo $i; ?>', '<?php echo $kk; ?>');" /></td>
															<td width="10%"><input class="parent_text" type="text" name="labOtRate_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" id="labOtRate_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" value="<?php if(isset($exlArray['OTRate'][$k])) { echo $exlArray['OTRate'][$k]; } ?>" onkeypress="return isDecimal(event,this);" onblur="return calSumAmount('<?php echo $conId; ?>', '<?php echo $wbsId; ?>', '<?php echo $j; ?>', '<?php echo $i; ?>', '<?php echo $kk; ?>');" /></td>
															<td width="15%"><input class="parent_text" type="text" name="labOtAmount_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" id="labOtAmount_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" value="" readonly /></td>
															<td width="15%"><input class="parent_text" type="text" name="labNetAmount_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" id="labNetAmount_<?php echo $conId; ?>_<?php echo $wbsId; ?>_<?php echo $j; ?>_<?php echo $kk; ?>" value="" readonly /></td>
														</tr>
													</tbody>
												</table>
                                                <input type="hidden" name="labRows_<?php echo $conId; ?>_<?php echo $j; ?>" id="labRows_<?php echo $conId; ?>_<?php echo $j; ?>" value="<?php echo $kk; ?>" />
											</div>
										</div>
									</div>
								</td>
							</tr>
							<?php $j++; ?>
							<tr id="subRowRowId_<?php echo $conId; ?>_<?php echo $j; ?>">
								<td width="25%">
									<input class="parent_text" type="text" name="wbsName_<?php echo $conId; ?>_<?php echo $j; ?>" id="wbsName_<?php echo $conId; ?>_<?php echo $j; ?>" onchange="return addWbsRow(this, '<?php echo $conId; ?>', '<?php echo $i; ?>', '<?php echo $j; ?>');" />
									<input type="hidden" name="wbsId_<?php echo $conId; ?>_<?php echo $j; ?>" id="wbsId_<?php echo $conId; ?>_<?php echo $j; ?>" />
                                    <input type="hidden" name="labRows_<?php echo $conId; ?>_<?php echo $j; ?>" id="labRows_<?php echo $conId; ?>_<?php echo $j; ?>" value="1" />
								</td>
								<td width="10%"><input class="parent_text" type="text" name="wbsQty_<?php echo $conId; ?>_<?php echo $j; ?>" id="wbsQty_<?php echo $conId; ?>_<?php echo $j; ?>" readonly /></td>
								<td width="15%"><input class="parent_text" type="text" name="wbsAmount_<?php echo $conId; ?>_<?php echo $j; ?>" id="wbsAmount_<?php echo $conId; ?>_<?php echo $j; ?>" readonly /></td>
								<td width="14%"><input class="parent_text" type="text" name="wbsOtHrs_<?php echo $conId; ?>_<?php echo $j; ?>" id="wbsOtHrs_<?php echo $conId; ?>_<?php echo $j; ?>" readonly /></td>
								<td width="15%"><input class="parent_text" type="text" name="wbsOtAmount_<?php echo $conId; ?>_<?php echo $j; ?>" id="wbsOtAmount_<?php echo $conId; ?>_<?php echo $j; ?>" readonly /></td>
								<td width="15%"><input class="parent_text" type="text" name="wbsNetAmount_<?php echo $conId; ?>_<?php echo $j; ?>" id="wbsNetAmount_<?php echo $conId; ?>_<?php echo $j; ?>" readonly /></td>
								<td width="6%" align="center" class="action_btns_td">
									<ul class="action_btns">
										<li>
											<a id="showDivSubId_<?php echo $conId; ?>_<?php echo $j; ?>" href="javascript:void(0);" class="mainTr" onclick="return showDiv(this, 's', '<?php echo $conId; ?>');" style="display:none;"><i class="fa fa-chevron-circle-down" data-toggle="tooltip" data-placement="left" data-original-title="Add lines" ></i></a>
										</li>
										<li>
											<a href="#" class="wbsDelete_<?php echo $conId; ?>_<?php echo $j; ?>" onclick="deleteWbs(this, event, '<?php echo $conId; ?>', '<?php echo $i; ?>');" style="display:none;"><i class="fa fa-trash-o" data-toggle="tooltip" data-placement="top" data-original-title="Delete"></i></a>
										</li>
									</ul>
								</td>
							</tr>
							<tr id="subRowSubRowId_<?php echo $conId; ?>_<?php echo $j; ?>" style="display:none;" class="subTr">
								<td colspan="7" style="padding:0px !important;">
									<div class="subDiv" style="display:none;">
										<div class="col-lg-12 col-lg-offset-0 rdbt" style="margin-top:5px;"></div>
										<div class="col-lg-12">
											<div class="table-responsive topsp">
												<table class="table" style="margin-bottom:0px;" id="labTable_<?php echo $conId; ?>_<?php echo $j; ?>">
													<thead>
														<tr>
															<th>Labour Type Name</th>
															<th>Qty</th>
															<th>Rate</th>
															<th>Amount</th>
															<th>OT Hrs</th>
															<th>OT Rate</th>
															<th>OT Amount</th>
															<th>Total Amount</th>
														</tr>
													</thead>
													<tbody>
													</tbody>
												</table>
											</div>
										</div>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
					<input type="hidden" name="wbsRows_<?php echo $i; ?>" id="wbsRows_<?php echo $i; ?>" value="<?php echo $j; ?>" />
				</div>
			</div>
		</div>
	</td>
</tr>
<?php
		$i++; $k++;
	}
	echo '##%&&%##'.$k.'##%&&%##con';
} else if(isset($exlArray['LabourName']) && count($exlArray['LabourName']) != 0) {
	$i = 1; $j = 0;
	foreach($exlArray['LabourName'] as $exArr) {
?>
<tr id="labRowId_<?php echo $i; ?>">
	<td width="14%">
		<input class="parent_text labSuggest" type="text" name="labConName_<?php echo $i; ?>" id="labConName_<?php echo $i; ?>" value="<?php echo $exArr; ?>" onfocus="return checkLabUsed(this);" onchange="return addLabConRow(this);" />
		<input type="hidden" name="labConId_<?php echo $i; ?>" id="labConId_<?php echo $i; ?>" value="" />
		<input type="hidden" name="labConDate_<?php echo $i; ?>" id="labConDate_<?php echo $i; ?>" value="<?php if(isset($exlArray['Date'][$j]) && $exlArray['Date'][$j] != '') { echo date("d/m/Y", strtotime($exlArray['Date'][$j])); } else { echo date("d/m/Y"); } ?>" />
	</td>
	<td width="14%" class="hideWbs">
		<input class="parent_text" type="text" name="labWbsName_<?php echo $i; ?>" id="labWbsName_<?php echo $i; ?>" value="<?php if(isset($exlArray['WBSName'][$j])) { echo $exlArray['WBSName'][$j]; } ?>" />
		<input type="hidden" name="labWbsId_<?php echo $i; ?>" id="labWbsId_<?php echo $i; ?>" value="" />
	</td>
	<td width="8%"><input class="parent_text time_picker" type="text" name="labConInTime_<?php echo $i; ?>" id="labConInTime_<?php echo $i; ?>" value="<?php if(isset($exlArray['InTime'][$j]) && $exlArray['InTime'][$j] != '') { echo date('h:i a', strtotime($exlArray['InTime'][$j])); } ?>" onblur="return calInOutTime('roId_<?php echo $i; ?>');" /></td>
	<td width="8%"><input class="parent_text time_picker" type="text" name="labConOutTime_<?php echo $i; ?>" id="labConOutTime_<?php echo $i; ?>" value="<?php if(isset($exlArray['OutTime'][$j]) && $exlArray['OutTime'][$j] != '') { echo date('h:i a', strtotime($exlArray['OutTime'][$j])); } ?>" onblur="return calInOutTime('roId_<?php echo $i; ?>');" /></td>
	<td width="7%"><input class="parent_text" type="text" name="labConQty_<?php echo $i; ?>" id="labConQty_<?php echo $i; ?>" value="<?php if(isset($exlArray['Day'][$j])) { echo $exlArray['Day'][$j]; } ?>" onblur="return calLabSumAmount('roId_<?php echo $i; ?>');" readonly /></td>
	<td width="8%"><input class="parent_text" type="text" name="labConRate_<?php echo $i; ?>" id="labConRate_<?php echo $i; ?>" value="" onkeypress="return isDecimal(event,this);" onblur="return calLabSumAmount('roId_<?php echo $i; ?>');" /></td>
	<td width="8%"><input class="parent_text" type="text" name="labConAmount_<?php echo $i; ?>" id="labConAmount_<?php echo $i; ?>" value="" onblur="return calLabSumAmount('roId_<?php echo $i; ?>');" readonly /></td>
	<td width="8%"><input class="parent_text" type="text" name="labConOtHrs_<?php echo $i; ?>" id="labConOtHrs_<?php echo $i; ?>" value="<?php if(isset($exlArray['Hours'][$j])) { echo $exlArray['Hours'][$j]; } ?>" onblur="return calLabSumAmount('roId_<?php echo $i; ?>');" readonly /></td>
	<td width="7%"><input class="parent_text" type="text" name="labConOtRate_<?php echo $i; ?>" id="labConOtRate_<?php echo $i; ?>" value="" onkeypress="return isDecimal(event,this);" onblur="return calLabSumAmount('roId_<?php echo $i; ?>');" /></td>
	<td width="8%"><input class="parent_text" type="text" name="labConOtAmount_<?php echo $i; ?>" id="labConOtAmount_<?php echo $i; ?>" value="" readonly /></td>
	<td width="8%"><input class="parent_text" type="text" name="labConNetAmount_<?php echo $i; ?>" id="labConNetAmount_<?php echo $i; ?>" value="" readonly /></td>
	<td width="2%" align="center" class="action_btns_td">
		<ul class="action_btns">
			<li>
				<a href="#" class="labConDelete_<?php echo $i; ?>" onclick="deleteLabCon(this, event);"><i class="fa fa-trash-o" data-toggle="tooltip" data-placement="top" data-original-title="Delete"></i></a>
			</li>
		</ul>
	</td>
</tr>
<?php
		$i++; $j++;
	}
	echo '##%&&%##'.$j.'##%&&%##lab';
}
?>