<style>
    .border-ne td{border:none !important}
</style>
<div class="table-responsive topsp">
    <table class="table" style=" margin-bottom:0px;" id="sample12">
        <thead>
        <tr>
            <th width="20%">Description</th>
            <th width="20%">Unit</th>
            <th width="20%"class="text-right">Qty</th>
            <th width="20%"class="text-right">Rate</th>
            <th width="20%"class="text-right">Amount</th>
            <th width="5%"></th>
        </tr>
        </thead>
        <tbody>
        <?php foreach($woTrans as $woTran){?>
            <tr class="qualTr">
                <td width="20%"><input type="text" class="parent_text" value="<?php echo $woTran['ResourceName'];?>" readonly></td>
                <td width="20%"><input type="text" class="parent_text" value="<?php echo $woTran['UnitName'];?>" readonly></td>
                <td width="20%"><input type="text" class="parent_text text-right" value="<?php echo $this->commonHelper()->sanitizeNumber($woTran['Qty'],3);?>" readonly></td>
                <td width="20%"><input type="text" class="parent_text text-right" value="<?php echo $this->commonHelper()->sanitizeNumber($woTran['Rate'],2,true);?>" readonly></td>
                <td width="20%"><input type="text" class="parent_text text-right" value="<?php echo $this->commonHelper()->sanitizeNumber($woTran['Amount'],2,true);?>" readonly></td>
                <td style="border-right:none;border-top:none;">
                    <ul class="action_btns">
                        <li>
                            <a href="#" class="triggerClass">
                                <span data-original-title="Expand" data-placement="left" data-toggle="tooltip"><i class="fa fa-chevron-circle-down"></i></span>
                            </a>
                        </li>
                    </ul>
                </td>
            </tr>
            <tr style="display:none;" class="womainTr">
                <td colspan="6" style="padding:0px !important; ">
                    <div class="table-responsive topsp" id="WO" style="display: none">
                        <table class="table" style=" margin-bottom:0px;" id="sample12">
                            <thead>
                            <tr>
                                <?php if($WOType == 'iow'){
                                    $typeHide='display:none';
                                } ?>
                                <th style="<?php echo $typeHide;?>">Agt No</th>
                                <th style="<?php echo $typeHide;?>">Specification</th>
                                <th>WBS</th>
                                <th class="text-right">Qty</th>
                                <th class="text-right">Rate</th>
                                <th class="text-right">Amount</th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody>
                            <?php foreach($arr_resource_iows as $arr_resource_iow){
                                if($woTran['WOTransId']==$arr_resource_iow['WOTransId']){?>

                                <tr>
                                    <td style="<?php echo $typeHide;?>"><input class="parent_text" type="text"  value="<?php echo $arr_resource_iow['RefSerialNo'];?>" readonly/></td>
                                    <td style="<?php echo $typeHide;?>"><input class="parent_text" type="text"  value="<?php echo $arr_resource_iow['Specification'];?>" readonly/></td>
                                    <td><input class="parent_text" type="text"  value="<?php echo $arr_resource_iow['WBSName'];?>" readonly/></td>
                                    <td><input class="parent_text text-right" type="text"  value="<?php echo $arr_resource_iow['Qty'];?>" readonly/></td>
                                    <td><input class="parent_text text-right" type="text"  value="<?php echo $arr_resource_iow['Rate'];?>" readonly/></td>
                                    <td><input class="parent_text text-right" type="text"  value="<?php echo $arr_resource_iow['Amount'];?>" readonly/></td>
                                </tr>
                            <?php }}?>
                            </tbody>
<!--                            <tr>-->
<!--                                <td width="">&nbsp;</td>-->
<!--                                <td width="">&nbsp;</td>-->
<!--                                <td width="">&nbsp;</td>-->
<!--                                <td width="">&nbsp;</td>-->
<!--                                <td width="">&nbsp;</td>-->
<!--                                <td width="">&nbsp;</td>-->
<!--                                <td width="20%" ><input type="text" class="parent_text text-right total-clr" value="--><?php //echo $this->commonHelper()->sanitizeNumber($hoRegister['QualifiedAmount'],2,true);?><!--" readonly></td>-->
<!--                            </tr>-->
                        </table>
                    </div>
                </td>
            </tr>
        <?php }?>
        </tbody>
        <tr>
            <td width="">&nbsp;</td>
            <td width="">&nbsp;</td>
            <td width="">&nbsp;</td>
            <td width="">Base Amount</td>
            <td width="20%" ><input type="text" class="parent_text text-right total-clr" value="<?php echo $this->commonHelper()->sanitizeNumber($hoRegister['Amount'],2,true);?>" readonly></td>
            <td></td>
        </tr>
        <tr class="border-ne">
            <td width="">&nbsp;</td>
            <td width="">&nbsp;</td>
            <td width="">&nbsp;</td>
            <td width="">Qualifier Amount</td>
            <td width="20%" ><input type="text" class="parent_text text-right total-clr qualTr" value="<?php echo $this->commonHelper()->sanitizeNumber($hoRegister['QualifiedAmount'],2,true);?>" readonly></td>
            <td style="border-right:none;border-top:none;">
                <ul class="action_btns">
                    <li>
                        <a href="#" class="qualTr">
                            <span data-original-title="Expand" data-placement="left" data-toggle="tooltip"><i class="fa fa-chevron-circle-down"></i></span>
                        </a>
                    </li>
                </ul>
            </td>
        </tr>
        <tr style="display:none;" class="qualmainTr">
            <td colspan="6" style="padding:0px !important; ">
                <div class="table-responsive topsp" id="qualifier" style="display: none">
                    <table class="table" style=" margin-bottom:0px;" id="sample12">
                        <thead>
                        <tr>
                            <th width="5%"></th>
                            <th width="5%">Ref No</th>
                            <th width="18%">Description</th>
                            <th width="18%">Expression</th>
                            <th width="18%"class="text-right">Base Value</th>
                            <th width="18%">Percentage</th>
                            <th width="18%"class="text-right">Amount</th>
                            <th width="3%"></th>
                        </tr>
                        </thead>
                        <tbody>
                        <?php foreach($qualLists as $qualList){?>
                            <tr>
                                <td width="5%"><label>
                                        <input type="checkbox" class="ios_checkbox qualmainTrInput YesNo" <?php if($qualList['YesNo']==1){ echo "checked";} ?> />
                                        <div class="ios_switch"><span></span></div>
                                    </label></td>
                                <td width="5%"><input class="parent_text red-non qualmainTrInput" type="text"  value="<?php echo $qualList['RefId'];?>" readonly/></td>
                                <td width="18%"><input class="parent_text red-non qualmainTrInput" type="text"  value="<?php echo $qualList['QualifierName'];?>" readonly/></td>
                                <td width="18%"><input class="parent_text qualmainTrInput qualChange" type="text" value="<?php echo $qualList['Expression'];?>" readonly/></td>
                                <td width="18%"><input class="parent_padi05 text-right qualmainTrInput base" type="text"  value="<?php echo $this->commonHelper()->sanitizeNumber($qualList['ExpressionAmt'],2,true);?>" readonly /></td>
                                <td width="18%"><input class="parent_text text-right qualmainTrInput qualChange" type="text"  value="<?php echo $qualList['ExpPer'];?>" readonly/></td>
                                <td width="18%" style="position:relative;"><input class="parent_padi05 text-right qualmainTrInput signCh" type="text"  value="<?php echo $this->commonHelper()->sanitizeNumber($qualList['NetAmt'],2,true);?>" readonly/>
                                    <?php if($qualList['Sign'] == "-"){?>
                                        <span class="pl-mi">
                                        <i class="fa fa-minus clr-red">
                                        </i>
                                    </span>
                                    <?php } else {?>
                                        <span class="pl-mi">
                                        <i class="fa fa-plus clr-gre">
                                        </i>
                                    </span>
                                    <?php } ?>
                                </td>
                                <td></td>
                            </tr>
                        <?php }?>
                        </tbody>
                        <tr>
                            <td width="">&nbsp;</td>
                            <td width="">&nbsp;</td>
                            <td width="">&nbsp;</td>
                            <td width="">&nbsp;</td>
                            <td width="">&nbsp;</td>
                            <td width="">&nbsp;</td>
                            <td width="20%" ><input type="text" class="parent_text text-right total-clr" value="<?php echo $this->commonHelper()->sanitizeNumber($hoRegister['QualifiedAmount'],2,true);?>" readonly></td>
                        </tr>
                    </table>
                </div>
            </td>
        </tr>
        <tr class="border-ne">
            <td width="">&nbsp;</td>
            <td width="">&nbsp;</td>
            <td width="">&nbsp;</td>
            <td width="">Net Amount</td>
            <td width="20%" ><input type="text" class="parent_text text-right total-clr" value="<?php echo $this->commonHelper()->sanitizeNumber($hoRegister['NetAmount'],2,true);?>" readonly></td>
        </tr>
    </table>
</div>
<script>
    var qualLists=<?php echo (isset($qualLists)) ? json_encode($qualLists) : '[]';?>;

    $(function(){
        var $subTr1 = $(".qualTr");
        $subTr1.unbind('click');
        $subTr1.click(function (e) {
            e.preventDefault();
            if (!$(this).closest("tr").next(".qualmainTr").is(":visible")) {
                $(this).closest("tr").next(".qualmainTr").show();
                $(this).closest("tr").next(".qualmainTr").find("#qualifier").slideDown("slow");
            }
            else {
                $(this).closest("tr").next(".qualmainTr").find("#qualifier").slideUp("slow");
                $(this).closest("tr").next(".qualmainTr").slideUp("slow");
            }
            if (!$(this).closest("tr").next(".womainTr").is(":visible")) {
                $(this).closest("tr").next(".womainTr").show();
                $(this).closest("tr").next(".womainTr").find("#WO").slideDown("slow");
            }
            else {
                $(this).closest("tr").next(".womainTr").find("#WO").slideUp("slow");
                $(this).closest("tr").next(".womainTr").slideUp("slow");
            }
        });
        $subTr1.trigger('click');
    });
    if(qualLists.length !=0){
        $('.YesNo').attr('disabled','disabled');
        $.each(qualLists,function(i,o){
        })
    }
</script>